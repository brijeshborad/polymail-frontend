{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/worker/sync/ContactGroupSync.ts","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/worker/sync/ContactGroupSync.ts","mtime":1675280254125},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCB7IFN0b3JlcyB9IGZyb20gJ0BzcmMvbGliL2RiJzsKaW1wb3J0IHsgQ29udGFjdEdyb3VwQ2xpZW50IH0gZnJvbSAnQHNyYy9hcGkvY29udGFjdEdyb3Vwcyc7CmltcG9ydCB7IEFQSVN5bmMgfSBmcm9tICcuL0FQSVN5bmMnOwp2YXIgQ29udGFjdEdyb3VwU3luYyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhDb250YWN0R3JvdXBTeW5jLCBfc3VwZXIpOwogICAgLy8gLSBhcHAgYnJpZGdlIGludGVyZmFjZQogICAgZnVuY3Rpb24gQ29udGFjdEdyb3VwU3luYyh0ZWFtLCBhcGkpIHsKICAgICAgICBpZiAoYXBpID09PSB2b2lkIDApIHsgYXBpID0gbmV3IENvbnRhY3RHcm91cENsaWVudCgpOyB9CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICBpZiAodGVhbSAmJiB0ZWFtICE9PSAnJykgewogICAgICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdDb250YWN0R3JvdXBTeW5jLScgKyB0ZWFtLCBTdG9yZXMuQ29udGFjdEdyb3VwcywgZmFsc2UpIHx8IHRoaXM7CiAgICAgICAgICAgIF90aGlzLnRlYW0gPSB0ZWFtOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCAnQ29udGFjdEdyb3VwU3luYycsIFN0b3Jlcy5Db250YWN0R3JvdXBzLCBmYWxzZSkgfHwgdGhpczsKICAgICAgICB9CiAgICAgICAgX3RoaXMuYXBpID0gYXBpOwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIENvbnRhY3RHcm91cFN5bmMucHJvdG90eXBlLmZldGNoTmV4dFBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMudGVhbSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5hcGkubGlzdEJ5VGVhbSh0aGlzLnRlYW0sIHRoaXMub2Zmc2V0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuYXBpLmxpc3QodGhpcy5vZmZzZXQpOwogICAgfTsKICAgIENvbnRhY3RHcm91cFN5bmMucHJvdG90eXBlLm5leHRQYWdlT2Zmc2V0ID0gZnVuY3Rpb24gKG1vZGVscykgewogICAgICAgIHJldHVybiBtb2RlbHNbbW9kZWxzLmxlbmd0aCAtIDFdLmlkOwogICAgfTsKICAgIHJldHVybiBDb250YWN0R3JvdXBTeW5jOwp9KEFQSVN5bmMpKTsKZXhwb3J0IHsgQ29udGFjdEdyb3VwU3luYyB9OwpleHBvcnQgZGVmYXVsdCBDb250YWN0R3JvdXBTeW5jOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/worker/sync/ContactGroupSync.ts","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/worker/sync/ContactGroupSync.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;AAErC,OAAO,EAAmB,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAE7E,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAC;AAEpC;IAAsC,oCAAqB;IAMzD,yBAAyB;IAEzB,0BACE,IAAa,EACb,GAA+C;QAA/C,oBAAA,EAAA,UAA2B,kBAAkB,EAAE;QAFjD,iBAWC;QAPC,IAAI,IAAI,IAAI,IAAI,KAAK,EAAE,EAAE;YACvB,QAAA,kBAAM,mBAAmB,GAAG,IAAI,EAAE,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC,SAAC;YAC/D,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SAClB;aAAM;YACL,QAAA,kBAAM,kBAAkB,EAAE,MAAM,CAAC,aAAa,EAAE,KAAK,CAAC,SAAC;SACxD;QACD,KAAI,CAAC,GAAG,GAAG,GAAG,CAAC;;IACjB,CAAC;IAES,wCAAa,GAAvB;QACE,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,OAAO,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;SACpD;QACD,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACpC,CAAC;IAES,yCAAc,GAAxB,UAAyB,MAAsB;QAC7C,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;IACtC,CAAC;IACH,uBAAC;AAAD,CAAC,AA/BD,CAAsC,OAAO,GA+B5C;;AAED,eAAe,gBAAgB,CAAC","sourcesContent":["import { Stores } from '@src/lib/db';\nimport { ContactGroup } from '@src/types';\nimport { ContactGroupAPI, ContactGroupClient } from '@src/api/contactGroups';\nimport { Observable } from 'rxjs';\nimport { APISync } from './APISync';\n\nexport class ContactGroupSync extends APISync<ContactGroup> {\n\n  // State\n\n  // Dependencies\n  private api: ContactGroupAPI;\n  // - app bridge interface\n\n  constructor(\n    team?: string,\n    api: ContactGroupAPI = new ContactGroupClient(),\n  ) {\n    if (team && team !== '') {\n      super('ContactGroupSync-' + team, Stores.ContactGroups, false);\n      this.team = team;\n    } else {\n      super('ContactGroupSync', Stores.ContactGroups, false);\n    }\n    this.api = api;\n  }\n\n  protected fetchNextPage(): Observable<ContactGroup[]> {\n    if (this.team) {\n      return this.api.listByTeam(this.team, this.offset);\n    }\n    return this.api.list(this.offset);\n  }\n\n  protected nextPageOffset(models: ContactGroup[]): string {\n    return models[models.length - 1].id;\n  }\n}\n\nexport default ContactGroupSync;\n"]}]}