{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/SyncIndicator/SyncIndicator.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/SyncIndicator/SyncIndicator.tsx","mtime":1675280254022},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgJy4vU3luY0luZGljYXRvci5zY3NzJzsKaW1wb3J0IHsgUG9seW1haWxTdGF0dXNUeXBlIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCBQb3BvdmVyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Qb3BvdmVyL1BvcG92ZXInOwppbXBvcnQgeyBUcmFuc2l0aW9uLCBhbmltYXRlZCwgY29uZmlnIH0gZnJvbSAncmVhY3Qtc3ByaW5nJzsKaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBTdGF0dXNQYWdlVHlwZSB9IGZyb20gJ0BzcmMvYXBpL2FwcCc7CnZhciBTeW5jSW5kaWNhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFN5bmNJbmRpY2F0b3IsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTeW5jSW5kaWNhdG9yKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZVBvcG92ZXJSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLnBvcG92ZXIgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICAoX2EgPSBfdGhpcy5wb3BvdmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudG9nZ2xlKCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVIb3ZlciA9IGZ1bmN0aW9uIChob3ZlcmVkKSB7CiAgICAgICAgICAgIHZhciBfYSwgX2I7CiAgICAgICAgICAgIGlmIChob3ZlcmVkKSB7CiAgICAgICAgICAgICAgICAoX2EgPSBfdGhpcy5wb3BvdmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2hvdygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgKF9iID0gX3RoaXMucG9wb3ZlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmhpZGUoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaXNTZXJ2aWNlRGVncmFkZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzdGF0dXMgPSBfdGhpcy5wcm9wcy5zdGF0dXM7CiAgICAgICAgICAgIHJldHVybiAoc3RhdHVzID09PSBudWxsIHx8IHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3RhdHVzLnN0YXR1c1BhZ2UpICYmIHN0YXR1cy5zdGF0dXNQYWdlLnN0YXR1cyAhPT0gU3RhdHVzUGFnZVR5cGUuT3BlcmF0aW9uYWwgfHwgZmFsc2U7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJUaXRsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHN0YXR1cyA9IF9hLnN0YXR1cywgb2ZmbGluZSA9IF9hLm9mZmxpbmUsIGRpc2FibGVkID0gX2EuZGlzYWJsZWQ7CiAgICAgICAgICAgIGlmIChvZmZsaW5lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ09mZmxpbmUnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChkaXNhYmxlZCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdTeW5jIGRpc2FibGVkJzsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBJZGVudGlmaWVzIGFueSBzdGF0dXMgcGFnZSBpc3N1ZXMKICAgICAgICAgICAgdmFyIGRlZ3JhZGVkUGVyZm9ybWFuY2UgPSBfdGhpcy5pc1NlcnZpY2VEZWdyYWRlZCgpOwogICAgICAgICAgICBpZiAoZGVncmFkZWRQZXJmb3JtYW5jZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICdEZWdyYWRlZCBTZXJ2aWNlJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBzd2l0Y2ggKHN0YXR1cyA9PT0gbnVsbCB8fCBzdGF0dXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0YXR1cy5zdGF0dXNUeXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlIFBvbHltYWlsU3RhdHVzVHlwZS5PbmxpbmU6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdBbGwgY2hhbmdlcyBzeW5jZWQnOwogICAgICAgICAgICAgICAgY2FzZSBQb2x5bWFpbFN0YXR1c1R5cGUuU3luY2luZzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1N5bmNpbmcgY2hhbmdlcyc7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTW91c2VPdmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5oYW5kbGVIb3ZlckRlYm91bmNlZC5jYW5jZWwoKTsKICAgICAgICAgICAgX3RoaXMuaGFuZGxlSG92ZXJEZWJvdW5jZWQodHJ1ZSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVQb3BvdmVyRW50ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmhhbmRsZUhvdmVyRGVib3VuY2VkLmNhbmNlbCgpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuaGFuZGxlSG92ZXJEZWJvdW5jZWQoZmFsc2UpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRGVncmFkZWRQZXJmb3JtYW5jZUNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9zdGF0dXMucG9seW1haWwuaW8vJywgJ19ibGFuaycpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyQ2hhbmdlcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHN0YXR1cyA9IF9hLnN0YXR1cywgb2ZmbGluZSA9IF9hLm9mZmxpbmUsIGRpc2FibGVkID0gX2EuZGlzYWJsZWQ7CiAgICAgICAgICAgIGlmIChkaXNhYmxlZCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdTb21lIHBlbmRpbmcgY2hhbmdlcyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFzdGF0dXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0dXMuY29tbWl0c1JlbWFpbmluZyA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdBbGwgY2hhbmdlcyBzeW5jZWQnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjaGFuZ2VDb3B5ID0gc3RhdHVzLmNvbW1pdHNSZW1haW5pbmcgPiAwCiAgICAgICAgICAgICAgICA/ICdjaGFuZ2VzJwogICAgICAgICAgICAgICAgOiAnY2hhbmdlJzsKICAgICAgICAgICAgaWYgKG9mZmxpbmUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYiIsIG51bGwsIHN0YXR1cy5jb21taXRzUmVtYWluaW5nKSwKICAgICAgICAgICAgICAgICAgICAiICIsCiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQ29weSwKICAgICAgICAgICAgICAgICAgICAiIHdpbGwgYmUgc3luY2VkIikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzID09PSBudWxsIHx8IHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3RhdHVzLnN0YXR1c1R5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgUG9seW1haWxTdGF0dXNUeXBlLk9ubGluZToKICAgICAgICAgICAgICAgIGNhc2UgUG9seW1haWxTdGF0dXNUeXBlLlN5bmNpbmc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYiIsIG51bGwsIHN0YXR1cy5jb21taXRzUmVtYWluaW5nKSwKICAgICAgICAgICAgICAgICAgICAgICAgIiAiLAogICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VDb3B5LAogICAgICAgICAgICAgICAgICAgICAgICAiIHJlbWFpbmluZyIpKTsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJDdXJyZW50U3RhdHVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgc3RhdHVzID0gX2Euc3RhdHVzLCBvZmZsaW5lID0gX2Eub2ZmbGluZSwgZGlzYWJsZWQgPSBfYS5kaXNhYmxlZDsKICAgICAgICAgICAgaWYgKCFzdGF0dXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIElkZW50aWZpZXMgYW55IHN0YXR1cyBwYWdlIGlzc3VlCiAgICAgICAgICAgIHZhciBzdGF0dXNFbGVtZW50ID0gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLAogICAgICAgICAgICAgICAgIlBvbHltYWlsIGlzICIsCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiIiwgbnVsbCwgIm9ubGluZSIpKSk7CiAgICAgICAgICAgIGlmICgoUG9seW1haWxTdGF0dXNUeXBlLlN5bmNpbmcgfHwgUG9seW1haWxTdGF0dXNUeXBlLk9ubGluZSkgJiYgZGlzYWJsZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjdXJyZW50LXN0YXR1cyIgfSwgc3RhdHVzRWxlbWVudCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzID09PSBudWxsIHx8IHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3RhdHVzLnN0YXR1c1R5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgUG9seW1haWxTdGF0dXNUeXBlLlN5bmNpbmc6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzRWxlbWVudCA9IChSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgIlBvbHltYWlsIGlzICIsCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImIiLCBudWxsLCAib25saW5lIikpKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgUG9seW1haWxTdGF0dXNUeXBlLk9ubGluZToKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzRWxlbWVudCA9IChSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgIlBvbHltYWlsIGlzICIsCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImIiLCBudWxsLCAic3luY2luZyIpKSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG9mZmxpbmUpIHsKICAgICAgICAgICAgICAgIHN0YXR1c0VsZW1lbnQgPSAoUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsCiAgICAgICAgICAgICAgICAgICAgIlBvbHltYWlsIGlzICIsCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYiIsIG51bGwsICJvZmZsaW5lIikpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY3VycmVudC1zdGF0dXMiIH0sIHN0YXR1c0VsZW1lbnQpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlckRlZ3JhZGVkUGVyZm9ybWFuY2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBkZWdyYWRlZFBlcmZvcm1hbmNlID0gX3RoaXMuaXNTZXJ2aWNlRGVncmFkZWQoKTsKICAgICAgICAgICAgaWYgKCFkZWdyYWRlZFBlcmZvcm1hbmNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic3RhdHVzLXBhZ2UtZXJyb3IiLCBvbkNsaWNrOiBfdGhpcy5oYW5kbGVEZWdyYWRlZFBlcmZvcm1hbmNlQ2xpY2sgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdpY29uJywgJ2Vycm9yJykgfSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNvcHkiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYiIsIG51bGwsICJEZWdyYWRlZCBTZXJ2aWNlIikpKSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTeW5jSW5kaWNhdG9yLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmhhbmRsZUhvdmVyRGVib3VuY2VkID0gZGVib3VuY2UodGhpcy5oYW5kbGVIb3ZlciwgNzUwLCB7IHRyYWlsaW5nOiB0cnVlIH0pOwogICAgfTsKICAgIFN5bmNJbmRpY2F0b3IucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbGxhcHNlZCA9IF9hLmNvbGxhcHNlZCwgc3RhdHVzID0gX2Euc3RhdHVzLCBvZmZsaW5lID0gX2Eub2ZmbGluZSwgZGlzYWJsZWQgPSBfYS5kaXNhYmxlZDsKICAgICAgICBpZiAoIXN0YXR1cykgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgdmFyIGN1cnJlbnRTdGF0dXMgPSBzdGF0dXMuc3RhdHVzVHlwZTsKICAgICAgICBpZiAob2ZmbGluZSkgewogICAgICAgICAgICBjdXJyZW50U3RhdHVzID0gJ29mZmxpbmUnOwogICAgICAgIH0KICAgICAgICAvLyBJZGVudGlmaWVzIGFueSBzdGF0dXMgcGFnZSBpc3N1ZXMKICAgICAgICB2YXIgZGVncmFkZWRQZXJmb3JtYW5jZSA9IHRoaXMuaXNTZXJ2aWNlRGVncmFkZWQoKTsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdsc2Itc3luYy1pbmRpY2F0b3InKSwgb25Nb3VzZUxlYXZlOiB0aGlzLmhhbmRsZU1vdXNlTGVhdmUgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb250YWluZXIiLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrLCBvbk1vdXNlT3ZlcjogdGhpcy5oYW5kbGVNb3VzZU92ZXIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdpY29uJywgewogICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZDogY29sbGFwc2VkLAogICAgICAgICAgICAgICAgICAgICAgICBvbmxpbmU6ICFvZmZsaW5lICYmICFkaXNhYmxlZCAmJiBzdGF0dXMuc3RhdHVzVHlwZSA9PT0gUG9seW1haWxTdGF0dXNUeXBlLk9ubGluZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3luY2luZzogIW9mZmxpbmUgJiYgIWRpc2FibGVkICYmIHN0YXR1cy5zdGF0dXNUeXBlID09PSBQb2x5bWFpbFN0YXR1c1R5cGUuU3luY2luZywKICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGRpc2FibGVkIHx8ICghIWRlZ3JhZGVkUGVyZm9ybWFuY2UgJiYgIW9mZmxpbmUpLAogICAgICAgICAgICAgICAgICAgICAgICBvZmZsaW5lOiAhIW9mZmxpbmUsCiAgICAgICAgICAgICAgICAgICAgfSkgfSksCiAgICAgICAgICAgICAgICAhY29sbGFwc2VkICYmIChSZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zaXRpb24sIHsgaXRlbXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgUG9seW1haWxTdGF0dXNUeXBlLk9ubGluZSwgJ29mZmxpbmUnLCBQb2x5bWFpbFN0YXR1c1R5cGUuU3luY2luZywKICAgICAgICAgICAgICAgICAgICBdLCBmcm9tOiB7IG9wYWNpdHk6IDAgfSwgZW50ZXI6IHsgb3BhY2l0eTogMSB9LCBsZWF2ZTogeyBvcGFjaXR5OiAwIH0sIGNvbmZpZzogY29uZmlnLmdlbnRsZSB9LCBmdW5jdGlvbiAoaXRlbSwgdHlwZSkgeyByZXR1cm4gdHlwZSA9PT0gY3VycmVudFN0YXR1cyAmJiAoUmVhY3QuY3JlYXRlRWxlbWVudChhbmltYXRlZC5kaXYsIHsgY2xhc3NOYW1lOiAidGl0bGUiLCBzdHlsZTogaXRlbSB9LCBfdGhpcy5yZW5kZXJUaXRsZSgpKSk7IH0pKSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3ZlciwgeyBjbGFzc05hbWU6ICJsc2Itc3RhdHVzLXBvcG92ZXIiLCByZWY6IHRoaXMuaGFuZGxlUG9wb3ZlclJlZiwgb25Nb3VzZUVudGVyOiB0aGlzLmhhbmRsZVBvcG92ZXJFbnRlciB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwgIlBvbHltYWlsIHN0YXR1cyIpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJpdGVtcyIgfSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRlZ3JhZGVkUGVyZm9ybWFuY2UoKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckN1cnJlbnRTdGF0dXMoKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNoYW5nZXMtcmVtYWluaW5nIiB9LCB0aGlzLnJlbmRlckNoYW5nZXMoKSkpKSkpOwogICAgfTsKICAgIHJldHVybiBTeW5jSW5kaWNhdG9yOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgU3luY0luZGljYXRvcjsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/SyncIndicator/SyncIndicator.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/SyncIndicator/SyncIndicator.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport './SyncIndicator.scss';\nimport { PolymailStatus, PolymailStatusType } from '@src/types';\nimport Popover from '@src/components/Popover/Popover';\nimport { Transition, animated, config } from 'react-spring';\nimport { debounce, Cancelable } from 'lodash';\nimport { StatusPageType } from '@src/api/app';\n\nexport interface Props {\n  status?: PolymailStatus;\n  exists?: true;\n  collapsed?: boolean;\n  offline?: boolean;\n  disabled?: boolean;\n}\n\nclass SyncIndicator extends React.PureComponent<Props> {\n  popover?: Popover;\n  private handleHoverDebounced: ((hovered: boolean) => void) & Cancelable;\n\n  componentDidMount() {\n    this.handleHoverDebounced = debounce(this.handleHover, 750, { trailing: true });\n  }\n\n  handlePopoverRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  handleClick = () => {\n    this.popover?.toggle();\n  }\n\n  handleHover = (hovered: boolean) => {\n    if (hovered) {\n      this.popover?.show();\n    } else {\n      this.popover?.hide();\n    }\n  }\n\n  isServiceDegraded = () => {\n    const { status } = this.props;\n    return status?.statusPage && status.statusPage.status !== StatusPageType.Operational || false;\n  }\n\n  renderTitle = () => {\n    const { status, offline, disabled } = this.props;\n\n    if (offline) {\n      return 'Offline';\n    }\n\n    if (disabled) {\n      return 'Sync disabled';\n    }\n\n    // Identifies any status page issues\n    const degradedPerformance = this.isServiceDegraded();\n\n    if (degradedPerformance) {\n      return 'Degraded Service';\n    }\n\n    switch (status?.statusType) {\n      case PolymailStatusType.Online:\n        return 'All changes synced';\n      case PolymailStatusType.Syncing:\n        return 'Syncing changes';\n      default:\n        return '';\n    }\n  }\n\n  handleMouseOver = () => {\n    this.handleHoverDebounced.cancel();\n    this.handleHoverDebounced(true);\n  }\n\n  handlePopoverEnter = () => {\n    this.handleHoverDebounced.cancel();\n  }\n\n  handleMouseLeave = () => {\n    this.handleHoverDebounced(false);\n  }\n\n  handleDegradedPerformanceClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    window.open('https://status.polymail.io/', '_blank');\n  }\n\n  renderChanges = () => {\n    const { status, offline, disabled } = this.props;\n\n    if (disabled) {\n      return 'Some pending changes';\n    }\n\n    if (!status) {\n      return null;\n    }\n\n    if (status.commitsRemaining === 0) {\n      return 'All changes synced';\n    }\n    const changeCopy = status.commitsRemaining > 0\n      ? 'changes'\n      : 'change';\n\n    if (offline) {\n      return (\n        <span>\n          <b>{status.commitsRemaining}</b> {changeCopy} will be synced\n        </span>\n      );\n    }\n\n    switch (status?.statusType) {\n      case PolymailStatusType.Online:\n      case PolymailStatusType.Syncing:\n        return (\n          <span>\n            <b>{status.commitsRemaining}</b> {changeCopy} remaining\n          </span>\n        );\n      default:\n        return '';\n    }\n  }\n\n  renderCurrentStatus = () => {\n    const { status, offline, disabled } = this.props;\n    if (!status) {\n      return null;\n    }\n\n    // Identifies any status page issue\n    let statusElement = (\n    <span>Polymail is <b>online</b></span>\n    );\n\n    if ((PolymailStatusType.Syncing || PolymailStatusType.Online) && disabled) {\n      return (\n        <div className=\"current-status\">\n          {statusElement}\n        </div>\n      );\n    }\n\n    switch (status?.statusType) {\n      case PolymailStatusType.Syncing:\n        statusElement = (<span>Polymail is <b>online</b></span>);\n        break;\n      case PolymailStatusType.Online:\n      default:\n        statusElement = (<span>Polymail is <b>syncing</b></span>);\n        break;\n    }\n\n    if (offline) {\n      statusElement = (<span>Polymail is <b>offline</b></span>);\n    }\n\n    return (\n      <div className=\"current-status\">\n        {statusElement}\n      </div>\n    );\n  }\n\n  renderDegradedPerformance = () => {\n    const degradedPerformance = this.isServiceDegraded();\n    if (!degradedPerformance) {\n      return null;\n    }\n\n    return (\n      <div\n        className=\"status-page-error\"\n        onClick={this.handleDegradedPerformanceClick}\n      >\n        <div\n          className={classnames('icon', 'error')}\n        />\n        <div className=\"copy\">\n          <b>Degraded Service</b>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { collapsed, status, offline, disabled } = this.props;\n\n    if (!status) {\n      return null;\n    }\n\n    let currentStatus: string = status.statusType;\n    if (offline) {\n      currentStatus = 'offline';\n    }\n\n    // Identifies any status page issues\n    const degradedPerformance = this.isServiceDegraded();\n\n    return (\n      <div\n        className={classnames('lsb-sync-indicator')}\n        onMouseLeave={this.handleMouseLeave}\n      >\n        <div\n          className=\"container\"\n          onClick={this.handleClick}\n          onMouseOver={this.handleMouseOver}\n        >\n          <div\n            className={classnames('icon', {\n              centered: collapsed,\n              online: !offline && !disabled && status.statusType === PolymailStatusType.Online,\n              syncing: !offline && !disabled && status.statusType === PolymailStatusType.Syncing,\n              error: disabled || (!!degradedPerformance && !offline),\n              offline: !!offline,\n            })}\n          />\n          {!collapsed && (\n            <Transition\n              items={[\n                PolymailStatusType.Online, 'offline', PolymailStatusType.Syncing,\n              ]}\n              from={{ opacity: 0 }}\n              enter={{ opacity: 1 }}\n              leave={{ opacity: 0 }}\n              config={config.gentle}\n            >\n              {(item, type) => type === currentStatus && (\n                <animated.div\n                  className=\"title\"\n                  style={item}\n                >\n                  {this.renderTitle()}\n                </animated.div>\n              )}\n            </Transition>\n          )}\n        </div>\n        {/* Popover Items */}\n        <Popover\n          className=\"lsb-status-popover\"\n          ref={this.handlePopoverRef}\n          onMouseEnter={this.handlePopoverEnter}\n        >\n        <div className=\"title\">\n          Polymail status\n        </div>\n        <div className=\"items\">\n          {this.renderDegradedPerformance()}\n          {this.renderCurrentStatus()}\n          <div className=\"changes-remaining\">\n            {this.renderChanges()}\n          </div>\n        </div>\n      </Popover>\n      </div>\n    );\n  }\n}\n\nexport default SyncIndicator;\n"]}]}