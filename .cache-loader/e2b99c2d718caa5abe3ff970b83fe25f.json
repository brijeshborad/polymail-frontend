{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/UserProfile/UserProfilePane.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/UserProfile/UserProfilePane.tsx","mtime":1675280254111},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFRleHRJbnB1dCBmcm9tICdAc3JjL2NvbXBvbmVudHMvRm9ybS9UZXh0SW5wdXQnOwppbXBvcnQgTmF2aWdhdGlvbkhlYWRlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL05hdmlnYXRpb25IZWFkZXInOwppbXBvcnQgJy4vVXNlclByb2ZpbGVQYW5lLnNjc3MnOwppbXBvcnQgVXBsb2FkQnV0dG9uIGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL1VwbG9hZEJ1dHRvbic7CnZhciBVc2VyUHJvZmlsZVBhbmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoVXNlclByb2ZpbGVQYW5lLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVXNlclByb2ZpbGVQYW5lKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlRmlyc3ROYW1lQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBmaXJzdE5hbWU6IGUuY3VycmVudFRhcmdldC52YWx1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUxhc3ROYW1lQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBsYXN0TmFtZTogZS5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2F2ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHVwZGF0ZU1lID0gX2EudXBkYXRlTWUsIG1lID0gX2EubWU7CiAgICAgICAgICAgIHZhciBfYiA9IF90aGlzLnN0YXRlLCBmaXJzdE5hbWUgPSBfYi5maXJzdE5hbWUsIGxhc3ROYW1lID0gX2IubGFzdE5hbWU7CiAgICAgICAgICAgIGlmICghbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgdXBkYXRlZE1lID0gX19hc3NpZ24oe30sIG1lKTsKICAgICAgICAgICAgaWYgKCEhZmlyc3ROYW1lKSB7CiAgICAgICAgICAgICAgICB1cGRhdGVkTWUuZmlyc3ROYW1lID0gZmlyc3ROYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghIWxhc3ROYW1lKSB7CiAgICAgICAgICAgICAgICB1cGRhdGVkTWUubGFzdE5hbWUgPSBsYXN0TmFtZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cGRhdGVNZSh1cGRhdGVkTWUpOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB1bmRlZmluZWQsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlVXBsb2FkID0gZnVuY3Rpb24gKGZpbGVzKSB7CiAgICAgICAgICAgIHZhciB1cGRhdGVNZVBob3RvID0gX3RoaXMucHJvcHMudXBkYXRlTWVQaG90bzsKICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdXBkYXRlTWVQaG90byhmaWxlc1swXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0ge307CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVXNlclByb2ZpbGVQYW5lLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF0aGlzLnByb3BzLm1lKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLm1lLCBmaXJzdE5hbWUgPSBfYS5maXJzdE5hbWUsIGxhc3ROYW1lID0gX2EubGFzdE5hbWUsIHBob3RvVXJsID0gX2EucGhvdG9Vcmw7CiAgICAgICAgdmFyIHNob3dTYXZlID0gdGhpcy5zdGF0ZS5maXJzdE5hbWUgfHwgdGhpcy5zdGF0ZS5sYXN0TmFtZTsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2V0dGluZ3MtcGFuZWwgcHJlZmVyZW5jZXMtdXNlci1wcm9maWxlIiB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE5hdmlnYXRpb25IZWFkZXIsIHsgdGl0bGU6ICJQcm9maWxlIiwgb25TYXZlOiBzaG93U2F2ZSAmJiB0aGlzLmhhbmRsZVNhdmUgfHwgdW5kZWZpbmVkLCBpc01vYmlsZTogdGhpcy5wcm9wcy5pc01vYmlsZSwgY29sbGFwc2VkTW9iaWxlOiB0aGlzLnByb3BzLmNvbGxhcHNlZE1vYmlsZSwgY29sbGFwc2VMc2I6IHRoaXMucHJvcHMuY29sbGFwc2VMc2IgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibWFpbiIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYXZhdGFyLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhdmF0YXItaW1hZ2UiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsgY2xhc3NOYW1lOiAiYXZhdGFyIiwgc3JjOiBwaG90b1VybCB9KSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChVcGxvYWRCdXR0b24sIHsgdXBsb2FkOiB0aGlzLmhhbmRsZVVwbG9hZCwgY2xhc3NOYW1lOiAidXBkYXRlLWF2YXRhci1idXR0b24iLCBkZXNjcmlwdGlvbjogIlVwZGF0ZSBhdmF0YXIiLCBsaW1pdFRvT25lOiB0cnVlLCBhY2NlcHQ6ICJpbWFnZS8qIiB9KSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm5hbWVzLXBhbmUiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0SW5wdXQsIHsgZGVzY3JpcHRpb246ICJGaXJzdCBuYW1lIiwgcGxhY2Vob2xkZXI6ICIiLCB2YWx1ZTogdGhpcy5zdGF0ZS5maXJzdE5hbWUgIT09IHVuZGVmaW5lZCA/IHRoaXMuc3RhdGUuZmlyc3ROYW1lIDogZmlyc3ROYW1lLCB0eXBlOiAidGV4dCIsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUZpcnN0TmFtZUNoYW5nZSB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRJbnB1dCwgeyBkZXNjcmlwdGlvbjogIkxhc3QgTmFtZSIsIHBsYWNlaG9sZGVyOiAiIiwgdmFsdWU6IHRoaXMuc3RhdGUubGFzdE5hbWUgIT09IHVuZGVmaW5lZCA/IHRoaXMuc3RhdGUubGFzdE5hbWUgOiBsYXN0TmFtZSwgdHlwZTogInRleHQiLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVMYXN0TmFtZUNoYW5nZSB9KSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFVzZXJQcm9maWxlUGFuZTsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFVzZXJQcm9maWxlUGFuZTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/UserProfile/UserProfilePane.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/UserProfile/UserProfilePane.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { Me, Account } from '@src/types';\nimport TextInput from '@src/components/Form/TextInput';\n\nimport NavigationHeader from '../../components/NavigationHeader';\n\nimport './UserProfilePane.scss';\nimport UploadButton from '@src/components/Base/UploadButton';\n\ninterface State {\n  firstName?: string;\n  lastName?: string;\n}\n\nexport interface Props {\n  me?: Me;\n  accounts: Account[];\n  isMobile?: boolean;\n  collapsedMobile?: boolean;\n}\n\nexport interface DispatchProps {\n  updateMe: (me: Me) => void;\n  updateMePhoto: (file: File) => void;\n  collapseLsb: (collapse: boolean) => void;\n}\n\nclass UserProfilePane extends React.PureComponent<Props & DispatchProps, State> {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  handleFirstNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ firstName: e.currentTarget.value });\n  }\n\n  handleLastNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ lastName: e.currentTarget.value });\n  }\n\n  handleSave = () => {\n    const { updateMe, me } = this.props;\n    const { firstName, lastName } = this.state;\n    if (!me) {\n      return;\n    }\n\n    const updatedMe: Me = {\n      ...me,\n    };\n\n    if (!!firstName) {\n      updatedMe.firstName = firstName;\n    }\n\n    if (!!lastName) {\n      updatedMe.lastName = lastName;\n    }\n\n    updateMe(updatedMe);\n    this.setState({\n      firstName: undefined,\n      lastName: undefined,\n    });\n  }\n\n  handleUpload = (files: File[]) => {\n    const { updateMePhoto } = this.props;\n\n    if (files.length) {\n      updateMePhoto(files[0]);\n    }\n  }\n\n  render() {\n    if (!this.props.me) {\n      return null;\n    }\n\n    const { firstName, lastName, photoUrl } = this.props.me;\n    const showSave = this.state.firstName || this.state.lastName;\n\n    return (\n      <div className=\"settings-panel preferences-user-profile\">\n        <NavigationHeader\n          title=\"Profile\"\n          onSave={showSave && this.handleSave || undefined}\n          isMobile={this.props.isMobile}\n          collapsedMobile={this.props.collapsedMobile}\n          collapseLsb={this.props.collapseLsb}\n        />\n        <div className=\"main\">\n          <div\n            className=\"avatar-section\"\n          >\n            <div className=\"avatar-image\">\n              <img\n                className=\"avatar\"\n                src={photoUrl}\n              />\n            </div>\n            <UploadButton\n              upload={this.handleUpload}\n              className=\"update-avatar-button\"\n              description=\"Update avatar\"\n              limitToOne={true}\n              accept=\"image/*\"\n            />\n          </div>\n          <div className=\"names-pane\">\n            <TextInput\n              description=\"First name\"\n              placeholder=\"\"\n              value={this.state.firstName !== undefined ? this.state.firstName : firstName}\n              type=\"text\"\n              onChange={this.handleFirstNameChange}\n            />\n            <TextInput\n              description=\"Last Name\"\n              placeholder=\"\"\n              value={this.state.lastName !== undefined ? this.state.lastName : lastName}\n              type=\"text\"\n              onChange={this.handleLastNameChange}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UserProfilePane;\n"]}]}