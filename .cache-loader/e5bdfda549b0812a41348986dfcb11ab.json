{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Threads/components/ThreadList/components/AdvancedSearchPopover/components/DateSearch/DateSearch.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Threads/components/ThreadList/components/AdvancedSearchPopover/components/DateSearch/DateSearch.tsx","mtime":1675280254114},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0ICcuL0RhdGVTZWFyY2guc2Nzcyc7CmV4cG9ydCB2YXIgREFURV9GT1JNQVQgPSAnWVlZWS9NTS9ERCc7CnZhciBEYXRlU2VhcmNoID0gZnVuY3Rpb24gKF9hKSB7CiAgICB2YXIgb25TdWdnZXN0aW9uTW91c2VFbnRlciA9IF9hLm9uU3VnZ2VzdGlvbk1vdXNlRW50ZXIsIG9uU2VsZWN0ID0gX2Eub25TZWxlY3QsIHNlbGVjdGVkSW5kZXggPSBfYS5zZWxlY3RlZEluZGV4LCBvcHRpb25zID0gX2Eub3B0aW9ucywgcXVlcnkgPSBfYS5xdWVyeTsKICAgIHZhciBoYW5kbGVDbGljayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGluZGV4ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXg7CiAgICAgICAgaWYgKGluZGV4KSB7CiAgICAgICAgICAgIG9uU2VsZWN0KHBhcnNlSW50KGluZGV4LCAxMCkpOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgaGFuZGxlTW91c2VFbnRlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGluZGV4ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXg7CiAgICAgICAgaWYgKGluZGV4KSB7CiAgICAgICAgICAgIG9uU3VnZ2VzdGlvbk1vdXNlRW50ZXIoJ2NvbnRhY3QnLCBwYXJzZUludChpbmRleCwgMTApKTsKICAgICAgICB9CiAgICB9OwogICAgdmFyIGhhbmRsZUxpbmtDbGljayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGxpbmsgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5saW5rOwogICAgICAgIHZhciBsaW5rUHJlc2V0cyA9IHsKICAgICAgICAgICAgJ2xhc3QgbW9uZGF5JzogbW9tZW50KCkuc3RhcnRPZignd2VlaycpLmFkZCgxLCAnZGF5JykuZm9ybWF0KERBVEVfRk9STUFUKSwKICAgICAgICAgICAgamFudWFyeTogbW9tZW50KCkuc3RhcnRPZigneWVhcicpLmZvcm1hdChEQVRFX0ZPUk1BVCksCiAgICAgICAgfTsKICAgICAgICBpZiAobGluaykgewogICAgICAgICAgICBvblNlbGVjdCh1bmRlZmluZWQsIHsgY29tcG9uZW50OiAnZGF0ZScsIG9wdGlvbjogewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBsaW5rUHJlc2V0c1tsaW5rXSwKICAgICAgICAgICAgICAgICAgICBtb21lbnQ6IG1vbWVudChsaW5rUHJlc2V0c1tsaW5rXSksCiAgICAgICAgICAgICAgICB9IH0pOwogICAgICAgIH0KICAgIH07CiAgICBpZiAoIW9wdGlvbnMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwpOwogICAgfQogICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRhdGUtc2VhcmNoIHN1Z2dlc3Rpb24tY2F0ZWdvcnkiIH0sCiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJoZWFkaW5nIiB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIkRhdGVzIiksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7IGNsYXNzTmFtZTogInNlcGFyYXRvciIgfSkpLAogICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic3VnZ2VzdGlvbnMiIH0sIG9wdGlvbnMuc2xpY2UoMCwgNSkubWFwKGZ1bmN0aW9uIChvcHRpb24sIGluZGV4KSB7CiAgICAgICAgICAgIC8vIFRPRE86IE5lZWQgdG8gc2FuaXRpemUgcXVlcnkKICAgICAgICAgICAgdmFyIHN1YnN0cmluZ0luZGV4ID0gcXVlcnkgPwogICAgICAgICAgICAgICAgb3B0aW9uLnRpdGxlLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnNlYXJjaChxdWVyeS50b0xvd2VyQ2FzZSgpKSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygnZGF0ZS1zdWdnZXN0aW9uIHN1Z2dlc3Rpb24nLCB7IHNlbGVjdGVkOiBzZWxlY3RlZEluZGV4ID09PSBpbmRleCB9KSwga2V5OiBpbmRleCwgImRhdGEtaW5kZXgiOiBpbmRleCwgb25DbGljazogaGFuZGxlQ2xpY2ssIG9uTW91c2VFbnRlcjogaGFuZGxlTW91c2VFbnRlciB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiAiaGVhZGluZyIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoeyBsaWdodDogc3Vic3RyaW5nSW5kZXggIT09IHVuZGVmaW5lZCB9KSB9LCBzdWJzdHJpbmdJbmRleCAhPT0gdW5kZWZpbmVkID8KICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRpdGxlLnNsaWNlKDAsIHN1YnN0cmluZ0luZGV4KSA6IG9wdGlvbi50aXRsZSksCiAgICAgICAgICAgICAgICAgICAgc3Vic3RyaW5nSW5kZXggIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJib2xkIiB9LCBvcHRpb24udGl0bGUuc2xpY2Uoc3Vic3RyaW5nSW5kZXgsIHN1YnN0cmluZ0luZGV4ICsgcXVlcnkubGVuZ3RoKSksCiAgICAgICAgICAgICAgICAgICAgc3Vic3RyaW5nSW5kZXggIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJsaWdodCIgfSwgb3B0aW9uLnRpdGxlLnNsaWNlKHN1YnN0cmluZ0luZGV4ICsgcXVlcnkubGVuZ3RoKSkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRpb24iIH0sIG9wdGlvbi5tb21lbnQuZm9ybWF0KERBVEVfRk9STUFUKSkpKTsKICAgICAgICB9KSksCiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJoaW50IiB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwKICAgICAgICAgICAgICAgICJPciB0cnkgdHlwaW5nIGEga2V5d29yZCBsaWtlIiwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlTGlua0NsaWNrLCAiZGF0YS1saW5rIjogImxhc3QgbW9uZGF5IiB9LCAibGFzdCBtb25kYXkiKSwKICAgICAgICAgICAgICAgICIgb3IiLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBoYW5kbGVMaW5rQ2xpY2ssICJkYXRhLWxpbmsiOiAiamFudWFyeSIgfSwgImphbnVhcnkiKSwKICAgICAgICAgICAgICAgICIuIikpKSk7Cn07CmV4cG9ydCBkZWZhdWx0IERhdGVTZWFyY2g7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Threads/components/ThreadList/components/AdvancedSearchPopover/components/DateSearch/DateSearch.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Threads/components/ThreadList/components/AdvancedSearchPopover/components/DateSearch/DateSearch.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport moment, { Moment } from 'moment';\nimport './DateSearch.scss';\n\nexport interface Props {\n  onSuggestionMouseEnter: (component: string, index: number) => void;\n  onSelect: (index: number|undefined, option?: {\n    component: string, option: { title: string; moment: Moment; },\n  }) => void;\n  selectedIndex?: number;\n  options: Array<{\n    title: string;\n    moment: Moment;\n  }>;\n  query?: string;\n}\n\nexport const DATE_FORMAT = 'YYYY/MM/DD';\nconst DateSearch: React.SFC<Props> = ({\n  onSuggestionMouseEnter, onSelect, selectedIndex, options, query,\n}) => {\n  const handleClick = (e: React.SyntheticEvent<HTMLButtonElement>) => {\n    const index = e.currentTarget.dataset.index;\n\n    if (index) {\n      onSelect(parseInt(index, 10));\n    }\n  };\n  const handleMouseEnter = (e: React.SyntheticEvent<HTMLButtonElement>) => {\n    const index = e.currentTarget.dataset.index;\n\n    if (index) {\n      onSuggestionMouseEnter('contact', parseInt(index, 10));\n    }\n  };\n\n  const handleLinkClick = (e: React.SyntheticEvent<HTMLButtonElement>) => {\n    const { link } = e.currentTarget.dataset;\n    const linkPresets = {\n      'last monday': moment().startOf('week').add(1, 'day').format(DATE_FORMAT),\n      january: moment().startOf('year').format(DATE_FORMAT),\n    };\n\n    if (link) {\n      onSelect(undefined, { component: 'date', option: {\n        title: linkPresets[link],\n        moment: moment(linkPresets[link]),\n      } });\n    }\n  };\n\n  if (!options.length) {\n    return <div />;\n  }\n\n  return (\n    <div className=\"date-search suggestion-category\">\n      <div className=\"heading\">\n        <span>Dates</span>\n        <span className=\"separator\" />\n      </div>\n      <div className=\"suggestions\">\n        {options.slice(0, 5).map((option, index) => {\n          // TODO: Need to sanitize query\n          const substringIndex = query ?\n            option.title.trim().toLowerCase().search(query.toLowerCase()) : undefined;\n\n          return (\n            <button\n              className={classnames(\n                'date-suggestion suggestion',\n                { selected: selectedIndex === index },\n              )}\n              key={index}\n              data-index={index}\n              onClick={handleClick}\n              onMouseEnter={handleMouseEnter}\n            >\n              <span className=\"heading\">\n                <span className={classnames({ light: substringIndex !== undefined })}>\n                  {substringIndex !== undefined ?\n                    option.title.slice(0, substringIndex) : option.title}\n                </span>\n                {substringIndex !== undefined &&\n                  <span className=\"bold\">\n                    {option.title.slice(substringIndex, substringIndex + query!.length)}\n                  </span>\n                }\n                {substringIndex !== undefined &&\n                  <span className=\"light\">\n                    {option.title.slice(substringIndex + query!.length)}\n                  </span>\n                }\n              </span>\n              <span className=\"description\">{option.moment.format(DATE_FORMAT)}</span>\n            </button>\n          );\n        })}\n      </div>\n      <div className=\"hint\">\n        <span>\n          Or try typing a keyword like\n          <button\n            onClick={handleLinkClick}\n            data-link=\"last monday\"\n          >\n            last monday\n          </button> or\n          <button\n            onClick={handleLinkClick}\n            data-link=\"january\"\n          >\n            january\n          </button>.\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default DateSearch;\n"]}]}