{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/AttachmentCell/AttachmentCell.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/AttachmentCell/AttachmentCell.tsx","mtime":1675280253990},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgJy4vQXR0YWNobWVudENlbGwuc2Nzcyc7CmltcG9ydCBEb3dubG9hZCBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvRG93bmxvYWQuc3ZnJzsKaW1wb3J0IHsgdHJ1bmNhdGUsIGZpbGVuYW1lSWNvblVybCB9IGZyb20gJ0BzcmMvbGliL2F0dGFjaG1lbnQnOwppbXBvcnQgeyBpc0VsZWN0cm9uIH0gZnJvbSAnQHNyYy9saWIvZWxlY3Ryb24nOwppbXBvcnQgeyBJU19DSFJPTUUsIElTX01BQyB9IGZyb20gJ0BzcmMvbGliL2RldmljZSc7CnZhciBBdHRhY2htZW50Q2VsbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhBdHRhY2htZW50Q2VsbCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEF0dGFjaG1lbnRDZWxsKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMucHJldmlld0J1dHRvblByZXNzZWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgYXR0YWNobWVudCA9IF90aGlzLnByb3BzLmF0dGFjaG1lbnQ7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgaWYgKHdpbmRvdy5QTUVsZWN0cm9uQnJpZGdlICYmIHdpbmRvdy5QTUVsZWN0cm9uQnJpZGdlLmRvd25sb2FkQXR0YWNobWVudCkgewogICAgICAgICAgICAgICAgd2luZG93LlBNRWxlY3Ryb25CcmlkZ2UuZG93bmxvYWRBdHRhY2htZW50KHsKICAgICAgICAgICAgICAgICAgICB1cmw6IGF0dGFjaG1lbnQudXJsLAogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBhdHRhY2htZW50LmZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgIHRocmVhZDogYXR0YWNobWVudC50aHJlYWQsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYXR0YWNobWVudC5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQ6IGF0dGFjaG1lbnQuaWQsCiAgICAgICAgICAgICAgICAgICAgc2F2ZUFzOiBlLmFsdEtleSwKICAgICAgICAgICAgICAgICAgICBwcmV2aWV3OiB0cnVlLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCB1cmwgaW4gbmV3IHdpbmRvdwogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oYXR0YWNobWVudC51cmwsICdfYmxhbmsnKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gVE9ETyhTSElOKTogRW5zdXJlIHRoYXQgZG93bmxvYWQgb2NjdXJzIHdpdGhvdXQgaGF2aW5nIHRvIG9wZW4gbmV3IHRhYj8KICAgICAgICBfdGhpcy5kb3dubG9hZEJ1dHRvblByZXNzZWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgYXR0YWNobWVudCA9IF9hLmF0dGFjaG1lbnQsIHByb2dyZXNzID0gX2EucHJvZ3Jlc3M7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgaWYgKHdpbmRvdy5QTUVsZWN0cm9uQnJpZGdlICYmIHdpbmRvdy5QTUVsZWN0cm9uQnJpZGdlLmRvd25sb2FkQXR0YWNobWVudCkgewogICAgICAgICAgICAgICAgd2luZG93LlBNRWxlY3Ryb25CcmlkZ2UuZG93bmxvYWRBdHRhY2htZW50KHsKICAgICAgICAgICAgICAgICAgICB1cmw6IGF0dGFjaG1lbnQudXJsLAogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBhdHRhY2htZW50LmZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQ6IGF0dGFjaG1lbnQuaWQsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYXR0YWNobWVudC5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIHRocmVhZDogYXR0YWNobWVudC50aHJlYWQsCiAgICAgICAgICAgICAgICAgICAgc2F2ZUFzOiBlLmFsdEtleSwKICAgICAgICAgICAgICAgICAgICBvcGVuOiBwcm9ncmVzcyAmJiBwcm9ncmVzcyA9PT0gMSB8fCBmYWxzZSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gRG93bmxvYWQgdXJsIGluIG5ldyB3aW5kb3cKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGF0dGFjaG1lbnQudXJsLCAnX2JsYW5rJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZU1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZG93bmxvYWRIb3ZlcmVkOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBkb3dubG9hZEhvdmVyZWQ6IGZhbHNlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRHJhZ1N0YXJ0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyICYmIGUuZGF0YVRyYW5zZmVyLnNldERhdGEpIHsKICAgICAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLmF0dGFjaG1lbnQsIGZpbGVuYW1lID0gX2EuZmlsZW5hbWUsIHVybCA9IF9hLnVybDsKICAgICAgICAgICAgICAgIHZhciBjbGVhbkZpbGVuYW1lID0gZmlsZW5hbWUucmVwbGFjZSgnOicsICcgJyk7CiAgICAgICAgICAgICAgICB2YXIgcHJveGllZFVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3ovZD91PScgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKTsKICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ0Rvd25sb2FkVVJMJywgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTonICsgY2xlYW5GaWxlbmFtZSArICc6JyArIHByb3hpZWRVcmwpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJQcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gX3RoaXMucHJvcHMucHJvZ3Jlc3M7CiAgICAgICAgICAgIHZhciBwcm9ncmVzc1N0eWxlID0gcHJvZ3Jlc3MgJiYgcHJvZ3Jlc3MgKiAxMDAgKyAiJSI7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJwcm9ncmVzcy1pbmRpY2F0b3IiLCBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiBwcm9ncmVzc1N0eWxlLAogICAgICAgICAgICAgICAgfSB9KSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgYXR0YWNobWVudCA9IF9hLmF0dGFjaG1lbnQsIHByb2dyZXNzID0gX2EucHJvZ3Jlc3MsIGlzTWV0YSA9IF9hLmlzTWV0YTsKICAgICAgICAgICAgdmFyIGRvd25sb2FkSG92ZXJlZCA9IF90aGlzLnN0YXRlLmRvd25sb2FkSG92ZXJlZDsKICAgICAgICAgICAgdmFyIGhvdmVyVGV4dCA9ICfigKIgQ2xpY2sgdG8gdmlldyc7CiAgICAgICAgICAgIGlmIChpc0VsZWN0cm9uICYmIHByb2dyZXNzID09PSAxKSB7CiAgICAgICAgICAgICAgICBob3ZlclRleHQgPSAn4oCiIFNhdmVkISc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoaXNFbGVjdHJvbiAmJiBkb3dubG9hZEhvdmVyZWQpIHsKICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlID0gSVNfTUFDID8gJ+KMpScgOiAnYWx0JzsKICAgICAgICAgICAgICAgIGhvdmVyVGV4dCA9ICfigKIgJyArIGtleUNvZGUgKyAnICsgQ2xpY2sgdG8gY2hvb3NlIGRvd25sb2FkIGxvY2F0aW9uJzsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBIYW5kbGVzIG9wdGltaXN0aWNzCiAgICAgICAgICAgIGlmIChpc01ldGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiYSIsIHsgY2xhc3NOYW1lOiAnbWFpbicsIGhyZWY6IGF0dGFjaG1lbnQudXJsLCBkb3dubG9hZDogYXR0YWNobWVudC5maWxlbmFtZSB9LAogICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclByb2dyZXNzKCksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgeyBjbGFzc05hbWU6ICJhdHRhY2htZW50LWltYWdlIiwgc3JjOiBmaWxlbmFtZUljb25VcmwoYXR0YWNobWVudC5maWxlbmFtZSkgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhdHRhY2htZW50LW1ldGEiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidG9wIiB9LCBhdHRhY2htZW50LmZpbGVuYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJib3R0b20iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpbGVzaXplIiB9LCB0cnVuY2F0ZShhdHRhY2htZW50Lmxlbmd0aCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2hvdmVyLXRleHQnLCB7IHNhdmVkOiBwcm9ncmVzcyA9PT0gMSB9KSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCBob3ZlclRleHQpKSkpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdkb3dubG9hZC1idXR0b24nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogISFwcm9ncmVzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogcHJvZ3Jlc3MgPT09IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBkaXNhYmxlZDogISFwcm9ncmVzcyAmJiBwcm9ncmVzcyAhPT0gMSwgb25Nb3VzZUVudGVyOiBfdGhpcy5oYW5kbGVNb3VzZUVudGVyLCBvbk1vdXNlTGVhdmU6IF90aGlzLmhhbmRsZU1vdXNlTGVhdmUgfSwKICAgICAgICAgICAgICAgICAgICAgICAgIXByb2dyZXNzICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG93bmxvYWQsIHsgd2lkdGg6ICIxNHB4IiwgaGVpZ2h0OiAiMTZweCIgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICEhcHJvZ3Jlc3MgJiYgcHJvZ3Jlc3MgPT09IDEgJiYgJ09wZW4nKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJtYWluIiB9LAogICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyUHJvZ3Jlc3MoKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsgY2xhc3NOYW1lOiAiYXR0YWNobWVudC1pbWFnZSIsIHNyYzogZmlsZW5hbWVJY29uVXJsKGF0dGFjaG1lbnQuZmlsZW5hbWUpIH0pLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhdHRhY2htZW50LW1ldGEiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0b3AiIH0sIGF0dGFjaG1lbnQuZmlsZW5hbWUpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYm90dG9tIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpbGVzaXplIiB9LCB0cnVuY2F0ZShhdHRhY2htZW50Lmxlbmd0aCkpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygnaG92ZXItdGV4dCcsIHsgc2F2ZWQ6IHByb2dyZXNzID09PSAxIH0pIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgaG92ZXJUZXh0KSkpKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgb25DbGljazogX3RoaXMuZG93bmxvYWRCdXR0b25QcmVzc2VkLCBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2Rvd25sb2FkLWJ1dHRvbicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6ICEhcHJvZ3Jlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogcHJvZ3Jlc3MgPT09IDEsCiAgICAgICAgICAgICAgICAgICAgfSksIGRpc2FibGVkOiAhIXByb2dyZXNzICYmIHByb2dyZXNzICE9PSAxLCBvbk1vdXNlRW50ZXI6IF90aGlzLmhhbmRsZU1vdXNlRW50ZXIsIG9uTW91c2VMZWF2ZTogX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSB9LAogICAgICAgICAgICAgICAgICAgICFwcm9ncmVzcyAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KERvd25sb2FkLCB7IHdpZHRoOiAiMTRweCIsIGhlaWdodDogIjE2cHgiIH0pLAogICAgICAgICAgICAgICAgICAgICEhcHJvZ3Jlc3MgJiYgcHJvZ3Jlc3MgPT09IDEgJiYgJ09wZW4nKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7IGRvd25sb2FkSG92ZXJlZDogZmFsc2UgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBBdHRhY2htZW50Q2VsbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpc01ldGEgPSB0aGlzLnByb3BzLmlzTWV0YTsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgb25DbGljazogIWlzTWV0YSAmJiB0aGlzLnByZXZpZXdCdXR0b25QcmVzc2VkIHx8IHVuZGVmaW5lZCwgY2xhc3NOYW1lOiAiYXR0YWNobWVudC1jZWxsIiwgZHJhZ2dhYmxlOiBJU19DSFJPTUUgfHwgaXNFbGVjdHJvbiwgb25EcmFnU3RhcnQ6IHRoaXMuaGFuZGxlRHJhZ1N0YXJ0IH0sIHRoaXMucmVuZGVyQ29udGVudCgpKSk7CiAgICB9OwogICAgcmV0dXJuIEF0dGFjaG1lbnRDZWxsOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgQXR0YWNobWVudENlbGw7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/AttachmentCell/AttachmentCell.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/AttachmentCell/AttachmentCell.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport './AttachmentCell.scss';\nimport Download from '@src/components/Icons/Download.svg';\nimport { MessageAttachment } from '@src/types';\nimport { truncate, filenameIconUrl } from '@src/lib/attachment';\nimport { isElectron } from '@src/lib/electron';\nimport { IS_CHROME, IS_MAC } from '@src/lib/device';\n\nexport interface Props {\n  attachment: MessageAttachment;\n  isMeta?: boolean;\n}\n\nexport interface StateProps {\n  progress?: number;\n}\n\ninterface State {\n  downloadHovered: boolean;\n}\n\nclass AttachmentCell extends React.PureComponent<Props & StateProps, State> {\n  constructor() {\n    super();\n\n    this.state = { downloadHovered: false };\n  }\n\n  previewButtonPressed = (e: React.MouseEvent<HTMLDivElement>) => {\n    const { attachment } = this.props;\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (window.PMElectronBridge && window.PMElectronBridge.downloadAttachment) {\n      window.PMElectronBridge.downloadAttachment({\n        url: attachment.url,\n        filename: attachment.filename,\n        thread: attachment.thread,\n        message: attachment.message,\n        attachment: attachment.id,\n        saveAs: e.altKey,\n        preview: true,\n      });\n    } else {\n      // Download url in new window\n      window.open(attachment.url, '_blank');\n    }\n  }\n\n  // TODO(SHIN): Ensure that download occurs without having to open new tab?\n  downloadButtonPressed = (e: React.MouseEvent<HTMLButtonElement>) => {\n    const { attachment, progress } = this.props;\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (window.PMElectronBridge && window.PMElectronBridge.downloadAttachment) {\n      window.PMElectronBridge.downloadAttachment({\n        url: attachment.url,\n        filename: attachment.filename,\n        attachment: attachment.id,\n        message: attachment.message,\n        thread: attachment.thread,\n        saveAs: e.altKey,\n        open: progress && progress === 1 || false,\n      });\n    } else {\n      // Download url in new window\n      window.open(attachment.url, '_blank');\n    }\n  }\n\n  handleMouseEnter = () => {\n    this.setState({ downloadHovered: true });\n  }\n\n  handleMouseLeave = () => {\n    this.setState({ downloadHovered: false });\n  }\n\n  handleDragStart = (e: any) => {\n    if (e.dataTransfer && e.dataTransfer.setData) {\n      const { filename, url } = this.props.attachment;\n      const cleanFilename = filename.replace(':', ' ');\n      const proxiedUrl = window.location.origin + '/z/d?u=' + encodeURIComponent(url);\n\n      e.dataTransfer.setData(\n        'DownloadURL',\n        'application/octet-stream:' + cleanFilename + ':' + proxiedUrl,\n      );\n    }\n  }\n\n  renderProgress = () => {\n    const { progress } = this.props;\n    const progressStyle = progress && `${progress * 100}%`;\n    return (\n      <div\n        className=\"progress-indicator\"\n        style={{\n          maxWidth: progressStyle,\n        }}\n      />\n    );\n  }\n\n  renderContent = (): JSX.Element => {\n    const { attachment, progress, isMeta } = this.props;\n    const { downloadHovered } = this.state;\n\n    let hoverText = '• Click to view';\n    if (isElectron && progress === 1) {\n      hoverText = '• Saved!';\n    } else if (isElectron && downloadHovered) {\n      const keyCode = IS_MAC ? '⌥' : 'alt';\n      hoverText = '• ' + keyCode + ' + Click to choose download location';\n    }\n\n    // Handles optimistics\n    if (isMeta) {\n      return (\n        <a\n          className={'main'}\n          href={attachment.url}\n          download={attachment.filename}\n        >\n          {this.renderProgress()}\n          <img\n            className=\"attachment-image\"\n            src={filenameIconUrl(attachment.filename)}\n          />\n          <div className=\"attachment-meta\">\n            <div className=\"top\">\n              {attachment.filename}\n            </div>\n            <div className=\"bottom\">\n              <div className=\"filesize\">\n                {truncate(attachment.length)}\n              </div>\n              <div className={classnames('hover-text', { saved: progress === 1 })}>\n                <span>{hoverText}</span>\n              </div>\n            </div>\n          </div>\n          <button\n            className={classnames('download-button', {\n              progress: !!progress,\n              completed: progress === 1,\n            })}\n            disabled={!!progress && progress !== 1}\n            onMouseEnter={this.handleMouseEnter}\n            onMouseLeave={this.handleMouseLeave}\n          >\n            {!progress && <Download width=\"14px\" height=\"16px\" />}\n            {!!progress && progress === 1 && 'Open'}\n          </button>\n        </a>\n      );\n    }\n\n    return (\n      <div className=\"main\">\n        {this.renderProgress()}\n        <img\n          className=\"attachment-image\"\n          src={filenameIconUrl(attachment.filename)}\n        />\n        <div className=\"attachment-meta\">\n          <div className=\"top\">\n            {attachment.filename}\n          </div>\n          <div className=\"bottom\">\n            <div className=\"filesize\">\n              {truncate(attachment.length)}\n            </div>\n            <div className={classnames('hover-text', { saved: progress === 1 })}>\n              <span>{hoverText}</span>\n            </div>\n          </div>\n        </div>\n        <button\n          onClick={this.downloadButtonPressed}\n          className={classnames('download-button', {\n            progress: !!progress,\n            completed: progress === 1,\n          })}\n          disabled={!!progress && progress !== 1}\n          onMouseEnter={this.handleMouseEnter}\n          onMouseLeave={this.handleMouseLeave}\n        >\n          {!progress && <Download width=\"14px\" height=\"16px\" />}\n          {!!progress && progress === 1 && 'Open'}\n        </button>\n      </div>\n    );\n  }\n\n  render() {\n    const { isMeta } = this.props;\n\n    return (\n      <div\n        onClick={!isMeta && this.previewButtonPressed || undefined}\n        className=\"attachment-cell\"\n        draggable={IS_CHROME || isElectron}\n        onDragStart={this.handleDragStart}\n      >\n        {this.renderContent()}\n      </div>\n    );\n  }\n}\n\nexport default AttachmentCell;\n"]}]}