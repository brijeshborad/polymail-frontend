{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopupWrapper.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopupWrapper.tsx","mtime":1675280253989},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgUG9wb3ZlciBmcm9tICdAc3JjL2NvbXBvbmVudHMvUG9wb3Zlci9Qb3BvdmVyJzsKaW1wb3J0ICcuL1VuZG9Qb3B1cFdyYXBwZXIuc2Nzcyc7CnZhciBVbmRvUG9wdXBXcmFwcGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFVuZG9Qb3B1cFdyYXBwZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBVbmRvUG9wdXBXcmFwcGVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlU2hvdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0QXV0b0Rpc21pc3MoKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnNldEF1dG9EaXNtaXNzID0gZnVuY3Rpb24gKHRpbWUpIHsKICAgICAgICAgICAgaWYgKHRpbWUgPT09IHZvaWQgMCkgeyB0aW1lID0gdW5kZWZpbmVkOyB9CiAgICAgICAgICAgIHZhciBhdXRvRGlzbWlzc0R1cmF0aW9uID0gX3RoaXMucHJvcHMuYXV0b0Rpc21pc3NEdXJhdGlvbjsKICAgICAgICAgICAgaWYgKGF1dG9EaXNtaXNzRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfMSA9IF90aGlzLnByb3BzLnJlc291cmNlSWQ7CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudGltZW91dCkgewogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy50aW1lb3V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLnRpbWVvdXQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfMSA9PT0gX3RoaXMucHJvcHMucmVzb3VyY2VJZCAmJiBfdGhpcy5wb3BvdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvcG92ZXIuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGF1dG9EaXNtaXNzRHVyYXRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVQb3BvdmVyUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5wb3BvdmVyID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMub25VbmRvQ2xpY2sgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIF90aGlzLnByb3BzLm9uVW5kb0NsaWNrKCk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBVbmRvUG9wdXBXcmFwcGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy50aW1lb3V0KSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpOwogICAgICAgIH0KICAgIH07CiAgICBVbmRvUG9wdXBXcmFwcGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5wb3BvdmVyKSB7CiAgICAgICAgICAgIHRoaXMucG9wb3Zlci5zaG93KCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuc2V0QXV0b0Rpc21pc3MoKTsKICAgIH07CiAgICBVbmRvUG9wdXBXcmFwcGVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAob2xkUHJvcHMpIHsKICAgICAgICB2YXIgb2xkQXV0b2Rpc21pc3MgPSBvbGRQcm9wcy5hdXRvRGlzbWlzc0R1cmF0aW9uOwogICAgICAgIHZhciBuZXdBdXRvZGlzbWlzcyA9IHRoaXMucHJvcHMuYXV0b0Rpc21pc3NEdXJhdGlvbjsKICAgICAgICBpZiAodGhpcy5wb3BvdmVyKSB7CiAgICAgICAgICAgIHRoaXMucG9wb3Zlci5zaG93KCk7CiAgICAgICAgfQogICAgICAgIC8vIFJlc2V0IGF1dG9kaXNtaXNzIGlmIHZhbHVlIGhhcyBjaGFuZ2VkCiAgICAgICAgaWYgKG5ld0F1dG9kaXNtaXNzICE9PSBvbGRBdXRvZGlzbWlzcykgewogICAgICAgICAgICB0aGlzLnNldEF1dG9EaXNtaXNzKCk7CiAgICAgICAgfQogICAgfTsKICAgIFVuZG9Qb3B1cFdyYXBwZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBjbGFzc05hbWUgPSBfYS5jbGFzc05hbWUsIGZvcmNlQ2VudGVyID0gX2EuZm9yY2VDZW50ZXIsIG9uRGlzbWlzcyA9IF9hLm9uRGlzbWlzczsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3ZlciwgeyByZWY6IHRoaXMuaGFuZGxlUG9wb3ZlclJlZiwgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCd1bmRvLXBvcHVwLXdyYXBwZXInLCBjbGFzc05hbWUsIHsgJ2ZvcmNlLWNlbnRlcic6ICEhZm9yY2VDZW50ZXIgfSksIG9uSGlkZTogb25EaXNtaXNzLCBvblNob3c6IHRoaXMuaGFuZGxlU2hvdywgYXV0b0ZvY3VzT2ZmOiB0cnVlLCBwZXJzaXN0ZW50OiB0cnVlLCBmYWRlc091dDogdHJ1ZSB9LCB0aGlzLnByb3BzLmNoaWxkcmVuKSk7CiAgICB9OwogICAgcmV0dXJuIFVuZG9Qb3B1cFdyYXBwZXI7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBVbmRvUG9wdXBXcmFwcGVyOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopupWrapper.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopupWrapper.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,UAAU,MAAM,YAAY,CAAC;AACpC,OAAO,OAAO,MAAM,iCAAiC,CAAC;AAEtD,OAAO,yBAAyB,CAAC;AAYjC;IAA+B,oCAA0B;IAIvD;QAAA,YACE,iBAAO,SACR;QA6BD,gBAAU,GAAG;YACX,KAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC,CAAA;QAED,oBAAc,GAAG,UAAC,IAAkC;YAAlC,qBAAA,EAAA,gBAAkC;YAC1C,IAAA,qDAAmB,CAAgB;YAC3C,IAAI,mBAAmB,KAAK,SAAS,EAAE;gBACrC,IAAM,SAAO,GAAG,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC;gBACtC,IAAI,KAAI,CAAC,OAAO,EAAE;oBAChB,YAAY,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;iBAC5B;gBACD,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAC9B;oBACE,IAAI,SAAO,KAAK,KAAI,CAAC,KAAK,CAAC,UAAU,IAAI,KAAI,CAAC,OAAO,EAAE;wBACrD,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;qBACrB;gBACH,CAAC,EACD,mBAAmB,CACpB,CAAC;aACH;QACH,CAAC,CAAA;QAED,sBAAgB,GAAG,UAAC,GAAY;YAC9B,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACrB,CAAC,CAAA;QAED,iBAAW,GAAG,UAAC,CAAsC;YACnD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC3B,CAAC,CAAA;;IA3DD,CAAC;IAED,+CAAoB,GAApB;QACE,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC5B;IACH,CAAC;IAED,4CAAiB,GAAjB;QACE,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACrB;QAED,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,6CAAkB,GAAlB,UAAmB,QAAe;QAChC,IAAM,cAAc,GAAG,QAAQ,CAAC,mBAAmB,CAAC;QACpD,IAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC;QACtD,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACrB;QAED,yCAAyC;QACzC,IAAI,cAAc,KAAK,cAAc,EAAE;YACrC,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;IACH,CAAC;IAkCD,iCAAM,GAAN;QACQ,IAAA,eAAkD,EAAhD,wBAAS,EAAE,4BAAW,EAAE,wBAAwB,CAAC;QAEzD,OAAO,CACL,oBAAC,OAAO,IACN,GAAG,EAAE,IAAI,CAAC,gBAAgB,EAC1B,SAAS,EAAE,UAAU,CAAC,oBAAoB,EAAE,SAAS,EAAE,EAAG,cAAc,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,EAC1F,MAAM,EAAE,SAAS,EACjB,MAAM,EAAE,IAAI,CAAC,UAAU,EACvB,YAAY,QACZ,UAAU,EAAE,IAAI,EAChB,QAAQ,UAEP,IAAI,CAAC,KAAK,CAAC,QAAQ,CACZ,CACX,CAAC;IACJ,CAAC;IACH,uBAAC;AAAD,CAAC,AApFD,CAA+B,KAAK,CAAC,aAAa,GAoFjD;AAED,eAAe,gBAAgB,CAAC","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport Popover from '@src/components/Popover/Popover';\n\nimport './UndoPopupWrapper.scss';\n\ninterface Props {\n  className?: string;\n  children: any;\n  autoDismissDuration?: number;\n  resourceId?: string;\n  forceCenter?: boolean;\n  onUndoClick: () => void;\n  onDismiss: () => void;\n}\n\nclass UndoPopupWrapper extends React.PureComponent<Props> {\n  popover: Popover;\n  private timeout: NodeJS.Timer;\n\n  constructor() {\n    super();\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  componentDidMount() {\n    if (this.popover) {\n      this.popover.show();\n    }\n\n    this.setAutoDismiss();\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    const oldAutodismiss = oldProps.autoDismissDuration;\n    const newAutodismiss = this.props.autoDismissDuration;\n    if (this.popover) {\n      this.popover.show();\n    }\n\n    // Reset autodismiss if value has changed\n    if (newAutodismiss !== oldAutodismiss) {\n      this.setAutoDismiss();\n    }\n  }\n\n  handleShow = () => {\n    this.setAutoDismiss();\n  }\n\n  setAutoDismiss = (time: number|undefined = undefined) => {\n    const { autoDismissDuration } = this.props;\n    if (autoDismissDuration !== undefined) {\n      const current = this.props.resourceId;\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n      this.timeout = global.setTimeout(\n        () => {\n          if (current === this.props.resourceId && this.popover) {\n            this.popover.hide();\n          }\n        },\n        autoDismissDuration,\n      );\n    }\n  }\n\n  handlePopoverRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  onUndoClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onUndoClick();\n  }\n\n  render() {\n    const { className, forceCenter, onDismiss } = this.props;\n\n    return (\n      <Popover\n        ref={this.handlePopoverRef}\n        className={classnames('undo-popup-wrapper', className, {  'force-center': !!forceCenter })}\n        onHide={onDismiss}\n        onShow={this.handleShow}\n        autoFocusOff\n        persistent={true}\n        fadesOut\n      >\n        {this.props.children}\n      </Popover>\n    );\n  }\n}\n\nexport default UndoPopupWrapper;\n"]}]}