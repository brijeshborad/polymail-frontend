{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/SearchDropdown/SearchDropdown.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/SearchDropdown/SearchDropdown.tsx","mtime":1675280254008},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgeyBmaW5kSW5kZXgsIGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IERpc2Nsb3N1cmUgZnJvbSAnQHNyYy9jb21wb25lbnRzL0ljb25zL0Rpc2Nsb3N1cmUuc3ZnJzsKaW1wb3J0IFBvcG92ZXIgZnJvbSAnQHNyYy9jb21wb25lbnRzL1BvcG92ZXIvUG9wb3Zlcic7CmltcG9ydCB7IEtleUNvZGUgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IExvYWRlciBmcm9tICdAc3JjL2NvbXBvbmVudHMvTG9hZGVyL0xvYWRlcic7CmltcG9ydCAnLi9TZWFyY2hEcm9wZG93bi5zY3NzJzsKdmFyIFNlYXJjaERyb3Bkb3duID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFNlYXJjaERyb3Bkb3duLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU2VhcmNoRHJvcGRvd24ocHJvcHMpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVDbGlja091dHNpZGUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgcG9wb3ZlclNob3duID0gX3RoaXMuc3RhdGUucG9wb3ZlclNob3duOwogICAgICAgICAgICBpZiAoX3RoaXMucmVmICYmIF90aGlzLnBvcG92ZXIgJiYgIV90aGlzLnJlZi5jb250YWlucyhlLnRhcmdldCkgJiYgcG9wb3ZlclNob3duKSB7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgX3RoaXMucG9wb3Zlci5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVBvcG92ZXJSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLnBvcG92ZXIgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zaG93UG9wb3ZlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLnBvcG92ZXIpIHsKICAgICAgICAgICAgICAgIF90aGlzLnBvcG92ZXIuc2hvdygpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVPcGVuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHNob3dQb3BvdmVyT25FbXB0eVF1ZXJ5ID0gX3RoaXMucHJvcHMuc2hvd1BvcG92ZXJPbkVtcHR5UXVlcnk7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnN0YXRlLCBwb3BvdmVyU2hvd24gPSBfYS5wb3BvdmVyU2hvd24sIHF1ZXJ5ID0gX2EucXVlcnk7CiAgICAgICAgICAgIHZhciBzaG91bGRTaG93ID0gc2hvd1BvcG92ZXJPbkVtcHR5UXVlcnkgfHwgcXVlcnk7CiAgICAgICAgICAgIGlmICghcG9wb3ZlclNob3duICYmIHNob3VsZFNob3cpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIF90aGlzLnNob3dQb3BvdmVyKCk7CiAgICAgICAgICAgICAgICBfdGhpcy5mb2N1c0lucHV0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVNlbGVjdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBpdGVtSWQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5sb29rdXA7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBpdGVtcyA9IF9hLml0ZW1zLCBvblNlbGVjdCA9IF9hLm9uU2VsZWN0OwogICAgICAgICAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtSWQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3RoaXMucG9wb3ZlcikgewogICAgICAgICAgICAgICAgX3RoaXMucG9wb3Zlci5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGluZGV4ID0gaXRlbXMubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiBpLmlkOyB9KS5pbmRleE9mKGl0ZW1JZCk7CiAgICAgICAgICAgIC8vIHJlc2V0IHZhbHVlcyBvbiBzZWxlY3QKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgc2VsZWN0ZWRJbmRleDogaW5kZXgsCiAgICAgICAgICAgICAgICBxdWVyeTogdW5kZWZpbmVkLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgb25TZWxlY3QoaXRlbXNbaW5kZXhdKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUlucHV0UmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5pbnB1dCA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmZvY3VzSW5wdXQgPSBmdW5jdGlvbiAodGhyb3dGb2N1c1RvRW5kKSB7CiAgICAgICAgICAgIF90aGlzLnRpbWVvdXQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5pbnB1dC5mb2N1cygpOwogICAgICAgICAgICAgICAgLy8gc2V0IGN1cnNvciB0byBlbmQKICAgICAgICAgICAgICAgIGlmICh0aHJvd0ZvY3VzVG9FbmQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gX3RoaXMuaW5wdXQudmFsdWUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKGxlbmd0aCwgbGVuZ3RoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVJbnB1dEZvY3VzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hvd1BvcG92ZXJPbkVtcHR5UXVlcnkgPSBfdGhpcy5wcm9wcy5zaG93UG9wb3Zlck9uRW1wdHlRdWVyeTsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMuc3RhdGUsIHBvcG92ZXJTaG93biA9IF9hLnBvcG92ZXJTaG93biwgcXVlcnkgPSBfYS5xdWVyeTsKICAgICAgICAgICAgdmFyIHNob3VsZFNob3cgPSBzaG93UG9wb3Zlck9uRW1wdHlRdWVyeSB8fCBxdWVyeTsKICAgICAgICAgICAgaWYgKCFwb3BvdmVyU2hvd24gJiYgc2hvdWxkU2hvdykgewogICAgICAgICAgICAgICAgX3RoaXMuc2hvd1BvcG92ZXIoKTsKICAgICAgICAgICAgICAgIF90aGlzLmZvY3VzSW5wdXQoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgc2hvd1BvcG92ZXJPbkVtcHR5UXVlcnkgPSBfdGhpcy5wcm9wcy5zaG93UG9wb3Zlck9uRW1wdHlRdWVyeTsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMuc3RhdGUsIG1vdXNlSW5Qb3BvdmVyID0gX2EubW91c2VJblBvcG92ZXIsIHNlbGVjdGVkSW5kZXggPSBfYS5zZWxlY3RlZEluZGV4LCBwb3BvdmVyU2hvd24gPSBfYS5wb3BvdmVyU2hvd247CiAgICAgICAgICAgIHZhciBxdWVyeSA9IF90aGlzLmlucHV0LnZhbHVlOwogICAgICAgICAgICB2YXIgc3RhcnQgPSBfdGhpcy5pbnB1dC5zZWxlY3Rpb25TdGFydDsKICAgICAgICAgICAgdmFyIGVuZCA9IF90aGlzLmlucHV0LnNlbGVjdGlvbkVuZDsKICAgICAgICAgICAgaWYgKHF1ZXJ5KSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hJdGVtcyhxdWVyeSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gY2xlYXIgc2VsZWN0aW9uIGluZGV4IG9uIHNlYXJjaAogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnksCiAgICAgICAgICAgICAgICBzZWxlY3RlZEluZGV4OiBtb3VzZUluUG9wb3ZlciA/IHNlbGVjdGVkSW5kZXggOiAwLAogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgc2hvdWxkU2hvdyA9IHNob3dQb3BvdmVyT25FbXB0eVF1ZXJ5IHx8IHF1ZXJ5OwogICAgICAgICAgICAgICAgaWYgKCFwb3BvdmVyU2hvd24gJiYgc2hvdWxkU2hvdykgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3dQb3BvdmVyKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoIXNob3VsZFNob3cgJiYgcG9wb3ZlclNob3duKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9wb3Zlci5oaWRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgJiYgZW5kKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIGVuZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5mb2N1c0lucHV0KCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRW50ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnN0YXRlLCBzZWxlY3RlZEluZGV4ID0gX2Euc2VsZWN0ZWRJbmRleCwgcG9wb3ZlclNob3duID0gX2EucG9wb3ZlclNob3duOwogICAgICAgICAgICB2YXIgX2IgPSBfdGhpcy5wcm9wcywgaXRlbXMgPSBfYi5pdGVtcywgb25TZWxlY3QgPSBfYi5vblNlbGVjdDsKICAgICAgICAgICAgaWYgKHBvcG92ZXJTaG93biAmJiBzZWxlY3RlZEluZGV4IDwgaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5wb3BvdmVyLmhpZGUoKTsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBxdWVyeTogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IDAsCiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZm9jdXNJbnB1dCh0cnVlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgb25TZWxlY3QoaXRlbXNbc2VsZWN0ZWRJbmRleF0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMuc3RhdGUsIHBvcG92ZXJTaG93biA9IF9hLnBvcG92ZXJTaG93biwgc2VsZWN0ZWRJbmRleCA9IF9hLnNlbGVjdGVkSW5kZXg7CiAgICAgICAgICAgIHZhciBpdGVtcyA9IF90aGlzLnByb3BzLml0ZW1zOwogICAgICAgICAgICB2YXIgaGFuZGxlZCA9IGZhbHNlOwogICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkgewogICAgICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlVwOgogICAgICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c0luZGV4ID0gc2VsZWN0ZWRJbmRleCAtIDE7CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzSW5kZXggPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkSW5kZXg6IHByZXZpb3VzSW5kZXggfSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGUuRG93bjoKICAgICAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gc2VsZWN0ZWRJbmRleCArIDE7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRJbmRleCA+PSBpdGVtcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRJbmRleDogbmV4dEluZGV4IH0pOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkVudGVyOgogICAgICAgICAgICAgICAgICAgIGlmIChwb3BvdmVyU2hvd24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZUVudGVyKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlRhYjoKICAgICAgICAgICAgICAgICAgICBpZiAocG9wb3ZlclNob3duKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvcG92ZXIuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5Fc2M6CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9wb3Zlci5oaWRlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OiBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGFuZGxlZCkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUG9wb3ZlclNob3cgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgcG9wb3ZlclNob3duOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUG9wb3ZlckhpZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgcG9wb3ZlclNob3duOiBmYWxzZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMucmVmID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTW91c2VFbnRlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBwb3BvdmVyU2hvd24gPSBfdGhpcy5zdGF0ZS5wb3BvdmVyU2hvd247CiAgICAgICAgICAgIHZhciBpdGVtcyA9IF90aGlzLnByb3BzLml0ZW1zOwogICAgICAgICAgICB2YXIgaXRlbUlkID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubG9va3VwOwogICAgICAgICAgICBpZiAoaXRlbUlkICYmIHBvcG92ZXJTaG93bikgewogICAgICAgICAgICAgICAgdmFyIGl0ZW1JbmRleCA9IGZpbmRJbmRleChpdGVtcywgeyBpZDogaXRlbUlkIH0pOwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZEluZGV4OiBpdGVtSW5kZXgsIG1vdXNlSW5Qb3BvdmVyOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVNb3VzZUxlYXZlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBtb3VzZUluUG9wb3ZlcjogZmFsc2UsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc2VhcmNoSXRlbXMgPSBwcm9wcy5kZWJvdW5jZSA/IGRlYm91bmNlKHByb3BzLm9uU2VhcmNoLCA1MDApIDogcHJvcHMub25TZWFyY2g7CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IDAsCiAgICAgICAgICAgIHBvcG92ZXJTaG93bjogZmFsc2UsCiAgICAgICAgICAgIG1vdXNlSW5Qb3BvdmVyOiBmYWxzZSwKICAgICAgICB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFNlYXJjaERyb3Bkb3duLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZUNsaWNrT3V0c2lkZSk7CiAgICB9OwogICAgU2VhcmNoRHJvcGRvd24ucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlQ2xpY2tPdXRzaWRlKTsKICAgIH07CiAgICBTZWFyY2hEcm9wZG93bi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgcGxhY2Vob2xkZXIgPSBfYS5wbGFjZWhvbGRlciwgbG9hZGluZyA9IF9hLmxvYWRpbmcsIGl0ZW1zID0gX2EuaXRlbXMsIHNob3dEaXNjbG9zdXJlID0gX2Euc2hvd0Rpc2Nsb3N1cmUsIHNlbGVjdGVkSXRlbUluZGV4ID0gX2Euc2VsZWN0ZWRJdGVtSW5kZXg7CiAgICAgICAgdmFyIF9iID0gdGhpcy5zdGF0ZSwgcXVlcnkgPSBfYi5xdWVyeSwgc2VsZWN0ZWRJbmRleCA9IF9iLnNlbGVjdGVkSW5kZXg7CiAgICAgICAgdmFyIHNlbGVjdGVkOwogICAgICAgIGlmIChxdWVyeSA9PT0gdW5kZWZpbmVkICYmIHNlbGVjdGVkSXRlbUluZGV4ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgc2VsZWN0ZWQgPSBpdGVtc1tzZWxlY3RlZEl0ZW1JbmRleF07CiAgICAgICAgfQogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzZWFyY2gtZHJvcGRvd24iLCByZWY6IHRoaXMuaGFuZGxlUmVmIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgb25DbGljazogdGhpcy5oYW5kbGVPcGVuLCBjbGFzc05hbWU6ICJzZWxlY3QiIH0sCiAgICAgICAgICAgICAgICBzZWxlY3RlZCAmJiBzZWxlY3RlZC5waG90b1VybCAmJgogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7IGNsYXNzTmFtZTogImF2YXRhciIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgeyBzcmM6IHNlbGVjdGVkLnBob3RvVXJsIH0pKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgeyBkaXI6ICJhdXRvIiwgY2xhc3NOYW1lOiAiaW5wdXQiLCB2YWx1ZTogc2VsZWN0ZWQgJiYgc2VsZWN0ZWQuZGlzcGxheU5hbWUsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlLCBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsIHJlZjogdGhpcy5oYW5kbGVJbnB1dFJlZiwgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sIG9uRm9jdXM6IHRoaXMuaGFuZGxlSW5wdXRGb2N1cywgdGFiSW5kZXg6IDAgfSksCiAgICAgICAgICAgICAgICAhIXNob3dEaXNjbG9zdXJlICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGlzY2xvc3VyZSwgeyBjbGFzc05hbWU6ICJkaXNjbG9zdXJlIiB9KSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3ZlciwgeyBjbGFzc05hbWU6ICJmb3JtLWRyb3Bkb3duLXBvcG92ZXIiLCByZWY6IHRoaXMuaGFuZGxlUG9wb3ZlclJlZiwgb25TaG93OiB0aGlzLmhhbmRsZVBvcG92ZXJTaG93LCBvbkhpZGU6IHRoaXMuaGFuZGxlUG9wb3ZlckhpZGUsIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLCBvbk1vdXNlTGVhdmU6IHRoaXMuaGFuZGxlTW91c2VMZWF2ZSwgcGVyc2lzdGVudDogdHJ1ZSB9LAogICAgICAgICAgICAgICAgbG9hZGluZyAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRlciwgbnVsbCksCiAgICAgICAgICAgICAgICAhbG9hZGluZyAmJiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGkpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygnaXRlbScsIHsgc2VsZWN0ZWQ6IHNlbGVjdGVkSW5kZXggPT09IGkgfSksICJkYXRhLWxvb2t1cCI6IGl0ZW0uaWQsIGtleTogaSwgb25DbGljazogX3RoaXMuaGFuZGxlU2VsZWN0LCBvbk1vdXNlRW50ZXI6IF90aGlzLmhhbmRsZU1vdXNlRW50ZXIsIHRhYkluZGV4OiAtMSB9LAogICAgICAgICAgICAgICAgICAgIGl0ZW0ucGhvdG9VcmwgJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiAiYXZhdGFyIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJpbWciLCB7IHNyYzogaXRlbS5waG90b1VybCB9KSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiAibmFtZSIgfSwgaXRlbS5kaXNwbGF5TmFtZSkpKTsgfSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFNlYXJjaERyb3Bkb3duOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgU2VhcmNoRHJvcGRvd247Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/SearchDropdown/SearchDropdown.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/SearchDropdown/SearchDropdown.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { findIndex, debounce } from 'lodash';\n\nimport Disclosure from '@src/components/Icons/Disclosure.svg';\nimport Popover from '@src/components/Popover/Popover';\n\nimport { KeyCode } from '@src/types';\nimport Loader from '@src/components/Loader/Loader';\nimport './SearchDropdown.scss';\n\nexport interface SearchDropdownItem {\n  id: string;\n  photoUrl?: string;\n  displayName: string;\n  data: any;\n}\n\nexport interface Props {\n  placeholder?: string;\n  onSearch: (query: string) => void;\n  onSelect: (value: SearchDropdownItem) => void;\n  loading: boolean;\n  items: SearchDropdownItem[];\n  debounce?: boolean;\n  showDisclosure?: boolean;\n  selectedItemIndex?: number;\n  showPopoverOnEmptyQuery?: boolean;\n}\n\ninterface State {\n  query?: string;\n  popoverShown: boolean;\n  selectedIndex: number;\n  mouseInPopover: boolean;\n}\n\nclass SearchDropdown extends React.PureComponent<Props, State> {\n  popover: Popover;\n  input: HTMLInputElement;\n  timeout: NodeJS.Timer;\n  ref: HTMLElement;\n  searchItems: any;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.searchItems = props.debounce ? debounce(props.onSearch, 500) : props.onSearch;\n\n    this.state = {\n      selectedIndex: 0,\n      popoverShown: false,\n      mouseInPopover: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  }\n\n  handleClickOutside = (e: KeyboardEvent) => {\n    const { popoverShown } = this.state;\n\n    if (this.ref && this.popover && !this.ref.contains(e.target as Node) && popoverShown) {\n      e.stopPropagation();\n      e.preventDefault();\n      this.popover.hide();\n    }\n  }\n\n  handlePopoverRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  showPopover = () => {\n    if (this.popover) {\n      this.popover.show();\n    }\n  }\n\n  handleOpen = (e: React.MouseEvent<HTMLElement>) => {\n    const { showPopoverOnEmptyQuery } = this.props;\n    const { popoverShown, query } = this.state;\n\n    const shouldShow = showPopoverOnEmptyQuery || query;\n    if (!popoverShown && shouldShow) {\n      e.preventDefault();\n      this.showPopover();\n      this.focusInput();\n    }\n  }\n\n  handleSelect = (e: React.MouseEvent<HTMLButtonElement>) => {\n    const itemId = e.currentTarget.dataset.lookup;\n    const { items, onSelect } = this.props;\n\n    if (!items || !itemId) {\n      return;\n    }\n\n    if (this.popover) {\n      this.popover.hide();\n    }\n\n    const index = items.map(i => i.id).indexOf(itemId);\n\n    // reset values on select\n    this.setState(\n      {\n        selectedIndex: index,\n        query: undefined,\n      },\n    );\n\n    onSelect(items[index]);\n  }\n\n  handleInputRef = (ref: HTMLInputElement) => {\n    this.input = ref;\n  }\n\n  focusInput = (throwFocusToEnd?: boolean) => {\n    this.timeout = global.setTimeout(\n      () => {\n        this.input.focus();\n\n        // set cursor to end\n        if (throwFocusToEnd) {\n          const length = this.input.value.length;\n          this.input.setSelectionRange(length, length);\n        }\n      },\n      0,\n    );\n  }\n\n  handleInputFocus = () => {\n    const { showPopoverOnEmptyQuery } = this.props;\n    const { popoverShown, query } = this.state;\n\n    const shouldShow = showPopoverOnEmptyQuery || query;\n    if (!popoverShown && shouldShow) {\n      this.showPopover();\n      this.focusInput();\n    }\n  }\n\n  handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { showPopoverOnEmptyQuery } = this.props;\n    const { mouseInPopover, selectedIndex, popoverShown } = this.state;\n    const query = this.input.value;\n    const start = this.input.selectionStart;\n    const end = this.input.selectionEnd;\n\n    if (query) {\n      this.searchItems(query);\n    }\n\n    // clear selection index on search\n    this.setState(\n      {\n        query,\n        selectedIndex: mouseInPopover ? selectedIndex : 0,\n      },\n      () => {\n        const shouldShow = showPopoverOnEmptyQuery || query;\n        if (!popoverShown && shouldShow) {\n          this.showPopover();\n        }\n        if (!shouldShow && popoverShown) {\n          this.popover.hide();\n        }\n\n        if (start && end) {\n          this.input.setSelectionRange(start, end);\n        }\n        this.focusInput();\n      },\n    );\n  }\n\n  handleEnter = () => {\n    const { selectedIndex, popoverShown } = this.state;\n    const { items, onSelect } = this.props;\n\n    if (popoverShown && selectedIndex < items.length) {\n      this.popover.hide();\n      this.setState(\n        {\n          query: undefined,\n          selectedIndex: 0,\n        },\n        () => {\n          this.focusInput(true);\n        },\n      );\n\n      onSelect(items[selectedIndex]);\n    }\n  }\n\n  handleKeyDown = (e: React.KeyboardEvent<HTMLElement>) => {\n    const { popoverShown, selectedIndex } = this.state;\n    const { items } = this.props;\n\n    let handled = false;\n    switch (e.keyCode) {\n      case KeyCode.Up:\n        const previousIndex = selectedIndex - 1;\n        handled = true;\n        if (previousIndex < 0) {\n          break;\n        }\n        this.setState({ selectedIndex: previousIndex });\n        break;\n      case KeyCode.Down:\n        handled = true;\n        const nextIndex = selectedIndex + 1;\n        if (nextIndex >= items.length) {\n          break;\n        }\n\n        this.setState({ selectedIndex: nextIndex });\n        break;\n      case KeyCode.Enter:\n        if (popoverShown) {\n          handled = true;\n          this.handleEnter();\n        }\n        break;\n      case KeyCode.Tab:\n        if (popoverShown) {\n          this.popover.hide();\n        }\n        break;\n      case KeyCode.Esc:\n        handled = true;\n        this.popover.hide();\n        break;\n      default: break;\n    }\n\n    if (handled) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  handlePopoverShow = () => {\n    this.setState({ popoverShown: true });\n  }\n\n  handlePopoverHide = () => {\n    this.setState({ popoverShown: false });\n  }\n\n  handleRef = (ref: HTMLDivElement) => {\n    this.ref = ref;\n  }\n\n  handleMouseEnter = (e: React.MouseEvent<HTMLElement>) => {\n    const { popoverShown } = this.state;\n    const { items } = this.props;\n    const itemId = e.currentTarget.dataset.lookup;\n\n    if (itemId && popoverShown) {\n      const itemIndex = findIndex(items, { id: itemId });\n      this.setState({ selectedIndex: itemIndex, mouseInPopover: true });\n      return;\n    }\n  }\n\n  handleMouseLeave = () => {\n    this.setState({\n      mouseInPopover: false,\n    });\n  }\n\n  render() {\n    const {\n      placeholder,\n      loading,\n      items,\n      showDisclosure,\n      selectedItemIndex,\n    } = this.props;\n    const { query, selectedIndex } = this.state;\n\n    let selected;\n    if (query === undefined && selectedItemIndex !== undefined) {\n      selected = items[selectedItemIndex];\n    }\n\n    return (\n      <div className=\"search-dropdown\" ref={this.handleRef}>\n        <div\n          onClick={this.handleOpen}\n          className=\"select\"\n        >\n          {selected && selected.photoUrl &&\n            <span className=\"avatar\"><img src={selected.photoUrl} /></span>}\n          <input\n            dir=\"auto\"\n            className=\"input\"\n            value={selected && selected.displayName}\n            onChange={this.handleInputChange}\n            placeholder={placeholder}\n            ref={this.handleInputRef}\n            onKeyDown={this.handleKeyDown}\n            onFocus={this.handleInputFocus}\n            tabIndex={0}\n          />\n          {!!showDisclosure && <Disclosure className=\"disclosure\" />}\n        </div>\n        <Popover\n          className=\"form-dropdown-popover\"\n          ref={this.handlePopoverRef}\n          onShow={this.handlePopoverShow}\n          onHide={this.handlePopoverHide}\n          onKeyDown={this.handleKeyDown}\n          onMouseLeave={this.handleMouseLeave}\n          persistent\n        >\n          {loading && <Loader />}\n          {!loading && items.map((item, i) => (\n            <button\n              className={classnames(\n                'item',\n                { selected: selectedIndex === i },\n              )}\n              data-lookup={item.id}\n              key={i}\n              onClick={this.handleSelect}\n              onMouseEnter={this.handleMouseEnter}\n              tabIndex={-1}\n            >\n              {item.photoUrl && <span className=\"avatar\"><img src={item.photoUrl} /></span>}\n              <span className=\"name\">{item.displayName}</span>\n            </button>\n          ))}\n        </Popover>\n      </div>\n    );\n  }\n}\n\nexport default SearchDropdown;\n"]}]}