{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceDetail/StageList/StageList.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceDetail/StageList/StageList.tsx","mtime":1675280254088},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCAnLi9TdGFnZUxpc3Quc2Nzcyc7CmltcG9ydCBDaGVja2JveCBmcm9tICdAc3JjL2NvbXBvbmVudHMvRm9ybS9DaGVja2JveC9DaGVja2JveCc7CmltcG9ydCBTdGFnZUNlbGwgZnJvbSAnQHNyYy9yb3V0ZXMvU2VxdWVuY2VzL3JvdXRlcy9TZXF1ZW5jZURldGFpbC9TdGFnZUxpc3QvU3RhZ2VDZWxsJzsKaW1wb3J0IHsgZmlsdGVyLCBpbmNsdWRlcyB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IGNyZWF0ZVNlcXVlbmNlU3RhZ2UgfSBmcm9tICdAc3JjL21vY2tzL3NlcXVlbmNlcyc7CmltcG9ydCB7IFB1bHNlR2VtIH0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0Jhc2UvUHVsc2VHZW0nOwppbXBvcnQgQ29uZmlybSBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9Db25maXJtJzsKdmFyIFN0YWdlTGlzdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhTdGFnZUxpc3QsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTdGFnZUxpc3QoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVDaGVja0FsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBfdGhpcy5zdGF0ZS5jaGVja2VkOwogICAgICAgICAgICB2YXIgc3RhZ2VzID0gX3RoaXMucHJvcHMuc3RhZ2VzOwogICAgICAgICAgICB2YXIgbmV3Q2hlY2tlZCA9IHt9OwogICAgICAgICAgICAvLyBUT0RPKFNISU4pOiBEZXRlcm1pbmUgbWVjaGFuaXNtIHRvIHNob3cgbG9hZGluZyB2cyBlbXB0eSBzdGF0ZSB3aGVuIGNhbGxpbmcgbGlzdAogICAgICAgICAgICBpZiAoIXN0YWdlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgYWxsQ2hlY2tlZCA9IGZpbHRlcihjaGVja2VkLCBmdW5jdGlvbiAoYykgeyByZXR1cm4gYzsgfSkubGVuZ3RoID09PSBzdGFnZXMubGVuZ3RoOwogICAgICAgICAgICBpZiAoYWxsQ2hlY2tlZCkgewogICAgICAgICAgICAgICAgc3RhZ2VzLmZvckVhY2goZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocy5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NoZWNrZWRbcy5kYXRhLmlkXSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgc3RhZ2VzLmZvckVhY2goZnVuY3Rpb24gKHMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocy5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NoZWNrZWRbcy5kYXRhLmlkXSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IG5ld0NoZWNrZWQsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ2hlY2tib3hDaGFuZ2UgPSBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICB2YXIgY2hlY2tlZCA9IF90aGlzLnN0YXRlLmNoZWNrZWQ7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBjaGVja2VkKSwgKF9hID0ge30sIF9hW2lkXSA9ICFjaGVja2VkW2lkXSwgX2EpKSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICAvLyBUT0RPKFNISU4pOiBVcGRhdGUgaGFuZGxpbmcgb2YgY3JlYXRpbmcgbmV3IHNlcXVlbmNlIHN0YWdlICYgaW5zdGFuY2Ugd2l0aCBVSSBpbXBsZW1lbnRhdGlvbgogICAgICAgIF90aGlzLmhhbmRsZUNyZWF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGNyZWF0ZVN0YWdlID0gX2EuY3JlYXRlU3RhZ2UsIHNlbGVjdGVkU2VxdWVuY2UgPSBfYS5zZWxlY3RlZFNlcXVlbmNlOwogICAgICAgICAgICB2YXIgbW9ja1N0YWdlID0gY3JlYXRlU2VxdWVuY2VTdGFnZSh7IHNlcXVlbmNlOiBzZWxlY3RlZFNlcXVlbmNlICYmIHNlbGVjdGVkU2VxdWVuY2UuaWQgfSk7CiAgICAgICAgICAgIGNyZWF0ZVN0YWdlKHsgc3RhZ2U6IG1vY2tTdGFnZSwgbmF2aWdhdGVUbzogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURlbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGRlbGV0ZVN0YWdlID0gX2EuZGVsZXRlU3RhZ2UsIHN0YWdlcyA9IF9hLnN0YWdlczsKICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBPYmplY3Qua2V5cyhfdGhpcy5zdGF0ZS5jaGVja2VkKQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAhIV90aGlzLnN0YXRlLmNoZWNrZWRba2V5XTsgfSk7CiAgICAgICAgICAgIHZhciBjaGVja2VkU3RhZ2VzID0gc3RhZ2VzCiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChzdGFnZSkgeyByZXR1cm4gc3RhZ2UuZGF0YSAmJiBpbmNsdWRlcyhjaGVja2VkLCBzdGFnZS5kYXRhLmlkKTsgfSk7CiAgICAgICAgICAgIHZhciBkZWxldGVIYW5kbGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gUnVuIHRocm91Z2ggYWxsIHN0YWdlcyBhbmQgZGVsZXRlCiAgICAgICAgICAgICAgICBjaGVja2VkU3RhZ2VzLmZvckVhY2goZnVuY3Rpb24gKHJlc291cmNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWdlID0gcmVzb3VyY2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICBkZWxldGVTdGFnZShzdGFnZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIFNob3cgY29uZmlybSBkaWFsb2d1ZSB0byBkZWxldGUgc3RhZ2VzCiAgICAgICAgICAgIHZhciBkZWxldGVEZXNjcmlwdG9yID0gT2JqZWN0LmtleXMoY2hlY2tlZCkubGVuZ3RoID4gMQogICAgICAgICAgICAgICAgPyAndGhlc2UgU3RhZ2VzJwogICAgICAgICAgICAgICAgOiAndGhpcyBTdGFnZSc7CiAgICAgICAgICAgIHZhciBjb25maXJtUHJvcHMgPSB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkRlbGV0ZSAiICsgZGVsZXRlRGVzY3JpcHRvciArICI/IiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlICIgKyBkZWxldGVEZXNjcmlwdG9yICsgIj8iCiAgICAgICAgICAgICAgICAgICAgKyAnIEFueSBhbmFseXRpY3MgYW5kIHJlY2lwaWVudHMgZGF0YSB3aWxsIGJlIGxvc3QgZm9yZXZlci4nLAogICAgICAgICAgICAgICAgY29uZmlybUNvcHk6ICdEZWxldGUnLAogICAgICAgICAgICAgICAgY2FuY2VsQ29weTogJ0NhbmNlbCcsCiAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlbGV0ZUhhbmRsZXIoKTsgfSwKICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogdW5kZWZpbmVkIH0pOyB9LAogICAgICAgICAgICB9OwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjb25maXJtUHJvcHM6IGNvbmZpcm1Qcm9wcywKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVEdXBsaWNhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBzdGFnZXMgPSBfYS5zdGFnZXMsIGR1cGxpY2F0ZVN0YWdlID0gX2EuZHVwbGljYXRlU3RhZ2U7CiAgICAgICAgICAgIHZhciBjaGVja2VkID0gT2JqZWN0LmtleXMoX3RoaXMuc3RhdGUuY2hlY2tlZCkKICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gISFfdGhpcy5zdGF0ZS5jaGVja2VkW2tleV07IH0pOwogICAgICAgICAgICB2YXIgY2hlY2tlZFN0YWdlcyA9IHN0YWdlcwogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoc3RhZ2UpIHsgcmV0dXJuIHN0YWdlLmRhdGEgJiYgaW5jbHVkZXMoY2hlY2tlZCwgc3RhZ2UuZGF0YS5pZCk7IH0pOwogICAgICAgICAgICBpZiAoY2hlY2tlZFN0YWdlcy5sZW5ndGggPT09IDEgJiYgY2hlY2tlZFN0YWdlc1swXS5kYXRhKSB7CiAgICAgICAgICAgICAgICBkdXBsaWNhdGVTdGFnZShjaGVja2VkU3RhZ2VzWzBdLmRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgY2hlY2tlZDoge30sCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTdGFnZUxpc3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHN0YWdlcyA9IF9hLnN0YWdlcywgc2VsZWN0ZWRTZXF1ZW5jZSA9IF9hLnNlbGVjdGVkU2VxdWVuY2UsIHNob3dGaXJzdFN0YWdlR2VtID0gX2Euc2hvd0ZpcnN0U3RhZ2VHZW0sIHNob3dOZXdTdGFnZUdlbSA9IF9hLnNob3dOZXdTdGFnZUdlbTsKICAgICAgICB2YXIgX2IgPSB0aGlzLnN0YXRlLCBjaGVja2VkID0gX2IuY2hlY2tlZCwgY29uZmlybVByb3BzID0gX2IuY29uZmlybVByb3BzOwogICAgICAgIC8vIFRPRE8oU0hJTik6IElkZW50aWZ5IHdheSB0byBjaGVjayBpZiBsaXN0IGlzIHJlZnJlc2hpbmcgb3IgZW1wdHkKICAgICAgICAvLyBpZiAoIXN0YWdlcy5sZW5ndGgpIHsKICAgICAgICAvLyAgIHJldHVybiA8ZGl2IC8+OwogICAgICAgIC8vIH0KICAgICAgICB2YXIgbnVtQ2hlY2tlZCA9IGZpbHRlcihjaGVja2VkLCBmdW5jdGlvbiAoYykgeyByZXR1cm4gYzsgfSkubGVuZ3RoOwogICAgICAgIHZhciBhbGxDaGVja2VkID0gZmlsdGVyKGNoZWNrZWQsIGZ1bmN0aW9uIChjKSB7IHJldHVybiBjOyB9KS5sZW5ndGggPT09IHN0YWdlcy5sZW5ndGg7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInN0YWdlLWxpc3QiIH0sCiAgICAgICAgICAgIGNvbmZpcm1Qcm9wcyAmJgogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb25maXJtLCBfX2Fzc2lnbih7fSwgY29uZmlybVByb3BzKSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiaGVhZGVyIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjaGVja2VkIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2hlY2tib3gsIHsgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hlY2tBbGwsIGNoZWNrZWQ6IGFsbENoZWNrZWQgfSkpLAogICAgICAgICAgICAgICAgISFudW1DaGVja2VkICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWN0aW9uLWJhciIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJzZWxlY3RlZC1udW0iIH0sIG51bUNoZWNrZWQgKyAiIHNlbGVjdGVkIiksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2R1cGxpY2F0ZScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBudW1DaGVja2VkICE9PSAxLAogICAgICAgICAgICAgICAgICAgICAgICB9KSwgb25DbGljazogdGhpcy5oYW5kbGVEdXBsaWNhdGUgfSwgIkR1cGxpY2F0ZSIpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIG51bGwsICJFeHBvcnQiKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogImRlbGV0ZSIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlRGVsZXRlIH0sICJEZWxldGUiKSksCiAgICAgICAgICAgICAgICBzaG93TmV3U3RhZ2VHZW0gJiYKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFB1bHNlR2VtLCB7IGxlZnQ6ICItMjBweCIsIHRvcDogIi0xNnB4IiB9KSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAibmV3LXN0YWdlIiwgb25DbGljazogdGhpcy5oYW5kbGVDcmVhdGUgfSwgIisgTmV3IFN0YWdlIikpLAogICAgICAgICAgICAhIXN0YWdlcy5sZW5ndGggJiYgc3RhZ2VzLm1hcChmdW5jdGlvbiAocywgaSkgeyByZXR1cm4gKHMuZGF0YSAmJgogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgIHNob3dGaXJzdFN0YWdlR2VtICYmIGkgPT09IDAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChQdWxzZUdlbSwgeyB0b3A6ICIzNHB4IiwgbGVmdDogIi0yOHB4IiB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFN0YWdlQ2VsbCwgeyBzdGFnZTogcy5kYXRhLCBrZXk6IHMuZGF0YS5pZCwgb25DaGVja2JveENoYW5nZTogX3RoaXMuaGFuZGxlQ2hlY2tib3hDaGFuZ2UsIGNoZWNrZWQ6IGNoZWNrZWRbcy5kYXRhLmlkXSwgaW5kZXg6IHMuZGF0YS5vcmRlciwgcmVhZE9ubHk6IHNlbGVjdGVkU2VxdWVuY2UgJiYgc2VsZWN0ZWRTZXF1ZW5jZS5hcmNoaXZlZCB9KSwKICAgICAgICAgICAgICAgIF0pOyB9KSkpOwogICAgfTsKICAgIHJldHVybiBTdGFnZUxpc3Q7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBTdGFnZUxpc3Q7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceDetail/StageList/StageList.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceDetail/StageList/StageList.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { Resource } from '@src/types';\nimport { SequenceStage, Sequence } from '@src/types/sequences';\nimport './StageList.scss';\nimport Checkbox from '@src/components/Form/Checkbox/Checkbox';\nimport StageCell from '@src/routes/Sequences/routes/SequenceDetail/StageList/StageCell';\nimport { filter, includes } from 'lodash';\nimport { createSequenceStage } from '@src/mocks/sequences';\nimport { SequenceStageCreateMeta, SequenceStageUpdateMeta } from '@src/ducks/sequenceStages';\nimport { PulseGem } from '@src/components/Base/PulseGem';\nimport Confirm, { Props as ConfirmProps } from '@src/components/Base/Confirm';\nimport { RouteComponentProps } from 'react-router';\n\nexport interface StateProps {\n  selectedSequence?: Sequence;\n  stages: Array<Resource<SequenceStage>>;\n  showNewStageGem?: boolean;\n  showFirstStageGem?: boolean;\n}\n\nexport interface DispatchProps {\n  createStage: (meta: SequenceStageCreateMeta) => void;\n  deleteStage: (stage: SequenceStage) => void;\n  updateStage: (stage: SequenceStageUpdateMeta) => void;\n  duplicateStage: (stage: SequenceStage) => void;\n}\n\nexport interface State {\n  checked: { [id: string]: boolean };\n  confirmProps?: ConfirmProps;\n}\n\nclass StageList extends React.PureComponent<\n  StateProps & DispatchProps & RouteComponentProps<any>, State\n> {\n  constructor() {\n    super();\n\n    this.state = {\n      checked: {},\n    };\n  }\n\n  handleCheckAll = () => {\n    const { checked } = this.state;\n    const { stages } = this.props;\n    const newChecked = {};\n\n    // TODO(SHIN): Determine mechanism to show loading vs empty state when calling list\n    if (!stages.length) {\n      return;\n    }\n\n    const allChecked = filter(checked, c => c).length === stages.length;\n\n    if (allChecked) {\n      stages.forEach((s) => {\n        if (s.data) {\n          newChecked[s.data.id] = false;\n        }\n      });\n    } else {\n      stages.forEach((s) => {\n        if (s.data) {\n          newChecked[s.data.id] = false;\n        }\n      });\n    }\n\n    this.setState({\n      checked: newChecked,\n    });\n  }\n\n  handleCheckboxChange = (id: string) => {\n    const{ checked } = this.state;\n\n    this.setState({\n      checked: {\n        ...checked,\n        [id]: !checked[id],\n      },\n    });\n  }\n\n  // TODO(SHIN): Update handling of creating new sequence stage & instance with UI implementation\n  handleCreate = () => {\n    const { createStage, selectedSequence } = this.props;\n    const mockStage = createSequenceStage({ sequence: selectedSequence && selectedSequence.id });\n    createStage({ stage: mockStage, navigateTo: true });\n  }\n\n  handleDelete = () => {\n    const { deleteStage, stages } = this.props;\n    const checked = Object.keys(this.state.checked)\n      .filter(key => !!this.state.checked[key]);\n    const checkedStages = stages\n      .filter(stage => stage.data && includes(checked, stage.data.id));\n\n    const deleteHandler = () => {\n      // Run through all stages and delete\n      checkedStages.forEach((resource) => {\n        const stage = resource.data!;\n        deleteStage(stage);\n      });\n\n      this.setState({ confirmProps: undefined });\n    };\n\n    // Show confirm dialogue to delete stages\n    const deleteDescriptor = Object.keys(checked).length > 1\n      ? 'these Stages'\n      : 'this Stage';\n    const confirmProps: ConfirmProps = {\n      title: `Delete ${deleteDescriptor}?`,\n      message: `Are you sure you want to delete ${deleteDescriptor}?`\n        + ' Any analytics and recipients data will be lost forever.',\n      confirmCopy: 'Delete',\n      cancelCopy: 'Cancel',\n      onConfirm: () => deleteHandler(),\n      onCancel: () => this.setState({ confirmProps: undefined }),\n    };\n\n    this.setState({\n      confirmProps,\n    });\n  }\n\n  handleDuplicate = () => {\n    const { stages, duplicateStage } = this.props;\n\n    const checked = Object.keys(this.state.checked)\n      .filter(key => !!this.state.checked[key]);\n    const checkedStages = stages\n      .filter(stage => stage.data && includes(checked, stage.data.id));\n\n    if (checkedStages.length === 1 && checkedStages[0].data) {\n      duplicateStage(checkedStages[0].data);\n    }\n  }\n\n  render() {\n    const { stages, selectedSequence, showFirstStageGem, showNewStageGem } = this.props;\n    const { checked, confirmProps } = this.state;\n\n    // TODO(SHIN): Identify way to check if list is refreshing or empty\n    // if (!stages.length) {\n    //   return <div />;\n    // }\n\n    const numChecked = filter(checked, c => c).length;\n    const allChecked = filter(checked, c => c).length === stages.length;\n\n    return (\n      <div className=\"stage-list\">\n        {confirmProps &&\n          <Confirm\n            {...confirmProps}\n          />\n        }\n        <div className=\"header\">\n          <div className=\"checked\">\n            <Checkbox\n              onChange={this.handleCheckAll}\n              checked={allChecked}\n            />\n          </div>\n          {!!numChecked && <div className=\"action-bar\">\n            <span className=\"selected-num\">\n              {`${numChecked} selected`}\n            </span>\n            <button\n              className={classnames('duplicate', {\n                disabled: numChecked !== 1,\n              })}\n              onClick={this.handleDuplicate}\n            >\n              Duplicate\n            </button>\n            <button>Export</button>\n            <button\n              className=\"delete\"\n              onClick={this.handleDelete}\n            >\n              Delete\n            </button>\n          </div>}\n          {showNewStageGem &&\n            <PulseGem left=\"-20px\" top=\"-16px\" />\n          }\n          <button\n            className=\"new-stage\"\n            onClick={this.handleCreate}\n          >\n            + New Stage\n          </button>\n        </div>\n        {!!stages.length && stages.map((s, i) => (s.data &&\n          [\n            showFirstStageGem && i === 0 &&\n              <PulseGem top=\"34px\" left=\"-28px\" />,\n            <StageCell\n              stage={s.data}\n              key={s.data.id}\n              onCheckboxChange={this.handleCheckboxChange}\n              checked={checked[s.data.id]}\n              index={s.data.order}\n              readOnly={selectedSequence && selectedSequence.archived}\n            />,\n          ]\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default StageList;\n"]}]}