{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/datetime.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/datetime.tsx","mtime":1675280254062},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgY2hyb25vLCB7IHBhcnNlIH0gZnJvbSAnY2hyb25vLW5vZGUnOwppbXBvcnQgeyB1bmlxQnkgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBhcHBseVRpbWVCbG9ja0RlZmF1bHRzIH0gZnJvbSAnQHNyYy9saWIvZXZlbnQnOwppbXBvcnQgeyBzb3J0TWF0Y2hlcyB9IGZyb20gJ0BzcmMvbGliL21hdGNoZXInOwppbXBvcnQgeyB0eXBlYWhlYWRSZWdleCB9IGZyb20gJy4vdHlwZWFoZWFkJzsKLy8gTW9ja3MgdXNlZCBmb3IgbW9tZW50IGNhbGN1bGF0aW9uCmV4cG9ydCB2YXIgbW9ja05vdyA9IG5ldyBEYXRlKERhdGUuVVRDKDUwMTgsIDIsIDEsIDUsIDAsIDAsIDApKTsKdmFyIG1vY2tOb3dNb21lbnQ7CmV4cG9ydCB2YXIgZW5hYmxlTW9ja01vbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgIG1vY2tOb3dNb21lbnQgPSBtb21lbnQobW9ja05vdyk7Cn07CmV4cG9ydCB2YXIgbm93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKG1vY2tOb3dNb21lbnQgJiYgbW9tZW50KG1vY2tOb3dNb21lbnQpKSB8fCBtb21lbnQoKTsgfTsKZXhwb3J0IHZhciBzaG93TW9zdFJlY2VudCA9IGZ1bmN0aW9uIChkYXRlLCBzaG93VGltZSkgewogICAgaWYgKHNob3dUaW1lID09PSB2b2lkIDApIHsgc2hvd1RpbWUgPSBmYWxzZTsgfQogICAgdmFyIG5vd0RhdGUgPSBub3coKTsKICAgIHZhciBtb21lbnREYXRlID0gbW9tZW50KGRhdGUpOwogICAgdmFyIHNhbWVEYXkgPSBub3dEYXRlLmZvcm1hdCgnTU0gREQgWVlZWScpID09PSBtb21lbnREYXRlLmZvcm1hdCgnTU0gREQgWVlZWScpOwogICAgdmFyIHNhbWVZZWFyID0gbm93RGF0ZS5mb3JtYXQoJ1lZWVknKSA9PT0gbW9tZW50RGF0ZS5mb3JtYXQoJ1lZWVknKTsKICAgIHZhciB0aW1lRm9ybWF0ID0gJ2g6bW0gQSc7CiAgICAvLyBTYW1lIGRheQogICAgaWYgKHNhbWVEYXkpIHsKICAgICAgICByZXR1cm4gbW9tZW50RGF0ZS5mb3JtYXQodGltZUZvcm1hdCk7CiAgICB9CiAgICAvLyBTYW1lIHllYXIKICAgIGlmIChzYW1lWWVhcikgewogICAgICAgIHZhciBzYW1lWWVhckZvcm1hdCA9ICdNTU0gRCc7CiAgICAgICAgaWYgKHNob3dUaW1lKSB7CiAgICAgICAgICAgIHNhbWVZZWFyRm9ybWF0ICs9ICgnWyxdICcgKyB0aW1lRm9ybWF0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG1vbWVudERhdGUuZm9ybWF0KHNhbWVZZWFyRm9ybWF0KTsKICAgIH0KICAgIC8vIG9sZGVyIHRoYW4gMSB5ZWFyCiAgICB2YXIgc2hvd1llYXJGb3JtYXQgPSAnTU1NIEQgWVlZWSc7CiAgICBpZiAoc2hvd1RpbWUpIHsKICAgICAgICBzaG93WWVhckZvcm1hdCArPSAoJ1ssXSAnICsgdGltZUZvcm1hdCk7CiAgICB9CiAgICByZXR1cm4gbW9tZW50RGF0ZS5mb3JtYXQoc2hvd1llYXJGb3JtYXQpOwp9OwovLyBGb3JtYXQgZm9yIGRldGFpbGVkIGRhdGUgKyB0aW1lIHRvb2x0aXAKZXhwb3J0IHZhciBUT09MVElQX0ZPUk1BVCA9ICdkZGQsIE1NTSBELCBZWVlZIFthdF0gaDptbSBBJzsKLy8gRGF0ZXMgVHlwZWFoZWFkcwovLyBUT0RPKFNISU4pOiBEaXNjdXNzIHdoZXJlIHRvIHN0b3JlIGxhc3QgdXNlZCBkYXRlCmV4cG9ydCB2YXIgVFlQRUFIRUFEX0ZPUk1BVCA9ICdkZGQsIE1NTSBEIFthdF0gaDptbSBBJzsKZXhwb3J0IHZhciBUWVBFQUhFQURfREVGQVVMVFMgPSBmdW5jdGlvbiAocHJlZnMpIHsgcmV0dXJuIFsKICAgIHsKICAgICAgICB0aXRsZTogJ0xhdGVyIFRvZGF5JywKICAgICAgICBtb21lbnQ6IG5vdygpLmFkZChwcmVmcy5sYXRlclRvZGF5LCAnc2Vjb25kcycpLAogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ1RoaXMgRXZlbmluZycsCiAgICAgICAgbW9tZW50OiBub3coKQogICAgICAgICAgICAuaG91cigwKQogICAgICAgICAgICAubWludXRlKDApCiAgICAgICAgICAgIC5hZGQocHJlZnMubGF0ZXJFdmVuaW5nLCAnc2Vjb25kcycpLAogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ1RvbW9ycm93IE1vcm5pbmcnLAogICAgICAgIG1vbWVudDogbm93KCkKICAgICAgICAgICAgLmFkZCgxLCAnZGF5JykKICAgICAgICAgICAgLmhvdXIoMCkKICAgICAgICAgICAgLm1pbnV0ZSgwKQogICAgICAgICAgICAuYWRkKHByZWZzLmxhdGVyTW9ybmluZywgJ3NlY29uZHMnKSwKICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICdJbiBUd28gRGF5cycsCiAgICAgICAgbW9tZW50OiBub3coKQogICAgICAgICAgICAuYWRkKDIsICdkYXlzJykKICAgICAgICAgICAgLmhvdXIoMCkKICAgICAgICAgICAgLm1pbnV0ZSgwKQogICAgICAgICAgICAuYWRkKHByZWZzLmxhdGVyTW9ybmluZywgJ3NlY29uZHMnKSwKICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICdJbiBUaHJlZSBEYXlzJywKICAgICAgICBtb21lbnQ6IG5vdygpCiAgICAgICAgICAgIC5hZGQoMywgJ2RheXMnKQogICAgICAgICAgICAuaG91cigwKQogICAgICAgICAgICAubWludXRlKDApCiAgICAgICAgICAgIC5hZGQocHJlZnMubGF0ZXJNb3JuaW5nLCAnc2Vjb25kcycpLAogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ1RoaXMgV2Vla2VuZCcsCiAgICAgICAgbW9tZW50OiBub3coKQogICAgICAgICAgICAuZGF5KDYpCiAgICAgICAgICAgIC5ob3VyKDApCiAgICAgICAgICAgIC5taW51dGUoMCkKICAgICAgICAgICAgLmFkZChwcmVmcy5sYXRlck1vcm5pbmcsICdzZWNvbmRzJyksCiAgICB9LAogICAgewogICAgICAgIHRpdGxlOiAnTmV4dCBXZWVrJywKICAgICAgICBtb21lbnQ6IG5vdygpCiAgICAgICAgICAgIC5hZGQoNywgJ2RheXMnKQogICAgICAgICAgICAuaG91cigwKQogICAgICAgICAgICAubWludXRlKDApCiAgICAgICAgICAgIC5hZGQocHJlZnMubGF0ZXJNb3JuaW5nLCAnc2Vjb25kcycpLAogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ1RvbW9ycm93IEV2ZW5pbmcnLAogICAgICAgIG1vbWVudDogbm93KCkKICAgICAgICAgICAgLmFkZCgxLCAnZGF5JykKICAgICAgICAgICAgLmhvdXIoMCkKICAgICAgICAgICAgLm1pbnV0ZSgwKQogICAgICAgICAgICAuYWRkKHByZWZzLmxhdGVyRXZlbmluZywgJ3NlY29uZHMnKSwKICAgIH0sCl07IH07CmV4cG9ydCB2YXIgbGFzdFNjaGVkdWxlZFR5cGVhaGVhZCA9IG51bGw7CmV4cG9ydCB2YXIgc2V0TGFzdFNjaGVkdWxlZFR5cGVhaGVhZCA9IGZ1bmN0aW9uIChkYXRlKSB7CiAgICBsYXN0U2NoZWR1bGVkVHlwZWFoZWFkID0gZGF0ZTsKfTsKLy8gVE9ETyhTSElOKTogRmlndXJlIG91dCBVUkkgZW5jb2RpbmcgZm9yIHBhc3RlICYgc3BhY2UKLy8gVE9ETyhTSElOKTogRml4IGlzc3VlIHdoZXJlIHNhbWUgZGF0ZSB3aWxsIGFkZCBhbm90aGVyIHllYXIKLy8gVHlwZWFoZWFkIE9wdGlvbnMgd2lsbCBnaXZlIGRhdGUgb3B0aW9ucyBpbiB0aGUgZnV0dXJlIGJhc2VkIG9mZiBvZiBOTFAgKyBleGlzdGluZyBkZWZhdWx0cwpleHBvcnQgdmFyIHR5cGVhaGVhZE9wdGlvbnMgPSBmdW5jdGlvbiAocGFydGlhbCwgcHJlZnMpIHsKICAgIHZhciBxdWVyeSA9IHBhcnRpYWwudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgcmVnZXggPSB0eXBlYWhlYWRSZWdleChxdWVyeSk7CiAgICB2YXIgZmlsdGVyZWRPcHRpb25zID0gVFlQRUFIRUFEX0RFRkFVTFRTKHByZWZzKQogICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKG9wdGlvbikgeyByZXR1cm4gb3B0aW9uLnRpdGxlLnRvTG93ZXJDYXNlKCkubWF0Y2gocmVnZXgpOyB9KTsKICAgIHZhciBub3dNb21lbnQgPSBub3coKTsKICAgIHZhciBsYXN0U2NoZWR1bGVkTW9tZW50ID0gbGFzdFNjaGVkdWxlZFR5cGVhaGVhZCAmJiBtb21lbnQobGFzdFNjaGVkdWxlZFR5cGVhaGVhZCk7CiAgICAvLyBOTFAgZGF0ZSBwYXJzaW5nCiAgICB2YXIgbmxwTWF0Y2hlcyA9IHBhcnNlKHBhcnRpYWwgKyAiIGZyb20gbm93Iiwgbm93TW9tZW50LnRvRGF0ZSgpLCB7IGZvcndhcmREYXRlOiB0cnVlIH0pOwogICAgLy8gSWYgZGF0ZSBpcyBpbiBmdXR1cmUKICAgIC8vIFRPRE8oU0hJTik6IFVwZGF0ZSBkYXRlIHRvIHBvdGVudGlhbGx5IG1vdmUgbmV4dCB5ZWFyIGRhdGUKICAgIGlmIChubHBNYXRjaGVzICYmIG5scE1hdGNoZXMubGVuZ3RoID4gMCkgewogICAgICAgIHZhciBubHBNYXRjaCA9IG5scE1hdGNoZXNbMF0uc3RhcnQ7CiAgICAgICAgdmFyIG5scFRleHQgPSBubHBNYXRjaGVzWzBdLnRleHQ7CiAgICAgICAgdmFyIG1vcm5pbmdJbmZlcnJlZCA9IGZhbHNlOwogICAgICAgIC8vIG9ubHkgc2V0IGlmIG5vdCBub29uCiAgICAgICAgaWYgKCFubHBUZXh0Lm1hdGNoKCdub29uJykgJiYgIW5scE1hdGNoLmlzQ2VydGFpbignaG91cicpKSB7CiAgICAgICAgICAgIHZhciBoYW5kbGVkID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChubHBUZXh0Lm1hdGNoKCdldmVuaW5nJykgfHwgbmxwVGV4dC5tYXRjaCgnbmlnaHQnKSkgewogICAgICAgICAgICAgICAgbmxwTWF0Y2guaW1wbHkoJ2hvdXInLCBwcmVmcy5sYXRlckV2ZW5pbmcgLyAzNjAwKTsKICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNldCBpbmZlcnJlZCBtb3JuaW5nIHRpbWUgJiBjaGVjayBpZiB0aW1lIGlzIGluZmVycmVkCiAgICAgICAgICAgIGlmICghaGFuZGxlZCAmJiBubHBNYXRjaC5nZXQoJ2hvdXInKSA9PT0gMTIpIHsKICAgICAgICAgICAgICAgIG5scE1hdGNoLmltcGx5KCdob3VyJywgcHJlZnMubGF0ZXJNb3JuaW5nIC8gMzYwMCk7CiAgICAgICAgICAgICAgICBubHBNYXRjaC5pbXBseSgnbWludXRlcycsIHByZWZzLmxhdGVyTW9ybmluZyAlIDYwKTsKICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgbW9ybmluZ0luZmVycmVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgbmxwRGF0ZSA9IG5scE1hdGNoLmRhdGUoKTsKICAgICAgICB2YXIgbmxwTW9tZW50ID0gbW9tZW50KG5scERhdGUpOwogICAgICAgIC8vIFNlZSBpZiBkYXRlIHdhcyBjb21wbGV0ZWx5IGluZmVycmVkCiAgICAgICAgdmFyIGtub3duVmFsdWVzID0gbmxwTWF0Y2gua25vd25WYWx1ZXM7CiAgICAgICAgdmFyIGluZmVycmVkRGF0ZSA9IGtub3duVmFsdWVzICYmICFPYmplY3Qua2V5cyhrbm93blZhbHVlcykubGVuZ3RoOwogICAgICAgIC8vIFRyeSBhZGRpbmcgb25lIHllYXIgaWYgZGF0ZSBpcyBiZWhpbmQKICAgICAgICBpZiAobmxwTW9tZW50IDwgbm93TW9tZW50ICYmICFpbmZlcnJlZERhdGUpIHsKICAgICAgICAgICAgdmFyIGV4cGxpY2l0VGltZSA9IG5scE1hdGNoLmlzQ2VydGFpbignaG91cicpIHx8IG5scE1hdGNoLmlzQ2VydGFpbignbWludXRlJyk7CiAgICAgICAgICAgIHZhciBleHBsaWNpdFdlZWtkYXkgPSBubHBNYXRjaC5pc0NlcnRhaW4oJ3dlZWtkYXknKTsKICAgICAgICAgICAgLy8gT25seSBtb3ZlIG9uZSBkYXkgcGFzdCBpZiBleHBsaWNpdCB0aW1lIGFuZCBkYXkgaXMgc2FtZSBkYXksIGJ1dCBpbiB0aGUgcGFzdAogICAgICAgICAgICBpZiAoZXhwbGljaXRUaW1lICYmICFleHBsaWNpdFdlZWtkYXkgJiYgbmxwTW9tZW50LmRheSA9PT0gbm93TW9tZW50LmRheSkgewogICAgICAgICAgICAgICAgbmxwTW9tZW50LmFkZCgxLCAnZGF5Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IC8vIE90aGVyd2lzZSBkbyB3ZWVrL3llYXIgYWR2YW5jZSBiYXNlZCBvZmYgb2YgZXhwbGljaXQgd2Vla2RheQogICAgICAgICAgICAgICAgbmxwTW9tZW50ID0gZXhwbGljaXRXZWVrZGF5CiAgICAgICAgICAgICAgICAgICAgPyBubHBNb21lbnQuYWRkKDEsICd3ZWVrJykKICAgICAgICAgICAgICAgICAgICA6IG5scE1vbWVudC5hZGQoMSwgJ3llYXInKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBTZXQgZGF0ZSBpZiB2YWxpZC4gRGVmYXVsdCB0aW1lIHRvIG1vcm5pbmcgb3RoZXJ3aXNlCiAgICAgICAgaWYgKG5scE1vbWVudCA+IG5vd01vbWVudCkgewogICAgICAgICAgICB2YXIgbGFzdE9wdGlvbl8xID0gewogICAgICAgICAgICAgICAgdGl0bGU6IG1vcm5pbmdJbmZlcnJlZCA/IHBhcnRpYWwgKyAnIChNb3JuaW5nKScgOiBwYXJ0aWFsLAogICAgICAgICAgICAgICAgbW9tZW50OiBubHBNb21lbnQsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIElkZW50aWZ5IGlmIG5scCBtYXRjaCBzaG91bGQgYmUgaW5qZWN0ZWQKICAgICAgICAgICAgdmFyIGluamVjdE5scCA9IGZpbHRlcmVkT3B0aW9ucwogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAob3B0aW9uKSB7IHJldHVybiBvcHRpb24ubW9tZW50LmlzU2FtZShsYXN0T3B0aW9uXzEubW9tZW50LCAnbWludXRlJyk7IH0pCiAgICAgICAgICAgICAgICAubGVuZ3RoID09PSAwOwogICAgICAgICAgICAvLyBQdXNoIE5MUCBtYXRjaCBpZiBub24tZXhpc3RlbnQgaW4gb3B0aW9ucy4gQWxzbyBjaGVjayB0aGF0IGl0J3Mgbm90IG1hdGNoaW5nIG9uIGp1c3QgJ25vdycKICAgICAgICAgICAgaWYgKGxhc3RPcHRpb25fMSAmJiBpbmplY3RObHAgJiYgbmxwVGV4dCAhPT0gJ25vdycpIHsKICAgICAgICAgICAgICAgIGZpbHRlcmVkT3B0aW9ucy5wdXNoKGxhc3RPcHRpb25fMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBJbnNlcnQgTGFzdCBVc2VkIE1vbWVudCBpZiBhZnRlciBwcmV2aW91c2x5IHNjaGVkdWxlZCBhIGRhdGUgY29tcGFyZWQgdG8gbm93CiAgICBpZiAobGFzdFNjaGVkdWxlZE1vbWVudCAmJiBsYXN0U2NoZWR1bGVkTW9tZW50LmlzQWZ0ZXIobm93TW9tZW50KSkgewogICAgICAgIC8vIE9ubHkgc2hvdyB3aGVuIG5vIGlucHV0IG9yIHdoZW4gbGFzdCB1c2VkIG1hdGNoZXMKICAgICAgICBpZiAoIXBhcnRpYWwubGVuZ3RoIHx8ICdMYXN0IFVzZWQnLm1hdGNoKHJlZ2V4KSkgewogICAgICAgICAgICBmaWx0ZXJlZE9wdGlvbnMudW5zaGlmdCh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0xhc3QgVXNlZCcsCiAgICAgICAgICAgICAgICBtb21lbnQ6IGxhc3RTY2hlZHVsZWRNb21lbnQsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KICAgIC8vIFNvcnQgbWF0Y2hlcyBhdCBlbmQgdG8gcHJpb3JpdGl6ZSBhbnkgcGFydGlhbCBpdGVtcyBhZGRlZCBieSBOTFAKICAgIHZhciBzb3J0ZWRNYXRjaGVzID0gc29ydE1hdGNoZXMoZmlsdGVyZWRPcHRpb25zLCBxdWVyeSwgJ3RpdGxlJyk7CiAgICByZXR1cm4gc29ydGVkTWF0Y2hlcy5tYXAoZnVuY3Rpb24gKG9wdGlvbikgeyByZXR1cm4gKHsKICAgICAgICB0aXRsZTogb3B0aW9uLnRpdGxlLAogICAgICAgIG1vbWVudDogb3B0aW9uLm1vbWVudCwKICAgICAgICBkZXNjOiBvcHRpb24ubW9tZW50LmZvcm1hdChUWVBFQUhFQURfRk9STUFUKSwKICAgICAgICB1bnNjaGVkdWxlOiBmYWxzZSwKICAgIH0pOyB9KTsKfTsKdmFyIE9ORVNfUExBQ0UgPSBbCiAgICB7IHRleHQ6ICdvbmUnLCBudW1iZXI6IDEgfSwKICAgIHsgdGV4dDogJ3R3bycsIG51bWJlcjogMiB9LAogICAgeyB0ZXh0OiAndGhyZWUnLCBudW1iZXI6IDMgfSwKICAgIHsgdGV4dDogJ2ZvdXInLCBudW1iZXI6IDQgfSwKICAgIHsgdGV4dDogJ2ZpdmUnLCBudW1iZXI6IDUgfSwKICAgIHsgdGV4dDogJ3NpeCcsIG51bWJlcjogNiB9LAogICAgeyB0ZXh0OiAnc2V2ZW4nLCBudW1iZXI6IDcgfSwKICAgIHsgdGV4dDogJ2VpZ2h0JywgbnVtYmVyOiA4IH0sCiAgICB7IHRleHQ6ICduaW5lJywgbnVtYmVyOiA5IH0sCiAgICB7IHRleHQ6ICd0ZW4nLCBudW1iZXI6IDEwIH0sCiAgICB7IHRleHQ6ICdlbGV2ZW4nLCBudW1iZXI6IDExIH0sCiAgICB7IHRleHQ6ICd0d2VsdmUnLCBudW1iZXI6IDEyIH0sCiAgICB7IHRleHQ6ICd0aGlydGVlbicsIG51bWJlcjogMTMgfSwKICAgIHsgdGV4dDogJ2ZvdXJ0ZWVuJywgbnVtYmVyOiAxNCB9LAogICAgeyB0ZXh0OiAnZmlmdGVlbicsIG51bWJlcjogMTUgfSwKICAgIHsgdGV4dDogJ3NpeHRlZW4nLCBudW1iZXI6IDE2IH0sCiAgICB7IHRleHQ6ICdzZXZlbnRlZW4nLCBudW1iZXI6IDE3IH0sCiAgICB7IHRleHQ6ICdlaWdodGVlbicsIG51bWJlcjogMTggfSwKICAgIHsgdGV4dDogJ25pbmV0ZWVuJywgbnVtYmVyOiAxOSB9LApdOwp2YXIgVEVOU19QTEFDRSA9IFsKICAgIHsgdGV4dDogJ3R3ZW50eScsIG51bWJlcjogMjAgfSwKICAgIHsgdGV4dDogJ3RoaXJ0eScsIG51bWJlcjogMzAgfSwKICAgIHsgdGV4dDogJ2ZvcnR5JywgbnVtYmVyOiA0MCB9LAogICAgeyB0ZXh0OiAnZmlmdHknLCBudW1iZXI6IDUwIH0sCiAgICB7IHRleHQ6ICdzaXh0eScsIG51bWJlcjogNjAgfSwKICAgIHsgdGV4dDogJ3NldmVudHknLCBudW1iZXI6IDcwIH0sCiAgICB7IHRleHQ6ICdlaWdodHknLCBudW1iZXI6IDgwIH0sCiAgICB7IHRleHQ6ICduaW5ldHknLCBudW1iZXI6IDkwIH0sCl07CnZhciBUSU1FX1JBTkdFUyA9IFsnZGF5JywgJ3dlZWsnLCAnbW9udGgnLCAneWVhciddOwp2YXIgREFURV9UWVBFQUhFQURfREVGQVVMVFMgPSBbCiAgICB7CiAgICAgICAgdGl0bGU6ICdUb2RheScsCiAgICAgICAgbW9tZW50OiBub3coKSwKICAgIH0sCiAgICB7CiAgICAgICAgdGl0bGU6ICdZZXN0ZXJkYXknLAogICAgICAgIG1vbWVudDogbm93KCkuc3VidHJhY3QoMSwgJ2RheScpLAogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ0xhc3QgV2VlaycsCiAgICAgICAgbW9tZW50OiBub3coKS5zdWJ0cmFjdCgxLCAnd2VlaycpLAogICAgfSwKICAgIHsKICAgICAgICB0aXRsZTogJ0xhc3QgTW9udGgnLAogICAgICAgIG1vbWVudDogbm93KCkuc3VidHJhY3QoMSwgJ21vbnRoJyksCiAgICB9LApdOwp2YXIgY2FwaXRhbGl6ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7CiAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBpZiAodGV4dC5sZW5ndGggPiAxKSB7CiAgICAgICAgcmV0dXJuIHRleHRbMF0udG9VcHBlckNhc2UoKSArIHRleHQuc2xpY2UoMSk7CiAgICB9CiAgICByZXR1cm4gdGV4dC50b1VwcGVyQ2FzZSgpOwp9Owp2YXIgZ2V0RGF0ZVR5cGVhaGVhZE9wdGlvbnMgPSBmdW5jdGlvbiAodGV4dCwgdmFsdWUpIHsKICAgIHJldHVybiBUSU1FX1JBTkdFUy5tYXAoZnVuY3Rpb24gKHJhbmdlKSB7IHJldHVybiAoewogICAgICAgIHRpdGxlOiBjYXBpdGFsaXplKHRleHQpICsgIiAiICsgKHJhbmdlICsgKHZhbHVlID4gMSA/ICdzJyA6ICcnKSkgKyAiIGFnbyIsCiAgICAgICAgbW9tZW50OiBub3coKS5zdWJ0cmFjdCh2YWx1ZSwgcmFuZ2UpLAogICAgfSk7IH0pOwp9Owp2YXIgQUxMX0RBVEVfT1BUSU9OUyA9IChmdW5jdGlvbiAoKSB7CiAgICB2YXIgb3B0aW9ucyA9IFtdOwogICAgT05FU19QTEFDRS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIChvcHRpb25zID0gb3B0aW9ucy5jb25jYXQoZ2V0RGF0ZVR5cGVhaGVhZE9wdGlvbnMob2JqLnRleHQsIG9iai5udW1iZXIpKSk7IH0pOwogICAgVEVOU19QTEFDRS5mb3JFYWNoKGZ1bmN0aW9uICh0ZW5zKSB7CiAgICAgICAgT05FU19QTEFDRS5mb3JFYWNoKGZ1bmN0aW9uIChvbmVzKSB7CiAgICAgICAgICAgIGlmIChvbmVzLm51bWJlciA8IDEwKSB7CiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucy5jb25jYXQoZ2V0RGF0ZVR5cGVhaGVhZE9wdGlvbnModGVucy50ZXh0ICsgIi0iICsgb25lcy50ZXh0LCB0ZW5zLm51bWJlciArIG9uZXMubnVtYmVyKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIG9wdGlvbnM7Cn0pKCk7CnZhciBwYXN0RGF0ZXNPbmx5UmVmaW5lciA9IG5ldyBjaHJvbm8uUmVmaW5lcigpOwpwYXN0RGF0ZXNPbmx5UmVmaW5lci5yZWZpbmUgPSBmdW5jdGlvbiAodGV4dCwgcmVzdWx0cykgewogICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICB2YXIgcmVmTW9tZW50ID0gbW9tZW50KHJlc3VsdC5yZWYpOwogICAgICAgIGlmIChyZWZNb21lbnQuaXNCZWZvcmUocmVzdWx0LnN0YXJ0Lm1vbWVudCgpKSkgewogICAgICAgICAgICByZXN1bHQuc3RhcnQuaW1wbHkoJ3llYXInLCByZWZNb21lbnQuZ2V0KCd5ZWFyJykgLSAxKTsKICAgICAgICB9CiAgICB9KTsKICAgIHJldHVybiByZXN1bHRzOwp9Owp2YXIgcGFzdERhdGVDaHJvbm8gPSBuZXcgY2hyb25vLkNocm9ubygpOwpwYXN0RGF0ZUNocm9uby5yZWZpbmVycy5wdXNoKHBhc3REYXRlc09ubHlSZWZpbmVyKTsKZXhwb3J0IHZhciBkYXRlVHlwZWFoZWFkT3B0aW9ucyA9IGZ1bmN0aW9uIChwYXJ0aWFsKSB7CiAgICBpZiAocGFydGlhbC5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gREFURV9UWVBFQUhFQURfREVGQVVMVFM7CiAgICB9CiAgICB2YXIgcGFyc2VkRGF0ZSA9IHBhc3REYXRlQ2hyb25vLnBhcnNlKHBhcnRpYWwsIG5vdygpLnRvRGF0ZSgpLCB1bmRlZmluZWQpOwogICAgdmFyIG9wdGlvbnMgPSBbXTsKICAgIGlmIChwYXJzZWREYXRlICYmIHBhcnNlZERhdGUubGVuZ3RoKSB7CiAgICAgICAgb3B0aW9ucyA9IHBhcnNlZERhdGUubWFwKGZ1bmN0aW9uIChwYXJzZWQpIHsgcmV0dXJuICh7CiAgICAgICAgICAgIHRpdGxlOiBjYXBpdGFsaXplKHBhcnNlZC50ZXh0KSwKICAgICAgICAgICAgbW9tZW50OiBtb21lbnQocGFyc2VkLnN0YXJ0LmRhdGUoKSksCiAgICAgICAgfSk7IH0pOwogICAgfQogICAgcmV0dXJuIHVuaXFCeShvcHRpb25zLmNvbmNhdChBTExfREFURV9PUFRJT05TLmZpbHRlcihmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIG9iai50aXRsZQogICAgICAgICAgICAudHJpbSgpCiAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgIC5tYXRjaChwYXJ0aWFsLnRyaW0oKS50b0xvd2VyQ2FzZSgpKTsKICAgIH0pKSwgZnVuY3Rpb24gKG9wdGlvbikgeyByZXR1cm4gb3B0aW9uLm1vbWVudC5mb3JtYXQoJ01NLURELVlZWVknKTsgfSk7Cn07CmV4cG9ydCB2YXIgc3RyaW5nVG9UaW1lQmxvY2sgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgIHZhciBkYXRlcyA9IHBhcnNlKHZhbHVlLCBuZXcgRGF0ZSgpLCB7IGZvcndhcmREYXRlOiB0cnVlIH0pOwogICAgdmFyIGV2ZW50TmFtZSA9IHZhbHVlLm1hdGNoKC9eKFx3fFxkfFxzKSsoXHNhdHxcc29uKS9nKTsKICAgIGlmIChkYXRlcyAmJiBkYXRlcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gYXBwbHlUaW1lQmxvY2tEZWZhdWx0cyh7CiAgICAgICAgICAgIHN0YXJ0VGltZTogbW9tZW50KGRhdGVzWzBdLnN0YXJ0LmRhdGUoKSksCiAgICAgICAgICAgIGVuZFRpbWU6IGRhdGVzWzBdLmVuZCA/IG1vbWVudChkYXRlc1swXS5lbmQuZGF0ZSgpKSA6CiAgICAgICAgICAgICAgICBtb21lbnQoZGF0ZXNbMF0uc3RhcnQuZGF0ZSgpKS5hZGQoMSwgJ2hvdXInKSwKICAgICAgICAgICAgZXZlbnQ6IHsKICAgICAgICAgICAgICAgIG5hbWU6IGV2ZW50TmFtZSA/IGV2ZW50TmFtZVswXS5zbGljZSgwLCBldmVudE5hbWVbMF0ubGVuZ3RoIC0gMykgOiAnTmV3IEV2ZW50JywKICAgICAgICAgICAgICAgIG5vdGVzOiAnJywKICAgICAgICAgICAgICAgIHJlY2lwaWVudHM6IFtdLAogICAgICAgICAgICAgICAgbG9jYXRpb246ICcnLAogICAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIGFwcGx5VGltZUJsb2NrRGVmYXVsdHMoewogICAgICAgIGV2ZW50OiB7CiAgICAgICAgICAgIG5hbWU6IGV2ZW50TmFtZSA/IGV2ZW50TmFtZVswXS5zbGljZSgwLCBldmVudE5hbWVbMF0ubGVuZ3RoIC0gMykgOiAnTmV3IEV2ZW50JywKICAgICAgICAgICAgbm90ZXM6ICcnLAogICAgICAgICAgICByZWNpcGllbnRzOiBbXSwKICAgICAgICAgICAgbG9jYXRpb246ICcnLAogICAgICAgIH0sCiAgICB9KTsKfTsKZXhwb3J0IHZhciBnZXRTZWNvbmRzU2luY2VNaWRuaWdodCA9IGZ1bmN0aW9uIChtKSB7CiAgICByZXR1cm4gKG0uaG91cnMoKSAqIDM2MDApICsgKG0ubWludXRlcygpICogNjApICsgKG0uc2Vjb25kcygpKTsKfTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/datetime.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/datetime.tsx"],"names":[],"mappings":"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","sourcesContent":["import moment, { Moment } from 'moment';\nimport chrono, { parse, ParsedResult } from 'chrono-node';\n\nimport { Preferences, TimeBlock } from '@src/types';\nimport { uniqBy } from 'lodash';\nimport { applyTimeBlockDefaults } from '@src/lib/event';\nimport { sortMatches } from '@src/lib/matcher';\nimport { typeaheadRegex } from './typeahead';\n\n// Mocks used for moment calculation\nexport const mockNow = new Date(Date.UTC(5018, 2, 1, 5, 0, 0, 0));\nlet mockNowMoment: Moment;\nexport const enableMockMoment = () => {\n  mockNowMoment = moment(mockNow);\n};\nexport const now = () => (mockNowMoment && moment(mockNowMoment)) || moment();\n\nexport const showMostRecent = (date: Date, showTime: boolean = false) => {\n  const nowDate = now();\n  const momentDate = moment(date);\n  const sameDay = nowDate.format('MM DD YYYY') === momentDate.format('MM DD YYYY');\n  const sameYear = nowDate.format('YYYY') === momentDate.format('YYYY');\n  const timeFormat = 'h:mm A';\n\n  // Same day\n  if (sameDay) {\n    return momentDate.format(timeFormat);\n  }\n\n  // Same year\n  if (sameYear) {\n    let sameYearFormat = 'MMM D';\n    if (showTime) {\n      sameYearFormat += ('[,] ' + timeFormat);\n    }\n    return momentDate.format(sameYearFormat);\n  }\n\n  // older than 1 year\n  let showYearFormat = 'MMM D YYYY';\n  if (showTime) {\n    showYearFormat += ('[,] ' + timeFormat);\n  }\n\n  return momentDate.format(showYearFormat);\n};\n\n// Format for detailed date + time tooltip\nexport const TOOLTIP_FORMAT = 'ddd, MMM D, YYYY [at] h:mm A';\n\n// Dates Typeaheads\n// TODO(SHIN): Discuss where to store last used date\nexport const TYPEAHEAD_FORMAT = 'ddd, MMM D [at] h:mm A';\nexport const TYPEAHEAD_DEFAULTS = (prefs: Preferences) => [\n  {\n    title: 'Later Today',\n    moment: now().add(prefs.laterToday, 'seconds'),\n  },\n  {\n    title: 'This Evening',\n    moment: now()\n      .hour(0)\n      .minute(0)\n      .add(prefs.laterEvening, 'seconds'),\n  },\n  {\n    title: 'Tomorrow Morning',\n    moment: now()\n      .add(1, 'day')\n      .hour(0)\n      .minute(0)\n      .add(prefs.laterMorning, 'seconds'),\n  },\n  {\n    title: 'In Two Days',\n    moment: now()\n      .add(2, 'days')\n      .hour(0)\n      .minute(0)\n      .add(prefs.laterMorning, 'seconds'),\n  },\n  {\n    title: 'In Three Days',\n    moment: now()\n      .add(3, 'days')\n      .hour(0)\n      .minute(0)\n      .add(prefs.laterMorning, 'seconds'),\n  },\n  {\n    title: 'This Weekend',\n    moment: now()\n      .day(6)\n      .hour(0)\n      .minute(0)\n      .add(prefs.laterMorning, 'seconds'),\n  },\n  {\n    title: 'Next Week',\n    moment: now()\n      .add(7, 'days')\n      .hour(0)\n      .minute(0)\n      .add(prefs.laterMorning, 'seconds'),\n  },\n  {\n    title: 'Tomorrow Evening',\n    moment: now()\n      .add(1, 'day')\n      .hour(0)\n      .minute(0)\n      .add(prefs.laterEvening, 'seconds'),\n  },\n];\n\nexport let lastScheduledTypeahead: Date | null = null;\nexport const setLastScheduledTypeahead = (date: Date|null) => {\n  lastScheduledTypeahead = date;\n};\n\n// TODO(SHIN): Figure out URI encoding for paste & space\n// TODO(SHIN): Fix issue where same date will add another year\n// Typeahead Options will give date options in the future based off of NLP + existing defaults\nexport const typeaheadOptions = (partial: string, prefs: Preferences) => {\n  const query = partial.trim().toLowerCase();\n  const regex = typeaheadRegex(query);\n\n  const filteredOptions = TYPEAHEAD_DEFAULTS(prefs)\n    .filter(option => option.title.toLowerCase().match(regex));\n  const nowMoment = now();\n  const lastScheduledMoment = lastScheduledTypeahead && moment(lastScheduledTypeahead);\n\n  // NLP date parsing\n  const nlpMatches = parse(`${partial} from now`, nowMoment.toDate(), { forwardDate: true });\n  // If date is in future\n  // TODO(SHIN): Update date to potentially move next year date\n  if (nlpMatches && nlpMatches.length > 0) {\n    const nlpMatch = nlpMatches[0].start;\n    const nlpText = nlpMatches[0].text;\n    let morningInferred = false;\n\n    // only set if not noon\n    if (!nlpText.match('noon') && !nlpMatch.isCertain('hour')) {\n      let handled = false;\n\n      if (nlpText.match('evening') || nlpText.match('night')) {\n        nlpMatch.imply('hour', prefs.laterEvening / 3600);\n        handled = true;\n      }\n\n      // Set inferred morning time & check if time is inferred\n      if (!handled && nlpMatch.get('hour') === 12) {\n        nlpMatch.imply('hour', prefs.laterMorning / 3600);\n        nlpMatch.imply('minutes', prefs.laterMorning % 60);\n        handled = true;\n        morningInferred = true;\n      }\n    }\n\n    const nlpDate = nlpMatch.date();\n    let nlpMoment = moment(nlpDate);\n\n    // See if date was completely inferred\n    const knownValues = nlpMatch.knownValues;\n    const inferredDate = knownValues && !Object.keys(knownValues).length;\n\n    // Try adding one year if date is behind\n    if (nlpMoment < nowMoment && !inferredDate) {\n      const explicitTime = nlpMatch.isCertain('hour') || nlpMatch.isCertain('minute');\n      const explicitWeekday = nlpMatch.isCertain('weekday');\n\n        // Only move one day past if explicit time and day is same day, but in the past\n      if (explicitTime && !explicitWeekday && nlpMoment.day === nowMoment.day) {\n        nlpMoment.add(1, 'day');\n      } else { // Otherwise do week/year advance based off of explicit weekday\n        nlpMoment = explicitWeekday\n          ? nlpMoment.add(1, 'week')\n          : nlpMoment.add(1, 'year');\n      }\n    }\n\n    // Set date if valid. Default time to morning otherwise\n    if (nlpMoment > nowMoment) {\n      const lastOption = {\n        title: morningInferred ? partial + ' (Morning)' : partial,\n        moment: nlpMoment,\n      };\n\n      // Identify if nlp match should be injected\n      const injectNlp = filteredOptions\n        .filter(option => option.moment.isSame(lastOption.moment, 'minute'))\n        .length === 0;\n\n      // Push NLP match if non-existent in options. Also check that it's not matching on just 'now'\n      if (lastOption && injectNlp && nlpText !== 'now') {\n        filteredOptions.push(lastOption);\n      }\n    }\n  }\n\n  // Insert Last Used Moment if after previously scheduled a date compared to now\n  if (lastScheduledMoment && lastScheduledMoment.isAfter(nowMoment)) {\n\n    // Only show when no input or when last used matches\n    if (!partial.length || 'Last Used'.match(regex)) {\n      filteredOptions.unshift({\n        title: 'Last Used',\n        moment: lastScheduledMoment,\n      });\n    }\n  }\n\n  // Sort matches at end to prioritize any partial items added by NLP\n  const sortedMatches = sortMatches(filteredOptions, query, 'title');\n  return sortedMatches.map(option => ({\n    title: option.title,\n    moment: option.moment,\n    desc: option.moment.format(TYPEAHEAD_FORMAT),\n    unschedule: false,\n  }));\n};\n\nconst ONES_PLACE = [\n  { text: 'one', number: 1 },\n  { text: 'two', number: 2 },\n  { text: 'three', number: 3 },\n  { text: 'four', number: 4 },\n  { text: 'five', number: 5 },\n  { text: 'six', number: 6 },\n  { text: 'seven', number: 7 },\n  { text: 'eight', number: 8 },\n  { text: 'nine', number: 9 },\n  { text: 'ten', number: 10 },\n  { text: 'eleven', number: 11 },\n  { text: 'twelve', number: 12 },\n  { text: 'thirteen', number: 13 },\n  { text: 'fourteen', number: 14 },\n  { text: 'fifteen', number: 15 },\n  { text: 'sixteen', number: 16 },\n  { text: 'seventeen', number: 17 },\n  { text: 'eighteen', number: 18 },\n  { text: 'nineteen', number: 19 },\n];\nconst TENS_PLACE = [\n  { text: 'twenty', number: 20 },\n  { text: 'thirty', number: 30 },\n  { text: 'forty', number: 40 },\n  { text: 'fifty', number: 50 },\n  { text: 'sixty', number: 60 },\n  { text: 'seventy', number: 70 },\n  { text: 'eighty', number: 80 },\n  { text: 'ninety', number: 90 },\n];\nconst TIME_RANGES = ['day', 'week', 'month', 'year'];\n\nconst DATE_TYPEAHEAD_DEFAULTS = [\n  {\n    title: 'Today',\n    moment: now(),\n  },\n  {\n    title: 'Yesterday',\n    moment: now().subtract(1, 'day'),\n  },\n  {\n    title: 'Last Week',\n    moment: now().subtract(1, 'week'),\n  },\n  {\n    title: 'Last Month',\n    moment: now().subtract(1, 'month'),\n  },\n];\n\nconst capitalize = (text: string) => {\n  if (typeof text !== 'string') {\n    return null;\n  }\n\n  if (text.length > 1) {\n    return text[0].toUpperCase() + text.slice(1);\n  }\n\n  return text.toUpperCase();\n};\n\nconst getDateTypeaheadOptions = (text: string, value: number) => {\n  return TIME_RANGES.map(range => ({\n    title: `${capitalize(text)} ${range + (value > 1 ? 's' : '')} ago`,\n    moment: now().subtract(value as any, range),\n  }));\n};\n\nconst ALL_DATE_OPTIONS = (() => {\n  let options: Array<{ title: string; moment: Moment }> = [];\n  ONES_PLACE.forEach(\n    obj => (options = options.concat(getDateTypeaheadOptions(obj.text, obj.number))),\n  );\n\n  TENS_PLACE.forEach((tens) => {\n    ONES_PLACE.forEach((ones) => {\n      if (ones.number < 10) {\n        options = options.concat(\n          getDateTypeaheadOptions(`${tens.text}-${ones.text}`, tens.number + ones.number),\n        );\n      }\n    });\n  });\n\n  return options;\n})();\n\nconst pastDatesOnlyRefiner = new chrono.Refiner();\npastDatesOnlyRefiner.refine = (text: string, results: ParsedResult[]) => {\n  results.forEach((result) => {\n    const refMoment = moment(result.ref);\n\n    if (refMoment.isBefore(result.start.moment())) {\n      result.start.imply('year', refMoment.get('year') - 1);\n    }\n  });\n\n  return results;\n};\n\nconst pastDateChrono = new chrono.Chrono();\npastDateChrono.refiners.push(pastDatesOnlyRefiner);\n\nexport const dateTypeaheadOptions = (partial: string) => {\n  if (partial.length === 0) {\n    return DATE_TYPEAHEAD_DEFAULTS;\n  }\n  const parsedDate = pastDateChrono.parse(partial, now().toDate(), undefined);\n  let options: Array<{ title: string, moment: Moment }> = [];\n  if (parsedDate && parsedDate.length) {\n    options = parsedDate.map((parsed: ParsedResult) => ({\n      title: capitalize(parsed.text),\n      moment: moment(parsed.start.date()),\n    }));\n  }\n\n  return uniqBy(\n    options.concat(\n      ALL_DATE_OPTIONS.filter(obj =>\n        obj.title\n          .trim()\n          .toLowerCase()\n          .match(partial.trim().toLowerCase()),\n      ),\n    ),\n    (option: { title: string, moment: Moment }) => option.moment.format('MM-DD-YYYY'),\n  );\n};\n\nexport const stringToTimeBlock = (value: string): TimeBlock => {\n  const dates = parse(value, new Date(), { forwardDate: true });\n  const eventName = value.match(/^(\\w|\\d|\\s)+(\\sat|\\son)/g);\n\n  if (dates && dates.length) {\n    return applyTimeBlockDefaults({\n      startTime: moment(dates[0].start.date()),\n      endTime: dates[0].end ? moment(dates[0].end.date()) :\n        moment(dates[0].start.date()).add(1, 'hour'),\n      event: {\n        name: eventName ? eventName[0].slice(0, eventName[0].length - 3) : 'New Event',\n        notes: '',\n        recipients: [],\n        location: '',\n      },\n    });\n  }\n\n  return applyTimeBlockDefaults({\n    event: {\n      name: eventName ? eventName[0].slice(0, eventName[0].length - 3) : 'New Event',\n      notes: '',\n      recipients: [],\n      location: '',\n    },\n  });\n};\n\nexport const getSecondsSinceMidnight = (m: moment.Moment) => {\n  return (m.hours() * 3600) + (m.minutes() * 60) + (m.seconds());\n};\n"]}]}