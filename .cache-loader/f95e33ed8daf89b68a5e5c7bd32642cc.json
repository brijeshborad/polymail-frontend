{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/FollowUp/FollowUp.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/FollowUp/FollowUp.tsx","mtime":1675280253997},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgQ29udHJvbFBvcG92ZXIgZnJvbSAnLi4vY29tcG9uZW50cy9Db250cm9sUG9wb3Zlcic7CmltcG9ydCB7IENvbW1hbmRDb250cm9sVHlwZSwgV2FpdGluZ1R5cGUsIE9uYm9hcmRpbmdUeXBlIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCBGb2xsb3dVcEljb24gZnJvbSAnQHNyYy9jb21wb25lbnRzL0ljb25zL0ZvbGxvd1VwLnN2Zyc7CmltcG9ydCB7IHR5cGVhaGVhZE9wdGlvbnMgfSBmcm9tICdAc3JjL2xpYi9kYXRldGltZSc7CmltcG9ydCAnLi9Gb2xsb3dVcC5zY3NzJzsKaW1wb3J0IHsgZ2V0T25ib2FyZGluZ0FjdGlvbnMgfSBmcm9tICdAc3JjL2xpYi9PbmJvYXJkaW5nRGlzcGF0Y2hlcic7CmltcG9ydCB7IEFtcGxpdHVkZUV2ZW50cywgbG9nQW1wbGl0dWRlRXZlbnQgfSBmcm9tICdAc3JjL2xpYi9hbXBsaXR1ZGUtYW5hbHl0aWNzJzsKdmFyIEZvbGxvd1VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKEZvbGxvd1VwLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gRm9sbG93VXAocHJvcHMpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZVNlbGVjdCA9IGZ1bmN0aW9uIChvcHRpb24sIGluZGV4KSB7CiAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBfdGhpcy5zdGF0ZS5vcHRpb25zOwogICAgICAgICAgICB2YXIgX2IgPSBfdGhpcy5wcm9wcywgdXBkYXRlRHJhZnQgPSBfYi51cGRhdGVEcmFmdCwgZHJhZnQgPSBfYi5kcmFmdCwgcnNiT25ib2FyZGluZyA9IF9iLnJzYk9uYm9hcmRpbmcsIHVwZGF0ZU9uYm9hcmRpbmcgPSBfYi51cGRhdGVPbmJvYXJkaW5nOwogICAgICAgICAgICAvLyBTZXQgc2NoZWR1bGVkIGRhdGUKICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gb3B0aW9uc1tpbmRleF07CiAgICAgICAgICAgIGlmIChkcmFmdCAmJiBzZWxlY3RlZCkgewogICAgICAgICAgICAgICAgLy8gSGFuZGxlIFJTQiBPbmJvYXJkaW5nCiAgICAgICAgICAgICAgICBpZiAocnNiT25ib2FyZGluZyAmJiByc2JPbmJvYXJkaW5nID09PSBPbmJvYXJkaW5nVHlwZS5Gb2xsb3dVcFJlbWluZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlT25ib2FyZGluZyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7IHN0ZXBzOiAoX2EgPSB7fSwgX2FbT25ib2FyZGluZ1R5cGUuRm9sbG93VXBSZW1pbmRlcl0gPSB0cnVlLCBfYSkgfSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuVG91clN0ZXBUaHJlZSwgeyBza2lwcGVkOiBmYWxzZSB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGdldE9uYm9hcmRpbmdBY3Rpb25zKCkubmV4dChPbmJvYXJkaW5nVHlwZS5Gb2xsb3dVcFJlbWluZGVyKTsKICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB3YWl0aW5nIG9iamVjdAogICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWQgPSBfX2Fzc2lnbih7fSwgZHJhZnQpOwogICAgICAgICAgICAgICAgdmFyIHdoZW4gPSBzZWxlY3RlZC5tb21lbnQ7CiAgICAgICAgICAgICAgICB2YXIgd2FpdGluZyA9IHsKICAgICAgICAgICAgICAgICAgICB3aGVuOiB3aGVuLnRvRGF0ZSgpLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IFdhaXRpbmdUeXBlLk5vUmVwbHksCiAgICAgICAgICAgICAgICAgICAgd2hlblJlbGF0aXZlOiB3aGVuLmRpZmYobW9tZW50KCksICdzZWNvbmRzJyksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdXBkYXRlZC53YWl0aW5nID0gd2FpdGluZzsKICAgICAgICAgICAgICAgIC8vIERpc3BhdGNoIHRocmVhZCBtb3ZlIG9wZXJhdGlvbiB3aXRoIHdoZW4gJiBjb21taXQKICAgICAgICAgICAgICAgIHVwZGF0ZURyYWZ0KF9fYXNzaWduKF9fYXNzaWduKHt9LCBkcmFmdCksIHsgd2FpdGluZzogc2VsZWN0ZWQudW5zY2hlZHVsZSA/IG51bGwgOiB3YWl0aW5nIH0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuU2V0Rm9sbG93VXBSZW1pbmRlcik7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVJbnB1dENoYW5nZSA9IGZ1bmN0aW9uIChwYXJ0aWFsKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBkcmFmdCA9IF9hLmRyYWZ0LCBwcmVmZXJlbmNlcyA9IF9hLnByZWZlcmVuY2VzOwogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHR5cGVhaGVhZE9wdGlvbnMocGFydGlhbCwgcHJlZmVyZW5jZXMpOwogICAgICAgICAgICBpZiAoZHJhZnQgJiYgZHJhZnQud2FpdGluZykgewogICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHsgdGl0bGU6ICdVbnNjaGVkdWxlJywgZGVzYzogJycsIG1vbWVudDogbW9tZW50KCksIHVuc2NoZWR1bGU6IHRydWUgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBvcHRpb25zOiBvcHRpb25zIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIG9wdGlvbnM6IFtdLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgRm9sbG93VXAucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkcmFmdCA9IHRoaXMucHJvcHMuZHJhZnQ7CiAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlYWhlYWRPcHRpb25zKCcnLCB0aGlzLnByb3BzLnByZWZlcmVuY2VzKTsKICAgICAgICAvLyBBZGQgdW5zY2hlZHVsZSBpZiB3YWl0aW5nIGV4aXN0cwogICAgICAgIGlmIChkcmFmdCAmJiBkcmFmdC53YWl0aW5nKSB7CiAgICAgICAgICAgIG9wdGlvbnMudW5zaGlmdCh7IHRpdGxlOiAnVW5zY2hlZHVsZScsIGRlc2M6ICcnLCBtb21lbnQ6IG1vbWVudCgpLCB1bnNjaGVkdWxlOiB0cnVlIH0pOwogICAgICAgIH0KICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3B0aW9uczogb3B0aW9ucyB9KTsKICAgIH07CiAgICBGb2xsb3dVcC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkcmFmdCA9IHRoaXMucHJvcHMuZHJhZnQ7CiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLnN0YXRlLm9wdGlvbnM7CiAgICAgICAgdmFyIGNvbnRlbnQ7CiAgICAgICAgaWYgKGRyYWZ0ICYmIGRyYWZ0LndhaXRpbmcpIHsKICAgICAgICAgICAgY29udGVudCA9IChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNvbnRlbnQiIH0sCiAgICAgICAgICAgICAgICAiUmV0dXJuIHRvIGluYm94IGlmIG5vIHJlc3BvbnNlIGJ5IiwKICAgICAgICAgICAgICAgIG1vbWVudChkcmFmdC53YWl0aW5nLndoZW4pLmZvcm1hdCgnIGRkZCwgTU1NIEQgW2F0XSBoOm1tIEEnKSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udHJvbFBvcG92ZXIsIHsgY2xhc3NOYW1lOiAiZm9sbG93LXVwLXBvcG92ZXIiLCB0eXBlOiBDb21tYW5kQ29udHJvbFR5cGUuRm9sbG93VXAsIGljb246IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm9sbG93VXBJY29uLCB7IHdpZHRoOiAiMjFweCIsIGhlaWdodDogIjE4cHgiIH0pLCBoZWFkaW5nOiAiRm9sbG93IFVwIiwgb3B0aW9uczogb3B0aW9ucywgcGxhY2Vob2xkZXI6ICJ0b21vcnJvdywgdHdvIHdlZWtzIGZyb20gbm93IiwgY29udGVudDogY29udGVudCwgb25IaWRlOiB0aGlzLnByb3BzLm9uSGlkZSwgb25JbnB1dENoYW5nZTogdGhpcy5oYW5kbGVJbnB1dENoYW5nZSwgb25TZWxlY3Q6IHRoaXMuaGFuZGxlU2VsZWN0LCBzaG93T25Nb3VudDogdHJ1ZSB9KSk7CiAgICB9OwogICAgcmV0dXJuIEZvbGxvd1VwOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgRm9sbG93VXA7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/FollowUp/FollowUp.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/FollowUp/FollowUp.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment, { Moment } from 'moment';\n\nimport ControlPopover from '../components/ControlPopover';\nimport { CommandControlType, Draft, Preferences, Waiting,\n  WaitingType, OnboardingType } from '@src/types';\nimport FollowUpIcon from '@src/components/Icons/FollowUp.svg';\nimport { typeaheadOptions } from '@src/lib/datetime';\n\nimport './FollowUp.scss';\nimport { OnboardingPatchMeta } from '@src/ducks/me';\nimport { getOnboardingActions } from '@src/lib/OnboardingDispatcher';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface Props {\n  draft?: Draft;\n  isDefault?: boolean;\n  preferences: Preferences;\n  onHide: () => void;\n  rsbOnboarding?: OnboardingType;\n}\n\nexport interface DispatchProps {\n  updateDraft: (draft: Draft) => void;\n  updateOnboarding?: (meta: OnboardingPatchMeta) => void;\n}\n\ninterface State {\n  options: Array<{\n    title: string;\n    moment: Moment;\n    desc: string;\n    unschedule: boolean;\n  }>;\n}\n\nclass FollowUp extends React.PureComponent<Props & DispatchProps, State> {\n  constructor(props: Props & DispatchProps) {\n    super();\n    this.state = {\n      options: [],\n    };\n  }\n\n  componentDidMount() {\n    const { draft } = this.props;\n    const options = typeaheadOptions('', this.props.preferences);\n\n    // Add unschedule if waiting exists\n    if (draft && draft.waiting) {\n      options.unshift({ title: 'Unschedule', desc: '', moment: moment(), unschedule: true });\n    }\n\n    this.setState({ options });\n  }\n\n  handleSelect = (option: any, index: number) => {\n    const { options } = this.state;\n    const { updateDraft, draft, rsbOnboarding, updateOnboarding } = this.props;\n\n    // Set scheduled date\n    const selected = options[index];\n    if (draft && selected) {\n\n      // Handle RSB Onboarding\n      if (rsbOnboarding && rsbOnboarding === OnboardingType.FollowUpReminder) {\n\n        updateOnboarding!({\n          skipped: false,\n          type: { steps: { [OnboardingType.FollowUpReminder]: true } },\n        });\n        logAmplitudeEvent(AmplitudeEvents.TourStepThree, { skipped: false });\n      }\n\n      getOnboardingActions().next(OnboardingType.FollowUpReminder);\n\n      // Calculate waiting object\n      const updated = { ...draft };\n      const when = selected.moment;\n      const waiting: Waiting = {\n        when: when.toDate(),\n        type: WaitingType.NoReply,\n        whenRelative: when.diff(moment(), 'seconds'),\n      };\n      updated.waiting = waiting;\n\n      // Dispatch thread move operation with when & commit\n      updateDraft({\n        ...draft,\n        waiting: selected.unschedule ? null : waiting,\n      });\n    }\n    logAmplitudeEvent(AmplitudeEvents.SetFollowUpReminder);\n  }\n\n  handleInputChange = (partial: string) => {\n    const { draft, preferences } = this.props;\n\n    const options = typeaheadOptions(partial, preferences);\n    if (draft && draft.waiting) {\n      options.push({ title: 'Unschedule', desc: '', moment: moment(), unschedule: true });\n    }\n\n    this.setState({ options });\n  }\n\n  render() {\n    const { draft } = this.props;\n    const { options } = this.state;\n    let content;\n\n    if (draft && draft.waiting) {\n      content = (\n        <div className=\"content\">\n          Return to inbox if no response by\n          {moment(draft.waiting.when).format(' ddd, MMM D [at] h:mm A')}\n        </div>\n      );\n    }\n\n    return (\n      <ControlPopover\n        className=\"follow-up-popover\"\n        type={CommandControlType.FollowUp}\n        icon={<FollowUpIcon width=\"21px\" height=\"18px\" />}\n        heading=\"Follow Up\"\n        options={options}\n        placeholder=\"tomorrow, two weeks from now\"\n        content={content}\n        onHide={this.props.onHide}\n        onInputChange={this.handleInputChange}\n        onSelect={this.handleSelect}\n        showOnMount\n      />\n    );\n  }\n}\n\nexport default FollowUp;\n"]}]}