{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/UndoSendPopup/UndoSendPopup.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/UndoSendPopup/UndoSendPopup.tsx","mtime":1675280254045},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgcGFyc2VBZGRyZXNzLCBwYXJ0aWNpcGFudHNUb1N0cmluZyB9IGZyb20gJ0BzcmMvbGliL2FkZHJlc3MnOwppbXBvcnQgeyBEcmFmdFN0YXR1cyB9IGZyb20gJ0BzcmMvdHlwZXMnOwppbXBvcnQgVW5kb1BvcHVwV3JhcHBlciBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9VbmRvUG9wdXBXcmFwcGVyJzsKaW1wb3J0ICcuL1VuZG9TZW5kUG9wdXAuc2Nzcyc7CmltcG9ydCBIb3ZlclRpcCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9Ib3ZlclRpcCc7CmltcG9ydCB7IGlzRHJhZnRTZW5kaW5nIH0gZnJvbSAnQHNyYy9saWIvZHJhZnQnOwovLyBUT0RPKFNISU4pOiBIYW5kbGUgMyBzZWNvbmRzIGZvciBVbmRvU2VuZFBvcHVwIGFmdGVyIGltbWVkaWF0ZSBzZW5kCnZhciBVbmRvU2VuZFBvcHVwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFVuZG9TZW5kUG9wdXAsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBVbmRvU2VuZFBvcHVwKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlTW91c2VFbnRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBob3ZlcmVkOiBmYWxzZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVVuZG8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBkcmFmdCA9IF90aGlzLnByb3BzLmRyYWZ0OwogICAgICAgICAgICBpZiAoZHJhZnQpIHsKICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnVuZG9TZW5kKGRyYWZ0KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2VuZE5vdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGRyYWZ0ID0gX2EuZHJhZnQsIHNlbmROb3cgPSBfYS5zZW5kTm93OwogICAgICAgICAgICBpZiAoZHJhZnQpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgdGl0bGVPdmVycmlkZTogJ1lvdXIgbWVzc2FnZSB3aWxsIHNlbmQgaW1tZWRpYXRlbHkhJyB9KTsKICAgICAgICAgICAgICAgIHNlbmROb3coZHJhZnQpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAvLyBXaGVuIHBvcG92ZXIgaXMgZGlzbWlzcywgcmVzZXQgc3RhdGUKICAgICAgICBfdGhpcy5oYW5kbGVEaXNtaXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHRpdGxlT3ZlcnJpZGU6IHVuZGVmaW5lZCwgaG92ZXJlZDogZmFsc2UgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJDb250ZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgZHJhZnQgPSBfYS5kcmFmdCwgaXNPZmZsaW5lID0gX2EuaXNPZmZsaW5lOwogICAgICAgICAgICB2YXIgdGl0bGVPdmVycmlkZSA9IF90aGlzLnN0YXRlLnRpdGxlT3ZlcnJpZGU7CiAgICAgICAgICAgIGlmICghZHJhZnQgJiYgIXRpdGxlT3ZlcnJpZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3Igc2VuZGluZyBhbmQgb2ZmbGluZSB0byBwcmV2ZW50IHVuZG8gc2VuZCB3aXRoIFVJIGRpc2NsYWltZXIKICAgICAgICAgICAgdmFyIHNlbmRpbmdBbmRPZmZsaW5lID0gaXNPZmZsaW5lICYmIGRyYWZ0ICYmIGRyYWZ0LnN0YXR1cyA9PT0gRHJhZnRTdGF0dXMuU2VuZGluZzsKICAgICAgICAgICAgLy8gSW5mZXIgcGFydGljcGFudHMKICAgICAgICAgICAgdmFyIHBhcnRpY2lwYW50cyA9IGRyYWZ0ICYmIGRyYWZ0LnRvLmNvbmNhdChkcmFmdC5jYykuY29uY2F0KGRyYWZ0LmJjYykgfHwgW107CiAgICAgICAgICAgIHZhciBwYXJ0aWNpcGFudHNTdHJpbmcgPSBwYXJ0aWNpcGFudHNUb1N0cmluZyhwYXJ0aWNpcGFudHMubWFwKGZ1bmN0aW9uIChwYXJ0aWNpcGFudCkgeyByZXR1cm4gcGFyc2VBZGRyZXNzKHBhcnRpY2lwYW50KTsgfSkpOwogICAgICAgICAgICAvLyBJZiBtb3JlIHRoYW4gcmVjaXBpZW50IGp1c3Qgc2hvdyB0cnVuY2F0ZWQgdmVyc2lvbgogICAgICAgICAgICB2YXIgdGl0bGUgPSAiWW91ciBtZXNzYWdlIHRvICIgKyBwYXJ0aWNpcGFudHNTdHJpbmcgKyAiIGhhcyBiZWVuIHNlbnQhIjsKICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICB0aXRsZSA9ICdZb3VyIG1lc3NhZ2UgaGFzIGJlZW4gc2VudCEnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aXRsZU92ZXJyaWRlKSB7CiAgICAgICAgICAgICAgICB0aXRsZSA9IHRpdGxlT3ZlcnJpZGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRpdGxlT3ZlcnJpZGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJwcmltYXJ5IiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29weSIgfSwgdGl0bGVPdmVycmlkZSkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAicHJpbWFyeSIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29weSIgfSwgdGl0bGUpLAogICAgICAgICAgICAgICAgIXNlbmRpbmdBbmRPZmZsaW5lICYmCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBfdGhpcy5oYW5kbGVVbmRvLCBjbGFzc05hbWU6ICJ1bmRvLWJ1dHRvbiIgfSwgIlVuZG8iKSwKICAgICAgICAgICAgICAgIHNlbmRpbmdBbmRPZmZsaW5lICYmCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChIb3ZlclRpcCwgeyBjb3B5OiAiWW91IGNhbm5vdCB1bmRvIHNlbmQgdGhpcyBtZXNzYWdlIHdoaWxlIG9mZmxpbmUiLCBhbmNob3JCb3R0b206IHRydWUsIHJpZ2h0OiAiLTEwMHB4IiwgdG9wOiAiLTcwcHgiLCBtdWx0aWxpbmU6IHRydWUgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBfdGhpcy5oYW5kbGVVbmRvLCBjbGFzc05hbWU6ICJ1bmRvLWJ1dHRvbiIsIGRpc2FibGVkOiB0cnVlIH0sICJVbmRvIikpLAogICAgICAgICAgICAgICAgX3RoaXMuc3RhdGUuaG92ZXJlZCAmJiAhc2VuZGluZ0FuZE9mZmxpbmUgJiYKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY29uZGFyeSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ2ZXJ0aWNhbC1zcGFjZXIiIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEhvdmVyVGlwLCB7IGNvcHk6ICJTZW5kIHRoZSBtZXNzYWdlIGltbWVkaWF0ZWx5LiBUaGlzIGNhbm5vdCBiZSB1bmRvbmUiLCBhbmNob3JCb3R0b206IHRydWUsIHJpZ2h0OiAiLTEwMHB4IiwgdG9wOiAiLTYwcHgiLCBtdWx0aWxpbmU6IHRydWUgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAic2VuZC1ub3ciLCBvbkNsaWNrOiBfdGhpcy5oYW5kbGVTZW5kTm93IH0sICJTZW5kIE5vdyIpKSkpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0ge307CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVW5kb1NlbmRQb3B1cC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKG9sZFByb3BzKSB7CiAgICAgICAgdmFyIG9sZERyYWZ0ID0gb2xkUHJvcHMuZHJhZnQ7CiAgICAgICAgdmFyIGRyYWZ0ID0gdGhpcy5wcm9wcy5kcmFmdDsKICAgICAgICB2YXIgb2xkRHJhZnRJZCA9IG9sZERyYWZ0ICYmIG9sZERyYWZ0LmlkIHx8ICcnOwogICAgICAgIHZhciBuZXdEcmFmdElkID0gZHJhZnQgJiYgZHJhZnQuaWQgfHwgJyc7CiAgICAgICAgaWYgKG9sZERyYWZ0SWQgIT09IG5ld0RyYWZ0SWQpIHsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyZWQ6IGZhbHNlIH0pOwogICAgICAgIH0KICAgIH07CiAgICBVbmRvU2VuZFBvcHVwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGRyYWZ0ID0gdGhpcy5wcm9wcy5kcmFmdDsKICAgICAgICB2YXIgdGl0bGVPdmVycmlkZSA9IHRoaXMuc3RhdGUudGl0bGVPdmVycmlkZTsKICAgICAgICAvLyBEb24ndCByZXR1cm4gYW55dGhpbmcgaWYgZHJhZnQgaXMgdW5kZWZpbmVkCiAgICAgICAgaWYgKCFkcmFmdCAmJiAhdGl0bGVPdmVycmlkZSkgewogICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCk7CiAgICAgICAgfQogICAgICAgIHZhciBhY3RpdmVEcmFmdCA9IGRyYWZ0ICYmIGlzRHJhZnRTZW5kaW5nKGRyYWZ0KQogICAgICAgICAgICAmJiBkcmFmdC5jYW5jZWxCeSAmJiBtb21lbnQoZHJhZnQuY2FuY2VsQnkpLmlzQWZ0ZXIobmV3IERhdGUoKSk7CiAgICAgICAgdmFyIGF1dG9EaXNtaXNzRHVyYXRpb24gPSBkcmFmdCAmJiBhY3RpdmVEcmFmdCAmJgogICAgICAgICAgICBtb21lbnQoZHJhZnQuY2FuY2VsQnkpLmRpZmYobmV3IERhdGUoKSkgfHwgdW5kZWZpbmVkOwogICAgICAgIC8vIERvIG5vdCBhdXRvZGlzbWlzcyBpZiBzdGFnZWQKICAgICAgICBpZiAoZHJhZnQgJiYgZHJhZnQuc3RhdHVzID09PSBEcmFmdFN0YXR1cy5TdGFnZWQpIHsKICAgICAgICAgICAgYXV0b0Rpc21pc3NEdXJhdGlvbiA9IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgaWYgKHRpdGxlT3ZlcnJpZGUpIHsKICAgICAgICAgICAgYXV0b0Rpc21pc3NEdXJhdGlvbiA9IDIwMDA7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgKGFjdGl2ZURyYWZ0IHx8ICEhdGl0bGVPdmVycmlkZSkgJiYKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChVbmRvUG9wdXBXcmFwcGVyLCB7IG9uVW5kb0NsaWNrOiB0aGlzLmhhbmRsZVVuZG8sIGF1dG9EaXNtaXNzRHVyYXRpb246IGF1dG9EaXNtaXNzRHVyYXRpb24sIGNsYXNzTmFtZTogInVuZG8tc2VuZC1wb3B1cCIsIGZvcmNlQ2VudGVyOiAhIXRpdGxlT3ZlcnJpZGUsIG9uRGlzbWlzczogdGhpcy5oYW5kbGVEaXNtaXNzIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1haW4iLCBvbk1vdXNlRW50ZXI6IHRoaXMuaGFuZGxlTW91c2VFbnRlciwgb25Nb3VzZUxlYXZlOiB0aGlzLmhhbmRsZU1vdXNlTGVhdmUgfSwgdGhpcy5yZW5kZXJDb250ZW50KCkpKSkpOwogICAgfTsKICAgIHJldHVybiBVbmRvU2VuZFBvcHVwOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgVW5kb1NlbmRQb3B1cDsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/UndoSendPopup/UndoSendPopup.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/UndoSendPopup/UndoSendPopup.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,MAAM,MAAM,QAAQ,CAAC;AAE5B,OAAO,EAAE,YAAY,EAAE,oBAAoB,EAAE,MAAM,kBAAkB,CAAC;AACtE,OAAO,EAAS,WAAW,EAAE,MAAM,YAAY,CAAC;AAChD,OAAO,gBAAgB,MAAM,uCAAuC,CAAC;AAErE,OAAO,sBAAsB,CAAC;AAC9B,OAAO,QAAQ,MAAM,+BAA+B,CAAC;AACrD,OAAO,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AAgBhD,sEAAsE;AACtE;IAA4B,iCAAiD;IAC3E;QAAA,YACE,iBAAO,SAER;QAYD,sBAAgB,GAAG;YACjB,KAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;QACnC,CAAC,CAAA;QAED,sBAAgB,GAAG;YACjB,KAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QACpC,CAAC,CAAA;QAED,gBAAU,GAAG;YACH,IAAA,yBAAK,CAAgB;YAC7B,IAAI,KAAK,EAAE;gBACT,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;aAC5B;QACH,CAAC,CAAA;QAED,mBAAa,GAAG;YACR,IAAA,gBAA+B,EAA7B,gBAAK,EAAE,oBAAsB,CAAC;YACtC,IAAI,KAAK,EAAE;gBACT,KAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,qCAAqC,EAAE,CAAC,CAAC;gBACxE,OAAO,CAAC,KAAK,CAAC,CAAC;aAChB;QACH,CAAC,CAAA;QAED,uCAAuC;QACvC,mBAAa,GAAG;YACd,KAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC9D,CAAC,CAAA;QAED,mBAAa,GAAG;YACR,IAAA,gBAAiC,EAA/B,gBAAK,EAAE,wBAAwB,CAAC;YAChC,IAAA,yCAAa,CAAgB;YAErC,IAAI,CAAC,KAAK,IAAI,CAAC,aAAa,EAAE;gBAC5B,OAAO,IAAI,CAAC;aACb;YAED,+EAA+E;YAC/E,IAAM,iBAAiB,GAAG,SAAS,IAAI,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,WAAW,CAAC,OAAO,CAAC;YAErF,oBAAoB;YACpB,IAAM,YAAY,GAAG,KAAK,IAAI,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAChF,IAAM,kBAAkB,GAAG,oBAAoB,CAC7C,YAAY,CAAC,GAAG,CAAC,UAAA,WAAW,IAAI,OAAA,YAAY,CAAC,WAAW,CAAC,EAAzB,CAAyB,CAAC,CAAC,CAAC;YAE9D,qDAAqD;YACrD,IAAI,KAAK,GAAG,qBAAmB,kBAAkB,oBAAiB,CAAC;YACnE,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3B,KAAK,GAAG,6BAA6B,CAAC;aACvC;YAED,IAAI,aAAa,EAAE;gBACjB,KAAK,GAAG,aAAa,CAAC;aACvB;YAED,IAAI,aAAa,EAAE;gBACjB,OAAO,CACL,6BAAK,SAAS,EAAC,SAAS;oBACtB,6BAAK,SAAS,EAAC,MAAM,IAClB,aAAa,CACV,CACF,CACP,CAAC;aACH;YAED,OAAO,CACL,6BAAK,SAAS,EAAC,SAAS;gBACtB,6BAAK,SAAS,EAAC,MAAM,IAClB,KAAK,CACF;gBACL,CAAC,iBAAiB;oBACjB,gCACE,OAAO,EAAE,KAAI,CAAC,UAAU,EACxB,SAAS,EAAC,aAAa,WAGhB;gBAEV,iBAAiB;oBAChB,oBAAC,QAAQ,IACP,IAAI,EAAC,iDAAiD,EACtD,YAAY,QACZ,KAAK,EAAC,QAAQ,EACd,GAAG,EAAC,OAAO,EACX,SAAS;wBAET,gCACE,OAAO,EAAE,KAAI,CAAC,UAAU,EACxB,SAAS,EAAC,aAAa,EACvB,QAAQ,iBAGD,CACA;gBAEZ,KAAI,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,iBAAiB;oBACvC,6BAAK,SAAS,EAAC,WAAW;wBACxB,6BAAK,SAAS,EAAC,iBAAiB,GAAG;wBACnC,oBAAC,QAAQ,IACP,IAAI,EAAC,qDAAqD,EAC1D,YAAY,QACZ,KAAK,EAAC,QAAQ,EACd,GAAG,EAAC,OAAO,EACX,SAAS;4BAET,gCACE,SAAS,EAAC,UAAU,EACpB,OAAO,EAAE,KAAI,CAAC,aAAa,eAGpB,CACA,CACP,CAEJ,CACP,CAAC;QACJ,CAAC,CAAA;QAhIC,KAAI,CAAC,KAAK,GAAG,EAAE,CAAC;;IAClB,CAAC;IAED,0CAAkB,GAAlB,UAAmB,QAAe;QAChC,IAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC;QACxB,IAAA,wBAAK,CAAgB;QAC7B,IAAM,UAAU,GAAG,QAAQ,IAAI,QAAQ,CAAC,EAAE,IAAI,EAAE,CAAC;QACjD,IAAM,UAAU,GAAG,KAAK,IAAI,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC;QAC3C,IAAI,UAAU,KAAK,UAAU,EAAE;YAC7B,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;SACnC;IACH,CAAC;IAuHD,8BAAM,GAAN;QACU,IAAA,wBAAK,CAAgB;QACrB,IAAA,wCAAa,CAAgB;QAErC,8CAA8C;QAC9C,IAAI,CAAC,KAAK,IAAI,CAAC,aAAa,EAAE;YAC5B,OAAO,gCAAO,CAAC;SAChB;QAED,IAAM,WAAW,GAAG,KAAK,IAAI,cAAc,CAAC,KAAK,CAAC;eAC7C,KAAK,CAAC,QAAQ,IAAI,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC;QAClE,IAAI,mBAAmB,GAAG,KAAK,IAAI,WAAW;YAC3C,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE,CAAC,IAAI,SAAS,CAAC;QAExD,+BAA+B;QAC/B,IAAI,KAAK,IAAI,KAAK,CAAC,MAAM,KAAK,WAAW,CAAC,MAAM,EAAE;YAChD,mBAAmB,GAAG,SAAS,CAAC;SACjC;QAED,IAAI,aAAa,EAAE;YACjB,mBAAmB,GAAG,IAAI,CAAC;SAC5B;QAED,OAAO,CACL,iCACG,CAAC,WAAW,IAAI,CAAC,CAAC,aAAa,CAAC;YAC/B,oBAAC,gBAAgB,IACf,WAAW,EAAE,IAAI,CAAC,UAAU,EAC5B,mBAAmB,EAAE,mBAAmB,EACxC,SAAS,EAAC,iBAAiB,EAC3B,WAAW,EAAE,CAAC,CAAC,aAAa,EAC5B,SAAS,EAAE,IAAI,CAAC,aAAa;gBAE7B,6BACE,SAAS,EAAC,MAAM,EAChB,YAAY,EAAE,IAAI,CAAC,gBAAgB,EACnC,YAAY,EAAE,IAAI,CAAC,gBAAgB,IAElC,IAAI,CAAC,aAAa,EAAE,CACjB,CACW,CAEjB,CACP,CAAC;IACJ,CAAC;IACH,oBAAC;AAAD,CAAC,AAlLD,CAA4B,KAAK,CAAC,aAAa,GAkL9C;AAED,eAAe,aAAa,CAAC","sourcesContent":["import React from 'react';\nimport moment from 'moment';\n\nimport { parseAddress, participantsToString } from '@src/lib/address';\nimport { Draft, DraftStatus } from '@src/types';\nimport UndoPopupWrapper from '@src/components/Base/UndoPopupWrapper';\n\nimport './UndoSendPopup.scss';\nimport HoverTip from '@src/components/Base/HoverTip';\nimport { isDraftSending } from '@src/lib/draft';\n\nexport interface Props {\n  draft?: Draft;\n  isOffline?: boolean;\n}\nexport interface DispatchProps {\n  undoSend: (draft: Draft) => void;\n  sendNow: (draft: Draft) => void;\n}\n\ninterface State {\n  hovered?: boolean;\n  titleOverride?: string;\n}\n\n// TODO(SHIN): Handle 3 seconds for UndoSendPopup after immediate send\nclass UndoSendPopup extends React.PureComponent<Props & DispatchProps, State> {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    const oldDraft = oldProps.draft;\n    const { draft } = this.props;\n    const oldDraftId = oldDraft && oldDraft.id || '';\n    const newDraftId = draft && draft.id || '';\n    if (oldDraftId !== newDraftId) {\n      this.setState({ hovered: false });\n    }\n  }\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  }\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  }\n\n  handleUndo = () => {\n    const { draft } = this.props;\n    if (draft) {\n      this.props.undoSend(draft);\n    }\n  }\n\n  handleSendNow = () => {\n    const { draft, sendNow } = this.props;\n    if (draft) {\n      this.setState({ titleOverride: 'Your message will send immediately!' });\n      sendNow(draft);\n    }\n  }\n\n  // When popover is dismiss, reset state\n  handleDismiss = () => {\n    this.setState({ titleOverride: undefined, hovered: false });\n  }\n\n  renderContent = () => {\n    const { draft, isOffline } = this.props;\n    const { titleOverride } = this.state;\n\n    if (!draft && !titleOverride) {\n      return null;\n    }\n\n    // Special case for sending and offline to prevent undo send with UI disclaimer\n    const sendingAndOffline = isOffline && draft && draft.status === DraftStatus.Sending;\n\n    // Infer particpants\n    const participants = draft && draft.to.concat(draft.cc).concat(draft.bcc) || [];\n    const participantsString = participantsToString(\n      participants.map(participant => parseAddress(participant)));\n\n    // If more than recipient just show truncated version\n    let title = `Your message to ${participantsString} has been sent!`;\n    if (participants.length > 1) {\n      title = 'Your message has been sent!';\n    }\n\n    if (titleOverride) {\n      title = titleOverride;\n    }\n\n    if (titleOverride) {\n      return (\n        <div className=\"primary\">\n          <div className=\"copy\">\n            {titleOverride}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"primary\">\n        <div className=\"copy\">\n          {title}\n        </div>\n        {!sendingAndOffline &&\n          <button\n            onClick={this.handleUndo}\n            className=\"undo-button\"\n          >\n            Undo\n          </button>\n        }\n        {sendingAndOffline &&\n          <HoverTip\n            copy=\"You cannot undo send this message while offline\"\n            anchorBottom\n            right=\"-100px\"\n            top=\"-70px\"\n            multiline\n          >\n            <button\n              onClick={this.handleUndo}\n              className=\"undo-button\"\n              disabled\n            >\n              Undo\n            </button>\n          </HoverTip>\n        }\n        {this.state.hovered && !sendingAndOffline &&\n          <div className=\"secondary\">\n            <div className=\"vertical-spacer\" />\n            <HoverTip\n              copy=\"Send the message immediately. This cannot be undone\"\n              anchorBottom\n              right=\"-100px\"\n              top=\"-60px\"\n              multiline\n            >\n              <button\n                className=\"send-now\"\n                onClick={this.handleSendNow}\n              >\n                Send Now\n              </button>\n            </HoverTip>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  render() {\n    const { draft } = this.props;\n    const { titleOverride } = this.state;\n\n    // Don't return anything if draft is undefined\n    if (!draft && !titleOverride) {\n      return <div />;\n    }\n\n    const activeDraft = draft && isDraftSending(draft)\n      && draft.cancelBy && moment(draft.cancelBy).isAfter(new Date());\n    let autoDismissDuration = draft && activeDraft &&\n       moment(draft.cancelBy).diff(new Date()) || undefined;\n\n    // Do not autodismiss if staged\n    if (draft && draft.status === DraftStatus.Staged) {\n      autoDismissDuration = undefined;\n    }\n\n    if (titleOverride) {\n      autoDismissDuration = 2000;\n    }\n\n    return (\n      <div>\n        {(activeDraft || !!titleOverride) &&\n          <UndoPopupWrapper\n            onUndoClick={this.handleUndo}\n            autoDismissDuration={autoDismissDuration}\n            className=\"undo-send-popup\"\n            forceCenter={!!titleOverride}\n            onDismiss={this.handleDismiss}\n          >\n            <div\n              className=\"main\"\n              onMouseEnter={this.handleMouseEnter}\n              onMouseLeave={this.handleMouseLeave}\n            >\n              {this.renderContent()}\n            </div>\n          </UndoPopupWrapper>\n        }\n      </div>\n    );\n  }\n}\n\nexport default UndoSendPopup;\n"]}]}