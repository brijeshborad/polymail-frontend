{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/ViewingPill.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/ViewingPill.tsx","mtime":1675280254045},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgJy4vVmlld2luZ1BpbGwuc2Nzcyc7CmltcG9ydCBIb3ZlclRpcCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9Ib3ZlclRpcCc7CmltcG9ydCB7IGdlbmVyYXRlUGhvdG9VcmwgfSBmcm9tICdAc3JjL2xpYi9jb250YWN0JzsKdmFyIFZpZXdpbmdQaWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFZpZXdpbmdQaWxsLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVmlld2luZ1BpbGwoKSB7CiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgfQogICAgVmlld2luZ1BpbGwucHJvdG90eXBlLnJlbmRlckhvdmVyQ2hpbGQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHZpZXdpbmcgPSB0aGlzLnByb3BzLnZpZXdpbmc7CiAgICAgICAgdmFyIGFub255bW91cyA9IDE7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm5hbWVzIiB9LCB2aWV3aW5nLm1hcChmdW5jdGlvbiAodikgewogICAgICAgICAgICB2YXIgbmFtZTsKICAgICAgICAgICAgaWYgKHYuZmlyc3ROYW1lKSB7CiAgICAgICAgICAgICAgICBuYW1lID0gdi5maXJzdE5hbWUgKyAiICIgKyB2Lmxhc3ROYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbmFtZSA9ICJBbm9ueW1vdXMgVmlld2VyICMiICsgYW5vbnltb3VzOwogICAgICAgICAgICAgICAgYW5vbnltb3VzICs9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInZpZXdlciIsIGtleTogdi5pZCB9LCBuYW1lKSk7CiAgICAgICAgfSkpKTsKICAgIH07CiAgICBWaWV3aW5nUGlsbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB2aWV3aW5nID0gdGhpcy5wcm9wcy52aWV3aW5nOwogICAgICAgIGlmICghdmlld2luZy5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHZhciBsZW5ndGggPSB2aWV3aW5nLmxlbmd0aDsKICAgICAgICB2YXIgYXZhdGFyOwogICAgICAgIHZhciBzZWNvbmRBdmF0YXI7CiAgICAgICAgdmFyIHZpZXdlcjsKICAgICAgICB2YXIgcGhvdG9zID0gdmlld2luZy5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYucGhvdG9VcmwgPyAxIDogLTE7IH0pOwogICAgICAgIHZpZXdlciA9IHBob3Rvcy5wb3AoKTsKICAgICAgICBpZiAobGVuZ3RoICYmIHZpZXdlcikgewogICAgICAgICAgICBhdmF0YXIgPSB2aWV3ZXIucGhvdG9VcmwgfHwgZ2VuZXJhdGVQaG90b1VybCh2aWV3ZXIuZmlyc3ROYW1lIHx8ICdBbm9ueW1vdXMnKTsKICAgICAgICAgICAgbGVuZ3RoIC09IDE7CiAgICAgICAgfQogICAgICAgIHZpZXdlciA9IHBob3Rvcy5wb3AoKTsKICAgICAgICBpZiAobGVuZ3RoID09PSAxICYmIHZpZXdlcikgewogICAgICAgICAgICBzZWNvbmRBdmF0YXIgPSB2aWV3ZXIucGhvdG9VcmwgfHwKICAgICAgICAgICAgICAgIGdlbmVyYXRlUGhvdG9Vcmwodmlld2VyLmZpcnN0TmFtZSB8fCAnQW5vbnltb3VzJyk7CiAgICAgICAgICAgIGxlbmd0aCAtPSAxOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoSG92ZXJUaXAsIHsgdG9wOiAiMzBweCIsIGxlZnQ6IHZpZXdpbmcubGVuZ3RoID4gMSA/ICc1MnB4JyA6ICc0NXB4JywgaG92ZXJDaGlsZDogdGhpcy5yZW5kZXJIb3ZlckNoaWxkKCkgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ2aWV3aW5nLXBpbGwiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJoNiIsIG51bGwsICJWaWV3aW5nIiksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInVzZXJzIiB9LAogICAgICAgICAgICAgICAgICAgICEhYXZhdGFyICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYXZhdGFyIiwgc3R5bGU6IHsgYmFja2dyb3VuZEltYWdlOiAidXJsKCIgKyBhdmF0YXIgKyAiKSIgfSB9KSwKICAgICAgICAgICAgICAgICAgICAhIXNlY29uZEF2YXRhciAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImF2YXRhciBhc2tldyIsIHN0eWxlOiB7IGJhY2tncm91bmRJbWFnZTogInVybCgiICsgc2Vjb25kQXZhdGFyICsgIikiIH0gfSksCiAgICAgICAgICAgICAgICAgICAgISFsZW5ndGggJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2xlbmd0aCcsIHsgYXNrZXc6ICEhYXZhdGFyIH0pIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICIrIiwKICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoKSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFZpZXdpbmdQaWxsOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgVmlld2luZ1BpbGw7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/ViewingPill.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/ViewingPill.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport './ViewingPill.scss';\nimport HoverTip from '@src/components/Base/HoverTip';\nimport { generatePhotoUrl } from '@src/lib/contact';\n\nexport interface Viewer {\n  photoUrl?: string;\n  firstName: string;\n  lastName?: string;\n  id: string;\n}\n\nexport interface StateProps {\n  viewing: Viewer[];\n}\n\nclass ViewingPill extends React.PureComponent<StateProps> {\n\n  renderHoverChild() {\n    const { viewing } = this.props;\n    let anonymous = 1;\n\n    return (\n      <div className=\"names\">\n        {viewing.map((v) => {\n          let name;\n          if (v.firstName) {\n            name = `${v.firstName} ${v.lastName}`;\n          } else {\n            name = `Anonymous Viewer #${anonymous}`;\n            anonymous += 1;\n          }\n\n          return (\n            <div className=\"viewer\" key={v.id}>\n              {name}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    const { viewing } = this.props;\n\n    if (!viewing.length) {\n      return null;\n    }\n\n    let length = viewing.length;\n    let avatar;\n    let secondAvatar;\n    let viewer;\n\n    const photos = viewing.slice().sort(v => v.photoUrl ? 1 : -1);\n\n    viewer = photos.pop();\n    if (length && viewer) {\n      avatar = viewer.photoUrl || generatePhotoUrl(viewer.firstName || 'Anonymous');\n      length -= 1;\n    }\n\n    viewer = photos.pop();\n    if (length === 1 && viewer) {\n      secondAvatar = viewer.photoUrl ||\n        generatePhotoUrl(viewer.firstName || 'Anonymous');\n      length -= 1;\n    }\n\n    return (\n      <HoverTip\n        top=\"30px\"\n        left={viewing.length > 1 ? '52px' : '45px'}\n        hoverChild={this.renderHoverChild()}\n      >\n        <div className=\"viewing-pill\">\n          <h6>Viewing</h6>\n          <div className=\"users\">\n            {!!avatar && <div\n              className=\"avatar\"\n              style={{ backgroundImage: `url(${avatar})` }}\n            />}\n            {!!secondAvatar && <div\n              className=\"avatar askew\"\n              style={{ backgroundImage: `url(${secondAvatar})` }}\n            />}\n            {!!length && <div\n              className={classnames('length', { askew: !!avatar })}\n            >\n              +{length}\n            </div>}\n          </div>\n        </div>\n      </HoverTip>\n    );\n  }\n}\n\nexport default ViewingPill;\n"]}]}