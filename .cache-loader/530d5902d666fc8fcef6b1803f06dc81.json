{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Unsubscriber/Unsubscriber.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Unsubscriber/Unsubscriber.tsx","mtime":1675280254119},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgeyBDb21tYW5kQ29udHJvbFR5cGUsIE1haWxib3hUeXBlLCBPbmJvYXJkaW5nVHlwZSwgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0ICcuL1Vuc3Vic2NyaWJlci5zY3NzJzsKaW1wb3J0IExlZnRTaWRlYmFyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9MZWZ0U2lkZWJhcic7CmltcG9ydCBUb2FzdCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9Ub2FzdCc7CmltcG9ydCBVbnN1YnNjcmliZXJQYWdlIGZyb20gJy4vVW5zdWJzY3JpYmVyUGFnZSc7CmltcG9ydCB7IFN3aXRjaCwgUm91dGUsIFJlZGlyZWN0IH0gZnJvbSAncmVhY3Qtcm91dGVyJzsKaW1wb3J0IENvbW1hbmRDb250cm9sIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Db21tYW5kQ29udHJvbCc7CmltcG9ydCB7IGdldEhvdGtleSwgSG90a2V5QWN0aW9uIH0gZnJvbSAnQHNyYy9saWIvaG90a2V5cyc7CmltcG9ydCB7IGNvbW1hbmRDb250cm9sU2hvdyB9IGZyb20gJ0BzcmMvZHVja3MvY29tbWFuZENvbnRyb2wnOwppbXBvcnQgYnJvd3Nlckhpc3RvcnkgZnJvbSAnQHNyYy9saWIvYnJvd3Nlckhpc3RvcnknOwppbXBvcnQgeyBBbXBsaXR1ZGVFdmVudHMsIGxvZ0FtcGxpdHVkZUV2ZW50IH0gZnJvbSAnQHNyYy9saWIvYW1wbGl0dWRlLWFuYWx5dGljcyc7CnZhciBVbnN1YnNjcmliZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoVW5zdWJzY3JpYmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVW5zdWJzY3JpYmVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmZyYW1lRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLmtleUNvZGUpIHsKICAgICAgICAgICAgICAgIHZhciBrZXlib2FyZEV2ZW50ID0gbmV3IEtleWJvYXJkRXZlbnQoJ2tleWRvd24nLCBlLmRhdGEpOwogICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlS2V5RG93bihrZXlib2FyZEV2ZW50KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5yZWYgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGRpc3BhdGNoQWN0aW9uID0gX2EuZGlzcGF0Y2hBY3Rpb24sIGZlYXR1cmVzID0gX2EuZmVhdHVyZXM7CiAgICAgICAgICAgIHZhciBoYW5kbGVkID0gZmFsc2U7CiAgICAgICAgICAgIC8vIERvIG5vdCBoYW5kbGUga2V5Ym9hcmQgc2hvcnRjdXRzIHdoZW4gbWVzc2FnZSB0ZW1wbGF0ZXMgaXMgbm90IGF2YWlsYWJsZQogICAgICAgICAgICBpZiAoIWZlYXR1cmVzLm1lc3NhZ2VUZW1wbGF0ZXMpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CiAgICAgICAgICAgIHZhciBpZ25vcmVJbnB1dCA9IGFjdGl2ZUVsZW1lbnQgJiYKICAgICAgICAgICAgICAgIFsnSU5QVVQnLCAnVEVYVEFSRUEnXS5pbmRleE9mKGFjdGl2ZUVsZW1lbnQudGFnTmFtZSkgIT09IC0xOwogICAgICAgICAgICBpZiAoISFpZ25vcmVJbnB1dCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBob3RrZXkgPSBnZXRIb3RrZXkoZSk7CiAgICAgICAgICAgIHN3aXRjaCAoaG90a2V5ICYmIGhvdGtleS5uYW1lKSB7CiAgICAgICAgICAgICAgICAvLyBOYXZpZ2F0aW9uCiAgICAgICAgICAgICAgICBjYXNlIEhvdGtleUFjdGlvbi5OYXZpZ2F0aW9uQ2VudGVyOgogICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLmRpc3BhdGNoQWN0aW9uKGNvbW1hbmRDb250cm9sU2hvdyhDb21tYW5kQ29udHJvbFR5cGUuTmF2aWdhdGlvbikpOwogICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBIb3RrZXlBY3Rpb24uTmF2aWdhdGVJbmJveDoKICAgICAgICAgICAgICAgIGNhc2UgSG90a2V5QWN0aW9uLk5hdmlnYXRlU3RhcnJlZDoKICAgICAgICAgICAgICAgIGNhc2UgSG90a2V5QWN0aW9uLk5hdmlnYXRlUmVhZExhdGVyOgogICAgICAgICAgICAgICAgY2FzZSBIb3RrZXlBY3Rpb24uTmF2aWdhdGVBcmNoaXZlOgogICAgICAgICAgICAgICAgY2FzZSBIb3RrZXlBY3Rpb24uTmF2aWdhdGVUcmFzaDoKICAgICAgICAgICAgICAgIGNhc2UgSG90a2V5QWN0aW9uLk5hdmlnYXRlRm9sbG93VXA6CiAgICAgICAgICAgICAgICBjYXNlIEhvdGtleUFjdGlvbi5OYXZpZ2F0ZVNlbnQ6CiAgICAgICAgICAgICAgICBjYXNlIEhvdGtleUFjdGlvbi5OYXZpZ2F0ZVNlbmRMYXRlcjoKICAgICAgICAgICAgICAgIGNhc2UgSG90a2V5QWN0aW9uLk5hdmlnYXRlRHJhZnQ6CiAgICAgICAgICAgICAgICAgICAgaWYgKGhvdGtleSAmJiBob3RrZXkucm91dGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld01haWxib3ggPSB7IHR5cGU6IE1haWxib3hUeXBlLkFueSB9OwogICAgICAgICAgICAgICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKGhvdGtleS5yb3V0ZShuZXdNYWlsYm94KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgSG90a2V5QWN0aW9uLlRvZ2dsZUNvbW1hbmRDb250cm9sOgogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoQWN0aW9uKGNvbW1hbmRDb250cm9sU2hvdyhDb21tYW5kQ29udHJvbFR5cGUuTmF2aWdhdGlvbikpOwogICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGFuZGxlZCkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVW5zdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2E7CiAgICAgICAgdmFyIF9iID0gdGhpcy5wcm9wcywgY29sbGFwc2VSaWdodFNpZGViYXIgPSBfYi5jb2xsYXBzZVJpZ2h0U2lkZWJhciwgc2hvd1Vuc3Vic2NyaWJlckdlbSA9IF9iLnNob3dVbnN1YnNjcmliZXJHZW0sIHVwZGF0ZU9uYm9hcmRpbmcgPSBfYi51cGRhdGVPbmJvYXJkaW5nOwogICAgICAgIGNvbGxhcHNlUmlnaHRTaWRlYmFyKHRydWUpOwogICAgICAgIC8vIEhpZGUgQ29tbWFuZCBDb250cm9sIGlmIHNob3dpbmcKICAgICAgICBpZiAodGhpcy5yZWYgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgICB0aGlzLnJlZi5mb2N1cygpOwogICAgICAgIH0KICAgICAgICBpZiAoc2hvd1Vuc3Vic2NyaWJlckdlbSkgewogICAgICAgICAgICB1cGRhdGVPbmJvYXJkaW5nKHsKICAgICAgICAgICAgICAgIHR5cGU6IChfYSA9IHt9LCBfYVtPbmJvYXJkaW5nVHlwZS5VbnN1YnNjcmliZXJHZW1dID0gdHJ1ZSwgX2EpLAogICAgICAgICAgICAgICAgc2tpcHBlZDogZmFsc2UsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuZnJhbWVFdmVudExpc3RlbmVyKTsKICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuVmlld1Vuc3Vic2NyaWJlcik7CiAgICAgICAgbG9nQW1wbGl0dWRlRXZlbnQoQW1wbGl0dWRlRXZlbnRzLlVuc3Vic2NyaWJlKTsKICAgIH07CiAgICBVbnN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5mcmFtZUV2ZW50TGlzdGVuZXIpOwogICAgfTsKICAgIFVuc3Vic2NyaWJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGFjY291bnRzID0gX2EuYWNjb3VudHMsIGxpc3RzID0gX2EubGlzdHMsIHNlbGVjdGVkTWFpbGJveCA9IF9hLnNlbGVjdGVkTWFpbGJveCwgbWFpbENvdW50ID0gX2EubWFpbENvdW50LCBsZWZ0U2lkZWJhckNvdW50ID0gX2EubGVmdFNpZGViYXJDb3VudDsKICAgICAgICB2YXIgTGVmdFNpZGViYXJDb25uZWN0ID0gTGVmdFNpZGViYXI7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygnYXBwLXVuc3Vic2NyaWJlcicpLCB0YWJJbmRleDogLTEsIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLCByZWY6IHRoaXMuaGFuZGxlUmVmIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGVmdFNpZGViYXJDb25uZWN0LCB7IGFjY291bnRzOiBhY2NvdW50cywgbGlzdHM6IGxpc3RzLCBzZWxlY3RlZE1haWxib3g6IHNlbGVjdGVkTWFpbGJveCwgbWFpbENvdW50OiBtYWlsQ291bnQsIGxlZnRTaWRlYmFyQ291bnQ6IGxlZnRTaWRlYmFyQ291bnQsIHNlbGVjdGVkVGl0bGU6ICd1bnN1YnNjcmliZXInIH0pLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFN3aXRjaCwgbnVsbCwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHsgcGF0aDogJy91bnN1YnNjcmliZXInLCBjb21wb25lbnQ6IFVuc3Vic2NyaWJlclBhZ2UsIGtleTogJy91bnN1YnNjcmliZXInLCBleGFjdDogdHJ1ZSB9KSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVkaXJlY3QsIHsgZnJvbTogIi9hbmFseXRpY3MvdW5zdWJzY3JpYmVyIiwgdG86ICIvdW5zdWJzY3JpYmVyIiB9KSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9hc3QsIG51bGwpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbW1hbmRDb250cm9sLCB7IGRlZmF1bHQ6IENvbW1hbmRDb250cm9sVHlwZS5TeXN0ZW0gfSkpKTsKICAgIH07CiAgICByZXR1cm4gVW5zdWJzY3JpYmVyOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgVW5zdWJzY3JpYmVyOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Unsubscriber/Unsubscriber.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Unsubscriber/Unsubscriber.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\n\nimport {\n  Contact,\n  ContactGroup,\n  Account,\n  List,\n  Mailbox,\n  MailCount,\n  LeftSidebarCount,\n  Features,\n  CommandControlType,\n  MailboxType,\n  Action,\n  OnboardingType,\n} from '@src/types';\n\nimport './Unsubscriber.scss';\n\nimport LeftSidebar from '@src/components/LeftSidebar';\nimport Toast from '@src/components/Base/Toast';\nimport UnsubscriberPage from './UnsubscriberPage';\nimport { Switch, Route, RouteComponentProps, Redirect } from 'react-router';\nimport CommandControl from '@src/components/CommandControl';\nimport { getHotkey, HotkeyAction } from '@src/lib/hotkeys';\nimport { commandControlShow } from '@src/ducks/commandControl';\nimport browserHistory from '@src/lib/browserHistory';\nimport { OnboardingPatchMeta } from '@src/ducks/me';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface Props {\n  contact: Contact;\n  contactGroups: { [id: string]: ContactGroup; };\n  accounts: Account[];\n  lists: List[];\n  selectedMailbox: Mailbox;\n  mailCount: MailCount;\n  leftSidebarCount: LeftSidebarCount;\n  features: Features;\n  showUnsubscriberGem?: boolean;\n}\n\nexport interface DispatchProps {\n  dispatchAction: (action: Action<any, any>) => void;\n  collapseRightSidebar: (collapsed: boolean) => void;\n  updateOnboarding: (onboarding: OnboardingPatchMeta) => void;\n}\n\nclass Unsubscriber extends React.PureComponent<Props & DispatchProps & RouteComponentProps<any>> {\n  ref: HTMLDivElement;\n\n  componentDidMount() {\n    const { collapseRightSidebar, showUnsubscriberGem, updateOnboarding } = this.props;\n    collapseRightSidebar(true);\n\n    // Hide Command Control if showing\n    if (this.ref && document.activeElement === document.body) {\n      this.ref.focus();\n    }\n\n    if (showUnsubscriberGem) {\n      updateOnboarding({\n        type: { [OnboardingType.UnsubscriberGem]: true },\n        skipped: false,\n      });\n    }\n\n    window.addEventListener('message', this.frameEventListener);\n    logAmplitudeEvent(AmplitudeEvents.ViewUnsubscriber);\n    logAmplitudeEvent(AmplitudeEvents.Unsubscribe);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('message', this.frameEventListener);\n  }\n\n  frameEventListener = (e: MessageEvent) => {\n    if (e.data && e.data.keyCode) {\n      const keyboardEvent = new KeyboardEvent('keydown', e.data);\n      this.handleKeyDown(keyboardEvent);\n    }\n  }\n\n  handleRef = (ref: HTMLDivElement) => {\n    this.ref = ref;\n  }\n\n  handleKeyDown = (e: KeyboardEvent | React.KeyboardEvent<HTMLDivElement>) => {\n    const {\n      dispatchAction,\n      features,\n    } = this.props;\n    let handled = false;\n\n    // Do not handle keyboard shortcuts when message templates is not available\n    if (!features.messageTemplates) {\n      return;\n    }\n\n    const activeElement = document.activeElement;\n    const ignoreInput = activeElement &&\n      ['INPUT', 'TEXTAREA'].indexOf(activeElement.tagName) !== -1;\n\n    if (!!ignoreInput) {\n      return;\n    }\n\n    const hotkey = getHotkey(e);\n    switch (hotkey && hotkey.name) {\n      // Navigation\n      case HotkeyAction.NavigationCenter:\n        this.props.dispatchAction(commandControlShow(CommandControlType.Navigation));\n        handled = true;\n        break;\n      case HotkeyAction.NavigateInbox:\n      case HotkeyAction.NavigateStarred:\n      case HotkeyAction.NavigateReadLater:\n      case HotkeyAction.NavigateArchive:\n      case HotkeyAction.NavigateTrash:\n      case HotkeyAction.NavigateFollowUp:\n      case HotkeyAction.NavigateSent:\n      case HotkeyAction.NavigateSendLater:\n      case HotkeyAction.NavigateDraft:\n        if (hotkey && hotkey.route) {\n          const newMailbox = { type: MailboxType.Any };\n          browserHistory.push(hotkey.route(newMailbox));\n          handled = true;\n        }\n        break;\n      case HotkeyAction.ToggleCommandControl:\n        dispatchAction(commandControlShow(CommandControlType.Navigation));\n        handled = true;\n        break;\n      default:\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  render() {\n    const {\n      accounts,\n      lists,\n      selectedMailbox,\n      mailCount,\n      leftSidebarCount,\n    } = this.props;\n    const LeftSidebarConnect = LeftSidebar as any;\n\n    return (\n      <div\n        className={classnames('app-unsubscriber')}\n        tabIndex={-1}\n        onKeyDown={this.handleKeyDown}\n        ref={this.handleRef}\n      >\n        <LeftSidebarConnect\n          accounts={accounts}\n          lists={lists}\n          selectedMailbox={selectedMailbox}\n          mailCount={mailCount}\n          leftSidebarCount={leftSidebarCount}\n          selectedTitle={'unsubscriber'}\n        />\n        <Switch>\n          <Route\n            path={'/unsubscriber'}\n            component={UnsubscriberPage}\n            key={'/unsubscriber'}\n            exact\n          />\n          <Redirect\n            from=\"/analytics/unsubscriber\"\n            to=\"/unsubscriber\"\n          />\n        </Switch>\n        <Toast />\n        <CommandControl default={CommandControlType.System} />\n      </div>\n    );\n  }\n}\n\nexport default Unsubscriber;\n"]}]}