{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/ReadLater/ReadLater.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/ReadLater/ReadLater.tsx","mtime":1675280253998},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IENvbW1hbmRDb250cm9sVHlwZSwgT25ib2FyZGluZ1R5cGUgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IENvbnRyb2xQb3BvdmVyIGZyb20gJy4uL2NvbXBvbmVudHMvQ29udHJvbFBvcG92ZXInOwppbXBvcnQgeyB0eXBlYWhlYWRPcHRpb25zLCBzZXRMYXN0U2NoZWR1bGVkVHlwZWFoZWFkIH0gZnJvbSAnQHNyYy9saWIvZGF0ZXRpbWUnOwppbXBvcnQgQ2xvY2sgZnJvbSAnQHNyYy9jb21wb25lbnRzL0ljb25zL0Nsb2NrLnN2Zyc7CmltcG9ydCB7IGdldE9uYm9hcmRpbmdBY3Rpb25zIH0gZnJvbSAnQHNyYy9saWIvT25ib2FyZGluZ0Rpc3BhdGNoZXInOwppbXBvcnQgeyBBbXBsaXR1ZGVFdmVudHMsIGxvZ0FtcGxpdHVkZUV2ZW50IH0gZnJvbSAnQHNyYy9saWIvYW1wbGl0dWRlLWFuYWx5dGljcyc7CnZhciBSZWFkTGF0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoUmVhZExhdGVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUmVhZExhdGVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlU2VsZWN0ID0gZnVuY3Rpb24gKG9wdGlvbiwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IF90aGlzLnN0YXRlLm9wdGlvbnM7CiAgICAgICAgICAgIHZhciBfYiA9IF90aGlzLnByb3BzLCBzdWJtaXRDb21taXRNZXRhID0gX2Iuc3VibWl0Q29tbWl0TWV0YSwgcnNiT25ib2FyZGluZyA9IF9iLnJzYk9uYm9hcmRpbmc7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IG9wdGlvbnNbaW5kZXhdOwogICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgIGlmIChyc2JPbmJvYXJkaW5nID09PSBPbmJvYXJkaW5nVHlwZS5SZWFkTGF0ZXIpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy51cGRhdGVPbmJvYXJkaW5nKHsKICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHsgc3RlcHM6IChfYSA9IHt9LCBfYVtPbmJvYXJkaW5nVHlwZS5SZWFkTGF0ZXJdID0gdHJ1ZSwgX2EpIH0sCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgbG9nQW1wbGl0dWRlRXZlbnQoQW1wbGl0dWRlRXZlbnRzLlRvdXJTdGVwTmluZSwgeyBza2lwcGVkOiBmYWxzZSB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGdldE9uYm9hcmRpbmdBY3Rpb25zKCkubmV4dChPbmJvYXJkaW5nVHlwZS5SZWFkTGF0ZXIpOwogICAgICAgICAgICAgICAgdmFyIHdoZW4gPSBvcHRpb25zW2luZGV4XS5tb21lbnQudG9EYXRlKCk7CiAgICAgICAgICAgICAgICBzdWJtaXRDb21taXRNZXRhKHsgd2hlbjogd2hlbiB9KTsKICAgICAgICAgICAgICAgIC8vIFNldCBTY2hlZHVsZWQgRGF0ZSBmb3IgTGFzdCBVc2VkIFZhbHVlCiAgICAgICAgICAgICAgICBzZXRMYXN0U2NoZWR1bGVkVHlwZWFoZWFkKHdoZW4pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVJbnB1dENoYW5nZSA9IGZ1bmN0aW9uIChwYXJ0aWFsKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIG9wdGlvbnM6IHR5cGVhaGVhZE9wdGlvbnMocGFydGlhbCwgX3RoaXMucHJvcHMucHJlZmVyZW5jZXMpLAogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0gewogICAgICAgICAgICBvcHRpb25zOiBbXSwKICAgICAgICB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFJlYWRMYXRlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9wdGlvbnM6IHR5cGVhaGVhZE9wdGlvbnMoJycsIHRoaXMucHJvcHMucHJlZmVyZW5jZXMpIH0pOwogICAgfTsKICAgIFJlYWRMYXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpY29uID0gUmVhY3QuY3JlYXRlRWxlbWVudChDbG9jaywgeyB3aWR0aDogIjE0cHgiLCBoZWlnaHQ6ICIxNHB4IiB9KTsKICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuc3RhdGUub3B0aW9uczsKICAgICAgICB2YXIgb25IaWRlID0gdGhpcy5wcm9wcy5vbkhpZGU7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRyb2xQb3BvdmVyLCB7IGNsYXNzTmFtZTogInJlYWQtbGF0ZXItcG9wb3ZlciIsIHR5cGU6IENvbW1hbmRDb250cm9sVHlwZS5SZWFkTGF0ZXIsIGljb246IGljb24sIGhlYWRpbmc6ICJSZWFkIExhdGVyIiwgb3B0aW9uczogb3B0aW9ucywgcGxhY2Vob2xkZXI6ICJ0aGlzIHdlZWtlbmQsIG5leHQgdHVlc2RheSIsIG9uSGlkZTogb25IaWRlLCBvblNlbGVjdDogdGhpcy5oYW5kbGVTZWxlY3QsIG9uSW5wdXRDaGFuZ2U6IHRoaXMuaGFuZGxlSW5wdXRDaGFuZ2UsIHNob3dPbk1vdW50OiB0cnVlIH0pKTsKICAgIH07CiAgICByZXR1cm4gUmVhZExhdGVyOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgUmVhZExhdGVyOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/ReadLater/ReadLater.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/ReadLater/ReadLater.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAG1B,OAAO,EACL,kBAAkB,EAClB,cAAc,EAAE,MAAM,YAAY,CAAC;AACrC,OAAO,cAAc,MAAM,8BAA8B,CAAC;AAC1D,OAAO,EAAE,gBAAgB,EAAE,yBAAyB,EAAE,MAAM,mBAAmB,CAAC;AAEhF,OAAO,KAAK,MAAM,iCAAiC,CAAC;AAEpD,OAAO,EAAE,oBAAoB,EAAE,MAAM,+BAA+B,CAAC;AACrE,OAAO,EAAE,eAAe,EAAE,iBAAiB,EAAE,MAAM,8BAA8B,CAAC;AAwBlF;IAAwB,6BAAiD;IACvE;QAAA,YACE,iBAAO,SAIR;QAMD,kBAAY,GAAG,UAAC,MAAW,EAAE,KAAa;;YAChC,IAAA,6BAAO,CAAgB;YACzB,IAAA,gBAAgD,EAA9C,sCAAgB,EAAE,gCAA4B,CAAC;YAEvD,IAAM,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,QAAQ,EAAE;gBACZ,IAAI,aAAa,KAAK,cAAc,CAAC,SAAS,EAAE;oBAC9C,KAAI,CAAC,KAAK,CAAC,gBAAiB,CAAC;wBAC3B,OAAO,EAAE,KAAK;wBACd,IAAI,EAAE,EAAE,KAAK,YAAI,GAAC,cAAc,CAAC,SAAS,IAAG,IAAI,KAAE,EAAE;qBACtD,CAAC,CAAC;oBACH,iBAAiB,CAAC,eAAe,CAAC,YAAY,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;iBACrE;gBAED,oBAAoB,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;gBAEtD,IAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;gBAC5C,gBAAgB,CAAC,EAAE,IAAI,MAAA,EAAE,CAAC,CAAC;gBAE3B,yCAAyC;gBACzC,yBAAyB,CAAC,IAAI,CAAC,CAAC;aACjC;QACH,CAAC,CAAA;QAED,uBAAiB,GAAG,UAAC,OAAe;YAClC,KAAI,CAAC,QAAQ,CAAC;gBACZ,OAAO,EAAE,gBAAgB,CAAC,OAAO,EAAE,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC;aAC3D,CAAC,CAAC;QACL,CAAC,CAAA;QArCC,KAAI,CAAC,KAAK,GAAG;YACX,OAAO,EAAE,EAAE;SACZ,CAAC;;IACJ,CAAC;IAED,qCAAiB,GAAjB;QACE,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,gBAAgB,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC3E,CAAC;IAgCD,0BAAM,GAAN;QACE,IAAM,IAAI,GAAG,oBAAC,KAAK,IAAC,KAAK,EAAC,MAAM,EAAC,MAAM,EAAC,MAAM,GAAG,CAAC;QAC1C,IAAA,4BAAO,CAAgB;QACvB,IAAA,0BAAM,CAAgB;QAE9B,OAAO,CACL,oBAAC,cAAc,IACb,SAAS,EAAC,oBAAoB,EAC9B,IAAI,EAAE,kBAAkB,CAAC,SAAS,EAClC,IAAI,EAAE,IAAI,EACV,OAAO,EAAC,YAAY,EACpB,OAAO,EAAE,OAAO,EAChB,WAAW,EAAC,4BAA4B,EACxC,MAAM,EAAE,MAAM,EACd,QAAQ,EAAE,IAAI,CAAC,YAAY,EAC3B,aAAa,EAAE,IAAI,CAAC,iBAAiB,EACrC,WAAW,SACX,CACH,CAAC;IACJ,CAAC;IACH,gBAAC;AAAD,CAAC,AA9DD,CAAwB,KAAK,CAAC,aAAa,GA8D1C;AAED,eAAe,SAAS,CAAC","sourcesContent":["import React from 'react';\nimport { Moment } from 'moment';\n\nimport {\n  CommandControlType, ThreadCommitMeta, Preferences,\n  OnboardingType } from '@src/types';\nimport ControlPopover from '../components/ControlPopover';\nimport { typeaheadOptions, setLastScheduledTypeahead } from '@src/lib/datetime';\n\nimport Clock from '@src/components/Icons/Clock.svg';\nimport { OnboardingPatchMeta } from '@src/ducks/me';\nimport { getOnboardingActions } from '@src/lib/OnboardingDispatcher';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface Props {\n  onHide: () => void;\n  isDefault?: boolean;\n  selectedThread: string;\n  preferences: Preferences;\n  rsbOnboarding?: OnboardingType;\n}\n\nexport interface DispatchProps {\n  submitCommitMeta: (commitMeta: ThreadCommitMeta) => void;\n  updateOnboarding?: (meta: OnboardingPatchMeta) => void;\n}\n\ninterface State {\n  options: Array<{\n    title: string;\n    moment: Moment;\n    desc: string;\n    unschedule: boolean;\n  }>;\n}\n\nclass ReadLater extends React.PureComponent<Props & DispatchProps, State> {\n  constructor() {\n    super();\n    this.state = {\n      options: [],\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ options: typeaheadOptions('', this.props.preferences) });\n  }\n\n  handleSelect = (option: any, index: number) => {\n    const { options } = this.state;\n    const { submitCommitMeta, rsbOnboarding } = this.props;\n\n    const selected = options[index];\n    if (selected) {\n      if (rsbOnboarding === OnboardingType.ReadLater) {\n        this.props.updateOnboarding!({\n          skipped: false,\n          type: { steps: { [OnboardingType.ReadLater]: true } },\n        });\n        logAmplitudeEvent(AmplitudeEvents.TourStepNine, { skipped: false });\n      }\n\n      getOnboardingActions().next(OnboardingType.ReadLater);\n\n      const when = options[index].moment.toDate();\n      submitCommitMeta({ when });\n\n      // Set Scheduled Date for Last Used Value\n      setLastScheduledTypeahead(when);\n    }\n  }\n\n  handleInputChange = (partial: string) => {\n    this.setState({\n      options: typeaheadOptions(partial, this.props.preferences),\n    });\n  }\n\n  render() {\n    const icon = <Clock width=\"14px\" height=\"14px\" />;\n    const { options } = this.state;\n    const { onHide } = this.props;\n\n    return (\n      <ControlPopover\n        className=\"read-later-popover\"\n        type={CommandControlType.ReadLater}\n        icon={icon}\n        heading=\"Read Later\"\n        options={options}\n        placeholder=\"this weekend, next tuesday\"\n        onHide={onHide}\n        onSelect={this.handleSelect}\n        onInputChange={this.handleInputChange}\n        showOnMount\n      />\n    );\n  }\n}\n\nexport default ReadLater;\n"]}]}