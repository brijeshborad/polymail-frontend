{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/CollapsedNavigationSection/CollapsedNavigationSection.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/CollapsedNavigationSection/CollapsedNavigationSection.tsx","mtime":1675280254018},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX3NwcmVhZEFycmF5cyA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheXMpIHx8IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoOwogICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKQogICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKQogICAgICAgICAgICByW2tdID0gYVtqXTsKICAgIHJldHVybiByOwp9OwppbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJzsKaW1wb3J0IHsgY29tcGFjdCwgY2xvbmVEZWVwIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgTGlzdFN0YXR1cyB9IGZyb20gJ0BzcmMvdHlwZXMnOwppbXBvcnQgeyBkZXNjZW5kYW50cywgcmVjdXJzaXZlbHlSZW5hbWVkTGlzdHMgfSBmcm9tICdAc3JjL2xpYi9tYWlsYm94JzsKaW1wb3J0ICcuL0NvbGxhcHNlZE5hdmlnYXRpb25TZWN0aW9uLnNjc3MnOwppbXBvcnQgU2VhcmNoIGZyb20gJ0BzcmMvY29tcG9uZW50cy9JY29ucy9TZWFyY2guc3ZnJzsKaW1wb3J0IHsgQ29sbGFwc2VkU2VjdGlvbkl0ZW0gfSBmcm9tICcuLi9JdGVtL0NvbGxhcHNlZFNlY3Rpb25JdGVtL0NvbGxhcHNlZFNlY3Rpb25JdGVtJzsKLy8gTGVmdFNpZGViYXIgU2VjdGlvbgp2YXIgQ29sbGFwc2VkTmF2aWdhdGlvblNlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoQ29sbGFwc2VkTmF2aWdhdGlvblNlY3Rpb24sIF9zdXBlcik7CiAgICBmdW5jdGlvbiBDb2xsYXBzZWROYXZpZ2F0aW9uU2VjdGlvbigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZVJlZiA9IGZ1bmN0aW9uIChtZW51KSB7CiAgICAgICAgICAgIF90aGlzLm1lbnUgPSBtZW51OwogICAgICAgIH07CiAgICAgICAgLy8gSWRlbnRpZnkgd2hpY2ggdGFicyB0byBkaXNwbGF5CiAgICAgICAgX3RoaXMuZGlzcGxheWVkVGFicyA9IGZ1bmN0aW9uICh0YWJzKSB7CiAgICAgICAgICAgIHZhciBleHBhbmRlZEtleXMgPSBfdGhpcy5zdGF0ZS5leHBhbmRlZEtleXM7CiAgICAgICAgICAgIHJldHVybiB0YWJzLmZpbHRlcihmdW5jdGlvbiAodGFiKSB7CiAgICAgICAgICAgICAgICBpZiAodGFiLmxpc3RMZXZlbCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRhYi5wYXJlbnRMaXN0ICYmIGV4cGFuZGVkS2V5c1t0YWIucGFyZW50TGlzdF0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy50b2dnbGVJdGVtRXhwYW5zaW9uID0gZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICB2YXIgdGFicyA9IF90aGlzLnByb3BzLnRhYnM7CiAgICAgICAgICAgIHZhciBleHBhbmRlZEtleXMgPSBjbG9uZURlZXAoX3RoaXMuc3RhdGUuZXhwYW5kZWRLZXlzKTsKICAgICAgICAgICAgdmFyIGV4cGFuZGVkID0gIWV4cGFuZGVkS2V5c1trZXldOwogICAgICAgICAgICAvLyBXaGVuIGNsb3NpbmcsIGNsb3NlIGFsbCBleHBhbmRlZCBsaXN0cwogICAgICAgICAgICBpZiAoIWV4cGFuZGVkKSB7CiAgICAgICAgICAgICAgICB2YXIgbGlzdHMgPSBjb21wYWN0KHRhYnMubWFwKGZ1bmN0aW9uICh0YWIpIHsgcmV0dXJuIHRhYi5saXN0OyB9KSk7CiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlZFRhYiA9IHRhYnMuZmlsdGVyKGZ1bmN0aW9uICh0YWIpIHsgcmV0dXJuIHRhYi5saXN0ICYmIHRhYi5saXN0LmlkID09PSBrZXk7IH0pWzBdOwogICAgICAgICAgICAgICAgdmFyIGRlc2NlbmRhbnRMaXN0cyA9IG1hdGNoZWRUYWIgJiYgbWF0Y2hlZFRhYi5saXN0ICYmIGRlc2NlbmRhbnRzKG1hdGNoZWRUYWIubGlzdCwgbGlzdHMpOwogICAgICAgICAgICAgICAgaWYgKGRlc2NlbmRhbnRMaXN0cyAmJiBkZXNjZW5kYW50TGlzdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudExpc3RzLmZvckVhY2goZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cGFuZGVkS2V5c1tsaXN0LmlkXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kZWRLZXlzW2xpc3QuaWRdID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBleHBhbmRlZEtleXNba2V5XSA9ICFleHBhbmRlZEtleXNba2V5XTsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBleHBhbmRlZEtleXM6IGV4cGFuZGVkS2V5cyB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNvbGxhcHNlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgY29sbGFwc2VMaXN0cyA9IF9hLmNvbGxhcHNlTGlzdHMsIGNvbGxhcHNlZCA9IF9hLmNvbGxhcHNlZDsKICAgICAgICAgICAgY29sbGFwc2VMaXN0cyghY29sbGFwc2VkKTsKICAgICAgICB9OwogICAgICAgIC8vIEhhbmRsZXMgdXBkYXRpbmcgbGlzdCBhbmQgYWxsIGRlc2NlbmRhbnQgbGlzdHMKICAgICAgICAvLyBIYW5kbGUgZ3JhbmRzb24gbmFtZSB1cGRhdGVzCiAgICAgICAgX3RoaXMuaGFuZGxlTGlzdFVwZGF0ZSA9IGZ1bmN0aW9uIChvbGRMaXN0LCBuZXdOYW1lKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCB1cGRhdGVMaXN0ID0gX2EudXBkYXRlTGlzdCwgc2V0VG9hc3QgPSBfYS5zZXRUb2FzdDsKICAgICAgICAgICAgLy8gRG8gbm90IGFsbG93IGlmIGxpc3Qgc3RhdHVzIGlzIG5vdCBvawogICAgICAgICAgICBpZiAob2xkTGlzdC5zdGF0dXMgIT09IExpc3RTdGF0dXMuT2spIHsKICAgICAgICAgICAgICAgIHNldFRvYXN0KG5ldyBFcnJvcignVGhpcyBsYWJlbCBpcyBjdXJyZW50bHkgdXBkYXRpbmcsIHBsZWFzZSB3YWl0IGFuZCB0cnkgYWdhaW4gbGF0ZXIhJykpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEdyYWIgbWF0Y2hlZCB0YWJzCiAgICAgICAgICAgIHZhciB0YWJzID0gY2xvbmVEZWVwKF90aGlzLnByb3BzLnRhYnMpOwogICAgICAgICAgICB2YXIgdXBkYXRlZExpc3RzID0gcmVjdXJzaXZlbHlSZW5hbWVkTGlzdHMob2xkTGlzdCwgbmV3TmFtZSwgdGFicyk7CiAgICAgICAgICAgIC8vIERvIG5vdCBhbGxvdyBpZiBsaXN0IHN0YXR1cyBpcyBub3Qgb2sKICAgICAgICAgICAgaWYgKHVwZGF0ZWRMaXN0cyAmJiB1cGRhdGVkTGlzdHMuZmlsdGVyKGZ1bmN0aW9uIChsKSB7IHJldHVybiBsLnN0YXR1cyAhPT0gTGlzdFN0YXR1cy5PazsgfSkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBzZXRUb2FzdChuZXcgRXJyb3IoJ1RoaXMgbGFiZWwgaXMgY3VycmVudGx5IHVwZGF0aW5nLCBwbGVhc2Ugd2FpdCBhbmQgdHJ5IGFnYWluIGxhdGVyIScpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodXBkYXRlZExpc3RzICYmIHVwZGF0ZWRMaXN0cy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZWRMaXN0cy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7IHJldHVybiB1cGRhdGVMaXN0KGwpOyB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTGlzdENyZWF0ZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHZhciBjcmVhdGVMaXN0ID0gX3RoaXMucHJvcHMuY3JlYXRlTGlzdDsKICAgICAgICAgICAgaWYgKGNyZWF0ZUxpc3QpIHsKICAgICAgICAgICAgICAgIGNyZWF0ZUxpc3QobmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUxpc3REZWxldGUgPSBmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgZGVsZXRlTGlzdCA9IF9hLmRlbGV0ZUxpc3QsIHNldFRvYXN0ID0gX2Euc2V0VG9hc3Q7CiAgICAgICAgICAgIHZhciBjb25maXJtUHJvcHMgPSB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBMYWJlbD8nLAogICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoaXMgbGFiZWwgYW5kIGFsbCBpdHMgc3VibGFiZWxzIHdpbGwgYmUgcmVtb3ZlZC4gQW55ICcKICAgICAgICAgICAgICAgICAgICArICdlbWFpbHMgY29udGFpbmVkIGluIHRoZXNlIGxhYmVscyB3aWxsIGJlIG1vdmVkIGludG8gQXJjaGl2ZS4gJwogICAgICAgICAgICAgICAgICAgICsgJ1RoaXMgY2Fubm90IGJlIHVuZG9uZScsCiAgICAgICAgICAgICAgICBjb25maXJtQ29weTogJ0RlbGV0ZScsCiAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogdW5kZWZpbmVkIH0pOwogICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgbWF0Y2hlZCB0YWJzCiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYnMgPSBjbG9uZURlZXAoX3RoaXMucHJvcHMudGFicyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWRUYWIgPSB0YWJzLmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5saXN0ICYmIHQubGlzdC5pZCA9PT0gbGlzdC5pZDsgfSlbMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVkVGFiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiBhbnkgZGVzY2VuZGFudCBsaXN0cwogICAgICAgICAgICAgICAgICAgIHZhciBsaXN0TGV2ZWwgPSBtYXRjaGVkVGFiLmxpc3RMZXZlbCB8fCAwOwogICAgICAgICAgICAgICAgICAgIHZhciBsaXN0cyA9IGNvbXBhY3QodGFicwogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICYmIHQubGlzdExldmVsICYmIHQubGlzdExldmVsID4gbGlzdExldmVsIHx8IGZhbHNlOyB9KQogICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0ICYmIHQubGlzdDsgfSkpOwogICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgbWF0Y2hlZCBsaXN0CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB0YWJzLm1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5saXN0OyB9KS5maWx0ZXIoZnVuY3Rpb24gKGwpIHsgcmV0dXJuIGwgJiYgbC5pZCA9PT0gbGlzdC5pZDsgfSlbMF07CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gR2F0aGVyIGRlc2NlbmRhbnRzIGFuZCBjYWxsIGRlbGV0ZXMgZm9yIGFsbCBsaXN0cwogICAgICAgICAgICAgICAgICAgIHZhciBkZXNjZW5kYW50TGlzdHMgPSBkZXNjZW5kYW50cyhtYXRjaGVkLCBsaXN0cyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGV0ZUxpc3RzID0gX19zcHJlYWRBcnJheXMoZGVzY2VuZGFudExpc3RzLCBbbGlzdF0pOwogICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBhbGxvdyBpZiBsaXN0IHN0YXR1cyBpcyBub3Qgb2sKICAgICAgICAgICAgICAgICAgICBpZiAoZGVsZXRlTGlzdHMuZmlsdGVyKGZ1bmN0aW9uIChsKSB7IHJldHVybiBsLnN0YXR1cyAhPT0gTGlzdFN0YXR1cy5PazsgfSkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRvYXN0KG5ldyBFcnJvcignVGhpcyBsYWJlbCBpcyBjdXJyZW50bHkgdXBkYXRpbmcsIHBsZWFzZSB3YWl0IGFuZCB0cnkgYWdhaW4gbGF0ZXIhJykpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChkZWxldGVMaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUxpc3RzLmZvckVhY2goZnVuY3Rpb24gKGwpIHsgcmV0dXJuIGRlbGV0ZUxpc3QobCk7IH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IHVuZGVmaW5lZCB9KTsgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IGNvbmZpcm1Qcm9wcyB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUxpc3RNZW51ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dNZW51OiB0cnVlIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLm1lbnUudG9nZ2xlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTWVudUhpZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd01lbnU6IGZhbHNlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTmF2aWdhdGlvbkNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hvd05hdmlnYXRpb25DZW50ZXIgPSBfdGhpcy5wcm9wcy5zaG93TmF2aWdhdGlvbkNlbnRlcjsKICAgICAgICAgICAgc2hvd05hdmlnYXRpb25DZW50ZXIoKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0geyBleHBhbmRlZEtleXM6IHt9IH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQ29sbGFwc2VkTmF2aWdhdGlvblNlY3Rpb24ucHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRhYnMgPSB0aGlzLnByb3BzLnRhYnM7CiAgICAgICAgdmFyIGV4cGFuZGVkS2V5cyA9IHt9OwogICAgICAgIHRhYnMuZm9yRWFjaChmdW5jdGlvbiAodGFiKSB7CiAgICAgICAgICAgIC8vIFNldCBleHBhbmRhYmxlIGtleXMKICAgICAgICAgICAgaWYgKHRhYi5saXN0ICYmIHRhYi5saXN0TGV2ZWwgPT09IDApIHsKICAgICAgICAgICAgICAgIGV4cGFuZGVkS2V5c1t0YWIubGlzdC5pZF0gPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICBleHBhbmRlZEtleXM6IGV4cGFuZGVkS2V5cywKICAgICAgICB9KTsKICAgIH07CiAgICBDb2xsYXBzZWROYXZpZ2F0aW9uU2VjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBjb2xsYXBzZWQgPSB0aGlzLnByb3BzLmNvbGxhcHNlZDsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdjb2xsYXBzZWQtbmF2aWdhdGlvbi1zZWN0aW9uJywgeyBjb2xsYXBzZWQ6IGNvbGxhcHNlZCB9KSB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KENvbGxhcHNlZFNlY3Rpb25JdGVtLCB7IGtleTogJ25hdmlnYXRpb24nLCBuYW1lOiAnTmF2aWdhdGlvbicsIGNvdW50OiAwLCBjbGFzc05hbWU6ICduYXZpZ2F0aW9uJywgaWNvbjogUmVhY3QuY3JlYXRlRWxlbWVudChTZWFyY2gsIG51bGwpLCBzZWxlY3RlZDogZmFsc2UsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlTmF2aWdhdGlvbkNsaWNrLCBpc09uYm9hcmRpbmc6IGZhbHNlLCBub3RpZmljYXRpb25Db3VudDogZmFsc2UsIGhvdGtleTogJ2cnIH0pKSk7CiAgICB9OwogICAgcmV0dXJuIENvbGxhcHNlZE5hdmlnYXRpb25TZWN0aW9uOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgQ29sbGFwc2VkTmF2aWdhdGlvblNlY3Rpb247Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/CollapsedNavigationSection/CollapsedNavigationSection.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/CollapsedNavigationSection/CollapsedNavigationSection.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { compact, cloneDeep } from 'lodash';\nimport ListMenu from '../Item/ListMenu';\nimport { Tab, Account, List, ListStatus } from '@src/types';\n\nimport { descendants, recursivelyRenamedLists } from '@src/lib/mailbox';\nimport { Props as ConfirmProps } from '@src/components/Base/Confirm';\nimport './CollapsedNavigationSection.scss';\nimport Search from '@src/components/Icons/Search.svg';\nimport { CollapsedSectionItem } from '../Item/CollapsedSectionItem/CollapsedSectionItem';\n\nexport interface Props {\n  title: string;\n  selectedTab: string;\n  tabs: Tab[];\n  selectedAccount: Account;\n}\n\nexport interface StateProps {\n  collapsed: boolean;\n}\n\nexport interface DispatchProps {\n  updateList: (list: List) => void;\n  deleteList: (list: List) => void;\n  createList: (name: string) => void;\n  collapseLists: (collapse: boolean) => void;\n  showNavigationCenter: () => void;\n  setToast: (msg: Error) => void;\n}\n\n// Internal state for account/title\ninterface State {\n  expandedKeys: { [id: string]: boolean; };\n  confirmProps?: ConfirmProps;\n  showMenu?: boolean;\n}\n\n// LeftSidebar Section\nclass CollapsedNavigationSection extends React.PureComponent<\n  Props & DispatchProps & StateProps, State\n> {\n  menu: ListMenu;\n\n  constructor() {\n    super();\n\n    this.state = { expandedKeys: {} };\n  }\n\n  UNSAFE_componentWillMount() {\n    const { tabs } = this.props;\n    const expandedKeys = {};\n\n    tabs.forEach((tab) => {\n      // Set expandable keys\n      if (tab.list && tab.listLevel === 0) {\n        expandedKeys[tab.list.id] = false;\n      }\n    });\n\n    this.setState({\n      expandedKeys,\n    });\n  }\n\n  handleRef = (menu: ListMenu) => {\n    this.menu = menu;\n  }\n\n  // Identify which tabs to display\n  displayedTabs = (tabs: Tab[]) => {\n    const { expandedKeys } = this.state;\n\n    return tabs.filter((tab) => {\n      if (tab.listLevel === 0) {\n        return true;\n      }\n\n      if (tab.parentList && expandedKeys[tab.parentList]) {\n        return true;\n      }\n\n      return false;\n\n    });\n  }\n\n  toggleItemExpansion = (key: string) => {\n    const { tabs } = this.props;\n    const expandedKeys = cloneDeep(this.state.expandedKeys);\n    const expanded = !expandedKeys[key];\n\n    // When closing, close all expanded lists\n    if (!expanded) {\n      const lists = compact(tabs.map(tab => tab.list));\n      const matchedTab = tabs.filter(tab => tab.list && tab.list.id === key)[0];\n      const descendantLists = matchedTab && matchedTab.list && descendants(matchedTab.list, lists);\n      if (descendantLists && descendantLists.length) {\n        descendantLists.forEach((list) => {\n          if (expandedKeys[list.id]) {\n            expandedKeys[list.id] = false;\n          }\n        });\n      }\n    }\n    expandedKeys[key] = !expandedKeys[key];\n    this.setState({ expandedKeys });\n  }\n\n  handleCollapse = () => {\n    const { collapseLists, collapsed } = this.props;\n\n    collapseLists(!collapsed);\n  }\n\n  // Handles updating list and all descendant lists\n  // Handle grandson name updates\n  handleListUpdate = (oldList: List, newName: string) => {\n    const { updateList, setToast } = this.props;\n\n    // Do not allow if list status is not ok\n    if (oldList.status !== ListStatus.Ok) {\n      setToast(new Error('This label is currently updating, please wait and try again later!'));\n      return;\n    }\n\n    // Grab matched tabs\n    const tabs = cloneDeep(this.props.tabs);\n\n    const updatedLists = recursivelyRenamedLists(oldList, newName, tabs);\n\n    // Do not allow if list status is not ok\n    if (updatedLists && updatedLists.filter(l => l.status !== ListStatus.Ok).length) {\n      setToast(new Error('This label is currently updating, please wait and try again later!'));\n      return;\n    }\n\n    if (updatedLists && updatedLists.length) {\n      updatedLists.forEach(l => updateList(l));\n    }\n  }\n\n  handleListCreate = (name: string) => {\n    const { createList } = this.props;\n    if (createList) {\n      createList(name);\n    }\n  }\n\n  handleListDelete = (list: List) => {\n    const { deleteList, setToast } = this.props;\n\n    const confirmProps: ConfirmProps = {\n      title: 'Are you sure you want to delete this Label?',\n      message: 'This label and all its sublabels will be removed. Any '\n        + 'emails contained in these labels will be moved into Archive. '\n        + 'This cannot be undone',\n      confirmCopy: 'Delete',\n      onConfirm: () => {\n        this.setState({ confirmProps: undefined });\n\n        // Grab matched tabs\n        const tabs = cloneDeep(this.props.tabs);\n        const matchedTab = tabs.filter(t => t.list && t.list.id === list.id)[0];\n        if (!matchedTab) {\n          return;\n        }\n\n        // Grab any descendant lists\n        const listLevel = matchedTab.listLevel || 0;\n        const lists = compact(tabs\n          .filter(t => t && t.listLevel && t.listLevel > listLevel || false)\n          .map(t => t && t.list),\n        );\n\n        // Grab matched list\n        const matched = tabs.map(t => t.list).filter(l => l && l.id === list.id)[0];\n        if (!matched) {\n          return;\n        }\n\n        // Gather descendants and call deletes for all lists\n        const descendantLists = descendants(matched, lists);\n        const deleteLists = [...descendantLists, list];\n\n        // Do not allow if list status is not ok\n        if (deleteLists.filter(l => l.status !== ListStatus.Ok).length) {\n          setToast(new Error('This label is currently updating, please wait and try again later!'));\n          return;\n        }\n\n        if (deleteList) {\n          deleteLists.forEach(l => deleteList(l));\n        }\n      },\n      onCancel: () => this.setState({ confirmProps: undefined }),\n    };\n\n    this.setState({ confirmProps });\n  }\n\n  handleListMenu = (e: React.MouseEvent<HTMLElement>) => {\n    e.stopPropagation();\n    e.preventDefault();\n    this.setState(\n      { showMenu: true },\n      () => {\n        this.menu.toggle();\n      },\n    );\n  }\n\n  handleMenuHide = () => {\n    this.setState({ showMenu: false });\n  }\n\n  handleNavigationClick = () => {\n    const { showNavigationCenter } = this.props;\n    showNavigationCenter();\n  }\n\n  render() {\n    const { collapsed } = this.props;\n\n    return (\n      <div className={classnames('collapsed-navigation-section', { collapsed })}>\n        {\n          <CollapsedSectionItem\n            key={'navigation'}\n            name={'Navigation'}\n            count={0}\n            className={'navigation'}\n            icon={<Search />}\n            selected={false}\n            onClick={this.handleNavigationClick}\n            isOnboarding={false}\n            notificationCount={false}\n            hotkey={'g'}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nexport default CollapsedNavigationSection;\n"]}]}