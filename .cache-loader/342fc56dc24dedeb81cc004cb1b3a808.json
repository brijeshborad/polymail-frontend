{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/MailHeader/AccountChooserPopover/AccountChooserPopover.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/MailHeader/AccountChooserPopover/AccountChooserPopover.tsx","mtime":1675280254019},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7CmltcG9ydCB7IEFjY291bnRUeXBlIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCBQb3BvdmVyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Qb3BvdmVyL1BvcG92ZXInOwppbXBvcnQgJy4vQWNjb3VudENob29zZXJQb3BvdmVyLnNjc3MnOwovLyBUT0RPKFNISU4pOiBVc2UgcHJvcGVyIGtleXMgZm9yIGFsbC1hY2NvdW50IHNlbGVjdGlvbnMKdmFyIEFjY291bnRDaG9vc2VyUG9wb3ZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhBY2NvdW50Q2hvb3NlclBvcG92ZXIsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBBY2NvdW50Q2hvb3NlclBvcG92ZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy50b2dnbGUgPSBmdW5jdGlvbiAodG9wKSB7CiAgICAgICAgICAgIGlmICh0b3ApIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgdG9wOiB0b3AgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnBvcG92ZXIudG9nZ2xlKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLnBvcG92ZXIudG9nZ2xlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUFjY291bnRTZWxlY3QgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgb25TZWxlY3QgPSBfdGhpcy5wcm9wcy5vblNlbGVjdDsKICAgICAgICAgICAgaWYgKG9uU2VsZWN0KSB7CiAgICAgICAgICAgICAgICBvblNlbGVjdCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLnBvcG92ZXIgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsgdG9wOiAwIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQWNjb3VudENob29zZXJQb3BvdmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBzZWxlY3RlZEFjY291bnQgPSBfYS5zZWxlY3RlZEFjY291bnQsIGFjY291bnRzID0gX2EuYWNjb3VudHMsIGNvdW50cyA9IF9hLmNvdW50czsKICAgICAgICB2YXIgdG9wID0gdGhpcy5zdGF0ZS50b3A7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFBvcG92ZXIsIHsgcmVmOiB0aGlzLmhhbmRsZVJlZiwgY2xhc3NOYW1lOiAiYWNjb3VudC1jaG9vc2VyLXBvcG92ZXIiLCBzdHlsZTogeyB0b3A6IHRvcCB9IH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiaGVhZGVyIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwgIlNob3cgbWFpbCBmcm9tIiksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlcGFyYXRvciIgfSkpLAogICAgICAgICAgICBhY2NvdW50cwogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYWNjb3VudCkgeyByZXR1cm4gYWNjb3VudC50eXBlICE9PSBBY2NvdW50VHlwZS5BbGlhczsgfSkKICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGFjY291bnQpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KExpbmssIHsga2V5OiBhY2NvdW50LmVtYWlsLCB0bzogIi9tYWlsLyIgKyBhY2NvdW50LmlkLCBjbGFzc05hbWU6ICJsaW5rIiwgb25DbGljazogX3RoaXMuaGFuZGxlQWNjb3VudFNlbGVjdCB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2NlbGwgYm9yZGVyLWJvdHRvbScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkQWNjb3VudC5pZCA9PT0gYWNjb3VudC5pZCwKICAgICAgICAgICAgICAgICAgICB9KSB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibGVmdCIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgYWNjb3VudC5kZXNjcmlwdGlvbiksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2Vjb25kLXJvdyIgfSwgYWNjb3VudC5lbWFpbCkpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY291bnRzIiB9LCBjb3VudHNbYWNjb3VudC5pZF0pKSkpOyB9KSkpOwogICAgfTsKICAgIHJldHVybiBBY2NvdW50Q2hvb3NlclBvcG92ZXI7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBBY2NvdW50Q2hvb3NlclBvcG92ZXI7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/MailHeader/AccountChooserPopover/AccountChooserPopover.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/LeftSidebar/components/MailTab/components/Section/MailHeader/AccountChooserPopover/AccountChooserPopover.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,UAAU,MAAM,YAAY,CAAC;AACpC,OAAO,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AAExC,OAAO,EAAW,WAAW,EAAE,MAAM,YAAY,CAAC;AAClD,OAAO,OAAO,MAAM,iCAAiC,CAAC;AAEtD,OAAO,8BAA8B,CAAC;AAatC,yDAAyD;AACzD;IAAoC,yCAAiC;IAEnE;QAAA,YACE,iBAAO,SAGR;QAED,YAAM,GAAG,UAAC,GAAY;YACpB,IAAI,GAAG,EAAE;gBACP,KAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,KAAA,EAAE,EAAE;oBACrB,KAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;gBACxB,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,KAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;aACvB;QACH,CAAC,CAAA;QAED,yBAAmB,GAAG,UAAC,CAAoC;YACjD,IAAA,+BAAQ,CAAgB;YAEhC,IAAI,QAAQ,EAAE;gBACZ,QAAQ,EAAE,CAAC;aACZ;QACH,CAAC,CAAA;QAED,eAAS,GAAG,UAAC,GAAY;YACvB,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACrB,CAAC,CAAA;QAvBC,KAAI,CAAC,KAAK,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;;IAC1B,CAAC;IAwBD,sCAAM,GAAN;QAAA,iBAsCC;QArCO,IAAA,eAAkD,EAAhD,oCAAe,EAAE,sBAAQ,EAAE,kBAAqB,CAAC;QACjD,IAAA,oBAAG,CAAgB;QAE3B,OAAO,CACL,oBAAC,OAAO,IACN,GAAG,EAAE,IAAI,CAAC,SAAS,EACnB,SAAS,EAAC,yBAAyB,EACnC,KAAK,EAAE,EAAE,GAAG,KAAA,EAAE;YAEd,6BAAK,SAAS,EAAC,QAAQ;gBACrB,6BAAK,SAAS,EAAC,OAAO,qBAAqB;gBAC3C,6BAAK,SAAS,EAAC,WAAW,GAAG,CACzB;YACL,QAAQ;iBACN,MAAM,CAAC,UAAA,OAAO,IAAI,OAAA,OAAO,CAAC,IAAI,KAAK,WAAW,CAAC,KAAK,EAAlC,CAAkC,CAAC;iBACrD,GAAG,CAAC,UAAA,OAAO,IAAI,OAAA,CAChB,oBAAC,IAAI,IACH,GAAG,EAAE,OAAO,CAAC,KAAK,EAClB,EAAE,EAAE,WAAS,OAAO,CAAC,EAAI,EACzB,SAAS,EAAC,MAAM,EAChB,OAAO,EAAE,KAAI,CAAC,mBAAmB;gBAEjC,6BACE,SAAS,EAAE,UAAU,CAAC,oBAAoB,EAAE;wBAC1C,QAAQ,EAAE,eAAe,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE;qBAC5C,CAAC;oBAEF,6BAAK,SAAS,EAAC,MAAM;wBACnB,iCAAM,OAAO,CAAC,WAAW,CAAO;wBAChC,6BAAK,SAAS,EAAC,YAAY,IAAE,OAAO,CAAC,KAAK,CAAO,CAC7C;oBACN,6BAAK,SAAS,EAAC,QAAQ,IAAE,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,CAAO,CAC9C,CACD,CACR,EAnBiB,CAmBjB,CAAC,CACM,CACX,CAAC;IACJ,CAAC;IACH,4BAAC;AAAD,CAAC,AArED,CAAoC,KAAK,CAAC,aAAa,GAqEtD;AAED,eAAe,qBAAqB,CAAC","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { Link } from 'react-router-dom';\n\nimport { Account, AccountType } from '@src/types';\nimport Popover from '@src/components/Popover/Popover';\n\nimport './AccountChooserPopover.scss';\n\nexport interface Props {\n  accounts: Account[];\n  selectedAccount: Account;\n  onSelect: () => void;\n  counts: { [id: string]: number };\n}\n\ninterface State {\n  top: number;\n}\n\n// TODO(SHIN): Use proper keys for all-account selections\nclass AccountChooserPopover extends React.PureComponent<Props, State> {\n  private popover: Popover;\n  constructor() {\n    super();\n\n    this.state = { top: 0 };\n  }\n\n  toggle = (top?: number) => {\n    if (top) {\n      this.setState({ top }, () => {\n        this.popover.toggle();\n      });\n    } else {\n      this.popover.toggle();\n    }\n  }\n\n  handleAccountSelect = (e: React.SyntheticEvent<HTMLElement>) => {\n    const { onSelect } = this.props;\n\n    if (onSelect) {\n      onSelect();\n    }\n  }\n\n  handleRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  render() {\n    const { selectedAccount, accounts, counts } = this.props;\n    const { top } = this.state;\n\n    return (\n      <Popover\n        ref={this.handleRef}\n        className=\"account-chooser-popover\"\n        style={{ top }}\n      >\n        <div className=\"header\">\n          <div className=\"title\">Show mail from</div>\n          <div className=\"separator\" />\n        </div>\n        {accounts\n          .filter(account => account.type !== AccountType.Alias)\n          .map(account => (\n          <Link\n            key={account.email}\n            to={`/mail/${account.id}`}\n            className=\"link\"\n            onClick={this.handleAccountSelect}\n          >\n            <div\n              className={classnames('cell border-bottom', {\n                selected: selectedAccount.id === account.id,\n              })}\n            >\n              <div className=\"left\">\n                <div>{account.description}</div>\n                <div className=\"second-row\">{account.email}</div>\n              </div>\n              <div className=\"counts\">{counts[account.id]}</div>\n            </div>\n          </Link>\n        ))}\n      </Popover>\n    );\n  }\n}\n\nexport default AccountChooserPopover;\n"]}]}