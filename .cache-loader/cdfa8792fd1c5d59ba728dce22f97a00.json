{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/history.ts","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/history.ts","mtime":1675280254064},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkgewogICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTsKICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKQogICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0OwogICAgfTsKICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9OwppbXBvcnQgeyBhcHBseUNvbnRhY3REZWZhdWx0cywgYXBwbHlDb250YWN0R3JvdXBEZWZhdWx0cyB9IGZyb20gJ0BzcmMvbGliL2NvbnRhY3QnOwppbXBvcnQgeyBjb21wdXRlVGhyZWFkIH0gZnJvbSAnQHNyYy9saWIvdGhyZWFkJzsKaW1wb3J0IHsgYXBwbHlDYWxlbmRhckV2ZW50RGVmYXVsdHMgfSBmcm9tICcuL21vZGVscy9jYWxlbmRhckV2ZW50cyc7CmltcG9ydCB7IGNvbXB1dGVTaGFyZWRUaHJlYWQgfSBmcm9tICcuL3NoYXJlZFRocmVhZCc7CmV4cG9ydCBmdW5jdGlvbiBhcHBseUhpc3RvcnlEZWZhdWx0cyhoaXN0b3J5KSB7CiAgICB2YXIgbmV3SGlzdG9yeSA9IF9fYXNzaWduKHsgaWQ6ICcnLCBvYmplY3Q6ICcnLCBjbGVhcjogJycsIGNsZWFyQWNjb3VudDogJycsIGRlbGV0ZWQ6IFtdLCBmaWx0ZXJzOiBbXSwgY2FsZW5kYXJzOiBbXSwgY2FsZW5kYXJFdmVudHM6IFtdLCBjb250YWN0czogW10sIGNvbnRhY3RHcm91cHM6IFtdLCBjb250YWN0Tm90ZXM6IFtdLCBzaGFyZWRUaHJlYWRzOiBbXSwgdGVhbU1lbWJlcnM6IFtdLCB0aHJlYWRzOiBbXSB9LCBoaXN0b3J5KTsKICAgIG5ld0hpc3RvcnkudGhyZWFkcyA9IG5ld0hpc3RvcnkudGhyZWFkcy5tYXAoZnVuY3Rpb24gKHRocmVhZCkgeyByZXR1cm4gY29tcHV0ZVRocmVhZCh0aHJlYWQpOyB9KTsKICAgIG5ld0hpc3RvcnkuY29udGFjdHMgPSBuZXdIaXN0b3J5LmNvbnRhY3RzLm1hcChmdW5jdGlvbiAoY29udGFjdCkgeyByZXR1cm4gYXBwbHlDb250YWN0RGVmYXVsdHMoY29udGFjdCk7IH0pOwogICAgbmV3SGlzdG9yeS5jb250YWN0R3JvdXBzID0gbmV3SGlzdG9yeS5jb250YWN0R3JvdXBzLm1hcChmdW5jdGlvbiAoZ3JvdXApIHsKICAgICAgICByZXR1cm4gYXBwbHlDb250YWN0R3JvdXBEZWZhdWx0cyhncm91cCk7CiAgICB9KTsKICAgIG5ld0hpc3Rvcnkuc2hhcmVkVGhyZWFkcyA9IG5ld0hpc3Rvcnkuc2hhcmVkVGhyZWFkcy5tYXAoZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgICAgcmV0dXJuIGNvbXB1dGVTaGFyZWRUaHJlYWQoZ3JvdXApOwogICAgfSk7CiAgICBuZXdIaXN0b3J5LmNhbGVuZGFyRXZlbnRzID0gbmV3SGlzdG9yeS5jYWxlbmRhckV2ZW50cy5tYXAoZnVuY3Rpb24gKGdyb3VwKSB7IHJldHVybiBhcHBseUNhbGVuZGFyRXZlbnREZWZhdWx0cyhncm91cCk7IH0pOwogICAgcmV0dXJuIG5ld0hpc3Rvcnk7Cn0K"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/history.ts","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/history.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,OAAO,EAAE,oBAAoB,EAAE,yBAAyB,EAAE,MAAM,kBAAkB,CAAC;AACnF,OAAO,EAAE,aAAa,EAAE,MAAM,iBAAiB,CAAC;AAChD,OAAO,EAAE,0BAA0B,EAAE,MAAM,yBAAyB,CAAC;AACrE,OAAO,EAAE,mBAAmB,EAAE,MAAM,gBAAgB,CAAC;AAErD,MAAM,UAAU,oBAAoB,CAAC,OAAyB;IAC5D,IAAM,UAAU,cACd,EAAE,EAAE,EAAE,EACN,MAAM,EAAE,EAAS,EACjB,KAAK,EAAE,EAAE,EACT,YAAY,EAAE,EAAE,EAChB,OAAO,EAAE,EAAE,EACX,OAAO,EAAE,EAAE,EACX,SAAS,EAAE,EAAE,EACb,cAAc,EAAE,EAAE,EAClB,QAAQ,EAAE,EAAE,EACZ,aAAa,EAAE,EAAE,EACjB,YAAY,EAAE,EAAE,EAChB,aAAa,EAAE,EAAE,EACjB,WAAW,EAAE,EAAE,EACf,OAAO,EAAE,EAAE,IACR,OAAO,CACX,CAAC;IAEF,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,UAAA,MAAM,IAAI,OAAA,aAAa,CAAC,MAAM,CAAC,EAArB,CAAqB,CAAC,CAAC;IAE7E,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAA,OAAO,IAAI,OAAA,oBAAoB,CAAC,OAAO,CAAC,EAA7B,CAA6B,CAAC,CAAC;IAExF,UAAU,CAAC,aAAa,GAAG,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,UAAA,KAAK;QAC3D,OAAA,yBAAyB,CAAC,KAAK,CAAC;IAAhC,CAAgC,CACjC,CAAC;IAEF,UAAU,CAAC,aAAa,GAAG,UAAU,CAAC,aAAa,CAAC,GAAG,CAAC,UAAA,KAAK;QAC3D,OAAA,mBAAmB,CAAC,KAAK,CAAC;IAA1B,CAA0B,CAC3B,CAAC;IAEF,UAAU,CAAC,cAAc,GAAG,UAAU,CAAC,cAAc,CAAC,GAAG,CACvD,UAAA,KAAK,IAAI,OAAA,0BAA0B,CAAC,KAAK,CAAC,EAAjC,CAAiC,CAC3C,CAAC;IAEF,OAAO,UAAU,CAAC;AACpB,CAAC","sourcesContent":["import { History, Partial } from '@src/types';\nimport { applyContactDefaults, applyContactGroupDefaults } from '@src/lib/contact';\nimport { computeThread } from '@src/lib/thread';\nimport { applyCalendarEventDefaults } from './models/calendarEvents';\nimport { computeSharedThread } from './sharedThread';\n\nexport function applyHistoryDefaults(history: Partial<History>): History {\n  const newHistory: History = {\n    id: '',\n    object: '' as any,\n    clear: '',\n    clearAccount: '',\n    deleted: [],\n    filters: [],\n    calendars: [],\n    calendarEvents: [],\n    contacts: [],\n    contactGroups: [],\n    contactNotes: [],\n    sharedThreads: [],\n    teamMembers: [],\n    threads: [],\n    ...history,\n  };\n\n  newHistory.threads = newHistory.threads.map(thread => computeThread(thread));\n\n  newHistory.contacts = newHistory.contacts.map(contact => applyContactDefaults(contact));\n\n  newHistory.contactGroups = newHistory.contactGroups.map(group =>\n    applyContactGroupDefaults(group),\n  );\n\n  newHistory.sharedThreads = newHistory.sharedThreads.map(group =>\n    computeSharedThread(group),\n  );\n\n  newHistory.calendarEvents = newHistory.calendarEvents.map(\n    group => applyCalendarEventDefaults(group),\n  );\n\n  return newHistory;\n}\n"]}]}