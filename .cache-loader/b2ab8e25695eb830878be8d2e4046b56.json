{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceStageDetail/index.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceStageDetail/index.tsx","mtime":1675280254092},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IFNlcXVlbmNlU3RhZ2VEZXRhaWwgZnJvbSAnLi9TZXF1ZW5jZVN0YWdlRGV0YWlsJzsKaW1wb3J0IHsgc2VxdWVuY2VTdGFnZUluc3RhbmNlVXBkYXRlLCBzZXF1ZW5jZVN0YWdlSW5zdGFuY2VUZXN0LCBzZWxlY3RTdGFnZUluc3RhbmNlQXR0YWNobWVudHNGb3JSZXNvdXJjZSwgc2VxdWVuY2VTdGFnZUluc3RhbmNlQXR0YWNobWVudFJlbW92ZSwgc2VxdWVuY2VTdGFnZUluc3RhbmNlTGlzdCwgfSBmcm9tICdAc3JjL2R1Y2tzL3NlcXVlbmNlU3RhZ2VJbnN0YW5jZXMnOwppbXBvcnQgeyBzZXF1ZW5jZVN0YWdlVXBkYXRlLCBzZXF1ZW5jZVN0YWdlRGVsZXRlLCBzZXF1ZW5jZVN0YWdlRHVwbGljYXRlLCB9IGZyb20gJ0BzcmMvZHVja3Mvc2VxdWVuY2VTdGFnZXMnOwppbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJzsKaW1wb3J0IHsgdmFsdWVzIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgc2VsZWN0QXR0YWNobWVudE1ldGFzRm9yUmVzb3VyY2UgfSBmcm9tICdAc3JjL2R1Y2tzL2RyYWZ0cyc7CmltcG9ydCB7IG9uYm9hcmRpbmdQYXRjaCB9IGZyb20gJ0BzcmMvZHVja3MvbWUnOwppbXBvcnQgeyBzZWxlY3RUZWFtTWVtYmVyIH0gZnJvbSAnQHNyYy9kdWNrcy90ZWFtTWVtYmVycyc7CnZhciBtYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiAoc3RhdGUsIG93blByb3BzKSB7CiAgICB2YXIgc2VsZWN0ZWRTZXF1ZW5jZSA9IG93blByb3BzLm1hdGNoICYmIG93blByb3BzLm1hdGNoLnBhcmFtcy5zZXF1ZW5jZUlkOwogICAgdmFyIHNlbGVjdGVkU3RhZ2UgPSBvd25Qcm9wcy5tYXRjaCAmJiBvd25Qcm9wcy5tYXRjaC5wYXJhbXMuc3RhZ2VJZDsKICAgIHZhciBzZXF1ZW5jZSA9IChzZWxlY3RlZFNlcXVlbmNlICYmIHN0YXRlLnNlcXVlbmNlcykgPwogICAgICAgIHN0YXRlLnNlcXVlbmNlc1tzZWxlY3RlZFNlcXVlbmNlXSA6IHVuZGVmaW5lZDsKICAgIHZhciBzdGFnZSA9IHNlbGVjdGVkU2VxdWVuY2UgJiYgc2VsZWN0ZWRTdGFnZQogICAgICAgICYmIHN0YXRlLnNlcXVlbmNlU3RhZ2VzICYmIHN0YXRlLnNlcXVlbmNlU3RhZ2VzW3NlbGVjdGVkU2VxdWVuY2VdCiAgICAgICAgJiYgc3RhdGUuc2VxdWVuY2VTdGFnZXNbc2VsZWN0ZWRTZXF1ZW5jZV1bc2VsZWN0ZWRTdGFnZV0gPwogICAgICAgIHN0YXRlLnNlcXVlbmNlU3RhZ2VzW3NlbGVjdGVkU2VxdWVuY2VdW3NlbGVjdGVkU3RhZ2VdLmRhdGEgOiB1bmRlZmluZWQ7CiAgICB2YXIgaW5zdGFuY2VzID0gc3RhZ2UgPwogICAgICAgIHN0YXRlLnNlcXVlbmNlU3RhZ2VJbnN0YW5jZXNbc3RhZ2Uuc2VxdWVuY2UgKyBzdGFnZS5pZF0gOiB1bmRlZmluZWQ7CiAgICAvLyBHcmFiIGluc3RhbmNlCiAgICB2YXIgaW5zdGFuY2VzQXJyYXkgPSBpbnN0YW5jZXMgJiYgdmFsdWVzKGluc3RhbmNlcyk7CiAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZXNBcnJheSAmJiBpbnN0YW5jZXNBcnJheVswXSAmJiBpbnN0YW5jZXNBcnJheVswXS5kYXRhOwogICAgdmFyIHBhdXNlZCA9IDA7CiAgICB2YXIgYm91bmNlZCA9IDA7CiAgICB2YXIgc2NoZWR1bGVkID0gMDsKICAgIHZhciBkZWxpdmVyZWQgPSAwOwogICAgaWYgKHN0YWdlKSB7CiAgICAgICAgcGF1c2VkID0gc3RhZ2UucmVjaXBpZW50cy5wYXVzZWQ7CiAgICAgICAgYm91bmNlZCA9IHN0YWdlLnJlY2lwaWVudHMuYm91bmNlZDsKICAgICAgICBzY2hlZHVsZWQgPSBzdGFnZS5yZWNpcGllbnRzLnNjaGVkdWxlZDsKICAgICAgICBkZWxpdmVyZWQgPSBzdGFnZS5hbmFseXRpY3MuZGVsaXZlcmVkOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgICBzdGFnZTogc3RhZ2UsCiAgICAgICAgaW5zdGFuY2VzOiBpbnN0YW5jZXMsCiAgICAgICAgc3RhZ2VOYW1lOiBzdGFnZSA/CiAgICAgICAgICAgICJTdGFnZSAiICsgc3RhZ2Uub3JkZXIgOgogICAgICAgICAgICAnJywKICAgICAgICBzZXF1ZW5jZTogc2VxdWVuY2UsCiAgICAgICAgc2VsZWN0ZWRUYWI6IHN0YXRlLnNlbGVjdGVkU2VxdWVuY2VUYWIsCiAgICAgICAgcmVjaXBpZW50Q291bnRzOiB7CiAgICAgICAgICAgIHNlbnQ6IGJvdW5jZWQgKyBkZWxpdmVyZWQsCiAgICAgICAgICAgIHNjaGVkdWxlZDogc2NoZWR1bGVkLAogICAgICAgICAgICBwYXVzZWQ6IHBhdXNlZCwKICAgICAgICAgICAgYm91bmNlZDogYm91bmNlZCwKICAgICAgICB9LAogICAgICAgIGF0dGFjaG1lbnRzOiBpbnN0YW5jZSAmJiBzZWxlY3RTdGFnZUluc3RhbmNlQXR0YWNobWVudHNGb3JSZXNvdXJjZShzdGF0ZSwgaW5zdGFuY2UuaWQpIHx8IFtdLAogICAgICAgIGF0dGFjaG1lbnRNZXRhczogaW5zdGFuY2UgJiYgc2VsZWN0QXR0YWNobWVudE1ldGFzRm9yUmVzb3VyY2Uoc3RhdGUsIGluc3RhbmNlLmlkKSB8fCBbXSwKICAgICAgICBvbmJvYXJkaW5nOiAoIXN0YXRlLm9uYm9hcmRpbmcuZWRpdFNlcXVlbmNlU3RhZ2UgfHwgIXN0YXRlLm9uYm9hcmRpbmcuY3JlYXRlQWRkaXRpb25hbFN0YWdlKSAmJgogICAgICAgICAgICBzdGF0ZS5vbmJvYXJkaW5nIHx8IHVuZGVmaW5lZCwKICAgICAgICB1c2VyOiBzZXF1ZW5jZSAmJiBzZXF1ZW5jZS5kYXRhID8KICAgICAgICAgICAgc2VsZWN0VGVhbU1lbWJlcihzdGF0ZSwgc2VxdWVuY2UuZGF0YS51c2VyKSA6IHVuZGVmaW5lZCwKICAgIH07Cn07CnZhciBtYXBEaXNwYXRjaFRvUHJvcHMgPSBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsKICAgIHJldHVybiAoewogICAgICAgIHVwZGF0ZVN0YWdlOiBmdW5jdGlvbiAoc3RhZ2UpIHsgcmV0dXJuIGRpc3BhdGNoKHNlcXVlbmNlU3RhZ2VVcGRhdGUoc3RhZ2UpKTsgfSwKICAgICAgICB1cGRhdGVTdGFnZUluc3RhbmNlOiBmdW5jdGlvbiAoc3RhZ2VJbnN0YW5jZSkgeyByZXR1cm4gZGlzcGF0Y2goc2VxdWVuY2VTdGFnZUluc3RhbmNlVXBkYXRlKHN0YWdlSW5zdGFuY2UpKTsgfSwKICAgICAgICBzZW5kVGVzdEVtYWlsOiBmdW5jdGlvbiAobWV0YSkgeyByZXR1cm4gZGlzcGF0Y2goc2VxdWVuY2VTdGFnZUluc3RhbmNlVGVzdChtZXRhKSk7IH0sCiAgICAgICAgZGVsZXRlU3RhZ2U6IGZ1bmN0aW9uIChzdGFnZSkgeyByZXR1cm4gZGlzcGF0Y2goc2VxdWVuY2VTdGFnZURlbGV0ZShzdGFnZSkpOyB9LAogICAgICAgIGR1cGxpY2F0ZVN0YWdlOiBmdW5jdGlvbiAoc3RhZ2UpIHsgcmV0dXJuIGRpc3BhdGNoKHNlcXVlbmNlU3RhZ2VEdXBsaWNhdGUoc3RhZ2UpKTsgfSwKICAgICAgICByZW1vdmVBdHRhY2htZW50OiBmdW5jdGlvbiAobWV0YSkgeyByZXR1cm4gZGlzcGF0Y2goc2VxdWVuY2VTdGFnZUluc3RhbmNlQXR0YWNobWVudFJlbW92ZShtZXRhKSk7IH0sCiAgICAgICAgdXBkYXRlT25ib2FyZGluZzogZnVuY3Rpb24gKG9uYm9hcmRpbmcpIHsgcmV0dXJuIGRpc3BhdGNoKG9uYm9hcmRpbmdQYXRjaChvbmJvYXJkaW5nKSk7IH0sCiAgICAgICAgcmVmcmVzaFN0YWdlOiBmdW5jdGlvbiAobWV0YSkgeyByZXR1cm4gZGlzcGF0Y2goc2VxdWVuY2VTdGFnZUluc3RhbmNlTGlzdChtZXRhKSk7IH0sCiAgICB9KTsKfTsKZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShTZXF1ZW5jZVN0YWdlRGV0YWlsKSk7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceStageDetail/index.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Sequences/routes/SequenceStageDetail/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import { connect, Dispatch } from 'react-redux';\nimport { StoreState } from '@src/types';\n\nimport SequenceStageDetail, { StateProps, DispatchProps } from './SequenceStageDetail';\nimport {\n  sequenceStageInstanceUpdate,\n  sequenceStageInstanceTest,\n  selectStageInstanceAttachmentsForResource,\n  sequenceStageInstanceAttachmentRemove,\n  sequenceStageInstanceList,\n} from '@src/ducks/sequenceStageInstances';\nimport {\n  sequenceStageUpdate,\n  sequenceStageDelete,\n  sequenceStageDuplicate,\n} from '@src/ducks/sequenceStages';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { values } from 'lodash';\nimport { selectAttachmentMetasForResource } from '@src/ducks/drafts';\nimport { onboardingPatch } from '@src/ducks/me';\nimport { selectTeamMember } from '@src/ducks/teamMembers';\n\nconst mapStateToProps = (state: StoreState, ownProps: RouteComponentProps<any>): StateProps => {\n  const selectedSequence = ownProps.match && ownProps.match.params.sequenceId;\n  const selectedStage = ownProps.match && ownProps.match.params.stageId;\n  const sequence = (selectedSequence && state.sequences) ?\n    state.sequences[selectedSequence] : undefined;\n  const stage = selectedSequence && selectedStage\n    && state.sequenceStages && state.sequenceStages[selectedSequence]\n    && state.sequenceStages[selectedSequence][selectedStage] ?\n    state.sequenceStages[selectedSequence][selectedStage].data! : undefined;\n  const instances = stage ?\n    state.sequenceStageInstances[stage.sequence + stage.id] : undefined;\n\n  // Grab instance\n  const instancesArray = instances && values(instances);\n  const instance = instancesArray && instancesArray[0] && instancesArray[0].data;\n\n  let paused = 0;\n  let bounced = 0;\n  let scheduled = 0;\n  let delivered = 0;\n\n  if (stage) {\n    paused = stage.recipients.paused;\n    bounced = stage.recipients.bounced;\n    scheduled = stage.recipients.scheduled;\n    delivered = stage.analytics.delivered;\n  }\n\n  return {\n    stage,\n    instances,\n    stageName: stage ?\n      `Stage ${stage.order}` :\n      '',\n    sequence,\n    selectedTab: state.selectedSequenceTab,\n    recipientCounts: {\n      sent: bounced + delivered,\n      scheduled,\n      paused,\n      bounced,\n    },\n    attachments: instance && selectStageInstanceAttachmentsForResource(state, instance.id) || [],\n    attachmentMetas: instance && selectAttachmentMetasForResource(state, instance.id) || [],\n    onboarding: (!state.onboarding.editSequenceStage || !state.onboarding.createAdditionalStage) &&\n      state.onboarding || undefined,\n    user: sequence && sequence.data ?\n      selectTeamMember(state, sequence.data.user) : undefined,\n  };\n};\n\nconst mapDispatchToProps = (dispatch: Dispatch<StoreState>): DispatchProps => {\n  return ({\n    updateStage: stage => dispatch(sequenceStageUpdate(stage)),\n    updateStageInstance: stageInstance => dispatch(sequenceStageInstanceUpdate(stageInstance)),\n    sendTestEmail: meta => dispatch(sequenceStageInstanceTest(meta)),\n    deleteStage: stage => dispatch(sequenceStageDelete(stage)),\n    duplicateStage: stage => dispatch(sequenceStageDuplicate(stage)),\n    removeAttachment: meta => dispatch(sequenceStageInstanceAttachmentRemove(meta)),\n    updateOnboarding: onboarding => dispatch(onboardingPatch(onboarding)),\n    refreshStage: meta => dispatch(sequenceStageInstanceList(meta)),\n  });\n};\n\nexport default withRouter(connect<StateProps, DispatchProps, RouteComponentProps<any>>(\n  mapStateToProps, mapDispatchToProps,\n)(SequenceStageDetail));\n"]}]}