{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/components/HubspotDetailCell/HubspotDetailCell.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/components/HubspotDetailCell/HubspotDetailCell.tsx","mtime":1675280254030},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZmluZCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IEh1YnNwb3RQcm9wZXJ0eVR5cGUgfSBmcm9tICdAc3JjL3R5cGVzL2h1YnNwb3QnOwppbXBvcnQgeyBzaG93TW9zdFJlY2VudCB9IGZyb20gJ0BzcmMvbGliL2RhdGV0aW1lJzsKaW1wb3J0ICcuL0h1YnNwb3REZXRhaWxDZWxsLnNjc3MnOwppbXBvcnQgeyByZWNvcmRFdmVudCwgVXNlckV2ZW50cyB9IGZyb20gJ0BzcmMvbGliL2FuYWx5dGljcyc7CmltcG9ydCB7IEFtcGxpdHVkZUV2ZW50cywgbG9nQW1wbGl0dWRlRXZlbnQgfSBmcm9tICdAc3JjL2xpYi9hbXBsaXR1ZGUtYW5hbHl0aWNzJzsKZXhwb3J0IHZhciBIdWJzcG90RGV0YWlsQ2VsbCA9IGZ1bmN0aW9uIChwcm9wcykgewogICAgdmFyIF9hOwogICAgdmFyIGRldGFpbCA9IHByb3BzLmRldGFpbCwgdGl0bGVOYW1lID0gcHJvcHMudGl0bGVOYW1lOwogICAgdmFyIGhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuQ2xpY2tIdWJzcG90Q29tcGFueU5hbWUpOwogICAgICAgIHJlY29yZEV2ZW50KFVzZXJFdmVudHMuSHVic3BvdFBhZ2VWaXNpdGVkKTsKICAgICAgICB3aW5kb3cub3BlbihkZXRhaWwudXJsLCAnX2JsYW5rJyk7CiAgICB9OwogICAgdmFyIG5hbWUgPSAoX2EgPSBmaW5kKGRldGFpbC5wcm9wZXJ0aWVzLCB7IG5hbWU6IHRpdGxlTmFtZSB9KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZhbHVlOwogICAgdmFyIGZpbHRlcmVkUHJvcGVydGllcyA9IGRldGFpbC5wcm9wZXJ0aWVzLmZpbHRlcihmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiAhIXAudmFsdWUgJiYgWydoc19sYXN0bW9kaWZpZWRkYXRlJywgdGl0bGVOYW1lXS5pbmRleE9mKHAubmFtZSkgPT09IC0xOwogICAgfSk7CiAgICB2YXIgcmVuZGVyUHJvcGVydHkgPSBmdW5jdGlvbiAocCkgewogICAgICAgIHZhciBjb21wdXRlZFZhbHVlID0gcC52YWx1ZTsKICAgICAgICBpZiAocC5uYW1lID09PSAnbGFzdG1vZGlmaWVkZGF0ZScpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAocC50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgSHVic3BvdFByb3BlcnR5VHlwZS5EYXRldGltZToKICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSBzaG93TW9zdFJlY2VudChuZXcgRGF0ZShwLnZhbHVlKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBIdWJzcG90UHJvcGVydHlUeXBlLk51bWJlcjoKICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSBwYXJzZUludChwLnZhbHVlLCAxMCkudG9Mb2NhbGVTdHJpbmcoKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb250ZW50cyIsIGtleTogImh1Yi1kLSIgKyBwLmxhYmVsIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibGFiZWwiIH0sIHAubGFiZWwpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInZhbHVlIiB9LCBjb21wdXRlZFZhbHVlKSkpOwogICAgfTsKICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJodWJzcG90LWRldGFpbC1jZWxsIiwgb25DbGljazogaGFuZGxlQ2xpY2sgfSwKICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCBuYW1lKSwKICAgICAgICBmaWx0ZXJlZFByb3BlcnRpZXMKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocCkgeyByZXR1cm4gcmVuZGVyUHJvcGVydHkocCk7IH0pKSk7Cn07Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/components/HubspotDetailCell/HubspotDetailCell.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/components/HubspotDetailCell/HubspotDetailCell.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAC9B,OAAO,KAAK,MAAM,OAAO,CAAC;AAE1B,OAAO,EAAkC,mBAAmB,EAAE,MAAM,oBAAoB,CAAC;AACzF,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AACnD,OAAO,0BAA0B,CAAC;AAClC,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,MAAM,oBAAoB,CAAC;AAC7D,OAAO,EAAE,eAAe,EAAE,iBAAiB,EAAE,MAAM,8BAA8B,CAAC;AAOlF,MAAM,CAAC,IAAM,iBAAiB,GAAG,UAAC,KAAkB;;IAC1C,IAAA,qBAAM,EAAE,2BAAS,CAAW;IACpC,IAAM,WAAW,GAAG,UAAC,CAAgC;QACnD,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,iBAAiB,CAAC,eAAe,CAAC,uBAAuB,CAAC,CAAC;QAC3D,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;QAC3C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;IACpC,CAAC,CAAC;IAEF,IAAM,IAAI,SAAG,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC,0CAAE,KAAK,CAAC;IACjE,IAAM,kBAAkB,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,UAAA,CAAC;QACnD,OAAA,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,qBAAqB,EAAE,SAAS,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAAtE,CAAsE,CACvE,CAAC;IAEF,IAAM,cAAc,GAAG,UAAC,CAAkB;QACxC,IAAI,aAAa,GAAG,CAAC,CAAC,KAAK,CAAC;QAE5B,IAAI,CAAC,CAAC,IAAI,KAAK,kBAAkB,EAAE;YACjC,OAAO,IAAI,CAAC;SACb;QAED,QAAQ,CAAC,CAAC,IAAI,EAAE;YACd,KAAK,mBAAmB,CAAC,QAAQ;gBAC/B,aAAa,GAAG,cAAc,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAClD,MAAM;YACR,KAAK,mBAAmB,CAAC,MAAM;gBAC7B,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,cAAc,EAAE,CAAC;gBACvD,MAAM;YACR;gBACE,MAAM;SACT;QAED,OAAO,CACL,6BACE,SAAS,EAAC,UAAU,EACpB,GAAG,EAAE,WAAS,CAAC,CAAC,KAAO;YAEvB,6BAAK,SAAS,EAAC,OAAO,IACnB,CAAC,CAAC,KAAK,CACJ;YACN,6BAAK,SAAS,EAAC,OAAO,IACnB,aAAa,CACV,CACF,CACP,CAAC;IACJ,CAAC,CAAC;IAEF,OAAO,CACL,6BACE,SAAS,EAAC,qBAAqB,EAC/B,OAAO,EAAE,WAAW;QAEpB,6BAAK,SAAS,EAAC,OAAO,IACnB,IAAI,CACD;QACL,kBAAkB;aAChB,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,cAAc,CAAC,CAAC,CAAC,EAAjB,CAAiB,CAAC,CAC1B,CACP,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import { find } from 'lodash';\nimport React from 'react';\n\nimport { HubspotDetail, HubspotProperty, HubspotPropertyType } from '@src/types/hubspot';\nimport { showMostRecent } from '@src/lib/datetime';\nimport './HubspotDetailCell.scss';\nimport { recordEvent, UserEvents } from '@src/lib/analytics';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\ninterface DetailProps {\n  detail: HubspotDetail;\n  titleName: string;\n}\n\nexport const HubspotDetailCell = (props: DetailProps) => {\n  const { detail, titleName } = props;\n  const handleClick = (e: React.MouseEvent<HTMLElement>) => {\n    e.stopPropagation();\n    e.preventDefault();\n    logAmplitudeEvent(AmplitudeEvents.ClickHubspotCompanyName);\n    recordEvent(UserEvents.HubspotPageVisited);\n    window.open(detail.url, '_blank');\n  };\n\n  const name = find(detail.properties, { name: titleName })?.value;\n  const filteredProperties = detail.properties.filter(p =>\n    !!p.value && ['hs_lastmodifieddate', titleName].indexOf(p.name) === -1,\n  );\n\n  const renderProperty = (p: HubspotProperty) => {\n    let computedValue = p.value;\n\n    if (p.name === 'lastmodifieddate') {\n      return null;\n    }\n\n    switch (p.type) {\n      case HubspotPropertyType.Datetime:\n        computedValue = showMostRecent(new Date(p.value));\n        break;\n      case HubspotPropertyType.Number:\n        computedValue = parseInt(p.value, 10).toLocaleString();\n        break;\n      default:\n        break;\n    }\n\n    return (\n      <div\n        className=\"contents\"\n        key={`hub-d-${p.label}`}\n      >\n        <div className=\"label\">\n          {p.label}\n        </div>\n        <div className=\"value\">\n          {computedValue}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div\n      className=\"hubspot-detail-cell\"\n      onClick={handleClick}\n    >\n      <div className=\"title\">\n        {name}\n      </div>\n      {filteredProperties\n        .map(p => renderProperty(p))}\n    </div>\n  );\n};\n"]}]}