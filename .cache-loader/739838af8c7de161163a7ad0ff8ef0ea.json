{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/PaymentForm.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/PaymentForm.tsx","mtime":1675280254099},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKdmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7CiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0KICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0KICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH0KICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgICB9KTsKfTsKdmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHsKICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7CiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgInRocm93IjogdmVyYigxKSwgInJldHVybiI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZzsKICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfQogICAgZnVuY3Rpb24gc3RlcChvcCkgewogICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7CiAgICAgICAgd2hpbGUgKF8pIHRyeSB7CiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbInJldHVybiJdIDogb3BbMF0gPyB5WyJ0aHJvdyJdIHx8ICgodCA9IHlbInJldHVybiJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDsKICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdOwogICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07CiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7CiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfQogICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pOwogICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH0KICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTsKICAgIH0KfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCBUZXh0SW5wdXQgZnJvbSAnQHNyYy9jb21wb25lbnRzL0Zvcm0vVGV4dElucHV0JzsKaW1wb3J0IHsgbG9hZFN0cmlwZSB9IGZyb20gJ0BzdHJpcGUvc3RyaXBlLWpzJzsKaW1wb3J0IHsgRWxlbWVudHMsIEVsZW1lbnRzQ29uc3VtZXIsIENhcmRFbGVtZW50IH0gZnJvbSAnQHN0cmlwZS9yZWFjdC1zdHJpcGUtanMnOwppbXBvcnQgeyBERUZBVUxUX0ZPTlQgfSBmcm9tICdAc3JjL2xpYi90eXBvZ3JhcGh5JzsKaW1wb3J0IExvYWRlciBmcm9tICdAc3JjL2NvbXBvbmVudHMvTG9hZGVyL0xvYWRlcic7CmltcG9ydCAnLi9QYXltZW50Rm9ybS5zY3NzJzsKdmFyIFBheW1lbnRGb3JtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFBheW1lbnRGb3JtLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUGF5bWVudEZvcm0oKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVOYW1lVXBkYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBuYW1lOiBlLmN1cnJlbnRUYXJnZXQudmFsdWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDYXJkVXBkYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUuY3VycmVudFRhcmdldC52YWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGhhc0FkZGVkQ2FyZDogdHJ1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgaGFzQWRkZWRDYXJkOiBmYWxzZSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU3VibWl0ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hLCBzdHJpcGUsIGVsZW1lbnRzLCBjYXJkRWxlbWVudDsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIF9hID0gdGhpcy5wcm9wcywgc3RyaXBlID0gX2Euc3RyaXBlLCBlbGVtZW50cyA9IF9hLmVsZW1lbnRzOwogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FyZEVsZW1lbnQgPSBlbGVtZW50cy5nZXRFbGVtZW50KENhcmRFbGVtZW50KTsKICAgICAgICAgICAgICAgIC8vIHJlcXVpcmUgY2FyZCBuYW1lCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5uYW1lLnRyaW0oKSA9PT0gJycpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkNvbnRpbnVlICYmICF0aGlzLnN0YXRlLmhhc0FkZGVkQ2FyZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uQ29udGludWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3I6ICdDYXJkaG9sZGVyXCdzIG5hbWUgaXMgcmVxdWlyZWQuJyB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc3RyaXBlIG5vdCBhdmFpbGFibGUKICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5zdHJpcGUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3I6ICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLicgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gcGVyZm9ybSBzdHJpcGUgY3JlYXRlVG9rZW4KICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkaW5nOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgLy8gaGFjazogc3RyaXBlIHR5cGVzIGFyZSB3cm9uZwogICAgICAgICAgICAgICAgc3RyaXBlLmNyZWF0ZVRva2VuKGNhcmRFbGVtZW50LCB7IG5hbWU6IHRoaXMuc3RhdGUubmFtZSB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBsb2FkaW5nOiBmYWxzZSB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS50b2tlbikgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5vblN1Ym1pdChkYXRhLnRva2VuLmlkKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBlcnJvcjogZGF0YS5lcnJvci5tZXNzYWdlIHx8ICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLicsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGxvYWRpbmc6IGZhbHNlLCBlcnJvcjogZXJyIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOyB9OwogICAgICAgIF90aGlzLmhhbmRsZUNhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLnByb3BzLm9uQ2FuY2VsKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5vbkNhbmNlbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBoYXNBZGRlZENhcmQ6IGZhbHNlLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUGF5bWVudEZvcm0ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbG9hZGluZyA9IHRoaXMuc3RhdGUubG9hZGluZyB8fCB0aGlzLnByb3BzLmxvYWRpbmc7CiAgICAgICAgdmFyIGVycm9yID0gKHRoaXMucHJvcHMuZXJyb3IgJiYgdGhpcy5wcm9wcy5lcnJvci50b1N0cmluZygpKSB8fCB0aGlzLnN0YXRlLmVycm9yOwogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZm9ybSIsIHsgY2xhc3NOYW1lOiAicGF5bWVudC1mb3JtIiwgb25TdWJtaXQ6IHRoaXMuaGFuZGxlU3VibWl0IH0sCiAgICAgICAgICAgIGVycm9yICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZXJyb3IiIH0sIGVycm9yKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0SW5wdXQsIHsgb25DaGFuZ2U6IHRoaXMuaGFuZGxlTmFtZVVwZGF0ZSwgcGxhY2Vob2xkZXI6ICJDYXJkaG9sZGVyJ3MgbmFtZSIsIGRlc2NyaXB0aW9uOiAiQ2FyZGhvbGRlcidzIG5hbWUiLCB2YWx1ZTogdGhpcy5zdGF0ZS5uYW1lLCB0eXBlOiAidGV4dCIgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2FyZCIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRpb24iIH0sICJDYXJkIiksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENhcmRFbGVtZW50LCB7IGNsYXNzTmFtZTogImNhcmQtZWxlbWVudCIsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNhcmRVcGRhdGUsIHN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzQ0NDQ0NCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogJzE0cHgnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogREVGQVVMVF9GT05ULAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogJzQwMCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnOjpwbGFjZWhvbGRlcic6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNjOWQ0ZTAnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9IH0pKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2FjdGlvbi1idXR0b25zJywgeyAnbm8tY2FuY2VsJzogIXRoaXMucHJvcHMuc2hvd0NhbmNlbCB9KSB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBkaXNhYmxlZDogbG9hZGluZywgY2xhc3NOYW1lOiAidXBncmFkZSIgfSwgbG9hZGluZyA/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9hZGVyLCBudWxsKSA6IHRoaXMucHJvcHMuYnV0dG9uTmFtZSksCiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNob3dDYW5jZWwgJiYgIWxvYWRpbmcgJiYKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogImNhbmNlbCIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2FuY2VsIH0sICJDYW5jZWwiKSkpKTsKICAgIH07CiAgICByZXR1cm4gUGF5bWVudEZvcm07Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwp2YXIgSW5qZWN0ZWRDaGVja291dEZvcm0gPSBmdW5jdGlvbiAocHJvcHMpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEVsZW1lbnRzQ29uc3VtZXIsIG51bGwsIGZ1bmN0aW9uIChfYSkgewogICAgdmFyIGVsZW1lbnRzID0gX2EuZWxlbWVudHMsIHN0cmlwZSA9IF9hLnN0cmlwZTsKICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChQYXltZW50Rm9ybSwgX19hc3NpZ24oe30sIHByb3BzLCB7IGVsZW1lbnRzOiBlbGVtZW50cywgc3RyaXBlOiBzdHJpcGUgfSkpKTsKfSkpOyB9Owp2YXIgc3RyaXBlUHJvbWlzZSA9IGxvYWRTdHJpcGUocHJvY2Vzcy5lbnYuU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSk7CnZhciBXcmFwcGVkUGF5bWVudEZvcm0gPSBmdW5jdGlvbiAocHJvcHMpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEVsZW1lbnRzLCB7IHN0cmlwZTogc3RyaXBlUHJvbWlzZSB9LAogICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbmplY3RlZENoZWNrb3V0Rm9ybSwgX19hc3NpZ24oe30sIHByb3BzKSkpKTsgfTsKZXhwb3J0IGRlZmF1bHQgV3JhcHBlZFBheW1lbnRGb3JtOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/PaymentForm.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/PaymentForm.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { FormEvent } from 'react';\nimport classnames from 'classnames';\nimport TextInput from '@src/components/Form/TextInput';\nimport { loadStripe, Stripe, StripeElements, StripeError } from '@stripe/stripe-js';\nimport { Elements, ElementsConsumer, CardElement } from '@stripe/react-stripe-js';\n\nimport { DEFAULT_FONT } from '@src/lib/typography';\nimport Loader from '@src/components/Loader/Loader';\n\nimport './PaymentForm.scss';\n\nexport interface Props {\n  loading: boolean;\n  buttonName: string;\n  showCancel?: boolean;\n  error?: Error;\n  onSubmit(token: string): void;\n  onCancel?(): void;\n  onContinue?(): void;\n}\n\ninterface StripeProps {\n  stripe: Stripe;\n  elements: StripeElements;\n}\n\ninterface State {\n  name: string;\n  loading: boolean;\n  error?: string;\n  hasAddedCard: boolean;\n}\n\nclass PaymentForm extends React.PureComponent<\n  Props & StripeProps, State\n> {\n  constructor() {\n    super();\n    this.state = {\n      name: '',\n      loading: false,\n      hasAddedCard: false,\n    };\n  }\n\n  handleNameUpdate = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ name: e.currentTarget.value });\n  }\n\n  handleCardUpdate = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.currentTarget.value.length > 0) {\n      this.setState({ hasAddedCard: true });\n    } else {\n      this.setState({ hasAddedCard: false });\n    }\n  }\n\n  handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { stripe, elements } = this.props;\n\n    if (elements === null) {\n      return;\n    }\n\n    const cardElement = elements.getElement(CardElement);\n\n    // require card name\n    if (this.state.name.trim() === '') {\n      if (this.props.onContinue && !this.state.hasAddedCard) {\n        this.props.onContinue();\n        return;\n      }\n      this.setState({ error: 'Cardholder\\'s name is required.' });\n      return;\n    }\n\n    // handle stripe not available\n    if (!this.props.stripe) {\n      this.setState({ error: 'An unknown error occurred.' });\n      return;\n    }\n\n    // perform stripe createToken\n    this.setState({ loading: true });\n    // hack: stripe types are wrong\n    stripe.createToken(cardElement as typeof CardElement, { name: this.state.name })\n      .then((data) => {\n        this.setState({ loading: false });\n\n        if (data.token) {\n          this.props.onSubmit(data.token.id);\n        }\n\n        if (data.error) {\n          this.setState({ error:\n            (data.error as StripeError).message || 'An unknown error occurred.',\n          });\n        }\n      }).catch((err) => {\n        this.setState({ loading: false, error: err });\n      });\n  }\n\n  handleCancel = () => {\n    if (this.props.onCancel) {\n      this.props.onCancel();\n    }\n  }\n\n  render() {\n    const loading = this.state.loading || this.props.loading;\n    const error = (this.props.error && this.props.error.toString()) || this.state.error;\n\n    return (\n      <form className=\"payment-form\" onSubmit={this.handleSubmit}>\n        {error && <div className=\"error\">{error}</div>}\n        <TextInput\n          onChange={this.handleNameUpdate}\n          placeholder=\"Cardholder's name\"\n          description=\"Cardholder's name\"\n          value={this.state.name}\n          type=\"text\"\n        />\n        <div className=\"card\">\n          <div className=\"description\">\n            Card\n          </div>\n          <CardElement\n            className=\"card-element\"\n            onChange={this.handleCardUpdate}\n            style={{\n              base: {\n                color: '#444444',\n                fontSize: '14px',\n                fontFamily: DEFAULT_FONT,\n                fontWeight: '400',\n                '::placeholder': {\n                  color: '#c9d4e0',\n                },\n              } as any,\n            }}\n          />\n        </div>\n        <div\n          className={classnames('action-buttons', { 'no-cancel': !this.props.showCancel })}\n        >\n          <button disabled={loading} className=\"upgrade\">\n            {loading ? <Loader /> : this.props.buttonName}\n          </button>\n          {this.props.showCancel && !loading &&\n            <button className=\"cancel\" onClick={this.handleCancel}>\n              Cancel\n            </button>\n          }\n        </div>\n      </form>\n    );\n  }\n}\n\nconst InjectedCheckoutForm = (props: Props) => (\n  <ElementsConsumer>\n    {({ elements, stripe }: StripeProps) => (\n      <PaymentForm\n        {...props}\n        elements={elements}\n        stripe={stripe}\n      />\n    )}\n  </ElementsConsumer>\n);\n\nconst stripePromise = loadStripe(process.env.STRIPE_PUBLISHABLE_KEY as string);\n\nconst WrappedPaymentForm: React.SFC<Props> = (props: Props) => (\n  <Elements stripe={stripePromise}>\n      <InjectedCheckoutForm {...props} />\n  </Elements>\n);\n\nexport default WrappedPaymentForm;\n"]}]}