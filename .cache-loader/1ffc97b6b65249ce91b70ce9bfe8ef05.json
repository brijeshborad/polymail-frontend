{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountDetail/AccountDetail.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountDetail/AccountDetail.tsx","mtime":1675280254095},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgZmluZEluZGV4LCBpbmRleE9mLCBjb21wYWN0LCB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBtb25nb0lkIH0gZnJvbSAnQHNyYy9saWIvY3J5cHQnOwppbXBvcnQgRmlsZURyb3Bab25lIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Db21wb3NlL0ZpbGVEcm9wWm9uZSc7CmltcG9ydCBUZXh0SW5wdXQgZnJvbSAnQHNyYy9jb21wb25lbnRzL0Zvcm0vVGV4dElucHV0JzsKaW1wb3J0IENvbnRlbnRFZGl0YWJsZSBmcm9tICdAc3JjL2NvbXBvbmVudHMvQ29udGVudEVkaXRhYmxlL0NvbnRlbnRFZGl0YWJsZSc7CmltcG9ydCBUb2dnbGVDZWxsIGZyb20gJ0BzcmMvcm91dGVzL1NldHRpbmdzL2NvbXBvbmVudHMvVG9nZ2xlQ2VsbCc7CmltcG9ydCBBbGlhc0l0ZW0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9BbGlhc0l0ZW0nOwppbXBvcnQgUGx1cyBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvUGx1cy5zdmcnOwppbXBvcnQgJy4vQWNjb3VudERldGFpbC5zY3NzJzsKaW1wb3J0IHsgYWNjb3VudFNpZ25hdHVyZSB9IGZyb20gJ0BzcmMvbGliL2FjY291bnQnOwppbXBvcnQgTmF2aWdhdGlvbkhlYWRlciBmcm9tICdAc3JjL3JvdXRlcy9TZXR0aW5ncy9jb21wb25lbnRzL05hdmlnYXRpb25IZWFkZXInOwppbXBvcnQgQ29uZmlybSBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9Db25maXJtJzsKaW1wb3J0IGJyb3dzZXJIaXN0b3J5IGZyb20gJ0BzcmMvbGliL2Jyb3dzZXJIaXN0b3J5JzsKaW1wb3J0IHsgdXBsb2FkRXJyb3JNZXNzYWdlIH0gZnJvbSAnQHNyYy9saWIvZmlsZXMnOwovLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoCnZhciBERUZBVUxUX0FVVE9fUkVQTFkgPSAnSeKAmW0gY3VycmVudGx5IG91dCBvZiB0aGUgb2ZmaWNlIGFuZCBtYXkgaGF2ZSBsaW1pdGVkIGFjY2VzcyB0byBteSBlbWFpbC4nOwp2YXIgQWNjb3VudERldGFpbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhBY2NvdW50RGV0YWlsLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gQWNjb3VudERldGFpbChwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlQ29udGVudEVkaXRhYmxlUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5jb250ZW50RWRpdGFibGUgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBdXRvUmVwbHlDb250ZW50RWRpdGFibGVSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLmF1dG9SZXBseUNvbnRlbnRFZGl0YWJsZSA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURlc2NyaXB0aW9uQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBkZXNjcmlwdGlvbjogZS5jdXJyZW50VGFyZ2V0LnZhbHVlLCBzaG93U2F2ZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZU5hbWVDaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG5hbWU6IGUuY3VycmVudFRhcmdldC52YWx1ZSwgc2hvd1NhdmU6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVTaWduYXR1cmVDaGFuZ2UgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNpZ25hdHVyZTogaHRtbCwgc2hvd1NhdmU6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBdXRvUmVwbHlDaGFuZ2UgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgICB2YXIgYXV0b1JlcGx5ID0gX3RoaXMuc3RhdGUuYXV0b1JlcGx5IHx8IHsgZW5hYmxlZDogdHJ1ZSwgYm9keTogREVGQVVMVF9BVVRPX1JFUExZIH07CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgYXV0b1JlcGx5OiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYXV0b1JlcGx5KSwgeyBib2R5OiBodG1sIH0pLCBzaG93U2F2ZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURlZmF1bHRBY2NvdW50Q2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYWNjb3VudElkID0gX3RoaXMucHJvcHMuYWNjb3VudC5pZDsKICAgICAgICAgICAgdmFyIHdhc0RlZmF1bHQgPSBhY2NvdW50SWQgPT09IF90aGlzLnByb3BzLnByZWZlcmVuY2VzLmRlZmF1bHRBY2NvdW50OwogICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSB3YXNEZWZhdWx0CiAgICAgICAgICAgICAgICA/ICcnCiAgICAgICAgICAgICAgICA6IGFjY291bnRJZDsKICAgICAgICAgICAgdmFyIHVwZGF0ZWRQcmVmZXJlbmNlcyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBfdGhpcy5wcm9wcy5wcmVmZXJlbmNlcyksIHsgZGVmYXVsdEFjY291bnQ6IG5ld1ZhbHVlIH0pOwogICAgICAgICAgICBfdGhpcy5wcm9wcy51cGRhdGVQcmVmZXJlbmNlcyh1cGRhdGVkUHJlZmVyZW5jZXMpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQXV0b0JjY1ZhbHVlQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBhdXRvQmNjVmFsdWU6IGUuY3VycmVudFRhcmdldC52YWx1ZSwgc2hvd1NhdmU6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBdXRvQmNjQ2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGF1dG9CY2M6ICFfdGhpcy5zdGF0ZS5hdXRvQmNjLCBzaG93U2F2ZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUF1dG9SZXBseUVuYWJsZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGF1dG9SZXBseSA9IF90aGlzLnN0YXRlLmF1dG9SZXBseSB8fCB7IGVuYWJsZWQ6IGZhbHNlLCBib2R5OiBERUZBVUxUX0FVVE9fUkVQTFkgfTsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgYXV0b1JlcGx5OiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgYXV0b1JlcGx5KSwgeyBlbmFibGVkOiAhYXV0b1JlcGx5LmVuYWJsZWQgfSksCiAgICAgICAgICAgICAgICBzaG93U2F2ZTogdHJ1ZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBbGlhc1NlbGVjdCA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICB2YXIgYWNjb3VudCA9IF90aGlzLnByb3BzLmFjY291bnQ7CiAgICAgICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goIi9zZXR0aW5ncy9hY2NvdW50cy8iICsgYWNjb3VudC5pZCArICIvYWxpYXNlcy8iICsgaWQpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQmFja1ByZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBicm93c2VySGlzdG9yeS5nb0JhY2soKTsKICAgICAgICB9OwogICAgICAgIC8vIERyb3Bab25lIGhhbmRsZXJzCiAgICAgICAgX3RoaXMuaGFuZGxlRHJhZ0VudGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIudHlwZXMuaW5kZXhPZignRmlsZXMnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZHJvcHpvbmVBY3RpdmU6IHRydWUgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURyYWdMZWF2ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBkcm9wem9uZUFjdGl2ZTogZmFsc2UgfSk7CiAgICAgICAgfTsKICAgICAgICAvLyBUT0RPKFNISU4pOiBIYW5kbGUgdXBsb2FkaW5nIHNpZ25hdHVyZSBpbWFnZQogICAgICAgIF90aGlzLmhhbmRsZVVwbG9hZCA9IGZ1bmN0aW9uIChmaWxlcywgb3B0aW9ucykgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgYWRkU2lnbmF0dXJlSW1hZ2UgPSBfYS5hZGRTaWduYXR1cmVJbWFnZSwgYWNjb3VudCA9IF9hLmFjY291bnQ7CiAgICAgICAgICAgIGlmICghYWNjb3VudCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEJsb2NrIGFiaWxpdHkgdG8gYXR0YWNoIGZpbGVzIGxhcmdlciB0aGFuIDI1IE1CLgogICAgICAgICAgICBpZiAoZmlsZXMuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7IHJldHVybiBmaWxlLnNpemUgPiAyNTAwMDAwMDsgfSkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB2YXIgY29uZmlybVByb3BzID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRXJyb3IgVXBsb2FkaW5nIEF0dGFjaG1lbnQnLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgY2Fubm90IHVwbG9hZCBhbiBhdHRhY2htZW50IGdyZWF0ZXIgdGhhbiAyNSBNQi4nLAogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1Db3B5OiAnT2snLAogICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogdW5kZWZpbmVkIH0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IGNvbmZpcm1Qcm9wcyB9KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBPbmx5IGdyYWIgaW1hZ2UgZmlsZXMsCiAgICAgICAgICAgIHZhciBpbWFnZUZpbGVzID0gZmlsZXMuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7IHJldHVybiBmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UnKTsgfSk7CiAgICAgICAgICAgIC8vIEhhbmRsZSBhdHRhY2htZW50IHVwbG9hZAogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGRyb3B6b25lQWN0aXZlOiBmYWxzZSB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZHJvcHBpbmcgdG8gc3BlY2lmaWMgcG9zaXRpb24KICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucG9zaXRpb24gJiYgX3RoaXMuY29udGVudEVkaXRhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29udGVudEVkaXRhYmxlLm1vdmVDdXJzb3JUb1Bvc2l0aW9uKG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gVXBsb2FkIHNpZ25hdHVyZSBpbWFnZXMKICAgICAgICAgICAgaW1hZ2VGaWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlKSB7IHJldHVybiBhZGRTaWduYXR1cmVJbWFnZSh7CiAgICAgICAgICAgICAgICBhdHRhY2htZW50OiBtb25nb0lkKCksCiAgICAgICAgICAgICAgICByZXNvdXJjZUlkOiBhY2NvdW50LmlkLAogICAgICAgICAgICAgICAgZmlsZTogZmlsZSwKICAgICAgICAgICAgICAgIGlubGluZTogdHJ1ZSwKICAgICAgICAgICAgfSk7IH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRGVsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgYWNjb3VudCA9IF9hLmFjY291bnQsIGRlbGV0ZUFjY291bnQgPSBfYS5kZWxldGVBY2NvdW50OwogICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdBbGwgdHJhY2tpbmcgZGF0YSwgYWN0aXZpdHksIGFuZCBjbG91ZCBhdHRhY2htZW50cyBhc3NvY2lhdGVkICcKICAgICAgICAgICAgICAgICsgJ3dpdGggdGhpcyBhY2NvdW50IHdpbGwgYmUgcmVtb3ZlZCBhbmQgY2Fubm90IGJlIHJlY292ZXJlZC4gJwogICAgICAgICAgICAgICAgKyAnXG5cbllvdSB3aWxsIG5vdCBiZSBhYmxlIHRvIHJlLWFkZCB0aGlzIGFjY291bnQgdW50aWwgaXQgaGFzIGZpbmlzaGVkIGRlbGV0aW5nLiAnCiAgICAgICAgICAgICAgICArICdXb3VsZCB5b3UgbGlrZSB0byBjb250aW51ZT8nOwogICAgICAgICAgICB2YXIgY29uZmlybVByb3BzID0gewogICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGluZyBBY2NvdW50JywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICAgICAgICBjb25maXJtQ29weTogJ0RlbGV0ZScsCiAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogdW5kZWZpbmVkIH0pOwogICAgICAgICAgICAgICAgICAgIGRlbGV0ZUFjY291bnQoYWNjb3VudCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7IH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiBjb25maXJtUHJvcHMgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBbGlhc0NyZWF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGFjY291bnQgPSBfdGhpcy5wcm9wcy5hY2NvdW50OwogICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKCIvc2V0dGluZ3MvYWNjb3VudHMvIiArIGFjY291bnQuaWQgKyAiL2FsaWFzZXMvbmV3Iik7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVTYXZlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYWNjb3VudCA9IF9fYXNzaWduKHt9LCBfdGhpcy5wcm9wcy5hY2NvdW50KTsKICAgICAgICAgICAgdmFyIHVwZGF0ZUFjY291bnQgPSBfdGhpcy5wcm9wcy51cGRhdGVBY2NvdW50OwogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zdGF0ZSwgZGVzY3JpcHRpb24gPSBfYS5kZXNjcmlwdGlvbiwgYXV0b0JjY1ZhbHVlID0gX2EuYXV0b0JjY1ZhbHVlLCBzaWduYXR1cmUgPSBfYS5zaWduYXR1cmUsIG5hbWUgPSBfYS5uYW1lLCBhdXRvUmVwbHkgPSBfYS5hdXRvUmVwbHk7CiAgICAgICAgICAgIGlmIChuYW1lKSB7CiAgICAgICAgICAgICAgICBhY2NvdW50Lm5hbWUgPSBuYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzaWduYXR1cmUpIHsKICAgICAgICAgICAgICAgIGFjY291bnQuc2lnbmF0dXJlID0gc2lnbmF0dXJlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhdXRvQmNjVmFsdWUpIHsKICAgICAgICAgICAgICAgIGFjY291bnQuYXV0b0JjYyA9IGF1dG9CY2NWYWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoYXV0b1JlcGx5KSB7CiAgICAgICAgICAgICAgICBhY2NvdW50LmF1dG9SZXBseSA9IGF1dG9SZXBseTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIV90aGlzLnN0YXRlLmF1dG9CY2MpIHsKICAgICAgICAgICAgICAgIGFjY291bnQuYXV0b0JjYyA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICBhY2NvdW50LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gVXBkYXRlIGFjY291bnQgYW5kIHJlc2V0IHN0YXRlCiAgICAgICAgICAgIHVwZGF0ZUFjY291bnQoYWNjb3VudCk7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNob3dTYXZlOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBhdXRvQmNjVmFsdWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIG5hbWU6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICBhdXRvUmVwbHk6IHVuZGVmaW5lZCwKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVEaXJlY3RvcnlEcm9wRXJyb3IgPSBmdW5jdGlvbiAoYikgewogICAgICAgICAgICB2YXIgY29uZmlybVByb3BzID0gewogICAgICAgICAgICAgICAgdGl0bGU6ICdFcnJvciBhdHRhY2hpbmcgZmlsZScsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiB1cGxvYWRFcnJvck1lc3NhZ2UoYiksCiAgICAgICAgICAgICAgICBjb25maXJtQ29weTogJ09rJywKICAgICAgICAgICAgICAgIG9uQ29uZmlybTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogY29uZmlybVByb3BzLCBkcm9wem9uZUFjdGl2ZTogZmFsc2UgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgYXV0b1JlcGx5OiBwcm9wcy5hY2NvdW50LmF1dG9SZXBseSwKICAgICAgICAgICAgYXV0b0JjYzogISFwcm9wcy5hY2NvdW50LmF1dG9CY2MsCiAgICAgICAgICAgIHNpZ25hdHVyZTogcHJvcHMuYWNjb3VudC5zaWduYXR1cmUsCiAgICAgICAgICAgIGRyb3B6b25lQWN0aXZlOiBmYWxzZSwKICAgICAgICB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIC8vIFVwZGF0ZSBzaWduYXR1cmUKICAgIC8vIFRPRE8oU0hJTiAmIFNIQUhBTik6IFBvc3NpYmxlIHJhY2UgY29uZGl0aW9uIG9yIGxvc3QgY2hhbmdlIGJldHdlZW4gYWNjb3VudCBkaWZmcy4KICAgIEFjY291bnREZXRhaWwucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIChvbGRQcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgLy8gSGFuZGxlIHNpZ25hdHVyZSBpbWFnZXMKICAgICAgICB2YXIgbmV4dFNpZ25hdHVyZUltYWdlcyA9IHRoaXMucHJvcHMuYWNjb3VudC5zaWduYXR1cmVJbWFnZXMgfHwgW107CiAgICAgICAgdmFyIG9sZFNpZ25hdHVyZUltYWdlcyA9IG9sZFByb3BzLmFjY291bnQuc2lnbmF0dXJlSW1hZ2VzIHx8IFtdOwogICAgICAgIC8vIEluamVjdCBzaWduYXR1cmUgaW1hZ2VzIGlmIG5ldyBpcyBmb3VuZAogICAgICAgIGlmIChuZXh0U2lnbmF0dXJlSW1hZ2VzICE9PSBvbGRTaWduYXR1cmVJbWFnZXMpIHsKICAgICAgICAgICAgbmV4dFNpZ25hdHVyZUltYWdlcy4KICAgICAgICAgICAgICAgIGZpbHRlcihmdW5jdGlvbiAoYXR0YWNobWVudCkgeyByZXR1cm4gZmluZEluZGV4KG9sZFNpZ25hdHVyZUltYWdlcywgeyBpZDogYXR0YWNobWVudC5pZCB9KSA9PT0gLTE7IH0pCiAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoYXR0YWNobWVudCkgewogICAgICAgICAgICAgICAgX3RoaXMuY29udGVudEVkaXRhYmxlLnJlcGxhY2VTaWduYXR1cmVJbWFnZUF0dGFjaG1lbnQoX19hc3NpZ24oX19hc3NpZ24oe30sIGF0dGFjaG1lbnQpLCB7IGlubGluZTogdHJ1ZSB9KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAvLyBIYW5kbGUgcmVwbGFjaW5nIG9sZCBtZXRhcwogICAgICAgIHZhciBvbGRNZXRhcyA9IG9sZFByb3BzLmF0dGFjaG1lbnRNZXRhczsKICAgICAgICB2YXIgbmV3TWV0YXMgPSB0aGlzLnByb3BzLmF0dGFjaG1lbnRNZXRhczsKICAgICAgICB2YXIgb2xkTWV0YUlkcyA9IGNvbXBhY3QodmFsdWVzKG9sZE1ldGFzLm1hcChmdW5jdGlvbiAobWV0YSkgeyByZXR1cm4gbWV0YS5kYXRhICYmIG1ldGEuZGF0YS5hdHRhY2htZW50OyB9KSkpOwogICAgICAgIGlmIChvbGRNZXRhcyAhPT0gbmV3TWV0YXMpIHsKICAgICAgICAgICAgLy8gSW5qZWN0IG1ldGFzCiAgICAgICAgICAgIG5ld01ldGFzCiAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAobWV0YSkgewogICAgICAgICAgICAgICAgaWYgKCFtZXRhLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIGlmIGF2YWlsYWJsZQogICAgICAgICAgICAgICAgX3RoaXMuY29udGVudEVkaXRhYmxlLnJlcGxhY2VTaWduYXR1cmVJbWFnZUF0dGFjaG1lbnRNZXRhKG1ldGEuZGF0YSk7CiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhdHRhY2htZW50IG1ldGEgaXMgbmV3CiAgICAgICAgICAgICAgICBpZiAoaW5kZXhPZihvbGRNZXRhSWRzLCBtZXRhLmRhdGEgJiYgbWV0YS5kYXRhLmF0dGFjaG1lbnQpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLmNvbnRlbnRFZGl0YWJsZS5pbmplY3RTaWduYXR1cmVJbWFnZUF0dGFjaG1lbnRNZXRhKG1ldGEuZGF0YSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICBBY2NvdW50RGV0YWlsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLmFjY291bnQsIGVtYWlsID0gX2EuZW1haWwsIHR5cGUgPSBfYS50eXBlLCBpZCA9IF9hLmlkOwogICAgICAgIHZhciBfYiA9IHRoaXMuc3RhdGUsIGF1dG9CY2MgPSBfYi5hdXRvQmNjLCBkcm9wem9uZUFjdGl2ZSA9IF9iLmRyb3B6b25lQWN0aXZlLCBzaG93U2F2ZSA9IF9iLnNob3dTYXZlLCBjb25maXJtUHJvcHMgPSBfYi5jb25maXJtUHJvcHM7CiAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gdGhpcy5zdGF0ZS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5kZXNjcmlwdGlvbgogICAgICAgICAgICA6IHRoaXMucHJvcHMuYWNjb3VudC5kZXNjcmlwdGlvbjsKICAgICAgICB2YXIgbmFtZSA9IHRoaXMuc3RhdGUubmFtZSAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5uYW1lCiAgICAgICAgICAgIDogdGhpcy5wcm9wcy5hY2NvdW50Lm5hbWU7CiAgICAgICAgdmFyIGF1dG9CY2NWYWx1ZSA9IHRoaXMuc3RhdGUuYXV0b0JjY1ZhbHVlICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgPyB0aGlzLnN0YXRlLmF1dG9CY2NWYWx1ZQogICAgICAgICAgICA6IHRoaXMucHJvcHMuYWNjb3VudC5hdXRvQmNjOwogICAgICAgIHZhciBhdXRvUmVwbHkgPSB0aGlzLnN0YXRlLmF1dG9SZXBseSAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5hdXRvUmVwbHkKICAgICAgICAgICAgOiB0aGlzLnByb3BzLmFjY291bnQuYXV0b1JlcGx5OwogICAgICAgIHZhciBpc0RlZmF1bHRBY2NvdW50ID0gdGhpcy5wcm9wcy5wcmVmZXJlbmNlcy5kZWZhdWx0QWNjb3VudCA9PT0gaWQ7CiAgICAgICAgdmFyIHNpZ25hdHVyZSA9IGFjY291bnRTaWduYXR1cmUoewogICAgICAgICAgICBhY2NvdW50OiB0aGlzLnByb3BzLmFjY291bnQsCiAgICAgICAgICAgIHByZXZlbnRFZGl0czogZmFsc2UsCiAgICAgICAgICAgIHJldHVybklubmVySFRNTDogdHJ1ZSwKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAicHJlZmVyZW5jZXMtYWNjb3VudC1kZXRhaWwiIH0sCiAgICAgICAgICAgIGNvbmZpcm1Qcm9wcyAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbmZpcm0sIF9fYXNzaWduKHt9LCBjb25maXJtUHJvcHMpKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChOYXZpZ2F0aW9uSGVhZGVyLCB7IHRpdGxlOiAiQWNjb3VudHMiLCBvbkJhY2s6IHRoaXMuaGFuZGxlQmFja1ByZXNzLCBvblNhdmU6IHNob3dTYXZlICYmIHRoaXMuaGFuZGxlU2F2ZSB8fCB1bmRlZmluZWQgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWNjb3VudC1oZWFkZXIiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInByb3ZpZGVyLXR5cGUiIH0sIHR5cGUpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJlbWFpbCIgfSwgZW1haWwpKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJiYXNpYyIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRvcnMiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0SW5wdXQsIHsgZGVzY3JpcHRpb246ICJBY2NvdW50IERlc2NyaXB0aW9uIiwgcGxhY2Vob2xkZXI6ICIiLCB2YWx1ZTogZGVzY3JpcHRpb24sIHR5cGU6ICJ0ZXh0Iiwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRGVzY3JpcHRpb25DaGFuZ2UgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0SW5wdXQsIHsgZGVzY3JpcHRpb246ICJBY2NvdW50IE5hbWUiLCBwbGFjZWhvbGRlcjogIiIsIHZhbHVlOiBuYW1lLCB0eXBlOiAidGV4dCIsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZU5hbWVDaGFuZ2UgfSkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzaWduYXR1cmUtZmllbGQiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJsYWJlbCIgfSwgIlNpZ25hdHVyZSIpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2lnbmF0dXJlLXBhbmUiLCBvbkRyYWdFbnRlcjogdGhpcy5oYW5kbGVEcmFnRW50ZXIsIG9uRHJhZ0V4aXQ6IHRoaXMuaGFuZGxlRHJhZ0xlYXZlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3B6b25lQWN0aXZlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZpbGVEcm9wWm9uZSwgeyBjbGFzc05hbWU6ICJhY2NvdW50LWRldGFpbC1kcm9wLXpvbmUiLCBvbkRyb3A6IHRoaXMuaGFuZGxlVXBsb2FkLCBvbkxlYXZlOiB0aGlzLmhhbmRsZURyYWdMZWF2ZSwgdGl0bGU6ICdEcm9wIGhlcmUgdG8gZW1iZWQgYW4gaW1hZ2UgaW50byB5b3VyIHNpZ25hdHVyZScsIGRlc2NyaXB0aW9uOiAiIiwgYWx0Q29weTogIiIsIG9uRGlyZWN0b3J5RHJvcEVycm9yOiB0aGlzLmhhbmRsZURpcmVjdG9yeURyb3BFcnJvciB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzY3JvbGwtYXJlYSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udGVudEVkaXRhYmxlLCB7IG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVNpZ25hdHVyZUNoYW5nZSwgaHRtbDogc2lnbmF0dXJlLCByZWY6IHRoaXMuaGFuZGxlQ29udGVudEVkaXRhYmxlUmVmLCBvbkF0dGFjaG1lbnRVcGxvYWQ6IHRoaXMuaGFuZGxlVXBsb2FkIH0pKSkpKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0b2dnbGVzIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb2dnbGVDZWxsLCB7IG9uOiBpc0RlZmF1bHRBY2NvdW50LCB0aXRsZTogIlNlbmQgbmV3IG1lc3NhZ2VzIGZyb20gdGhpcyBhY2NvdW50Iiwgb25Ub2dnbGU6IHRoaXMuaGFuZGxlRGVmYXVsdEFjY291bnRDaGFuZ2UgfSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvZ2dsZUNlbGwsIHsgb246IGF1dG9CY2MsIHRpdGxlOiAiQXV0by1mb3J3YXJkIG1lc3NhZ2VzIHNlbnQgZnJvbSB0aGlzIGFjY291bnQgdG8gQ1JNIiwgb25Ub2dnbGU6IHRoaXMuaGFuZGxlQXV0b0JjY0NoYW5nZSB9KSwKICAgICAgICAgICAgICAgIGF1dG9CY2MgJiYKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRJbnB1dCwgeyBuYW1lOiAiQXV0byBCQ0MiLCBkZXNjcmlwdGlvbjogIk1lc3NhZ2VzIHNlbnQgdW5kZXIgdGhpcyBhY2NvdW50IHdpbGwgYXV0b21hdGljYWxseSBiY2MgdGhpcyBhZGRyZXNzIiwgdHlwZTogInRleHQiLCBwbGFjZWhvbGRlcjogIkVudGVyIGVtYWlsIGFkZHJlc3MiLCB2YWx1ZTogYXV0b0JjY1ZhbHVlIHx8ICcnLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVBdXRvQmNjVmFsdWVDaGFuZ2UsIGF1dG9mb2N1czogdHJ1ZSB9KSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYXV0b3JlcGx5LXdyYXBwZXIiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb2dnbGVDZWxsLCB7IG9uOiAhIWF1dG9SZXBseSAmJiBhdXRvUmVwbHkuZW5hYmxlZCwgdGl0bGU6ICJWYWNhdGlvbiBSZXNwb25kZXIiLCBzdWJ0aXRsZTogIkF1dG9tYXRpY2FsbHkgcmVzcG9uZHMgdG8gaW5jb21pbmcgZW1haWxzIHdpdGggdGhpcyBtZXNzYWdlOiIsIG9uVG9nZ2xlOiB0aGlzLmhhbmRsZUF1dG9SZXBseUVuYWJsZUNoYW5nZSB9KSwKICAgICAgICAgICAgICAgICAgICAhIWF1dG9SZXBseSAmJiBhdXRvUmVwbHkuZW5hYmxlZCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRlbnRFZGl0YWJsZSwgeyBvbkNoYW5nZTogdGhpcy5oYW5kbGVBdXRvUmVwbHlDaGFuZ2UsIGh0bWw6IGF1dG9SZXBseS5ib2R5LCByZWY6IHRoaXMuaGFuZGxlQXV0b1JlcGx5Q29udGVudEVkaXRhYmxlUmVmIH0pKSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWxpYXNlcyIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiaGVhZGVyLXBhbmUiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgIkFsaWFzZXMiKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlQWxpYXNDcmVhdGUsIGNsYXNzTmFtZTogImFkZC1hbGlhcy1idXR0b24iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGx1cywgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICJcdTAwQTAgQWRkIEFsaWFzIikpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0YWJsZSIgfSwgdGhpcy5wcm9wcy5hbGlhc2VzLm1hcChmdW5jdGlvbiAoYWxpYXMsIGkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChBbGlhc0l0ZW0sIHsga2V5OiBhbGlhcy5pZCwgbmFtZTogYWxpYXMubmFtZSwgZW1haWw6IGFsaWFzLmVtYWlsLCBpZDogYWxpYXMuaWQsIG9uQ2xpY2s6IF90aGlzLmhhbmRsZUFsaWFzU2VsZWN0IH0pOwogICAgICAgICAgICAgICAgfSkpKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBjbGFzc05hbWU6ICJyZW1vdmUtYnV0dG9uIiwgb25DbGljazogdGhpcy5oYW5kbGVEZWxldGUgfSwgIlJlbW92ZSBBY2NvdW50IikpKTsKICAgIH07CiAgICByZXR1cm4gQWNjb3VudERldGFpbDsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IEFjY291bnREZXRhaWw7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountDetail/AccountDetail.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountDetail/AccountDetail.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { findIndex, indexOf, compact, values } from 'lodash';\nimport { Account, Preferences, AttachmentMeta, AutoReply, Resource } from '@src/types';\nimport { mongoId } from '@src/lib/crypt';\n\nimport FileDropZone from '@src/components/Compose/FileDropZone';\nimport TextInput from '@src/components/Form/TextInput';\nimport ContentEditable from '@src/components/ContentEditable/ContentEditable';\nimport ToggleCell from '@src/routes/Settings/components/ToggleCell';\nimport AliasItem from '../../components/AliasItem';\n\nimport Plus from '@src/components/Icons/Plus.svg';\n\nimport './AccountDetail.scss';\nimport { accountSignature } from '@src/lib/account';\nimport NavigationHeader from '@src/routes/Settings/components/NavigationHeader';\nimport Confirm, { Props as ConfirmProps } from '@src/components/Base/Confirm';\nimport browserHistory from '@src/lib/browserHistory';\nimport { RouteComponentProps } from 'react-router';\nimport { AttachmentUploadOptions } from '@src/lib/attachment';\nimport { BlobDescriptor, uploadErrorMessage } from '@src/lib/files';\n\nexport interface Props {\n  preferences: Preferences;\n  account: Account;\n  aliases: Account[];\n  attachmentMetas: Array<Resource<AttachmentMeta>>;\n}\n\nexport interface DispatchProps {\n  updatePreferences: (preferences: Preferences) => void;\n  updateAccount: (account: Account) => void;\n  deleteAccount: (account: Account) => void;\n  addSignatureImage: (meta: AttachmentMeta) => void;\n  removeSignatureImage: (meta: AttachmentMeta) => void;\n}\n\ninterface State {\n  autoBcc: boolean;\n  autoReply?: AutoReply;\n  signature: string;\n  dropzoneActive: boolean;\n  autoBccValue?: string;\n  description?: string;\n  name?: string;\n  showSave?: boolean;\n  confirmProps?: ConfirmProps;\n}\n\n// tslint:disable-next-line:max-line-length\nconst DEFAULT_AUTO_REPLY = 'I’m currently out of the office and may have limited access to my email.';\nclass AccountDetail extends React.PureComponent<\n  Props & DispatchProps & RouteComponentProps<any>, State\n> {\n  contentEditable: ContentEditable;\n  autoReplyContentEditable: ContentEditable;\n\n  constructor(props: Props & DispatchProps & RouteComponentProps<any>) {\n    super();\n\n    this.state = {\n      autoReply: props.account.autoReply,\n      autoBcc: !!props.account.autoBcc,\n      signature: props.account.signature,\n      dropzoneActive: false,\n    };\n  }\n  // Update signature\n  // TODO(SHIN & SHAHAN): Possible race condition or lost change between account diffs.\n  componentDidUpdate(oldProps: Props) {\n    // Handle signature images\n    const nextSignatureImages = this.props.account.signatureImages || [];\n    const oldSignatureImages = oldProps.account.signatureImages || [];\n\n    // Inject signature images if new is found\n    if (nextSignatureImages !== oldSignatureImages) {\n      nextSignatureImages.\n        filter(attachment => findIndex(oldSignatureImages, { id: attachment.id }) === -1)\n        .forEach((attachment) => {\n          this.contentEditable.replaceSignatureImageAttachment({ ...attachment, inline: true });\n        },\n      );\n    }\n\n    // Handle replacing old metas\n    const oldMetas = oldProps.attachmentMetas;\n    const newMetas = this.props.attachmentMetas;\n    const oldMetaIds = compact(values(oldMetas.map(meta => meta.data && meta.data.attachment)));\n    if (oldMetas !== newMetas) {\n      // Inject metas\n      newMetas\n        .forEach((meta) => {\n          if (!meta.data) {\n            return;\n          }\n\n          // Replace if available\n          this.contentEditable.replaceSignatureImageAttachmentMeta(meta.data);\n\n          // Check if attachment meta is new\n          if (indexOf(oldMetaIds, meta.data && meta.data.attachment) !== -1) {\n            return;\n          }\n\n          this.contentEditable.injectSignatureImageAttachmentMeta(meta.data);\n        });\n    }\n  }\n\n  handleContentEditableRef = (ref: ContentEditable) => {\n    this.contentEditable = ref;\n  }\n\n  handleAutoReplyContentEditableRef = (ref: ContentEditable) => {\n    this.autoReplyContentEditable = ref;\n  }\n\n  handleDescriptionChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ description: e.currentTarget.value, showSave: true });\n  }\n\n  handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ name: e.currentTarget.value, showSave: true });\n  }\n\n  handleSignatureChange = (html: string) => {\n    this.setState({ signature: html, showSave: true });\n  }\n\n  handleAutoReplyChange = (html: string) => {\n    const autoReply = this.state.autoReply || { enabled: true, body: DEFAULT_AUTO_REPLY };\n\n    this.setState({ autoReply: { ...autoReply, body: html }, showSave: true });\n  }\n\n  handleDefaultAccountChange = () => {\n    const accountId = this.props.account.id;\n    const wasDefault = accountId === this.props.preferences.defaultAccount;\n    const newValue = wasDefault\n      ? ''\n      : accountId;\n\n    const updatedPreferences = { ...this.props.preferences, defaultAccount: newValue };\n    this.props.updatePreferences(updatedPreferences);\n  }\n\n  handleAutoBccValueChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ autoBccValue: e.currentTarget.value, showSave: true });\n  }\n\n  handleAutoBccChange = () => {\n    this.setState({ autoBcc: !this.state.autoBcc, showSave: true });\n  }\n\n  handleAutoReplyEnableChange = () => {\n    const autoReply = this.state.autoReply || { enabled: false, body: DEFAULT_AUTO_REPLY };\n\n    this.setState({\n      autoReply: {\n        ...autoReply,\n        enabled: !autoReply.enabled,\n      },\n      showSave: true,\n    });\n  }\n\n  handleAliasSelect = (id: string) => {\n    const { account } = this.props;\n    browserHistory.push(`/settings/accounts/${account.id}/aliases/${id}`);\n  }\n\n  handleBackPress = () => {\n    browserHistory.goBack();\n  }\n\n  // DropZone handlers\n  handleDragEnter = (event: React.DragEvent<HTMLDivElement>) => {\n    if (event.dataTransfer.types.indexOf('Files') !== -1) {\n      this.setState({ dropzoneActive: true });\n    }\n  }\n\n  handleDragLeave = () => {\n    this.setState({ dropzoneActive: false });\n  }\n\n  // TODO(SHIN): Handle uploading signature image\n  handleUpload = (files: File[], options?: AttachmentUploadOptions) => {\n    const { addSignatureImage, account } = this.props;\n    if (!account) {\n      return;\n    }\n\n    // Block ability to attach files larger than 25 MB.\n    if (files.filter(file => file.size > 25000000).length) {\n      const confirmProps: ConfirmProps = {\n        title: 'Error Uploading Attachment',\n        message: 'You cannot upload an attachment greater than 25 MB.',\n        confirmCopy: 'Ok',\n        onConfirm: () => {\n          this.setState({ confirmProps: undefined });\n        },\n      };\n\n      this.setState({ confirmProps });\n      return;\n    }\n\n    // Only grab image files,\n    const imageFiles = files.filter(file => file.type.startsWith('image'));\n\n    // Handle attachment upload\n    this.setState({ dropzoneActive: false }, () => {\n      // Handle dropping to specific position\n      if (options && options.position && this.contentEditable) {\n        this.contentEditable.moveCursorToPosition(options.position);\n      }\n    });\n\n    // Upload signature images\n    imageFiles.forEach(file => addSignatureImage({\n      attachment: mongoId(),\n      resourceId: account.id,\n      file,\n      inline: true,\n    }));\n  }\n\n  handleDelete = () => {\n    const { account, deleteAccount } = this.props;\n\n    const message = 'All tracking data, activity, and cloud attachments associated '\n      + 'with this account will be removed and cannot be recovered. '\n      + '\\n\\nYou will not be able to re-add this account until it has finished deleting. '\n      + 'Would you like to continue?';\n    const confirmProps: ConfirmProps = {\n      title: 'Deleting Account',\n      message,\n      confirmCopy: 'Delete',\n      onConfirm: () => {\n        this.setState({ confirmProps: undefined });\n        deleteAccount(account);\n      },\n      onCancel: () => this.setState({ confirmProps: undefined }),\n    };\n\n    this.setState({ confirmProps });\n  }\n\n  handleAliasCreate = () => {\n    const { account } = this.props;\n    browserHistory.push(`/settings/accounts/${account.id}/aliases/new`);\n  }\n\n  handleSave = () => {\n    const account = { ...this.props.account };\n    const { updateAccount } = this.props;\n    const { description, autoBccValue, signature, name, autoReply } = this.state;\n    if (name) {\n      account.name = name;\n    }\n\n    if (signature) {\n      account.signature = signature;\n    }\n\n    if (autoBccValue) {\n      account.autoBcc = autoBccValue;\n    }\n\n    if (autoReply) {\n      account.autoReply = autoReply;\n    }\n\n    if (!this.state.autoBcc) {\n      account.autoBcc = null;\n    }\n\n    if (description) {\n      account.description = description;\n    }\n\n    // Update account and reset state\n    updateAccount(account);\n    this.setState({\n      showSave: undefined,\n      autoBccValue: undefined,\n      name: undefined,\n      description: undefined,\n      autoReply: undefined,\n    });\n  }\n\n  handleDirectoryDropError = (b: BlobDescriptor) => {\n    const confirmProps: ConfirmProps = {\n      title: 'Error attaching file',\n      message: uploadErrorMessage(b),\n      confirmCopy: 'Ok',\n      onConfirm: () => {\n        this.setState({ confirmProps: undefined });\n      },\n    };\n\n    this.setState({ confirmProps, dropzoneActive: false });\n  }\n\n  render() {\n    const {\n      email,\n      type,\n      id,\n     } = this.props.account;\n\n    const {\n      autoBcc,\n      dropzoneActive,\n      showSave,\n      confirmProps,\n    } = this.state;\n\n    const description = this.state.description !== undefined\n      ? this.state.description\n      : this.props.account.description;\n    const name = this.state.name !== undefined\n      ? this.state.name\n      : this.props.account.name;\n    const autoBccValue = this.state.autoBccValue !== undefined\n      ? this.state.autoBccValue\n      : this.props.account.autoBcc;\n    const autoReply = this.state.autoReply !== undefined\n      ? this.state.autoReply\n      : this.props.account.autoReply;\n\n    const isDefaultAccount = this.props.preferences.defaultAccount === id;\n    const signature = accountSignature({\n      account: this.props.account,\n      preventEdits: false,\n      returnInnerHTML: true,\n    });\n\n    return (\n      <div className=\"preferences-account-detail\">\n        {confirmProps && <Confirm {...confirmProps} />}\n        <NavigationHeader\n          title=\"Accounts\"\n          onBack={this.handleBackPress}\n          onSave={showSave && this.handleSave || undefined}\n        />\n        <div className=\"account-header\">\n          <div className=\"provider-type\">\n            {type}\n          </div>\n          <div className=\"email\">\n            {email}\n          </div>\n        </div>\n        <div className=\"basic\">\n          <div className=\"descriptors\">\n            <TextInput\n              description=\"Account Description\"\n              placeholder=\"\"\n              value={description}\n              type=\"text\"\n              onChange={this.handleDescriptionChange}\n            />\n            <TextInput\n              description=\"Account Name\"\n              placeholder=\"\"\n              value={name}\n              type=\"text\"\n              onChange={this.handleNameChange}\n            />\n          </div>\n          <div className=\"signature-field\">\n            <div className=\"label\">Signature</div>\n            <div\n              className=\"signature-pane\"\n              onDragEnter={this.handleDragEnter}\n              onDragExit={this.handleDragLeave}\n            >\n              {dropzoneActive &&\n                <FileDropZone\n                  className=\"account-detail-drop-zone\"\n                  onDrop={this.handleUpload}\n                  onLeave={this.handleDragLeave}\n                  title={'Drop here to embed an image into your signature'}\n                  description=\"\"\n                  altCopy=\"\"\n                  onDirectoryDropError={this.handleDirectoryDropError}\n                />\n              }\n              <div className=\"scroll-area\">\n                <ContentEditable\n                  onChange={this.handleSignatureChange}\n                  html={signature}\n                  ref={this.handleContentEditableRef}\n                  onAttachmentUpload={this.handleUpload}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"toggles\">\n          <ToggleCell\n            on={isDefaultAccount}\n            title=\"Send new messages from this account\"\n            onToggle={this.handleDefaultAccountChange}\n          />\n          <ToggleCell\n            on={autoBcc}\n            title=\"Auto-forward messages sent from this account to CRM\"\n            onToggle={this.handleAutoBccChange}\n          />\n          {autoBcc &&\n            <TextInput\n              name=\"Auto BCC\"\n              description=\"Messages sent under this account will automatically bcc this address\"\n              type=\"text\"\n              placeholder=\"Enter email address\"\n              value={autoBccValue || ''}\n              onChange={this.handleAutoBccValueChange}\n              autofocus\n            />\n          }\n          <div className=\"autoreply-wrapper\">\n            <ToggleCell\n              on={!!autoReply && autoReply.enabled}\n              title=\"Vacation Responder\"\n              subtitle=\"Automatically responds to incoming emails with this message:\"\n              onToggle={this.handleAutoReplyEnableChange}\n            />\n            {!!autoReply && autoReply.enabled && <ContentEditable\n              onChange={this.handleAutoReplyChange}\n              html={autoReply.body}\n              ref={this.handleAutoReplyContentEditableRef}\n            />}\n          </div>\n        </div>\n        <div className=\"aliases\">\n          <div className=\"header-pane\">\n            <div>\n              Aliases\n            </div>\n            <button\n              onClick={this.handleAliasCreate}\n              className=\"add-alias-button\"\n            >\n              <Plus />\n              &nbsp; Add Alias\n            </button>\n          </div>\n          <div className=\"table\">\n            {this.props.aliases.map((alias, i) =>\n              <AliasItem\n                key={alias.id}\n                name={alias.name}\n                email={alias.email}\n                id={alias.id}\n                onClick={this.handleAliasSelect}\n              />,\n            )}\n          </div>\n        </div>\n        <button\n          className=\"remove-button\"\n          onClick={this.handleDelete}\n        >\n          Remove Account\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default AccountDetail;\n"]}]}