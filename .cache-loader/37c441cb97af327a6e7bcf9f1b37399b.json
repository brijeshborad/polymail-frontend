{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEditableCell/RecipientEditableCell.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEditableCell/RecipientEditableCell.tsx","mtime":1675280253992},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0ICcuL1JlY2lwaWVudEVkaXRhYmxlQ2VsbC5zY3NzJzsKaW1wb3J0IHsgS2V5Q29kZSB9IGZyb20gJ0BzcmMvdHlwZXMnOwp2YXIgUmVjaXBpZW50RWRpdGFibGVDZWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFJlY2lwaWVudEVkaXRhYmxlQ2VsbCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFJlY2lwaWVudEVkaXRhYmxlQ2VsbChwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZUlucHV0Q2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHZhbHVlID0gX2EudmFsdWUsIGRlcGVuZGVudFZhbHVlcyA9IF9hLmRlcGVuZGVudFZhbHVlczsKICAgICAgICAgICAgX3RoaXMuZGVib3VuY2VkKGUudGFyZ2V0LnZhbHVlLCB2YWx1ZS5oZWFkZXIsIGRlcGVuZGVudFZhbHVlcy5yZW1vdmVCdXR0b25Qcm9wcy5pbmRleCAtIDEpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBoYW5kbGVkID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCB2YWx1ZSA9IF9hLnZhbHVlLCBkZXBlbmRlbnRWYWx1ZXMgPSBfYS5kZXBlbmRlbnRWYWx1ZXM7CiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IEtleUNvZGUuVGFiKSB7CiAgICAgICAgICAgICAgICB2YWx1ZS5vblRhYihlLnNoaWZ0S2V5LCB2YWx1ZS5oZWFkZXIsIGRlcGVuZGVudFZhbHVlcy5yZW1vdmVCdXR0b25Qcm9wcy5pbmRleCk7CiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IEtleUNvZGUuUmlnaHQgfHwgZS5rZXlDb2RlID09PSBLZXlDb2RlLkxlZnQpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhhbmRsZWQpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmRlYm91bmNlZCA9IGRlYm91bmNlKHByb3BzLnZhbHVlLm9uSW5wdXRDaGFuZ2UsIDUwMCk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmVjaXBpZW50RWRpdGFibGVDZWxsLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmRlYm91bmNlZC5jYW5jZWwoKTsKICAgIH07CiAgICBSZWNpcGllbnRFZGl0YWJsZUNlbGwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCB2YWx1ZSA9IF9hLnZhbHVlLCBkZXBlbmRlbnRWYWx1ZXMgPSBfYS5kZXBlbmRlbnRWYWx1ZXM7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInJlY2lwaWVudC1lZGl0YWJsZS1jZWxsIiB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJpbnB1dCIsIHsgZGlyOiAiYXV0byIsIGNsYXNzTmFtZTogInRleHQiLCBuYW1lOiB2YWx1ZS5oZWFkZXIgKyAiLSIgKyBkZXBlbmRlbnRWYWx1ZXMucmVtb3ZlQnV0dG9uUHJvcHMuaW5kZXgsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlLCBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93biwgZGVmYXVsdFZhbHVlOiB2YWx1ZS52YWx1ZSwgYXV0b0NvbXBsZXRlOiAib2ZmIiB9KSkpOwogICAgfTsKICAgIHJldHVybiBSZWNpcGllbnRFZGl0YWJsZUNlbGw7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBSZWNpcGllbnRFZGl0YWJsZUNlbGw7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEditableCell/RecipientEditableCell.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEditableCell/RecipientEditableCell.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,QAAQ,EAAE,MAAM,QAAQ,CAAC;AAClC,OAAO,8BAA8B,CAAC;AACtC,OAAO,EAAE,OAAO,EAAE,MAAM,YAAY,CAAC;AAiBrC;IAAoC,yCAA0B;IAG5D,+BAAY,KAAY;QAAxB,YACE,kBAAM,KAAK,CAAC,SAGb;QAMD,uBAAiB,GAAG,UAAC,CAAyC;YACtD,IAAA,gBAAuC,EAArC,gBAAK,EAAE,oCAA8B,CAAC;YAE9C,KAAI,CAAC,SAAS,CACX,CAAC,CAAC,MAA2B,CAAC,KAAK,EACpC,KAAK,CAAC,MAAM,EACZ,eAAe,CAAC,iBAAiB,CAAC,KAAK,GAAG,CAAC,CAC5C,CAAC;QACJ,CAAC,CAAA;QAED,mBAAa,GAAG,UAAC,CAAwC;YACvD,IAAI,OAAO,GAAG,KAAK,CAAC;YACd,IAAA,gBAAuC,EAArC,gBAAK,EAAE,oCAA8B,CAAC;YAE9C,IAAI,CAAC,CAAC,OAAO,KAAK,OAAO,CAAC,GAAG,EAAE;gBAC7B,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,EAAE,KAAK,CAAC,MAAM,EAAE,eAAe,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;gBAC/E,OAAO,GAAG,IAAI,CAAC;aAChB;iBAAM,IAAI,CAAC,CAAC,OAAO,KAAK,OAAO,CAAC,KAAK,IAAI,CAAC,CAAC,OAAO,KAAK,OAAO,CAAC,IAAI,EAAE;gBACpE,CAAC,CAAC,eAAe,EAAE,CAAC;aACrB;YAED,IAAI,OAAO,EAAE;gBACX,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;aACrB;QACH,CAAC,CAAA;QAhCC,KAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;;IAC5D,CAAC;IAED,oDAAoB,GAApB;QACE,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;IAC1B,CAAC;IA6BD,sCAAM,GAAN;QACQ,IAAA,eAAuC,EAArC,gBAAK,EAAE,oCAA8B,CAAC;QAE9C,OAAO,CACL,6BAAK,SAAS,EAAC,yBAAyB;YACtC,+BACE,GAAG,EAAC,MAAM,EACV,SAAS,EAAC,MAAM,EAChB,IAAI,EAAK,KAAK,CAAC,MAAM,SAAI,eAAe,CAAC,iBAAiB,CAAC,KAAO,EAClE,QAAQ,EAAE,IAAI,CAAC,iBAAiB,EAChC,SAAS,EAAE,IAAI,CAAC,aAAa,EAC7B,YAAY,EAAE,KAAK,CAAC,KAAK,EACzB,YAAY,EAAC,KAAK,GAClB,CACE,CACP,CAAC;IACJ,CAAC;IACH,4BAAC;AAAD,CAAC,AAzDD,CAAoC,KAAK,CAAC,aAAa,GAyDtD;AAED,eAAe,qBAAqB,CAAC","sourcesContent":["import React from 'react';\nimport { debounce } from 'lodash';\nimport './RecipientEditableCell.scss';\nimport { KeyCode } from '@src/types';\n\ninterface Props {\n  value: {\n    value: string,\n    header: string,\n    onInputChange: (value: string, header: string, index: number, validate?: boolean) => void,\n    onTab: (shiftKey: boolean, header: string, index: number) => void,\n  };\n  dependentValues: {\n    removeButtonProps: {\n      index: number,\n      onRemove: (index: number) => void;\n    };\n  };\n}\n\nclass RecipientEditableCell extends React.PureComponent<Props> {\n  debounced: any;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.debounced = debounce(props.value.onInputChange, 500);\n  }\n\n  componentWillUnmount() {\n    this.debounced.cancel();\n  }\n\n  handleInputChange = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    const { value, dependentValues } = this.props;\n\n    this.debounced(\n      (e.target as HTMLInputElement).value,\n      value.header,\n      dependentValues.removeButtonProps.index - 1,\n    );\n  }\n\n  handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    let handled = false;\n    const { value, dependentValues } = this.props;\n\n    if (e.keyCode === KeyCode.Tab) {\n      value.onTab(e.shiftKey, value.header, dependentValues.removeButtonProps.index);\n      handled = true;\n    } else if (e.keyCode === KeyCode.Right || e.keyCode === KeyCode.Left) {\n      e.stopPropagation();\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  render() {\n    const { value, dependentValues } = this.props;\n\n    return (\n      <div className=\"recipient-editable-cell\">\n        <input\n          dir=\"auto\"\n          className=\"text\"\n          name={`${value.header}-${dependentValues.removeButtonProps.index}`}\n          onChange={this.handleInputChange}\n          onKeyDown={this.handleKeyDown}\n          defaultValue={value.value}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default RecipientEditableCell;\n"]}]}