{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/MagicLinkSuccess/MagicLinkSuccess.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/MagicLinkSuccess/MagicLinkSuccess.tsx","mtime":1675280254079},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBDdXN0b21Mb2FkZXIgZnJvbSAncmVhY3QtbG9hZGVycyc7CmltcG9ydCAnLi9NYWdpY0xpbmtTdWNjZXNzLnNjc3MnOwovLyBUT09EKFNISU4pOiBIYW5kbGUgYWx0ZXJuYXRlIGxvZ2luIG1ldGhvZCBpZiBtYWdpYyBsaW5rIGZhaWxzPwp2YXIgTWFnaWNMaW5rU3VjY2VzcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhNYWdpY0xpbmtTdWNjZXNzLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gTWFnaWNMaW5rU3VjY2VzcygpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZUZhbGxiYWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbG9naW4/ZmFsbGJhY2s9dHJ1ZSc7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgc2hvd0ZhbGxiYWNrU2VjdGlvbjogZmFsc2UsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBNYWdpY0xpbmtTdWNjZXNzLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvZGUgPSBfYS5jb2RlLCBsb2dpbiA9IF9hLmxvZ2luOwogICAgICAgIGlmIChjb2RlKSB7CiAgICAgICAgICAgIGxvZ2luKGNvZGUpOwogICAgICAgIH0KICAgICAgICAvLyBTaG93IGZhbGxiYWNrIHNlY3Rpb24gaWYgZmFpbGVkIHRvIGxvZ2luIHdpdGhpbiAzIHNlY29uZHMKICAgICAgICB0aGlzLnRpbWVvdXQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd0ZhbGxiYWNrU2VjdGlvbjogdHJ1ZSB9KTsKICAgICAgICB9LCA1MDAwKTsKICAgIH07CiAgICBNYWdpY0xpbmtTdWNjZXNzLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTsKICAgIH07CiAgICBNYWdpY0xpbmtTdWNjZXNzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1hZ2ljLWxpbmstcmVkaXJlY3QiIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAicHJvbXB0IiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJtYWdpYy1saW5rLWxvYWRpbmciIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDdXN0b21Mb2FkZXIsIHsgdHlwZTogImxpbmUtc2NhbGUtcHVsc2Utb3V0LXJhcGlkIiwgaW5uZXJDbGFzc05hbWU6ICJjdXN0b20tbG9hZGVyLWlubmVyIiwgYWN0aXZlOiB0cnVlIH0pKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sICJTaWduaW5nIGludG8gUG9seW1haWwiKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRpb24iIH0sICJZb3UnbGwgYmUgbG9nZ2VkIGludG8gUG9seW1haWwgaW4gYSBmZXcgbW9tZW50cy4uLiIpLAogICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93RmFsbGJhY2tTZWN0aW9uICYmIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImZhbGxiYWNrLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICJUcm91YmxlIGxvZ2dpbmcgaW4/IFx1MDBBMCIsCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAiZmFsbGJhY2stYnV0dG9uIiwgb25DbGljazogdGhpcy5oYW5kbGVGYWxsYmFjayB9LCAiU2lnbiBpbiBNYW51YWxseSIpKSkpKSkpOwogICAgfTsKICAgIHJldHVybiBNYWdpY0xpbmtTdWNjZXNzOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgTWFnaWNMaW5rU3VjY2VzczsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/MagicLinkSuccess/MagicLinkSuccess.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/MagicLinkSuccess/MagicLinkSuccess.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,YAAY,MAAM,eAAe,CAAC;AACzC,OAAO,yBAAyB,CAAC;AAcjC,iEAAiE;AACjE;IAA+B,oCAAsD;IAGnF;QAAA,YACE,iBAAO,SAIR;QAqBD,oBAAc,GAAG;YACf,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,sBAAsB,CAAC;QAChD,CAAC,CAAA;QA1BC,KAAI,CAAC,KAAK,GAAG;YACX,mBAAmB,EAAE,KAAK;SAC3B,CAAC;;IACJ,CAAC;IAED,4CAAiB,GAAjB;QAAA,iBAaC;QAZO,IAAA,eAA4B,EAA1B,cAAI,EAAE,gBAAoB,CAAC;QACnC,IAAI,IAAI,EAAE;YACR,KAAK,CAAC,IAAI,CAAC,CAAC;SACb;QAED,4DAA4D;QAC5D,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAC9B;YACE,KAAI,CAAC,QAAQ,CAAC,EAAE,mBAAmB,EAAE,IAAI,EAAE,CAAC,CAAC;QAC/C,CAAC,EACD,IAAI,CACL,CAAC;IACJ,CAAC;IAED,+CAAoB,GAApB;QACE,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC7B,CAAC;IAMD,iCAAM,GAAN;QACE,OAAO,CACL,6BAAK,SAAS,EAAC,qBAAqB;YAClC,6BAAK,SAAS,EAAC,QAAQ;gBACrB,6BAAK,SAAS,EAAC,oBAAoB;oBAC/B,oBAAC,YAAY,IACX,IAAI,EAAC,4BAA4B,EACjC,cAAc,EAAC,qBAAqB,EACpC,MAAM,SACN,CACE;gBACR,6BAAK,SAAS,EAAC,OAAO,4BAEhB;gBACN,6BAAK,SAAS,EAAC,aAAa,yDAEtB;gBACL,IAAI,CAAC,KAAK,CAAC,mBAAmB,IAAI,CACjC,6BAAK,SAAS,EAAC,kBAAkB;oBAC/B,8BAAM,SAAS,EAAC,aAAa;;wBAG3B,gCACE,SAAS,EAAC,iBAAiB,EAC3B,OAAO,EAAE,IAAI,CAAC,cAAc,uBAGvB,CACJ,CACD,CACP,CACG,CAIF,CACP,CAAC;IACJ,CAAC;IACH,uBAAC;AAAD,CAAC,AAvED,CAA+B,KAAK,CAAC,aAAa,GAuEjD;AAED,eAAe,gBAAgB,CAAC","sourcesContent":["import React from 'react';\nimport CustomLoader from 'react-loaders';\nimport './MagicLinkSuccess.scss';\n\ninterface State {\n  showFallbackSection: boolean;\n}\n\nexport interface StateProps {\n  code?: string;\n}\n\nexport interface DispatchProps {\n  login: (code: string) => void;\n}\n\n// TOOD(SHIN): Handle alternate login method if magic link fails?\nclass MagicLinkSuccess extends React.PureComponent<StateProps & DispatchProps, State> {\n  timeout: NodeJS.Timer;\n\n  constructor() {\n    super();\n    this.state = {\n      showFallbackSection: false,\n    };\n  }\n\n  componentDidMount() {\n    const { code, login } = this.props;\n    if (code) {\n      login(code);\n    }\n\n    // Show fallback section if failed to login within 3 seconds\n    this.timeout = global.setTimeout(\n      () => {\n        this.setState({ showFallbackSection: true });\n      },\n      5000,\n    );\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timeout);\n  }\n\n  handleFallback = () => {\n    window.location.href = '/login?fallback=true';\n  }\n\n  render() {\n    return (\n      <div className=\"magic-link-redirect\">\n        <div className=\"prompt\">\n          <div className=\"magic-link-loading\">\n              <CustomLoader\n                type=\"line-scale-pulse-out-rapid\"\n                innerClassName=\"custom-loader-inner\"\n                active\n              />\n            </div>\n          <div className=\"title\">\n            Signing into Polymail\n          </div>\n          <div className=\"description\">\n            You'll be logged into Polymail in a few moments...\n          </div>\n          {this.state.showFallbackSection && (\n            <div className=\"fallback-section\">\n              <span className=\"description\">\n                Trouble logging in?\n                &nbsp;\n                <button\n                  className=\"fallback-button\"\n                  onClick={this.handleFallback}\n                >\n                  Sign in Manually\n              </button>\n            </span>\n            </div>\n          )}\n        </div>\n        {/* <div className=\"sign-out-container\">\n          <button className=\"sign-out\" onClick={this.props.logout}>Sign Out</button>\n        </div> */}\n      </div>\n    );\n  }\n}\n\nexport default MagicLinkSuccess;\n"]}]}