{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/ReferFriends/components/SendInvites/SendInvites.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/ReferFriends/components/SendInvites/SendInvites.tsx","mtime":1675280254109},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCAnLi9TZW5kSW52aXRlcy5zY3NzJzsKaW1wb3J0IENvbnRhY3RJbnB1dCBmcm9tICdAc3JjL2NvbXBvbmVudHMvRm9ybS9Db250YWN0SW5wdXQnOwppbXBvcnQgeyBLZXlDb2RlIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCB7IGlzRW1haWwgfSBmcm9tICdAc3JjL2xpYi9zZWFyY2gnOwppbXBvcnQgVG9vbFRpcCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9Ub29sdGlwJzsKaW1wb3J0IHsgQW1wbGl0dWRlRXZlbnRzLCBsb2dBbXBsaXR1ZGVFdmVudCB9IGZyb20gJ0BzcmMvbGliL2FtcGxpdHVkZS1hbmFseXRpY3MnOwp2YXIgU2VuZEludml0ZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoU2VuZEludml0ZXMsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTZW5kSW52aXRlcyhwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmRpc21pc3NUb29sdGlwID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dUb29sdGlwOiBmYWxzZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgaGFuZGxlZCA9IGZhbHNlOwogICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkgewogICAgICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkVudGVyOgogICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGFuZGxlZCkgewogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVmZXJyYWxMaW5rUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5yZWZlcnJhbExpbmsgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDb250YWN0U2VsZWN0ID0gZnVuY3Rpb24gKGNvbnRhY3QpIHsKICAgICAgICAgICAgdmFyIHNlbmRJbnZpdGUgPSBfdGhpcy5wcm9wcy5zZW5kSW52aXRlOwogICAgICAgICAgICBpZiAoY29udGFjdC5lbWFpbCkgewogICAgICAgICAgICAgICAgc2VuZEludml0ZShjb250YWN0LmVtYWlsKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ29weUxpbmsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5yZWZlcnJhbExpbmspIHsKICAgICAgICAgICAgICAgIF90aGlzLnJlZmVycmFsTGluay5zZWxlY3QoKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dUb29sdGlwOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgbG9nQW1wbGl0dWRlRXZlbnQoQW1wbGl0dWRlRXZlbnRzLlJlZmVyRnJpZW5kLCB7IGRldGFpbHM6ICdDb3B5IExpbmsnIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVFbnRlciA9IGZ1bmN0aW9uIChpbnB1dCkgewogICAgICAgICAgICB2YXIgc2VuZEludml0ZSA9IF90aGlzLnByb3BzLnNlbmRJbnZpdGU7CiAgICAgICAgICAgIGlmIChpc0VtYWlsKGlucHV0KSkgewogICAgICAgICAgICAgICAgc2VuZEludml0ZShpbnB1dCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0geyBzaG93VG9vbHRpcDogZmFsc2UgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTZW5kSW52aXRlcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB1cmwgPSB0aGlzLnByb3BzLnVybDsKICAgICAgICB2YXIgc2hvd1Rvb2x0aXAgPSB0aGlzLnN0YXRlLnNob3dUb29sdGlwOwogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzZW5kLWludml0ZXMiIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VuZC1pbnZpdGUtaW5wdXQiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJoNSIsIG51bGwsICJTZW5kIEludml0ZXMiKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udGFjdElucHV0LCB7IHBsYWNlaG9sZGVyOiAiZW50ZXIgZW1haWwuLi4iLCBvblNlbGVjdDogdGhpcy5oYW5kbGVDb250YWN0U2VsZWN0LCBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93biwgb25FbnRlcjogdGhpcy5oYW5kbGVFbnRlciB9KSksCiAgICAgICAgICAgICEhdXJsICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29weSIsIG9uTW91c2VMZWF2ZTogdGhpcy5kaXNtaXNzVG9vbHRpcCB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDUiLCBudWxsLCAiT3IganVzdCBjb3B5IGFuZCBzaGFyZSB0aGlzIGxpbmsiKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29weS1pbnB1dCIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJpbnB1dCIsIHsgZGlyOiAiYXV0byIsIHR5cGU6ICJ0ZXh0IiwgdmFsdWU6IHVybCwgcmVhZE9ubHk6IHRydWUsIHJlZjogdGhpcy5oYW5kbGVSZWZlcnJhbExpbmtSZWYsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ29weUxpbmsgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBvbkNsaWNrOiB0aGlzLmhhbmRsZUNvcHlMaW5rIH0sICJDb3B5IiksCiAgICAgICAgICAgICAgICAgICAgc2hvd1Rvb2x0aXAgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sVGlwLCB7IGNsYXNzTmFtZTogInRvb2x0aXAiLCB0b3A6ICItMzRweCIsIHJpZ2h0OiAiLTIwcHgiLCBjb3B5OiAiQ29waWVkISIsIGFuY2hvckJvdHRvbTogdHJ1ZSB9KSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFNlbmRJbnZpdGVzOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgU2VuZEludml0ZXM7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/ReferFriends/components/SendInvites/SendInvites.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/ReferFriends/components/SendInvites/SendInvites.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport './SendInvites.scss';\nimport ContactInput from '@src/components/Form/ContactInput';\nimport { Contact, KeyCode } from '@src/types';\nimport { isEmail } from '@src/lib/search';\nimport ToolTip from '@src/components/Base/Tooltip';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface StateProps {\n  url?: string;\n}\n\nexport interface DispatchProps {\n  sendInvite: (invite: string) => void;\n}\n\ninterface State {\n  showTooltip: boolean;\n}\n\nclass SendInvites extends React.PureComponent<StateProps & DispatchProps, State> {\n  referralLink: HTMLInputElement;\n\n  constructor(props: StateProps & DispatchProps) {\n    super(props);\n\n    this.state = { showTooltip: false };\n  }\n\n  dismissTooltip = () => {\n    this.setState({ showTooltip: false });\n  }\n\n  handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    let handled = false;\n\n    switch (e.keyCode) {\n      case KeyCode.Enter:\n        handled = true;\n        break;\n      default:\n        break;\n    }\n\n    if (handled) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  handleReferralLinkRef = (ref: HTMLInputElement) => {\n    this.referralLink = ref;\n  }\n\n  handleContactSelect = (contact: Contact) => {\n    const { sendInvite } = this.props;\n\n    if (contact.email) {\n      sendInvite(contact.email);\n    }\n  }\n\n  handleCopyLink = () => {\n    if (this.referralLink) {\n      this.referralLink.select();\n      document.execCommand('copy');\n      this.setState({ showTooltip: true });\n      logAmplitudeEvent(AmplitudeEvents.ReferFriend, { details: 'Copy Link' });\n    }\n  }\n\n  handleEnter = (input: string) => {\n    const { sendInvite } = this.props;\n\n    if (isEmail(input)) {\n      sendInvite(input);\n    }\n  }\n\n  render() {\n    const { url } = this.props;\n    const { showTooltip } = this.state;\n\n    return (\n      <div className=\"send-invites\">\n        <div className=\"send-invite-input\">\n          <h5>Send Invites</h5>\n          <ContactInput\n            placeholder=\"enter email...\"\n            onSelect={this.handleContactSelect}\n            onKeyDown={this.handleKeyDown}\n            onEnter={this.handleEnter}\n          />\n        </div>\n        {!!url && <div className=\"copy\" onMouseLeave={this.dismissTooltip}>\n          <h5>Or just copy and share this link</h5>\n          <div className=\"copy-input\">\n            <input\n              dir=\"auto\"\n              type=\"text\"\n              value={url}\n              readOnly\n              ref={this.handleReferralLinkRef}\n              onClick={this.handleCopyLink}\n            />\n            <button onClick={this.handleCopyLink}>\n              Copy\n            </button>\n            {showTooltip && <ToolTip\n              className=\"tooltip\"\n              top=\"-34px\"\n              right=\"-20px\"\n              copy=\"Copied!\"\n              anchorBottom\n            />}\n          </div>\n        </div>}\n      </div>\n    );\n  }\n}\n\nexport default SendInvites;\n"]}]}