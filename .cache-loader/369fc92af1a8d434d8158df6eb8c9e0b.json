{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/api/sharedThreads.ts","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/api/sharedThreads.ts","mtime":1675280253981},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnOwppbXBvcnQgeyBqc29uUmVxdWVzdCwgYmxhbmtSZXF1ZXN0IH0gZnJvbSAnQHNyYy9hcGkvYmFzZSc7CmltcG9ydCB7IGNyZWF0ZVNoYXJlZFRocmVhZCB9IGZyb20gJ0BzcmMvbW9ja3Mvc2hhcmVkVGhyZWFkcyc7CmltcG9ydCB7IGNyZWF0ZVRocmVhZCB9IGZyb20gJ0BzcmMvbW9ja3MvdGhyZWFkcyc7CmltcG9ydCB7IGNvbXB1dGVUaHJlYWQgfSBmcm9tICdAc3JjL2xpYi90aHJlYWQnOwppbXBvcnQgeyBjcmVhdGVNZXNzYWdlQm9kaWVzIH0gZnJvbSAnQHNyYy9tb2Nrcy9tZXNzYWdlQm9kaWVzJzsKaW1wb3J0IHsgY3JlYXRlVGVhbSwgY3JlYXRlVGVhbU1lbWJlciB9IGZyb20gJ0BzcmMvbW9ja3MvdGVhbXMnOwppbXBvcnQgeyBjb21wdXRlU2hhcmVkVGhyZWFkIH0gZnJvbSAnQHNyYy9saWIvc2hhcmVkVGhyZWFkJzsKaW1wb3J0IHsgY3JlYXRlQXNhbmFUYXNrIH0gZnJvbSAnQHNyYy9tb2Nrcy9hc2FuYSc7CmltcG9ydCB7IGFwcGx5QXNhbmFUYXNrRGVmYXVsdHMgfSBmcm9tICdAc3JjL2xpYi9tb2RlbHMvYXNhbmEnOwppbXBvcnQgeyBjb21wdXRlTWVzc2FnZUJvZHkgfSBmcm9tICdAc3JjL2xpYi9tb2RlbHMvbWVzc2FnZUJvZGllcyc7CmltcG9ydCB7IGNyZWF0ZURyYWZ0IH0gZnJvbSAnQHNyYy9tb2Nrcy9kcmFmdHMnOwppbXBvcnQgeyBkZWZhdWx0RHJhZnQgfSBmcm9tICdAc3JjL2xpYi9kcmFmdCc7CnZhciBTaGFyZWRUaHJlYWRDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBTaGFyZWRUaHJlYWRDbGllbnQoKSB7CiAgICB9CiAgICBTaGFyZWRUaHJlYWRDbGllbnQucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAob2Zmc2V0KSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgcm91dGU6IG9mZnNldCA/ICIvdjEvc2hhcmVkVGhyZWFkcz9pZD0iICsgb2Zmc2V0IDogJy92MS9zaGFyZWRUaHJlYWRzJywKICAgICAgICB9KQogICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh0aHJlYWRzKSB7IHJldHVybiB0aHJlYWRzLm1hcChjb21wdXRlU2hhcmVkVGhyZWFkKTsgfSk7CiAgICB9OwogICAgU2hhcmVkVGhyZWFkQ2xpZW50LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAobWV0YSkgewogICAgICAgIHJldHVybiBqc29uUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICByb3V0ZTogJy92MS9zaGFyZWRUaHJlYWRzJywKICAgICAgICAgICAgYm9keTogewogICAgICAgICAgICAgICAgdGhyZWFkOiBtZXRhLnRocmVhZCwKICAgICAgICAgICAgICAgIGRyYWZ0OiBtZXRhLmRyYWZ0LAogICAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IG1ldGEucGVybWlzc2lvbnMsCiAgICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoc2hhcmVkVGhyZWFkKSB7IHJldHVybiBjb21wdXRlU2hhcmVkVGhyZWFkKHNoYXJlZFRocmVhZCk7IH0pOwogICAgfTsKICAgIFNoYXJlZFRocmVhZENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgcm91dGU6ICIvdjEvc2hhcmVkVGhyZWFkcy8iICsgaWQsCiAgICAgICAgICAgIGRpc2FibGVDb3JzT3B0aW1pemF0aW9uOiB0cnVlLAogICAgICAgIH0pCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHRocmVhZCkgeyByZXR1cm4gY29tcHV0ZVNoYXJlZFRocmVhZCh0aHJlYWQpOyB9KTsKICAgIH07CiAgICBTaGFyZWRUaHJlYWRDbGllbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXRhKSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLAogICAgICAgICAgICByb3V0ZTogIi92MS9zaGFyZWRUaHJlYWRzLyIgKyBtZXRhLmlkLAogICAgICAgICAgICBib2R5OiBtZXRhLAogICAgICAgIH0pCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHRocmVhZCkgeyByZXR1cm4gY29tcHV0ZVNoYXJlZFRocmVhZCh0aHJlYWQpOyB9KTsKICAgIH07CiAgICBTaGFyZWRUaHJlYWRDbGllbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChtZXRhKSB7CiAgICAgICAgcmV0dXJuIGJsYW5rUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsCiAgICAgICAgICAgIHJvdXRlOiAiL3YxL3NoYXJlZFRocmVhZHMvIiArIG1ldGEsCiAgICAgICAgfSk7CiAgICB9OwogICAgU2hhcmVkVGhyZWFkQ2xpZW50LnByb3RvdHlwZS5mZXRjaE9yaWdpbmFsID0gZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgcm91dGU6ICIvdjEvc2hhcmVkVGhyZWFkcy8iICsgaWQgKyAiL29yaWdpbmFsIiwKICAgICAgICAgICAgZGlzYWJsZUNvcnNPcHRpbWl6YXRpb246IHRydWUsCiAgICAgICAgfSkubWFwKGZ1bmN0aW9uICh0aHJlYWQpIHsgcmV0dXJuIGNvbXB1dGVUaHJlYWQodGhyZWFkLCBpZCk7IH0pOwogICAgfTsKICAgIFNoYXJlZFRocmVhZENsaWVudC5wcm90b3R5cGUuZ2V0TWVzc2FnZUJvZGllcyA9IGZ1bmN0aW9uIChpZCwgdGhyZWFkKSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgIHJvdXRlOiAiL3YxL3NoYXJlZFRocmVhZHMvIiArIGlkICsgIi9iYXRjaC9tZXNzYWdlQm9kaWVzIiwKICAgICAgICAgICAgZGlzYWJsZUNvcnNPcHRpbWl6YXRpb246IHRydWUsCiAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICAgIHJlcXVlc3RzOiB0aHJlYWQubWVzc2FnZXMubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiAoewogICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IHRocmVhZC5hY2NvdW50LAogICAgICAgICAgICAgICAgICAgIHRocmVhZDogdGhyZWFkLmlkLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG0uaWQsCiAgICAgICAgICAgICAgICB9KTsgfSksCiAgICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzcG9uc2VzKSB7IHJldHVybiByZXNwb25zZXMubWFwKGZ1bmN0aW9uIChyZXNwKSB7IHJldHVybiByZXNwLmJvZHk7IH0pOyB9KQogICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChib2RpZXMpIHsgcmV0dXJuIGJvZGllcy5tYXAoZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGNvbXB1dGVNZXNzYWdlQm9keShiKTsgfSk7IH0pOwogICAgfTsKICAgIFNoYXJlZFRocmVhZENsaWVudC5wcm90b3R5cGUuZ2V0VGVhbUluZm8gPSBmdW5jdGlvbiAoc2hhcmVkVGhyZWFkKSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgcm91dGU6ICIvdjEvc2hhcmVkVGhyZWFkcy8iICsgc2hhcmVkVGhyZWFkICsgIi90ZWFtIiwKICAgICAgICAgICAgZGlzYWJsZUNvcnNPcHRpbWl6YXRpb246IHRydWUsCiAgICAgICAgfSk7CiAgICB9OwogICAgU2hhcmVkVGhyZWFkQ2xpZW50LnByb3RvdHlwZS5tZXNzYWdlTGluayA9IGZ1bmN0aW9uIChpZCwgbWVzc2FnZSkgewogICAgICAgIHJldHVybiBqc29uUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICByb3V0ZTogIi92MS9zaGFyZWRUaHJlYWRzLyIgKyBpZCArICIvbWVzc2FnZXMvIiArIGVuY29kZVVSSUNvbXBvbmVudChtZXNzYWdlKSArICIvc2hvcnRMaW5rIiwKICAgICAgICB9KQogICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gcmVzcG9uc2UudXJsOyB9KTsKICAgIH07CiAgICBTaGFyZWRUaHJlYWRDbGllbnQucHJvdG90eXBlLmdldEFzYW5hVGFza3MgPSBmdW5jdGlvbiAoc2hhcmVkVGhyZWFkKSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgcm91dGU6ICIvdjEvc2hhcmVkVGhyZWFkcy8iICsgc2hhcmVkVGhyZWFkICsgIi9hc2FuYVRhc2tzIiwKICAgICAgICAgICAgZGlzYWJsZUNvcnNPcHRpbWl6YXRpb246IHRydWUsCiAgICAgICAgfSkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodGFza3MpIHsgcmV0dXJuIHRhc2tzLm1hcChhcHBseUFzYW5hVGFza0RlZmF1bHRzKTsgfSk7CiAgICB9OwogICAgU2hhcmVkVGhyZWFkQ2xpZW50LnByb3RvdHlwZS5jcmVhdGVBc2FuYVRhc2sgPSBmdW5jdGlvbiAoc2hhcmVkVGhyZWFkLCB0YXNrKSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgIHJvdXRlOiAiL3YxL3NoYXJlZFRocmVhZHMvIiArIHNoYXJlZFRocmVhZCArICIvYXNhbmFUYXNrcyIsCiAgICAgICAgICAgIGJvZHk6IHRhc2ssCiAgICAgICAgfSkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gYXBwbHlBc2FuYVRhc2tEZWZhdWx0cyh0KTsgfSk7CiAgICB9OwogICAgU2hhcmVkVGhyZWFkQ2xpZW50LnByb3RvdHlwZS5jcmVhdGVBY3Rpdml0eSA9IGZ1bmN0aW9uIChzaGFyZWRUaHJlYWQsIHR5cGUsIHVzZXIsIHR0bCkgewogICAgICAgIHJldHVybiBibGFua1JlcXVlc3QoewogICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgcm91dGU6ICIvdjEvc2hhcmVkVGhyZWFkcy8iICsgc2hhcmVkVGhyZWFkICsgIi9hY3Rpdml0eSIsCiAgICAgICAgICAgIGRpc2FibGVDb3JzT3B0aW1pemF0aW9uOiB0cnVlLAogICAgICAgICAgICBib2R5OiB7CiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgdXNlcjogdXNlciwKICAgICAgICAgICAgICAgIHR0bDogdHRsLAogICAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgfTsKICAgIFNoYXJlZFRocmVhZENsaWVudC5wcm90b3R5cGUubGlzdERyYWZ0cyA9IGZ1bmN0aW9uIChzaGFyZWRUaHJlYWQpIHsKICAgICAgICByZXR1cm4ganNvblJlcXVlc3QoewogICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICByb3V0ZTogIi92MS9zaGFyZWRUaHJlYWRzLyIgKyBzaGFyZWRUaHJlYWQgKyAiL2RyYWZ0cyIsCiAgICAgICAgICAgIGRpc2FibGVDb3JzT3B0aW1pemF0aW9uOiB0cnVlLAogICAgICAgIH0pCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRyYWZ0cykgeyByZXR1cm4gZHJhZnRzLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZGVmYXVsdERyYWZ0KGQpOyB9KTsgfSk7CiAgICB9OwogICAgU2hhcmVkVGhyZWFkQ2xpZW50LnByb3RvdHlwZS5nZXREcmFmdCA9IGZ1bmN0aW9uIChzaGFyZWRUaHJlYWQsIGRyYWZ0KSB7CiAgICAgICAgcmV0dXJuIGpzb25SZXF1ZXN0KHsKICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgcm91dGU6ICIvdjEvc2hhcmVkVGhyZWFkcy8iICsgc2hhcmVkVGhyZWFkICsgIi9kcmFmdHMvIiArIGRyYWZ0LAogICAgICAgICAgICBkaXNhYmxlQ29yc09wdGltaXphdGlvbjogdHJ1ZSwKICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRlZmF1bHREcmFmdChkKTsgfSk7CiAgICB9OwogICAgcmV0dXJuIFNoYXJlZFRocmVhZENsaWVudDsKfSgpKTsKZXhwb3J0IHsgU2hhcmVkVGhyZWFkQ2xpZW50IH07CmV4cG9ydCBmdW5jdGlvbiBtb2NrU2hhcmVkVGhyZWFkQ2xpZW50KCkgewogICAgcmV0dXJuIHsKICAgICAgICBsaXN0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKFtdKTsgfSwKICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9ic2VydmFibGUub2YoY3JlYXRlU2hhcmVkVGhyZWFkKCkpOyB9LAogICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gT2JzZXJ2YWJsZS5vZihjcmVhdGVTaGFyZWRUaHJlYWQoKSk7IH0sCiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAobWV0YSkgeyByZXR1cm4gT2JzZXJ2YWJsZS5vZihtZXRhKTsgfSwKICAgICAgICBkZWxldGU6IGZ1bmN0aW9uIChtZXRhKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKG51bGwpOyB9LAogICAgICAgIGZldGNoT3JpZ2luYWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9ic2VydmFibGUub2YoY3JlYXRlVGhyZWFkKCkpOyB9LAogICAgICAgIGdldE1lc3NhZ2VCb2RpZXM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9ic2VydmFibGUub2YoY3JlYXRlTWVzc2FnZUJvZGllcyhjcmVhdGVUaHJlYWQoKSkpOyB9LAogICAgICAgIGdldFRlYW1JbmZvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKHsKICAgICAgICAgICAgdGVhbTogY3JlYXRlVGVhbSgpLAogICAgICAgICAgICBtZW1iZXJzOiBbY3JlYXRlVGVhbU1lbWJlcigpXSwKICAgICAgICB9KTsgfSwKICAgICAgICBtZXNzYWdlTGluazogZnVuY3Rpb24gKGlkLCBtZXNzYWdlKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKGlkICsgbWVzc2FnZSk7IH0sCiAgICAgICAgZ2V0QXNhbmFUYXNrczogZnVuY3Rpb24gKGlkKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKFtjcmVhdGVBc2FuYVRhc2soKV0pOyB9LAogICAgICAgIGNyZWF0ZUFzYW5hVGFzazogZnVuY3Rpb24gKGlkLCBib2R5KSB7CiAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLm9mKGNyZWF0ZUFzYW5hVGFzaygpKTsKICAgICAgICB9LAogICAgICAgIGNyZWF0ZUFjdGl2aXR5OiBmdW5jdGlvbiAoKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKG51bGwpOyB9LAogICAgICAgIGxpc3REcmFmdHM6IGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gT2JzZXJ2YWJsZS5vZihbY3JlYXRlRHJhZnQoJ3Rlc3QnKV0pOyB9LAogICAgICAgIGdldERyYWZ0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKGNyZWF0ZURyYWZ0KCd0ZXN0JykpOyB9LAogICAgfTsKfQo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/api/sharedThreads.ts","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/api/sharedThreads.ts"],"names":[],"mappings":"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","sourcesContent":["import { Observable } from 'rxjs';\nimport { Thread, MessageBody, Draft } from '@src/types';\nimport {\n  SharedThread,\n  SharedTeamInfo,\n  SharedThreadActivityType,\n} from '@src/types/sharedThreads';\nimport { jsonRequest, blankRequest } from '@src/api/base';\nimport { createSharedThread } from '@src/mocks/sharedThreads';\nimport { createThread } from '@src/mocks/threads';\nimport { computeThread } from '@src/lib/thread';\nimport { createMessageBodies } from '@src/mocks/messageBodies';\nimport { createTeam, createTeamMember } from '@src/mocks/teams';\nimport { computeSharedThread } from '@src/lib/sharedThread';\nimport { AsanaTask } from '@src/types/asana';\nimport { SharedThreadAsanaTaskCreateBody, SharedThreadCreateMeta } from '@src/ducks/sharedThreads';\nimport { createAsanaTask } from '@src/mocks/asana';\nimport { applyAsanaTaskDefaults } from '@src/lib/models/asana';\nimport { computeMessageBody } from '@src/lib/models/messageBodies';\nimport { createDraft } from '@src/mocks/drafts';\nimport { defaultDraft } from '@src/lib/draft';\n\nexport interface SharedThreadAPI {\n  list(offset?: string): Observable<SharedThread[]>;\n  create(meta: SharedThreadCreateMeta): Observable<SharedThread>;\n  messageLink(id: string, message: string): Observable<string>;\n  update(sharedThread: SharedThread): Observable<SharedThread>;\n  get(id: string): Observable<SharedThread>;\n  delete(id: string): Observable<null>;\n  fetchOriginal(id: string): Observable<Thread>;\n  getMessageBodies(id: string, thread: Thread): Observable<MessageBody[]>;\n  getTeamInfo(sharedThread: string): Observable<SharedTeamInfo>;\n  getAsanaTasks(sharedThread: string): Observable<AsanaTask[]>;\n  createAsanaTask(\n    sharedThread: string, task: SharedThreadAsanaTaskCreateBody,\n  ): Observable<AsanaTask>;\n  createActivity(\n    sharedThread: string,\n    type: SharedThreadActivityType,\n    user: string,\n    ttl?: number,\n  ): Observable<null>;\n  listDrafts(sharedThread: string): Observable<Draft[]>;\n  getDraft(sharedThread: string, draft: string): Observable<Draft>;\n}\n\nexport class SharedThreadClient implements SharedThreadAPI {\n  list(offset?: string): Observable<SharedThread[]> {\n    return jsonRequest({\n      method: 'GET',\n      route: offset ? `/v1/sharedThreads?id=${offset}` : '/v1/sharedThreads',\n    })\n    .map(threads => threads.map(computeSharedThread));\n  }\n\n  create(meta: SharedThreadCreateMeta): Observable<SharedThread> {\n    return jsonRequest({\n      method: 'POST',\n      route: '/v1/sharedThreads',\n      body: {\n        thread: meta.thread,\n        draft: meta.draft,\n        permissions: meta.permissions,\n      },\n    })\n    .map(sharedThread => computeSharedThread(sharedThread));\n  }\n  get(id: string): Observable<SharedThread> {\n    return jsonRequest({\n      method: 'GET',\n      route: `/v1/sharedThreads/${id}`,\n      disableCorsOptimization: true,\n    })\n    .map(thread => computeSharedThread(thread));\n  }\n  update(meta: SharedThread): Observable<SharedThread> {\n    return jsonRequest({\n      method: 'PATCH',\n      route: `/v1/sharedThreads/${meta.id}`,\n      body: meta,\n    })\n    .map(thread => computeSharedThread(thread));\n  }\n  delete(meta: string): Observable<null> {\n    return blankRequest({\n      method: 'DELETE',\n      route: `/v1/sharedThreads/${meta}`,\n    });\n  }\n  fetchOriginal(id: string): Observable<Thread> {\n    return jsonRequest({\n      method: 'GET',\n      route: `/v1/sharedThreads/${id}/original`,\n      disableCorsOptimization: true,\n    }).map(thread => computeThread(thread, id));\n  }\n  getMessageBodies(id: string, thread: Thread): Observable<MessageBody[]> {\n    return jsonRequest({\n      method: 'POST',\n      route: `/v1/sharedThreads/${id}/batch/messageBodies`,\n      disableCorsOptimization: true,\n      body: {\n        requests: thread.messages.map(m => ({\n          account: thread.account,\n          thread: thread.id,\n          message: m.id,\n        })),\n      },\n    })\n    .map(responses => responses.map((resp: any) => resp.body))\n    .map(bodies => bodies.map((b: MessageBody) => computeMessageBody(b)));\n  }\n  getTeamInfo(sharedThread: string): Observable<SharedTeamInfo> {\n    return jsonRequest({\n      method: 'GET',\n      route: `/v1/sharedThreads/${sharedThread}/team`,\n      disableCorsOptimization: true,\n    });\n  }\n  messageLink(id: string, message: string): Observable<string> {\n    return jsonRequest({\n      method: 'POST',\n      route: `/v1/sharedThreads/${id}/messages/${encodeURIComponent(message)}/shortLink`,\n    })\n    .map(response => response.url);\n  }\n\n  getAsanaTasks(sharedThread: string): Observable<AsanaTask[]> {\n    return jsonRequest({\n      method: 'GET',\n      route: `/v1/sharedThreads/${sharedThread}/asanaTasks`,\n      disableCorsOptimization: true,\n    })\n    .map(tasks => tasks.map(applyAsanaTaskDefaults));\n  }\n\n  createAsanaTask(\n    sharedThread: string, task: SharedThreadAsanaTaskCreateBody,\n  ): Observable<AsanaTask> {\n    return jsonRequest({\n      method: 'POST',\n      route: `/v1/sharedThreads/${sharedThread}/asanaTasks`,\n      body: task,\n    })\n    .map(t => applyAsanaTaskDefaults(t));\n  }\n\n  createActivity(\n    sharedThread: string,\n    type: SharedThreadActivityType,\n    user: string,\n    ttl?: number,\n  ): Observable<null> {\n    return blankRequest({\n      method: 'POST',\n      route: `/v1/sharedThreads/${sharedThread}/activity`,\n      disableCorsOptimization: true,\n      body: {\n        type,\n        user,\n        ttl,\n      },\n    });\n  }\n\n  listDrafts(\n    sharedThread: string,\n  ): Observable<Draft[]> {\n    return jsonRequest({\n      method: 'GET',\n      route: `/v1/sharedThreads/${sharedThread}/drafts`,\n      disableCorsOptimization: true,\n    })\n    .map(drafts => drafts.map((d: Draft) => defaultDraft(d)));\n  }\n\n  getDraft(\n    sharedThread: string,\n    draft: string,\n  ): Observable<Draft> {\n    return jsonRequest({\n      method: 'GET',\n      route: `/v1/sharedThreads/${sharedThread}/drafts/${draft}`,\n      disableCorsOptimization: true,\n    }).map((d: Draft) => defaultDraft(d));\n  }\n}\n\nexport function mockSharedThreadClient(): SharedThreadAPI {\n  return {\n    list: () => Observable.of([]),\n    create: () => Observable.of(createSharedThread()),\n    get: () => Observable.of(createSharedThread()),\n    update: meta => Observable.of(meta),\n    delete: meta => Observable.of(null),\n    fetchOriginal: () => Observable.of(createThread()),\n    getMessageBodies: () => Observable.of(createMessageBodies(createThread())),\n    getTeamInfo: () => Observable.of({\n      team: createTeam(),\n      members: [createTeamMember()],\n    }),\n    messageLink: (id: string, message: string) => Observable.of(id + message),\n    getAsanaTasks: (id: string) => Observable.of([createAsanaTask()]),\n    createAsanaTask: (id: string, body: SharedThreadAsanaTaskCreateBody) =>\n      Observable.of(createAsanaTask()),\n    createActivity: () => Observable.of(null),\n    listDrafts: (id: string) => Observable.of([createDraft('test')]),\n    getDraft: () => Observable.of(createDraft('test')),\n  };\n}\n"]}]}