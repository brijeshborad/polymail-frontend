{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Providers/ReauthenticatePopover/ReauthenticatePopover.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Providers/ReauthenticatePopover/ReauthenticatePopover.tsx","mtime":1675280254025},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBQb3BvdmVyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Qb3BvdmVyL1BvcG92ZXInOwppbXBvcnQgeyBBY2NvdW50VHlwZSwgQWNjb3VudFByZXNldCB9IGZyb20gJ0BzcmMvdHlwZXMnOwppbXBvcnQgVGV4dElucHV0IGZyb20gJ0BzcmMvY29tcG9uZW50cy9Gb3JtL1RleHRJbnB1dCc7CmltcG9ydCAnLi9SZWF1dGhlbnRpY2F0ZVBvcG92ZXIuc2Nzcyc7CnZhciBSZWF1dGhlbnRpY2F0ZVBvcG92ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoUmVhdXRoZW50aWNhdGVQb3BvdmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUmVhdXRoZW50aWNhdGVQb3BvdmVyKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlUG9wb3ZlclJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMucG9wb3ZlclJlZiA9IHJlZjsKICAgICAgICAgICAgX3RoaXMudXBkYXRlUG9wdXBTdGF0ZSgpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU3VibWl0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBpZiAoX3RoaXMucHJvcHMuYWNjb3VudCkgewogICAgICAgICAgICAgICAgdmFyIGFjY291bnRJZCA9IF90aGlzLnByb3BzLmFjY291bnQuaWQ7CiAgICAgICAgICAgICAgICB2YXIgbmV3UGFzc3dvcmQgPSBfdGhpcy5zdGF0ZS5uZXdQYXNzd29yZDsKICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLm9uUmVhdXRoZW50aWNhdGUoYWNjb3VudElkLCBuZXdQYXNzd29yZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ25ld1Bhc3N3b3JkJykgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBuZXdQYXNzd29yZDogZS5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDcmVhdGVQYXNzd29yZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGFjY291bnQgPSBfdGhpcy5wcm9wcy5hY2NvdW50OwogICAgICAgICAgICBpZiAoIWFjY291bnQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgYXBwUGFzc3dvcmRVcmw7CiAgICAgICAgICAgIGlmIChhY2NvdW50LnR5cGUgPT09IEFjY291bnRUeXBlLmlDbG91ZCkgewogICAgICAgICAgICAgICAgYXBwUGFzc3dvcmRVcmwgPSAnaHR0cHM6Ly9zdXBwb3J0LmFwcGxlLmNvbS9lbi11cy9IVDIwNDM5Nyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3dpdGNoIChhY2NvdW50ID09PSBudWxsIHx8IGFjY291bnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFjY291bnQucHJlc2V0KSB7CiAgICAgICAgICAgICAgICBjYXNlIEFjY291bnRQcmVzZXQuRmFzdG1haWw6CiAgICAgICAgICAgICAgICAgICAgYXBwUGFzc3dvcmRVcmwgPSAnaHR0cHM6Ly93d3cuZmFzdG1haWwuY29tL2hlbHAvY2xpZW50cy9hcHBwYXNzd29yZC5odG1sJzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgQWNjb3VudFByZXNldC5ZYWhvbzoKICAgICAgICAgICAgICAgICAgICBhcHBQYXNzd29yZFVybCA9ICdodHRwczovL2hlbHAueWFob28uY29tL2tiL1NMTjUwMTMuaHRtbCc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghYXBwUGFzc3dvcmRVcmwpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aW5kb3cub3BlbihhcHBQYXNzd29yZFVybCwgJ19ibGFuaycpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyQXBwUGFzc3dvcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhY2NvdW50ID0gX3RoaXMucHJvcHMuYWNjb3VudDsKICAgICAgICAgICAgaWYgKCFhY2NvdW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcHJlc2V0TmFtZTsKICAgICAgICAgICAgaWYgKGFjY291bnQudHlwZSA9PT0gQWNjb3VudFR5cGUuaUNsb3VkKSB7CiAgICAgICAgICAgICAgICBwcmVzZXROYW1lID0gJ2lDbG91ZCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3dpdGNoIChhY2NvdW50ID09PSBudWxsIHx8IGFjY291bnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFjY291bnQucHJlc2V0KSB7CiAgICAgICAgICAgICAgICBjYXNlIEFjY291bnRQcmVzZXQuRmFzdG1haWw6CiAgICAgICAgICAgICAgICAgICAgcHJlc2V0TmFtZSA9ICdGYXN0bWFpbCc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEFjY291bnRQcmVzZXQuWWFob286CiAgICAgICAgICAgICAgICAgICAgcHJlc2V0TmFtZSA9ICdZYWhvbyc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghcHJlc2V0TmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInByb21wdCIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImg1IiwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAiVXNlIGFuIEFwcCBQYXNzd29yZCBmb3IgIiwKICAgICAgICAgICAgICAgICAgICBwcmVzZXROYW1lKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCAiWW91J2xsIGhhdmUgdG8gdHVybiBvbiAyLWZhY3RvciBhdXRoZW50aWNhdGlvbiAmIGNyZWF0ZSBhbiBhcHAtc3BlY2lmaWMgcGFzc3dvcmQgaW4gb3JkZXIgdG8gY29ubmVjdCB5b3VyIGFjY291bnQgdG8gUG9seW1haWwuIENsaWNrIGJlbG93IHRvIHNldCBpdCB1cCEiKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgdHlwZTogImJ1dHRvbiIsIGNsYXNzTmFtZTogImNyZWF0ZS1wYXNzd29yZCIsIG9uQ2xpY2s6IF90aGlzLmhhbmRsZUNyZWF0ZVBhc3N3b3JkIH0sICJDcmVhdGUgUGFzc3dvcmQiKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiAnJywKICAgICAgICB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFJlYXV0aGVudGljYXRlUG9wb3Zlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy51cGRhdGVQb3B1cFN0YXRlKCk7CiAgICB9OwogICAgUmVhdXRoZW50aWNhdGVQb3BvdmVyLnByb3RvdHlwZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIChuZXh0UHJvcHMpIHsKICAgICAgICAvLyByZXNldCBuZXdQYXNzd29yZCB3aGVuIHBvcHVwIGlzIHJldXNlZAogICAgICAgIGlmIChuZXh0UHJvcHMuc2hvdyAhPT0gdGhpcy5wcm9wcy5zaG93ICYmIG5leHRQcm9wcy5zaG93KSB7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBuZXdQYXNzd29yZDogJycgfSk7CiAgICAgICAgfQogICAgICAgIHZhciBvbGRJZCA9IHRoaXMucHJvcHMuYWNjb3VudCA/IHRoaXMucHJvcHMuYWNjb3VudC5pZCA6ICcnOwogICAgICAgIHZhciBuZXdJZCA9IG5leHRQcm9wcy5hY2NvdW50ID8gbmV4dFByb3BzLmFjY291bnQuaWQgOiAnJzsKICAgICAgICBpZiAob2xkSWQgIT09IG5ld0lkKSB7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBuZXdQYXNzd29yZDogJycgfSk7CiAgICAgICAgfQogICAgfTsKICAgIFJlYXV0aGVudGljYXRlUG9wb3Zlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKHByZXZQcm9wcykgewogICAgICAgIGlmIChwcmV2UHJvcHMuc2hvdyAhPT0gdGhpcy5wcm9wcy5zaG93KSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlUG9wdXBTdGF0ZSgpOwogICAgICAgIH0KICAgIH07CiAgICBSZWF1dGhlbnRpY2F0ZVBvcG92ZXIucHJvdG90eXBlLnVwZGF0ZVBvcHVwU3RhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucG9wb3ZlclJlZikgewogICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zaG93KSB7CiAgICAgICAgICAgICAgICB0aGlzLnBvcG92ZXJSZWYuc2hvdygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5wb3BvdmVyUmVmLmhpZGUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBSZWF1dGhlbnRpY2F0ZVBvcG92ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3ZlciwgeyBjbGFzc05hbWU6ICJyZWF1dGhlbnRpY2F0ZS1wb3BvdmVyIiwgcmVmOiB0aGlzLmhhbmRsZVBvcG92ZXJSZWYsIG9uSGlkZTogdGhpcy5wcm9wcy5vbkhpZGUsIG92ZXJsYXk6IHRydWUgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZm9ybSIsIHsgb25TdWJtaXQ6IHRoaXMuaGFuZGxlU3VibWl0IH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJoNCIsIG51bGwsICJSZWF1dGhlbnRpY2F0ZSBBY2NvdW50IiksCiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckFwcFBhc3N3b3JkKCksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRJbnB1dCwgeyBuYW1lOiAiZW1haWwiLCBkZXNjcmlwdGlvbjogIkVtYWlsIiwgdmFsdWU6IHRoaXMucHJvcHMuYWNjb3VudCA/IHRoaXMucHJvcHMuYWNjb3VudC5lbWFpbCA6ICcnLCB0eXBlOiAiZW1haWwiLCBwbGFjZWhvbGRlcjogIkVtYWlsIiwgcmVhZE9ubHk6IHRydWUgfSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRJbnB1dCwgeyBuYW1lOiAibmV3UGFzc3dvcmQiLCBkZXNjcmlwdGlvbjogIlBhc3N3b3JkIiwgdmFsdWU6IHRoaXMuc3RhdGUubmV3UGFzc3dvcmQsIHR5cGU6ICJwYXNzd29yZCIsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZSwgcGxhY2Vob2xkZXI6ICJQYXNzd29yZCIsIHJlcXVpcmVkOiB0cnVlLCBhdXRvZm9jdXM6IHRydWUgfSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IHR5cGU6ICJzdWJtaXQiIH0sICJTYXZlIikpKSk7CiAgICB9OwogICAgcmV0dXJuIFJlYXV0aGVudGljYXRlUG9wb3ZlcjsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFJlYXV0aGVudGljYXRlUG9wb3ZlcjsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Providers/ReauthenticatePopover/ReauthenticatePopover.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Providers/ReauthenticatePopover/ReauthenticatePopover.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Popover from '@src/components/Popover/Popover';\nimport { Account, AccountType, AccountPreset } from '@src/types';\nimport TextInput from '@src/components/Form/TextInput';\n\nimport './ReauthenticatePopover.scss';\n\nexport interface Props {\n  account?: Account;\n  show: boolean;\n  onHide: () => void;\n  onReauthenticate: (accountId: string, newPassword: string) => void;\n}\n\nexport interface State {\n  newPassword: string;\n}\n\nclass ReauthenticatePopover extends React.PureComponent<Props, State> {\n  popoverRef?: Popover;\n\n  constructor() {\n    super();\n    this.state = {\n      newPassword: '',\n    };\n  }\n\n  componentDidMount() {\n    this.updatePopupState();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    // reset newPassword when popup is reused\n    if (nextProps.show !== this.props.show && nextProps.show) {\n      this.setState({ newPassword: '' });\n    }\n    const oldId = this.props.account ? this.props.account.id : '';\n    const newId = nextProps.account ? nextProps.account.id : '';\n    if (oldId !== newId) {\n      this.setState({ newPassword: '' });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.show !== this.props.show) {\n      this.updatePopupState();\n    }\n  }\n\n  handlePopoverRef = (ref: any) => {\n    this.popoverRef = ref;\n    this.updatePopupState();\n  }\n\n  updatePopupState() {\n    if (this.popoverRef) {\n      if (this.props.show) {\n        this.popoverRef.show();\n      } else {\n        this.popoverRef.hide();\n      }\n    }\n  }\n\n  handleSubmit = (e: React.FormEvent<HTMLElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (this.props.account) {\n      const accountId = this.props.account.id;\n      const newPassword = this.state.newPassword;\n      this.props.onReauthenticate(accountId, newPassword);\n    }\n  }\n\n  handleChange = (e: React.FormEvent<HTMLInputElement>) => {\n    if (e.currentTarget.name === 'newPassword') {\n      this.setState({ newPassword: e.currentTarget.value });\n    }\n  }\n\n  handleCreatePassword = () => {\n    const { account } = this.props;\n    if (!account) {\n      return;\n    }\n\n    let appPasswordUrl: string | undefined;\n    if (account.type === AccountType.iCloud) {\n      appPasswordUrl = 'https://support.apple.com/en-us/HT204397';\n    }\n    switch (account?.preset) {\n      case AccountPreset.Fastmail:\n        appPasswordUrl = 'https://www.fastmail.com/help/clients/apppassword.html';\n        break;\n      case AccountPreset.Yahoo:\n        appPasswordUrl = 'https://help.yahoo.com/kb/SLN5013.html';\n        break;\n      default:\n        break;\n    }\n\n    if (!appPasswordUrl) {\n      return;\n    }\n\n    window.open(appPasswordUrl, '_blank');\n  }\n\n  renderAppPassword = () => {\n    const { account } = this.props;\n    if (!account) {\n      return null;\n    }\n\n    let presetName: string | undefined;\n    if (account.type === AccountType.iCloud) {\n      presetName = 'iCloud';\n    }\n    switch (account?.preset) {\n      case AccountPreset.Fastmail:\n        presetName = 'Fastmail';\n        break;\n      case AccountPreset.Yahoo:\n        presetName = 'Yahoo';\n        break;\n      default:\n        break;\n    }\n\n    if (!presetName) {\n      return null;\n    }\n\n    return (\n      <div className=\"prompt\">\n        <h5>Use an App Password for {presetName}</h5>\n        <p>\n          You'll have to turn on 2-factor authentication &amp; create an app-specific\n                password in order to connect your account to Polymail.\n                Click below to set it up!\n        </p>\n        <button type=\"button\" className=\"create-password\" onClick={this.handleCreatePassword}>\n          Create Password\n          </button>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Popover\n        className=\"reauthenticate-popover\"\n        ref={this.handlePopoverRef}\n        onHide={this.props.onHide}\n        overlay\n      >\n        <form onSubmit={this.handleSubmit}>\n          <h4>Reauthenticate Account</h4>\n          {this.renderAppPassword()}\n          <TextInput\n            name=\"email\"\n            description=\"Email\"\n            value={this.props.account ? this.props.account.email : ''}\n            type=\"email\"\n            placeholder=\"Email\"\n            readOnly\n          />\n          <TextInput\n            name=\"newPassword\"\n            description=\"Password\"\n            value={this.state.newPassword}\n            type=\"password\"\n            onChange={this.handleChange}\n            placeholder=\"Password\"\n            required\n            autofocus\n          />\n          <button type=\"submit\">Save</button>\n        </form>\n      </Popover>\n    );\n  }\n}\n\nexport default ReauthenticatePopover;\n"]}]}