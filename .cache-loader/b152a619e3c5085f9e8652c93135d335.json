{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/Hubspot.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/Hubspot.tsx","mtime":1675280254030},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGZpbmQgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBIdWJzcG90UHJvcGVydHlUeXBlIH0gZnJvbSAnQHNyYy90eXBlcy9odWJzcG90JzsKaW1wb3J0ICcuL0h1YnNwb3Quc2Nzcyc7CmltcG9ydCB7IHNob3dNb3N0UmVjZW50IH0gZnJvbSAnQHNyYy9saWIvZGF0ZXRpbWUnOwppbXBvcnQgeyBIdWJzcG90RGV0YWlsQ2VsbCB9IGZyb20gJy4vY29tcG9uZW50cy9IdWJzcG90RGV0YWlsQ2VsbC9IdWJzcG90RGV0YWlsQ2VsbCc7CmltcG9ydCB7IEludGVncmF0aW9uVHlwZSwgUmVzb3VyY2VTdGF0dXMgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IE5vdEVuYWJsZWQgZnJvbSAnLi4vU2FsZXNmb3JjZS9jb21wb25lbnRzL05vdEVuYWJsZWQvTm90RW5hYmxlZCc7CmltcG9ydCB7IHJlY29yZEV2ZW50LCBVc2VyRXZlbnRzIH0gZnJvbSAnQHNyYy9saWIvYW5hbHl0aWNzJzsKaW1wb3J0IHsgQW1wbGl0dWRlRXZlbnRzLCBsb2dBbXBsaXR1ZGVFdmVudCB9IGZyb20gJ0BzcmMvbGliL2FtcGxpdHVkZS1hbmFseXRpY3MnOwp2YXIgSHVic3BvdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhIdWJzcG90LCBfc3VwZXIpOwogICAgZnVuY3Rpb24gSHVic3BvdCgpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKICAgICAgICAvLyBFbXB0eSBTdGF0ZSBIYW5kbGVyCiAgICAgICAgX3RoaXMucmVuZGVyRW1wdHkgPSBmdW5jdGlvbiAoY29weSkgewogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiaHVic3BvdC1zaWRlYmFyIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJlbXB0eS1zdGF0ZSIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNvcHkiIH0sIGNvcHkpKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyVGl0bGUgPSBmdW5jdGlvbiAodGl0bGVWYWx1ZSkgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiaHVic3BvdC10aXRsZSIgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwgdGl0bGVWYWx1ZSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmFyIiB9KSkpOyB9OwogICAgICAgIF90aGlzLnJlbmRlck5hbWUgPSBmdW5jdGlvbiAoZGV0YWlscykgewogICAgICAgICAgICB2YXIgX2EsIF9iOwogICAgICAgICAgICB2YXIgZmlyc3ROYW1lID0gKF9hID0gZmluZChkZXRhaWxzLnByb3BlcnRpZXMsIHsgbmFtZTogJ2ZpcnN0bmFtZScgfSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS52YWx1ZTsKICAgICAgICAgICAgdmFyIGxhc3ROYW1lID0gKF9iID0gZmluZChkZXRhaWxzLnByb3BlcnRpZXMsIHsgbmFtZTogJ2xhc3RuYW1lJyB9KSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnZhbHVlOwogICAgICAgICAgICB2YXIgZW1haWwgPSBfdGhpcy5wcm9wcy5lbWFpbDsKICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm5hbWUtc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibmFtZSIgfSwKICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgIiAiLAogICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZW1haWwiIH0sIGVtYWlsKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyRGV0YWlsQ2VsbCA9IGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgIHZhciBjb21wdXRlZFZhbHVlID0gcC52YWx1ZTsKICAgICAgICAgICAgaWYgKHAubmFtZSA9PT0gJ2xhc3Rtb2RpZmllZGRhdGUnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBzd2l0Y2ggKHAudHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSBIdWJzcG90UHJvcGVydHlUeXBlLkRhdGV0aW1lOgogICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkVmFsdWUgPSBzaG93TW9zdFJlY2VudChuZXcgRGF0ZShwLnZhbHVlKSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJkZXRhaWwtY2VsbCIsIGtleTogImh1Yi1kLSIgKyBwLmxhYmVsIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImtleSIgfSwgcC5sYWJlbCksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInZhbHVlIiB9LCBjb21wdXRlZFZhbHVlKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyRGVhbHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgdmFyIGNvbnRhY3QgPSAoX2EgPSBfdGhpcy5wcm9wcy5jb250YWN0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGF0YTsKICAgICAgICAgICAgaWYgKCEoY29udGFjdCA9PT0gbnVsbCB8fCBjb250YWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250YWN0LmRlYWxzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJodWJzcG90LXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJUaXRsZSgnRGVhbHMnKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdGlvbiIgfSwgY29udGFjdC5kZWFscy5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEh1YnNwb3REZXRhaWxDZWxsLCB7IGtleTogJ2RldGFpbC1jZWxsJyArIGQuaWQsIGRldGFpbDogZC5kZXRhaWxzLCB0aXRsZU5hbWU6ICJkZWFsbmFtZSIgfSkpOyB9KSkpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlclRpY2tldHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgdmFyIGNvbnRhY3QgPSAoX2EgPSBfdGhpcy5wcm9wcy5jb250YWN0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGF0YTsKICAgICAgICAgICAgaWYgKCEoY29udGFjdCA9PT0gbnVsbCB8fCBjb250YWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250YWN0LnRpY2tldHMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImh1YnNwb3Qtc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclRpdGxlKCdUaWNrZXRzJyksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24iIH0sIGNvbnRhY3QudGlja2V0cy5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEh1YnNwb3REZXRhaWxDZWxsLCB7IHRpdGxlTmFtZTogInN1YmplY3QiLCBrZXk6ICdkZXRhaWwtY2VsbCcgKyBkLmlkLCBkZXRhaWw6IGQuZGV0YWlscyB9KSk7IH0pKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyQ29tcGFuaWVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2E7CiAgICAgICAgICAgIHZhciBjb250YWN0ID0gKF9hID0gX3RoaXMucHJvcHMuY29udGFjdCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRhdGE7CiAgICAgICAgICAgIGlmICghKGNvbnRhY3QgPT09IG51bGwgfHwgY29udGFjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGFjdC5jb21wYW5pZXMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImh1YnNwb3Qtc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclRpdGxlKCdDb21wYW5pZXMnKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdGlvbiIgfSwgY29udGFjdC5jb21wYW5pZXMubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChIdWJzcG90RGV0YWlsQ2VsbCwgeyBrZXk6ICdkZXRhaWwtY2VsbCcgKyBkLmlkLCBkZXRhaWw6IGQuZGV0YWlscywgdGl0bGVOYW1lOiAibmFtZSIgfSkpOyB9KSkpKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEh1YnNwb3QucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbnRhY3QgPSBfYS5jb250YWN0LCBmZXRjaEh1YnNwb3RDb250YWN0ID0gX2EuZmV0Y2hIdWJzcG90Q29udGFjdCwgZW1haWwgPSBfYS5lbWFpbDsKICAgICAgICBpZiAoZW1haWwgJiYgIShjb250YWN0ID09PSBudWxsIHx8IGNvbnRhY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbnRhY3QuZGF0YSkgJiYgIShjb250YWN0ID09PSBudWxsIHx8IGNvbnRhY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbnRhY3QuZXJyb3IpKSB7CiAgICAgICAgICAgIGZldGNoSHVic3BvdENvbnRhY3QoZW1haWwpOwogICAgICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuTG9hZEh1YnNwb3RTaWRlYmFyKTsKICAgICAgICB9CiAgICB9OwogICAgSHVic3BvdC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKG9sZFByb3BzKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgZmV0Y2hIdWJzcG90Q29udGFjdCA9IF9hLmZldGNoSHVic3BvdENvbnRhY3QsIGVtYWlsID0gX2EuZW1haWw7CiAgICAgICAgdmFyIG9sZEVtYWlsID0gb2xkUHJvcHMuZW1haWw7CiAgICAgICAgaWYgKGVtYWlsICYmIG9sZEVtYWlsICE9PSBlbWFpbCkgewogICAgICAgICAgICBmZXRjaEh1YnNwb3RDb250YWN0KGVtYWlsKTsKICAgICAgICB9CiAgICB9OwogICAgSHVic3BvdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICB2YXIgZW1haWwgPSB0aGlzLnByb3BzLmVtYWlsOwogICAgICAgIHZhciBjb250YWN0ID0gKF9hID0gdGhpcy5wcm9wcy5jb250YWN0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGF0YTsKICAgICAgICB2YXIgZW5hYmxlZCA9IHRoaXMucHJvcHMuZW5hYmxlZDsKICAgICAgICBpZiAoIWVuYWJsZWQpIHsKICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImh1YnNwb3Qtc2lkZWJhciIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTm90RW5hYmxlZCwgeyBpbnRlZ3JhdGlvblR5cGU6IEludGVncmF0aW9uVHlwZS5IdWJzcG90IH0pKSk7CiAgICAgICAgfQogICAgICAgIC8vIEhhbmRsZSBsb2FkaW5nIHN0YXRlCiAgICAgICAgaWYgKGVtYWlsICYmICgoX2IgPSB0aGlzLnByb3BzLmNvbnRhY3QpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zdGF0dXMpID09PSBSZXNvdXJjZVN0YXR1cy5QZW5kaW5nKSB7CiAgICAgICAgICAgIHZhciBjb3B5ID0gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLAogICAgICAgICAgICAgICAgIlNlYXJjaGluZyBIdWJzcG90IGZvcjogIiwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImIiLCBudWxsLCBlbWFpbCkpKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRW1wdHkoY29weSk7CiAgICAgICAgfQogICAgICAgIC8vIEhhbmRsZSBlbXB0eSBzdGF0ZSByZW5kZXJzCiAgICAgICAgaWYgKCFjb250YWN0KSB7CiAgICAgICAgICAgIHZhciBjb3B5ID0gISFlbWFpbAogICAgICAgICAgICAgICAgPyAoUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsCiAgICAgICAgICAgICAgICAgICAgIk5vIEh1YlNwb3QgY29udGFjdCBmb3VuZCBmb3IgIiwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiIiwgbnVsbCwgZW1haWwpKSkKICAgICAgICAgICAgICAgIDogKFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiTm8gY29udGFjdCBzZWxlY3RlZCIpKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyRW1wdHkoY29weSk7CiAgICAgICAgfQogICAgICAgIHZhciBoYW5kbGVQcm9maWxlQ2xpY2sgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGxvZ0FtcGxpdHVkZUV2ZW50KEFtcGxpdHVkZUV2ZW50cy5DbGlja0dvVG9IdWJzcG90UHJvZmlsZSk7CiAgICAgICAgICAgIHJlY29yZEV2ZW50KFVzZXJFdmVudHMuSHVic3BvdFBhZ2VWaXNpdGVkKTsKICAgICAgICAgICAgd2luZG93Lm9wZW4oY29udGFjdC5kZXRhaWxzLnVybCwgJ19ibGFuaycpOwogICAgICAgIH07CiAgICAgICAgdmFyIGRldGFpbHMgPSBjb250YWN0LmRldGFpbHM7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImh1YnNwb3Qtc2lkZWJhciIgfSwKICAgICAgICAgICAgdGhpcy5yZW5kZXJUaXRsZSgnQ29udGFjdCcpLAogICAgICAgICAgICB0aGlzLnJlbmRlck5hbWUoZGV0YWlscyksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAiaHVic3BvdC1idXR0b24iLCBvbkNsaWNrOiBoYW5kbGVQcm9maWxlQ2xpY2sgfSwgIkdvIHRvIFByb2ZpbGUiKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb250YWN0LWRldGFpbHMiIH0sIGRldGFpbHMKICAgICAgICAgICAgICAgIC5wcm9wZXJ0aWVzCiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiAhIWQudmFsdWU7IH0pCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBfdGhpcy5yZW5kZXJEZXRhaWxDZWxsKGQpOyB9KSksCiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcGFuaWVzKCksCiAgICAgICAgICAgIHRoaXMucmVuZGVyRGVhbHMoKSwKICAgICAgICAgICAgdGhpcy5yZW5kZXJUaWNrZXRzKCkpKTsKICAgIH07CiAgICByZXR1cm4gSHVic3BvdDsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IEh1YnNwb3Q7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/Hubspot.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Hubspot/Hubspot.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { find } from 'lodash';\nimport { HubspotContactProfile, HubspotDetail, HubspotProperty, HubspotPropertyType } from '@src/types/hubspot';\n\nimport './Hubspot.scss';\nimport { showMostRecent } from '@src/lib/datetime';\nimport { HubspotDetailCell } from './components/HubspotDetailCell/HubspotDetailCell';\nimport { IntegrationType, Resource, ResourceStatus } from '@src/types';\nimport NotEnabled from '../Salesforce/components/NotEnabled/NotEnabled';\nimport { recordEvent, UserEvents } from '@src/lib/analytics';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n// import { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface Props {\n  email?: string;\n  contact?: Resource<HubspotContactProfile>;\n  enabled: boolean;\n}\n\nexport interface DispatchProps {\n  fetchHubspotContact: (meta: string) => void;\n}\n\nclass Hubspot extends React.PureComponent<Props & DispatchProps> {\n  componentDidMount() {\n\n    const { contact, fetchHubspotContact, email } = this.props;\n    if (email && !contact?.data && !contact?.error) {\n      fetchHubspotContact(email);\n      logAmplitudeEvent(AmplitudeEvents.LoadHubspotSidebar);\n    }\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    const { fetchHubspotContact, email } = this.props;\n    const oldEmail = oldProps.email;\n    if (email && oldEmail !== email) {\n      fetchHubspotContact(email);\n    }\n  }\n\n  // Empty State Handler\n  renderEmpty = (copy: JSX.Element) => {\n    return (\n      <div className=\"hubspot-sidebar\">\n        <div className=\"empty-state\">\n          <div className=\"copy\">\n            {copy}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderTitle = (titleValue: string) => (\n    <div className=\"hubspot-title\">\n      <div className=\"title\">\n        {titleValue}\n      </div>\n      <div className=\"bar\" />\n    </div>\n  )\n\n  renderName = (details: HubspotDetail) => {\n    const firstName = find(details.properties, { name: 'firstname' })?.value;\n    const lastName = find(details.properties, { name: 'lastname' })?.value;\n    const { email } = this.props;\n\n    return (\n      <div className=\"name-section\">\n        <div className=\"name\">\n          {firstName} {lastName}\n        </div>\n        <div className=\"email\">\n          {email}\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailCell = (p: HubspotProperty) => {\n    let computedValue = p.value;\n\n    if (p.name === 'lastmodifieddate') {\n      return null;\n    }\n\n    switch (p.type) {\n      case HubspotPropertyType.Datetime:\n        computedValue = showMostRecent(new Date(p.value));\n        break;\n      default:\n        break;\n    }\n\n    return (\n      <div\n        className=\"detail-cell\"\n        key={`hub-d-${p.label}`}\n      >\n        <div className=\"key\">\n          {p.label}\n        </div>\n        <div className=\"value\">\n          {computedValue}\n        </div>\n      </div>\n    );\n  }\n\n  renderDeals = () => {\n    const contact = this.props.contact?.data;\n    if (!contact?.deals.length) {\n      return null;\n    }\n\n    return (\n      <div className=\"hubspot-section\">\n        {this.renderTitle('Deals')}\n        <div className=\"section\">\n          {contact.deals.map(d => (\n            <HubspotDetailCell\n              key={'detail-cell' + d.id}\n              detail={d.details}\n              titleName=\"dealname\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  renderTickets = () => {\n    const contact = this.props.contact?.data;\n    if (!contact?.tickets.length) {\n      return null;\n    }\n\n    return (\n      <div className=\"hubspot-section\">\n        {this.renderTitle('Tickets')}\n        <div className=\"section\">\n          {contact.tickets.map(d => (\n            <HubspotDetailCell\n              titleName=\"subject\"\n              key={'detail-cell' + d.id}\n              detail={d.details}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  renderCompanies = () => {\n    const contact = this.props.contact?.data;\n    if (!contact?.companies.length) {\n      return null;\n    }\n\n    return (\n      <div className=\"hubspot-section\">\n        {this.renderTitle('Companies')}\n        <div className=\"section\">\n          {contact.companies.map(d => (\n            <HubspotDetailCell\n              key={'detail-cell' + d.id}\n              detail={d.details}\n              titleName=\"name\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { email } = this.props;\n    const contact = this.props.contact?.data;\n    const { enabled } = this.props;\n\n    if (!enabled) {\n      return (\n        <div className=\"hubspot-sidebar\">\n          <NotEnabled integrationType={IntegrationType.Hubspot} />\n        </div>\n      );\n    }\n\n    // Handle loading state\n    if (email && this.props.contact?.status === ResourceStatus.Pending) {\n      const copy = (\n        <span>Searching Hubspot for: <b>{email}</b></span>\n      );\n      return this.renderEmpty(copy);\n    }\n\n    // Handle empty state renders\n    if (!contact) {\n      const copy = !!email\n        ? (<span>No HubSpot contact found for <b>{email}</b></span>)\n        : (<span>No contact selected</span>);\n\n      return this.renderEmpty(copy);\n    }\n\n    const handleProfileClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      logAmplitudeEvent(AmplitudeEvents.ClickGoToHubspotProfile);\n      recordEvent(UserEvents.HubspotPageVisited);\n      window.open(contact.details.url, '_blank');\n    };\n\n    const { details } = contact;\n\n    return (\n      <div className=\"hubspot-sidebar\">\n        {this.renderTitle('Contact')}\n        {this.renderName(details)}\n        <button\n          className=\"hubspot-button\"\n          onClick={handleProfileClick}\n        >\n          Go to Profile\n      </button>\n        <div className=\"contact-details\">\n          {details\n            .properties\n            .filter(d => !!d.value)\n            .map(d => this.renderDetailCell(d))}\n        </div>\n        {this.renderCompanies()}\n        {this.renderDeals()}\n        {this.renderTickets()}\n      </div>\n    );\n  }\n}\n\nexport default Hubspot;\n"]}]}