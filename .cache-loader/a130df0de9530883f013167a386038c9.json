{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEmailCell/RecipientEmailCell.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEmailCell/RecipientEmailCell.tsx","mtime":1675280253992},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCAnLi9SZWNpcGllbnRFbWFpbENlbGwuc2Nzcyc7CmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgS2V5Q29kZSB9IGZyb20gJ0BzcmMvdHlwZXMnOwppbXBvcnQgTG9hZGVyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Mb2FkZXIvTG9hZGVyJzsKdmFyIFJlY2lwaWVudEVtYWlsQ2VsbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhSZWNpcGllbnRFbWFpbENlbGwsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBSZWNpcGllbnRFbWFpbENlbGwocHJvcHMpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVNb3VzZUVudGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHZhbHVlID0gX3RoaXMucHJvcHMudmFsdWU7CiAgICAgICAgICAgIGlmICh2YWx1ZS5pbnZhbGlkUmVhc29uKSB7CiAgICAgICAgICAgICAgICB2YWx1ZS5vbkludmFsaWRSZWFzb25Nb3VzZUVudGVyKGUsIHZhbHVlLmludmFsaWRSZWFzb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVNb3VzZUxlYXZlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHZhbHVlID0gX3RoaXMucHJvcHMudmFsdWU7CiAgICAgICAgICAgIGlmICh2YWx1ZS5pbnZhbGlkUmVhc29uKSB7CiAgICAgICAgICAgICAgICB2YWx1ZS5vbkludmFsaWRSZWFzb25Nb3VzZUxlYXZlKGUsIHZhbHVlLmludmFsaWRSZWFzb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVJbnB1dEJsdXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgZGVwZW5kZW50VmFsdWVzID0gX3RoaXMucHJvcHMuZGVwZW5kZW50VmFsdWVzOwogICAgICAgICAgICBfdGhpcy5kZWJvdW5jZWQuY2FuY2VsKCk7CiAgICAgICAgICAgIF90aGlzLmRlYm91bmNlZChlLnRhcmdldC52YWx1ZSwgJ2VtYWlsJywgZGVwZW5kZW50VmFsdWVzLnJlbW92ZUJ1dHRvblByb3BzLmluZGV4IC0gMSwgdHJ1ZSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHZhbHVlID0gX2EudmFsdWUsIGRlcGVuZGVudFZhbHVlcyA9IF9hLmRlcGVuZGVudFZhbHVlczsKICAgICAgICAgICAgdmFyIGhhbmRsZWQgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gS2V5Q29kZS5UYWIpIHsKICAgICAgICAgICAgICAgIHZhbHVlLm9uVGFiKGUuc2hpZnRLZXksICdlbWFpbCcsIGRlcGVuZGVudFZhbHVlcy5yZW1vdmVCdXR0b25Qcm9wcy5pbmRleCk7CiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT09IEtleUNvZGUuUmlnaHQgfHwgZS5rZXlDb2RlID09PSBLZXlDb2RlLkxlZnQpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhhbmRsZWQpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmRlYm91bmNlZCA9IGRlYm91bmNlKHByb3BzLnZhbHVlLm9uSW5wdXRDaGFuZ2UsIDUwMCk7CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgUmVjaXBpZW50RW1haWxDZWxsLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmRlYm91bmNlZC5jYW5jZWwoKTsKICAgIH07CiAgICBSZWNpcGllbnRFbWFpbENlbGwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCB2YWx1ZSA9IF9hLnZhbHVlLCBkZXBlbmRlbnRWYWx1ZXMgPSBfYS5kZXBlbmRlbnRWYWx1ZXM7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInJlY2lwaWVudC1lbWFpbC1jZWxsIiB9LAogICAgICAgICAgICAhIXZhbHVlLmludmFsaWRSZWFzb24gJiYgIXZhbHVlLmxvYWRpbmcgJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJpbnZhbGlkIiwgb25Nb3VzZUVudGVyOiB0aGlzLmhhbmRsZU1vdXNlRW50ZXIsIG9uTW91c2VMZWF2ZTogdGhpcy5oYW5kbGVNb3VzZUxlYXZlIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIlx1MjZBMFx1RkUwRiIpKSwKICAgICAgICAgICAgdmFsdWUubG9hZGluZyAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImxvYWRpbmciIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRlciwgbnVsbCkpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJpbnB1dCIsIHsgZGlyOiAiYXV0byIsIG5hbWU6ICJlbWFpbC0iICsgZGVwZW5kZW50VmFsdWVzLnJlbW92ZUJ1dHRvblByb3BzLmluZGV4LCBjbGFzc05hbWU6ICJlbWFpbCIsIG9uS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLCBvbkJsdXI6IHRoaXMuaGFuZGxlSW5wdXRCbHVyLCBkZWZhdWx0VmFsdWU6IHZhbHVlLmVtYWlsLCBhdXRvQ29tcGxldGU6ICJvZmYiIH0pKSk7CiAgICB9OwogICAgcmV0dXJuIFJlY2lwaWVudEVtYWlsQ2VsbDsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFJlY2lwaWVudEVtYWlsQ2VsbDsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEmailCell/RecipientEmailCell.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/RecipientEmailCell/RecipientEmailCell.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport './RecipientEmailCell.scss';\nimport { debounce } from 'lodash';\nimport { KeyCode } from '@src/types';\nimport Loader from '@src/components/Loader/Loader';\n\ninterface Props {\n  value: {\n    email: string,\n    invalidReason?: string,\n    loading: boolean,\n    onInputChange:\n      (value: string, header: string, index: number, validate?: boolean) => void,\n    onInvalidReasonMouseEnter:\n      (e: React.MouseEvent<HTMLDivElement>, invalidReason?: string) => void,\n    onInvalidReasonMouseLeave:\n      (e: React.MouseEvent<HTMLDivElement>, invalidReason?: string) => void,\n    onTab: (shiftKey: boolean, header: string, index: number) => void,\n  };\n  dependentValues: {\n    removeButtonProps: {\n      index: number,\n      onRemove: (index: number) => void;\n    };\n  };\n}\n\nclass RecipientEmailCell extends React.PureComponent<Props> {\n  private debounced: any;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.debounced = debounce(props.value.onInputChange, 500);\n  }\n\n  componentWillUnmount() {\n    this.debounced.cancel();\n  }\n\n  handleMouseEnter = (e: React.MouseEvent<HTMLDivElement>) => {\n    const { value } = this.props;\n\n    if (value.invalidReason) {\n      value.onInvalidReasonMouseEnter(e, value.invalidReason);\n    }\n  }\n\n  handleMouseLeave = (e: React.MouseEvent<HTMLDivElement>) => {\n    const { value } = this.props;\n\n    if (value.invalidReason) {\n      value.onInvalidReasonMouseLeave(e, value.invalidReason);\n    }\n  }\n\n  handleInputBlur = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    const { dependentValues } = this.props;\n\n    this.debounced.cancel();\n    this.debounced(\n      (e.target as HTMLInputElement).value,\n      'email',\n      dependentValues.removeButtonProps.index - 1,\n      true,\n    );\n  }\n\n  handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    const { value, dependentValues } = this.props;\n    let handled = false;\n\n    if (e.keyCode === KeyCode.Tab) {\n      value.onTab(e.shiftKey, 'email', dependentValues.removeButtonProps.index);\n      handled = true;\n    } else if (e.keyCode === KeyCode.Right || e.keyCode === KeyCode.Left) {\n      e.stopPropagation();\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  render() {\n    const { value, dependentValues } = this.props;\n\n    return (\n      <div className=\"recipient-email-cell\">\n        {!!value.invalidReason && !value.loading && <div\n          className=\"invalid\"\n          onMouseEnter={this.handleMouseEnter}\n          onMouseLeave={this.handleMouseLeave}\n        >\n          <span>⚠️</span>\n        </div>}\n        {value.loading && <div className=\"loading\">\n          <Loader />\n        </div>}\n        <input\n          dir=\"auto\"\n          name={`email-${dependentValues.removeButtonProps.index}`}\n          className=\"email\"\n          onKeyDown={this.handleKeyDown}\n          onBlur={this.handleInputBlur}\n          defaultValue={value.email}\n          autoComplete=\"off\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default RecipientEmailCell;\n"]}]}