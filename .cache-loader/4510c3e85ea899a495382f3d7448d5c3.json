{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/ShareThreadPopover.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/ShareThreadPopover.tsx","mtime":1675280254042},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCBDbGlwYm9hcmRKUyBmcm9tICdjbGlwYm9hcmQnOwppbXBvcnQgeyBjbG9uZURlZXAgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBLZXlDb2RlLCBJbnRlZ3JhdGlvblR5cGUgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IFBvcG92ZXIgZnJvbSAnQHNyYy9jb21wb25lbnRzL1BvcG92ZXIvUG9wb3Zlcic7CmltcG9ydCBUb29sVGlwIGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL1Rvb2x0aXAnOwovLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoCmltcG9ydCBTZXR0aW5nc01lbnUgZnJvbSAnQHNyYy9jb21wb25lbnRzL0xlZnRTaWRlYmFyL2NvbXBvbmVudHMvTGVmdFNpZGViYXJGb290ZXIvY29tcG9uZW50cy9TZXR0aW5nc01lbnUnOwppbXBvcnQgeyBTaGFyZWRUaHJlYWRQZXJtaXNzaW9uU2NvcGUgfSBmcm9tICdAc3JjL3R5cGVzL3NoYXJlZFRocmVhZHMnOwppbXBvcnQgTG9jayBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvTG9jay5zdmcnOwppbXBvcnQgR2xvYmUgZnJvbSAnQHNyYy9jb21wb25lbnRzL0ljb25zL0dsb2JlLnN2Zyc7CmltcG9ydCBQZW9wbGUgZnJvbSAnQHNyYy9jb21wb25lbnRzL0ljb25zL1Blb3BsZS5zdmcnOwppbXBvcnQgJy4vU2hhcmVUaHJlYWRQb3BvdmVyLnNjc3MnOwppbXBvcnQgU2hhcmVUb1NsYWNrIGZyb20gJy4vY29tcG9uZW50cy9TaGFyZVRvU2xhY2snOwppbXBvcnQgTmV3QXNhbmFUYXNrIGZyb20gJy4vY29tcG9uZW50cy9OZXdBc2FuYVRhc2snOwppbXBvcnQgYnJvd3Nlckhpc3RvcnkgZnJvbSAnQHNyYy9saWIvYnJvd3Nlckhpc3RvcnknOwppbXBvcnQgeyBjaGVja05leHRIb3RrZXlDaGFuZ2UsIEhvdGtleUFjdGlvbiwgaXNQcmltYXJ5TW9kaWZpZXJLZXkgfSBmcm9tICdAc3JjL2xpYi9ob3RrZXlzJzsKaW1wb3J0IENvbmZpcm0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0Jhc2UvQ29uZmlybSc7CmltcG9ydCBDaGVja2JveCBmcm9tICdAc3JjL2NvbXBvbmVudHMvRm9ybS9DaGVja2JveC9DaGVja2JveCc7CnZhciBzZXR0aW5ncyA9IFsKICAgIHsKICAgICAgICB0aXRsZTogJ0FueW9uZSB3aXRoIHRoZSBsaW5rJywKICAgICAgICBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KEdsb2JlLCB7IGNsYXNzTmFtZTogImdsb2JlIiB9KSwKICAgICAgICBrZXk6IFNoYXJlZFRocmVhZFBlcm1pc3Npb25TY29wZS5QdWJsaWMsCiAgICB9LAogICAgewogICAgICAgIHRpdGxlOiAnT25seSB0ZWFtbWF0ZXMnLAogICAgICAgIGljb246IFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGVvcGxlLCB7IGhlaWdodDogIjE0cHgiLCB3aWR0aDogIjE2cHgiIH0pLAogICAgICAgIGtleTogU2hhcmVkVGhyZWFkUGVybWlzc2lvblNjb3BlLlRlYW0sCiAgICB9LAogICAgewogICAgICAgIHRpdGxlOiAnUHJpdmF0ZScsCiAgICAgICAgaWNvbjogUmVhY3QuY3JlYXRlRWxlbWVudChMb2NrLCB7IGhlaWdodDogIjE0cHgiLCB3aWR0aDogIjE2cHgiIH0pLAogICAgICAgIGtleTogU2hhcmVkVGhyZWFkUGVybWlzc2lvblNjb3BlLlByaXZhdGUsCiAgICB9LApdOwp2YXIgU2hhcmVUaHJlYWRQb3BvdmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFNoYXJlVGhyZWFkUG9wb3ZlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNoYXJlVGhyZWFkUG9wb3Zlcihwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZEpTKCcjc2hhcmUtdGhyZWFkLWNvcHktYnV0dG9uJyk7CiAgICAgICAgX3RoaXMuaGFuZGxlUG9wb3ZlclJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMucG9wb3ZlciA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVNldHRpbmdzUG9wb3ZlclJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3NQb3BvdmVyID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlSW5wdXRSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLmlucHV0ID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dDb3BpZWRUb29sdGlwOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlSW5wdXRDbGljayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLmlucHV0LmZvY3VzKCk7CiAgICAgICAgICAgIF90aGlzLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIF90aGlzLmlucHV0LnZhbHVlLmxlbmd0aCk7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRJbmRleDogMCB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmZvY3VzSW5wdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy50aW1lb3V0KSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZW91dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMudGltZW91dCA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gX3RoaXMuaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbnB1dC5mb2N1cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3RoaXMuaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgX3RoaXMuaW5wdXQudmFsdWUubGVuZ3RoKTsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRJbmRleDogMCB9KTsKICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVIb3RrZXlBY3Rpb25zQ2hhbmdlID0gZnVuY3Rpb24gKG9sZEFjdGlvbnMsIG5ld0FjdGlvbnMpIHsKICAgICAgICAgICAgaWYgKGNoZWNrTmV4dEhvdGtleUNoYW5nZShIb3RrZXlBY3Rpb24uU2hhcmVUb0FzYW5hLCBuZXdBY3Rpb25zLCBvbGRBY3Rpb25zKSkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBpbnRlZ3JhdGlvblZpZXc6IEludGVncmF0aW9uVHlwZS5Bc2FuYSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2hlY2tOZXh0SG90a2V5Q2hhbmdlKEhvdGtleUFjdGlvbi5TaGFyZVRvU2xhY2ssIG5ld0FjdGlvbnMsIG9sZEFjdGlvbnMpKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGludGVncmF0aW9uVmlldzogSW50ZWdyYXRpb25UeXBlLlNsYWNrIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5kaXNtaXNzVG9vbHRpcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzaG93Q29waWVkVG9vbHRpcDogZmFsc2UgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMuc3RhdGUsIHNlbGVjdGVkSW5kZXggPSBfYS5zZWxlY3RlZEluZGV4LCBpbnRlZ3JhdGlvblZpZXcgPSBfYS5pbnRlZ3JhdGlvblZpZXc7CiAgICAgICAgICAgIHZhciBoYW5kbGVkID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBwcmltYXJ5TW9kaWZpZXJLZXkgPSBpc1ByaW1hcnlNb2RpZmllcktleShlKTsKICAgICAgICAgICAgdmFyIGNvcHkgPSBwcmltYXJ5TW9kaWZpZXJLZXkgJiYgZS5rZXlDb2RlID09PSBLZXlDb2RlLkM7CiAgICAgICAgICAgIHZhciBjdXQgPSBwcmltYXJ5TW9kaWZpZXJLZXkgJiYgZS5rZXlDb2RlID09PSBLZXlDb2RlLlg7CiAgICAgICAgICAgIGlmIChjb3B5IHx8IGN1dCkgewogICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ29weShlKTsKICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaW50ZWdyYXRpb25WaWV3KSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5Eb3duOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCA8IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRJbmRleDogc2VsZWN0ZWRJbmRleCArIDEgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGV4ID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlRhYjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc2hpZnRLZXkgJiYgc2VsZWN0ZWRJbmRleCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRJbmRleDogc2VsZWN0ZWRJbmRleCAtIDEgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWUuc2hpZnRLZXkgJiYgc2VsZWN0ZWRJbmRleCA8IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRJbmRleDogc2VsZWN0ZWRJbmRleCArIDEgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGV4ID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGUuVXA6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEluZGV4ID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZEluZGV4OiBzZWxlY3RlZEluZGV4IC0gMSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5FbnRlcjoKICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhhbmRsZWQpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURpc21pc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnByb3BzLm9uRGlzbWlzcygpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ29weSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5pbnB1dCkgewogICAgICAgICAgICAgICAgX3RoaXMuaW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgICAgIF90aGlzLmlucHV0LnNlbGVjdCgpOwogICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4ZWNDb21tYW5kKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd0NvcGllZFRvb2x0aXA6IHRydWUgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIDApOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0LmJsdXIoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVTZXR0aW5nc0NsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dTZXR0aW5nc01lbnU6IHRydWUgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0dGluZ3NQb3BvdmVyLnRvZ2dsZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVNldHRpbmdzSGlkZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgc2hvd1NldHRpbmdzTWVudTogZmFsc2UsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2VsZWN0ID0gZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgc2hhcmVkVGhyZWFkID0gX2Euc2hhcmVkVGhyZWFkLCBvblNoYXJlZFRocmVhZFVwZGF0ZSA9IF9hLm9uU2hhcmVkVGhyZWFkVXBkYXRlOwogICAgICAgICAgICB2YXIgb3B0aW9uID0gc2V0dGluZ3MuZmlsdGVyKGZ1bmN0aW9uIChzZXR0aW5nKSB7IHJldHVybiBzZXR0aW5nLmtleSA9PT0ga2V5OyB9KVswXTsKICAgICAgICAgICAgaWYgKHNoYXJlZFRocmVhZCAmJiBvblNoYXJlZFRocmVhZFVwZGF0ZSAmJiBvcHRpb24gJiYgb3B0aW9uLmtleSkgewogICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc2hhcmVkVGhyZWFkKSwgeyBwZXJtaXNzaW9uczogX19hc3NpZ24oX19hc3NpZ24oe30sIHNoYXJlZFRocmVhZC5wZXJtaXNzaW9ucyksIHsgc2NvcGU6IG9wdGlvbi5rZXkgfSkgfSk7CiAgICAgICAgICAgICAgICBvblNoYXJlZFRocmVhZFVwZGF0ZSh1cGRhdGVkKTsKICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZVNldHRpbmdzSGlkZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVWaWV3RXhwYW5kID0gZnVuY3Rpb24gKHZpZXcpIHsKICAgICAgICAgICAgdmFyIG5ld1ZpZXc7CiAgICAgICAgICAgIHN3aXRjaCAodmlldykgewogICAgICAgICAgICAgICAgY2FzZSBJbnRlZ3JhdGlvblR5cGUuU2xhY2s6CiAgICAgICAgICAgICAgICAgICAgbmV3VmlldyA9IEludGVncmF0aW9uVHlwZS5TbGFjazsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgSW50ZWdyYXRpb25UeXBlLkFzYW5hOgogICAgICAgICAgICAgICAgICAgIG5ld1ZpZXcgPSBJbnRlZ3JhdGlvblR5cGUuQXNhbmE7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChuZXdWaWV3KSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGludGVncmF0aW9uVmlldzogbmV3VmlldyB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuZ29Ub0ludGVncmF0aW9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnL3NldHRpbmdzL2ludGVncmF0aW9ucycpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2xhY2tNb3VzZUVudGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZEluZGV4OiAxIH0pOwogICAgICAgICAgICBfdGhpcy5pbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAwKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUFzYW5hTW91c2VFbnRlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRJbmRleDogMiB9KTsKICAgICAgICAgICAgX3RoaXMuaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgMCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVEZWxldGVNb3VzZUVudGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZEluZGV4OiAzIH0pOwogICAgICAgICAgICBfdGhpcy5pbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAwKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUJ1dHRvblJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMuYnV0dG9uID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2hhcmVkRHJhZnRzQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICB2YXIgX2IgPSBfdGhpcy5wcm9wcywgb25TaGFyZWRUaHJlYWRVcGRhdGUgPSBfYi5vblNoYXJlZFRocmVhZFVwZGF0ZSwgc2hhcmVkVGhyZWFkID0gX2Iuc2hhcmVkVGhyZWFkOwogICAgICAgICAgICBpZiAob25TaGFyZWRUaHJlYWRVcGRhdGUgJiYgc2hhcmVkVGhyZWFkLnBlcm1pc3Npb25zKSB7CiAgICAgICAgICAgICAgICBvblNoYXJlZFRocmVhZFVwZGF0ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc2hhcmVkVGhyZWFkKSwgeyBwZXJtaXNzaW9uczogX19hc3NpZ24oX19hc3NpZ24oe30sIHNoYXJlZFRocmVhZC5wZXJtaXNzaW9ucyksIHsgZHJhZnRzOiAhKChfYSA9IHNoYXJlZFRocmVhZC5wZXJtaXNzaW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmRyYWZ0cykgfSkgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVEZWxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBkZWxldGVTaGFyZWRUaHJlYWQgPSBfYS5kZWxldGVTaGFyZWRUaHJlYWQsIHNoYXJlZFRocmVhZCA9IF9hLnNoYXJlZFRocmVhZDsKICAgICAgICAgICAgaWYgKCFkZWxldGVTaGFyZWRUaHJlYWQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgY29uZmlybVByb3BzID0gewogICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGUgdGhpcyBzaGFyZWQgY29udmVyc2F0aW9uPycsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhpcyBzaGFyZWQgY29udmVyc2F0aW9uLCBhbG9uZyB3aXRoIGFueSBjb21tZW50cyBhbmQgbWVudGlvbnMgd2lsbCBiZSByZW1vdmVkLicgKwogICAgICAgICAgICAgICAgICAgICcgQW55IGxpbmtzIHBvaW50aW5nIHRvIHRoaXMgc2hhcmVkIGNvbnZlcnNhdGlvbiB3aWxsIG5vIGxvbmdlciBiZSB2YWxpZC4nLAogICAgICAgICAgICAgICAgY29uZmlybUNvcHk6ICdEZWxldGUnLAogICAgICAgICAgICAgICAgb25Db25maXJtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlU2hhcmVkVGhyZWFkKHNoYXJlZFRocmVhZC5pZCk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IHVuZGVmaW5lZCB9KTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3BvdmVyLmhpZGUoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogY29uZmlybVByb3BzIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIHNob3dDb3BpZWRUb29sdGlwOiBmYWxzZSwKICAgICAgICAgICAgc2hvd1NldHRpbmdzTWVudTogZmFsc2UsCiAgICAgICAgICAgIHNlbGVjdGVkSW5kZXg6IDAsCiAgICAgICAgICAgIGludGVncmF0aW9uVmlldzogcHJvcHMuaW5pdGlhbEludGVncmF0aW9uVmlldywKICAgICAgICB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIFNoYXJlVGhyZWFkUG9wb3Zlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9uU2hvdyA9IHRoaXMucHJvcHMub25TaG93OwogICAgICAgIGlmICh0aGlzLnBvcG92ZXIpIHsKICAgICAgICAgICAgdGhpcy5wb3BvdmVyLnNob3coKTsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmludGVncmF0aW9uVmlldykgewogICAgICAgICAgICB0aGlzLmZvY3VzSW5wdXQoKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9uU2hvdykgewogICAgICAgICAgICBvblNob3coKTsKICAgICAgICB9CiAgICB9OwogICAgU2hhcmVUaHJlYWRQb3BvdmVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAob2xkUHJvcHMsIG9sZFN0YXRlKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgc2hhcmVkVGhyZWFkID0gX2Euc2hhcmVkVGhyZWFkLCBzaGFyZUxpbmsgPSBfYS5zaGFyZUxpbmssIGFzYW5hRW5hYmxlZCA9IF9hLmFzYW5hRW5hYmxlZDsKICAgICAgICB2YXIgX2IgPSB0aGlzLnN0YXRlLCBzZWxlY3RlZEluZGV4ID0gX2Iuc2VsZWN0ZWRJbmRleCwgaW50ZWdyYXRpb25WaWV3ID0gX2IuaW50ZWdyYXRpb25WaWV3OwogICAgICAgIGlmIChzaGFyZUxpbmsgJiYgIW9sZFByb3BzLnNoYXJlTGluayAmJiAhaW50ZWdyYXRpb25WaWV3KSB7CiAgICAgICAgICAgIGlmIChzaGFyZUxpbmsgJiYgc2hhcmVMaW5rLnVybCAmJiBzaGFyZUxpbmsuc2hhcmVkVGhyZWFkID09PSBzaGFyZWRUaHJlYWQuaWQpIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNJbnB1dCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChzZWxlY3RlZEluZGV4ICE9PSBvbGRTdGF0ZS5zZWxlY3RlZEluZGV4ICYmICFpbnRlZ3JhdGlvblZpZXcpIHsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggPT09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNJbnB1dCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaW50ZWdyYXRpb25WaWV3ICYmICFhc2FuYUVuYWJsZWQgJiYgc2VsZWN0ZWRJbmRleCA9PT0gMikgewogICAgICAgICAgICAgICAgdGhpcy5idXR0b24uZm9jdXMoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBIYW5kbGUgaG90a2V5IHVwZGF0ZXMKICAgICAgICB2YXIgb2xkQWN0aW9ucyA9IG9sZFByb3BzLmhvdGtleUFjdGlvbnM7CiAgICAgICAgdmFyIG5ld0FjdGlvbnMgPSB0aGlzLnByb3BzLmhvdGtleUFjdGlvbnM7CiAgICAgICAgaWYgKG9sZEFjdGlvbnMgJiYgbmV3QWN0aW9ucyAmJiBvbGRBY3Rpb25zICE9PSBuZXdBY3Rpb25zKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlSG90a2V5QWN0aW9uc0NoYW5nZShvbGRBY3Rpb25zLCBuZXdBY3Rpb25zKTsKICAgICAgICB9CiAgICB9OwogICAgU2hhcmVUaHJlYWRQb3BvdmVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy50aW1lb3V0KSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpOwogICAgICAgIH0KICAgIH07CiAgICAvLyBUT0RPKFNISU4pOiBTZWUgaWYgd2UgbmVlZCB0byB1cGRhdGUgZm9yIHB1YmxpYyBwZXJtaXNzaW9uIHNjb3BlIG1pc3NpbmcKICAgIC8vIGluc3RlYWQgb2YgZmFsbGluZyBiYWNrCiAgICBTaGFyZVRocmVhZFBvcG92ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2E7CiAgICAgICAgdmFyIF9iID0gdGhpcy5wcm9wcywgc2hhcmVkVGhyZWFkID0gX2Iuc2hhcmVkVGhyZWFkLCBzaGFyZUxpbmsgPSBfYi5zaGFyZUxpbmssIGFzYW5hRW5hYmxlZCA9IF9iLmFzYW5hRW5hYmxlZCwgZmVhdHVyZXMgPSBfYi5mZWF0dXJlczsKICAgICAgICB2YXIgX2MgPSB0aGlzLnN0YXRlLCBzaG93Q29waWVkVG9vbHRpcCA9IF9jLnNob3dDb3BpZWRUb29sdGlwLCBzaG93U2V0dGluZ3NNZW51ID0gX2Muc2hvd1NldHRpbmdzTWVudSwgc2VsZWN0ZWRJbmRleCA9IF9jLnNlbGVjdGVkSW5kZXgsIGludGVncmF0aW9uVmlldyA9IF9jLmludGVncmF0aW9uVmlldywgY29uZmlybVByb3BzID0gX2MuY29uZmlybVByb3BzOwogICAgICAgIHZhciBwZXJtaXNzaW9uc0NvcHkgPSAnQW55b25lIHdpdGggdGhlIGxpbmsgY2FuIHZpZXcgdGhpcyBjb252ZXJzYXRpb24uICc7CiAgICAgICAgaWYgKHNoYXJlZFRocmVhZCAmJiBzaGFyZWRUaHJlYWQucGVybWlzc2lvbnMpIHsKICAgICAgICAgICAgc3dpdGNoIChzaGFyZWRUaHJlYWQucGVybWlzc2lvbnMuc2NvcGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgU2hhcmVkVGhyZWFkUGVybWlzc2lvblNjb3BlLlByaXZhdGU6CiAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbnNDb3B5ID0gJ09ubHkgeW91IGNhbiB2aWV3IHRoaXMgY29udmVyc2F0aW9uLiAnOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBTaGFyZWRUaHJlYWRQZXJtaXNzaW9uU2NvcGUuVGVhbToKICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uc0NvcHkgPSAnT25seSB1c2VycyBvbiB5b3VyIHRlYW0gY2FuIHZpZXcgdGhpcyBjb252ZXJzYXRpb24uICc7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciB1cGRhdGVkU2V0dGluZ3MgPSBjbG9uZURlZXAoc2V0dGluZ3MpOwogICAgICAgIGlmIChzaGFyZWRUaHJlYWQgJiYgc2hhcmVkVGhyZWFkLm1lbnRpb25lZCAmJiBzaGFyZWRUaHJlYWQubWVudGlvbmVkLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIG5ld0NvcHkgPSBzaGFyZWRUaHJlYWQubWVudGlvbmVkLmxlbmd0aCA+IDEKICAgICAgICAgICAgICAgID8gJ1ByaXZhdGUgKyAnICsgKHNoYXJlZFRocmVhZC5tZW50aW9uZWQubGVuZ3RoICsgIiBjb2xsYWJvcmF0b3JzIikKICAgICAgICAgICAgICAgIDogIlByaXZhdGUgKyAiICsgc2hhcmVkVGhyZWFkLm1lbnRpb25lZC5sZW5ndGggKyAiIGNvbGxhYm9yYXRvciI7CiAgICAgICAgICAgIHVwZGF0ZWRTZXR0aW5nc1syXS50aXRsZSA9IG5ld0NvcHk7CiAgICAgICAgfQogICAgICAgIC8vIFNldCB1cmwgZm9yIHNoYXJlIGxpbmsKICAgICAgICB2YXIgdXJsID0gc2hhcmVkVGhyZWFkLnB1YmxpY1VybDsKICAgICAgICBpZiAoc2hhcmVMaW5rICYmIHNoYXJlTGluay51cmwgJiYgc2hhcmVMaW5rLnNoYXJlZFRocmVhZCA9PT0gc2hhcmVkVGhyZWFkLmlkKSB7CiAgICAgICAgICAgIHVybCA9IHNoYXJlTGluay51cmw7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChQb3BvdmVyLCB7IHJlZjogdGhpcy5oYW5kbGVQb3BvdmVyUmVmLCBjbGFzc05hbWU6ICJzaGFyZS10aHJlYWQtcG9wb3ZlciIsIG9uSGlkZTogdGhpcy5oYW5kbGVEaXNtaXNzLCBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93biwgYXV0b0ZvY3VzT2ZmOiB0cnVlLCBmYWRlc091dDogdHJ1ZSB9LAogICAgICAgICAgICAhIWNvbmZpcm1Qcm9wcyAmJgogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb25maXJtLCBfX2Fzc2lnbih7fSwgY29uZmlybVByb3BzKSksCiAgICAgICAgICAgICFpbnRlZ3JhdGlvblZpZXcgJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb250ZW50Iiwgb25Nb3VzZUxlYXZlOiB0aGlzLmRpc21pc3NUb29sdGlwIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiU2hhcmUgdGhpcyBjb252ZXJzYXRpb24iKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29weS1hcmVhIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgeyBkaXI6ICJhdXRvIiwgdHlwZTogInRleHQiLCBjbGFzc05hbWU6ICJ1cmwtaW5wdXQiLCB2YWx1ZTogdXJsLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUlucHV0Q2xpY2ssIHJlZjogdGhpcy5oYW5kbGVJbnB1dFJlZiwgcmVhZE9ubHk6IHRydWUgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBpZDogInNoYXJlLXRocmVhZC1jb3B5LWJ1dHRvbiIsIGNsYXNzTmFtZTogImNvcHktYnV0dG9uIiwgImRhdGEtY2xpcGJvYXJkLXRleHQiOiB1cmwsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2xpY2ssIHRhYkluZGV4OiAtMSB9LCAiQ29weSIpLAogICAgICAgICAgICAgICAgICAgIHNob3dDb3BpZWRUb29sdGlwICYmCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9vbFRpcCwgeyBjbGFzc05hbWU6ICJ0b29sdGlwIiwgdG9wOiAiLTM0cHgiLCByaWdodDogIi0yMHB4IiwgY29weTogIkNvcGllZCEiLCBhbmNob3JCb3R0b206IHRydWUgfSkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJvcHRpb25zLWRlc2NyaXB0aW9uIiB9LAogICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zQ29weSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogInNoYXJlLW9wdGlvbnMtYnV0dG9uIiwgb25DbGljazogdGhpcy5oYW5kbGVTZXR0aW5nc0NsaWNrLCB0YWJJbmRleDogLTEgfSwgIkNoYW5nZSB0aGlzIiksCiAgICAgICAgICAgICAgICAgICAgc2hvd1NldHRpbmdzTWVudSAmJgogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNldHRpbmdzTWVudSwgeyBvblNlbGVjdDogdGhpcy5oYW5kbGVTZWxlY3QsIHJlZjogdGhpcy5oYW5kbGVTZXR0aW5nc1BvcG92ZXJSZWYsIG1lOiAiU2hhcmUgU2V0dGluZ3MiLCBzZXR0aW5nczogdXBkYXRlZFNldHRpbmdzLCBzZWxlY3RlZEtleTogc2hhcmVkVGhyZWFkICYmIHNoYXJlZFRocmVhZC5wZXJtaXNzaW9ucyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZFRocmVhZC5wZXJtaXNzaW9ucy5zY29wZSB8fCAncHVibGljJywgb25IaWRlOiB0aGlzLmhhbmRsZVNldHRpbmdzSGlkZSB9KSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNoYXJlZC1kcmFmdHMtc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiB9LCAiU2hvdyBkcmFmdHMgb24gc2hhcmVkIGNvbnZlcnNhdGlvbnMuIiksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDaGVja2JveCwgeyBvbkNoYW5nZTogdGhpcy5oYW5kbGVTaGFyZWREcmFmdHNDaGFuZ2UsIGNoZWNrZWQ6ICgoX2EgPSBzaGFyZWRUaHJlYWQucGVybWlzc2lvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kcmFmdHMpIHx8IGZhbHNlIH0pKSksCiAgICAgICAgICAgIHVybCAmJiBmZWF0dXJlcy5jb21tZW50cyAmJgogICAgICAgICAgICAgICAgKCFpbnRlZ3JhdGlvblZpZXcgfHwgaW50ZWdyYXRpb25WaWV3ID09PSBJbnRlZ3JhdGlvblR5cGUuU2xhY2spICYmCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNoYXJlVG9TbGFjaywgeyBzaGFyZVVybDogdXJsLCBvbkV4cGFuZDogdGhpcy5oYW5kbGVWaWV3RXhwYW5kLCBzaG93RnVsbFZpZXc6IGludGVncmF0aW9uVmlldyA9PT0gSW50ZWdyYXRpb25UeXBlLlNsYWNrLCBzZWxlY3RlZDogc2VsZWN0ZWRJbmRleCA9PT0gMSwgb25Nb3VzZUVudGVyOiB0aGlzLmhhbmRsZVNsYWNrTW91c2VFbnRlciB9KSwKICAgICAgICAgICAgdXJsICYmIGZlYXR1cmVzLmNvbW1lbnRzICYmICgoIWludGVncmF0aW9uVmlldyAmJiBhc2FuYUVuYWJsZWQpCiAgICAgICAgICAgICAgICB8fCBpbnRlZ3JhdGlvblZpZXcgPT09IEludGVncmF0aW9uVHlwZS5Bc2FuYSkgJiYKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTmV3QXNhbmFUYXNrLCB7IHNoYXJlVXJsOiB1cmwsIG9uRXhwYW5kOiB0aGlzLmhhbmRsZVZpZXdFeHBhbmQsIHNob3dGdWxsVmlldzogaW50ZWdyYXRpb25WaWV3ID09PSBJbnRlZ3JhdGlvblR5cGUuQXNhbmEsIHNoYXJlZFRocmVhZDogc2hhcmVkVGhyZWFkLCBzZWxlY3RlZDogc2VsZWN0ZWRJbmRleCA9PT0gMiwgb25Nb3VzZUVudGVyOiB0aGlzLmhhbmRsZUFzYW5hTW91c2VFbnRlciB9KSwKICAgICAgICAgICAgIWludGVncmF0aW9uVmlldyAmJiAhYXNhbmFFbmFibGVkICYmCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygnbW9yZS1pbnRlZ3JhdGlvbnMnLCB7IHNlbGVjdGVkOiBzZWxlY3RlZEluZGV4ID09PSAyIH0pLCBvbkNsaWNrOiB0aGlzLmdvVG9JbnRlZ3JhdGlvbnMsIG9uTW91c2VFbnRlcjogdGhpcy5oYW5kbGVBc2FuYU1vdXNlRW50ZXIsIHJlZjogdGhpcy5oYW5kbGVCdXR0b25SZWYgfSwgIk1vcmUgSW50ZWdyYXRpb25zLi4uIiksCiAgICAgICAgICAgICEhc2hhcmVkVGhyZWFkICYmICFpbnRlZ3JhdGlvblZpZXcgJiYKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdkZWxldGUtYnV0dG9uJywgeyBzZWxlY3RlZDogc2VsZWN0ZWRJbmRleCA9PT0gMyB9KSwgb25DbGljazogdGhpcy5oYW5kbGVEZWxldGUsIG9uTW91c2VFbnRlcjogdGhpcy5oYW5kbGVEZWxldGVNb3VzZUVudGVyLCByZWY6IHRoaXMuaGFuZGxlQnV0dG9uUmVmIH0sICJEZWxldGUgQ29udmVyc2F0aW9uIikpKTsKICAgIH07CiAgICByZXR1cm4gU2hhcmVUaHJlYWRQb3BvdmVyOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgU2hhcmVUaHJlYWRQb3BvdmVyOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/ShareThreadPopover.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/ShareThreadPopover.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport ClipboardJS from 'clipboard';\nimport { cloneDeep } from 'lodash';\n\nimport { KeyCode, ShareLink, HotkeyActions, IntegrationType, Features } from '@src/types';\nimport Popover from '@src/components/Popover/Popover';\nimport ToolTip from '@src/components/Base/Tooltip';\n// tslint:disable-next-line:max-line-length\nimport SettingsMenu, { Setting } from '@src/components/LeftSidebar/components/LeftSidebarFooter/components/SettingsMenu';\nimport { SharedThread, SharedThreadPermissionScope } from '@src/types/sharedThreads';\n\nimport Lock from '@src/components/Icons/Lock.svg';\nimport Globe from '@src/components/Icons/Globe.svg';\nimport People from '@src/components/Icons/People.svg';\n\nimport './ShareThreadPopover.scss';\nimport ShareToSlack from './components/ShareToSlack';\nimport NewAsanaTask from './components/NewAsanaTask';\nimport browserHistory from '@src/lib/browserHistory';\nimport { checkNextHotkeyChange, HotkeyAction, isPrimaryModifierKey } from '@src/lib/hotkeys';\nimport Confirm, { Props as ConfirmProps } from '@src/components/Base/Confirm';\nimport Checkbox from '@src/components/Form/Checkbox/Checkbox';\n\nexport interface Props {\n  sharedThread: SharedThread;\n  thread?: string;\n  onSharedThreadUpdate?: (sharedThread: SharedThread) => void;\n  deleteSharedThread?: (sharedThread: string) => void;\n  shareLink?: ShareLink;\n  asanaEnabled: boolean;\n  initialIntegrationView?: IntegrationType;\n\n  onShow?: () => void;\n}\n\nexport interface StateProps {\n  hotkeyActions: HotkeyActions;\n  features: Features;\n}\n\nexport interface DispatchProps {\n  onDismiss: () => void;\n}\ninterface State {\n  showCopiedTooltip: boolean;\n  showSettingsMenu: boolean;\n  integrationView?: IntegrationType;\n  selectedIndex: number;\n  confirmProps?: ConfirmProps;\n}\n\nconst settings: Setting[] = [\n  {\n    title: 'Anyone with the link',\n    icon: <Globe className=\"globe\" />,\n    key: SharedThreadPermissionScope.Public,\n  },\n  {\n    title: 'Only teammates',\n    icon: <People height=\"14px\" width=\"16px\" />,\n    key: SharedThreadPermissionScope.Team,\n  },\n  {\n    title: 'Private',\n    icon: <Lock height=\"14px\" width=\"16px\" />,\n    key: SharedThreadPermissionScope.Private,\n  },\n];\n\nclass ShareThreadPopover extends React.PureComponent<Props & DispatchProps & StateProps, State> {\n  popover: Popover;\n  settingsPopover: SettingsMenu;\n  input: HTMLInputElement;\n  clipboard = new ClipboardJS('#share-thread-copy-button');\n  timeout: NodeJS.Timer;\n  button: HTMLButtonElement;\n\n  constructor(props: Props & StateProps & DispatchProps) {\n    super();\n\n    this.state = {\n      showCopiedTooltip: false,\n      showSettingsMenu: false,\n      selectedIndex: 0,\n      integrationView: props.initialIntegrationView,\n    };\n  }\n\n  componentDidMount() {\n    const { onShow } = this.props;\n    if (this.popover) {\n      this.popover.show();\n    }\n\n    if (!this.state.integrationView) {\n      this.focusInput();\n    }\n\n    if (onShow) {\n      onShow();\n    }\n  }\n\n  componentDidUpdate(oldProps: Props & StateProps, oldState: State) {\n    const { sharedThread, shareLink, asanaEnabled } = this.props;\n    const { selectedIndex, integrationView } = this.state;\n\n    if (shareLink && !oldProps.shareLink && !integrationView) {\n      if (shareLink && shareLink.url && shareLink.sharedThread === sharedThread.id) {\n        this.focusInput();\n      }\n    }\n\n    if (selectedIndex !== oldState.selectedIndex && !integrationView) {\n      if (selectedIndex === 0) {\n        this.focusInput();\n      }\n\n      if (!integrationView && !asanaEnabled && selectedIndex === 2) {\n        this.button.focus();\n      }\n    }\n\n    // Handle hotkey updates\n    const oldActions = oldProps.hotkeyActions;\n    const newActions = this.props.hotkeyActions;\n    if (oldActions && newActions && oldActions !== newActions) {\n      this.handleHotkeyActionsChange(oldActions, newActions);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  handlePopoverRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  handleSettingsPopoverRef = (ref: SettingsMenu) => {\n    this.settingsPopover = ref;\n  }\n\n  handleInputRef = (ref: HTMLInputElement) => {\n    this.input = ref;\n  }\n\n  handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    this.setState({ showCopiedTooltip: true });\n  }\n\n  handleInputClick = (e: React.MouseEvent<HTMLInputElement>) => {\n    this.input.focus();\n    this.input.setSelectionRange(0, this.input.value.length);\n    this.setState({ selectedIndex: 0 });\n  }\n\n  focusInput = () => {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n\n    this.timeout = global.setTimeout(\n      () => {\n        if (!this.input) {\n          return;\n        }\n\n        if (document.activeElement !== this.input) {\n          this.input.focus();\n        }\n        this.input.setSelectionRange(0, this.input.value.length);\n        this.setState({ selectedIndex: 0 });\n      },\n      0,\n    );\n  }\n\n  handleHotkeyActionsChange = (\n    oldActions: { [action: string]: number },\n    newActions: { [action: string]: number },\n  ) => {\n    if (checkNextHotkeyChange(HotkeyAction.ShareToAsana, newActions, oldActions)) {\n      this.setState({ integrationView: IntegrationType.Asana });\n    }\n\n    if (checkNextHotkeyChange(HotkeyAction.ShareToSlack, newActions, oldActions)) {\n      this.setState({ integrationView: IntegrationType.Slack });\n    }\n  }\n\n  dismissTooltip = () => {\n    this.setState({ showCopiedTooltip: false });\n  }\n\n  handleKeyDown = (e: React.KeyboardEvent<Element>) => {\n    const { selectedIndex, integrationView } = this.state;\n\n    let handled = false;\n    const primaryModifierKey = isPrimaryModifierKey(e);\n    const copy = primaryModifierKey && e.keyCode === KeyCode.C;\n    const cut = primaryModifierKey && e.keyCode === KeyCode.X;\n    if (copy || cut) {\n      this.handleCopy(e);\n      handled = true;\n    }\n\n    if (!integrationView) {\n      switch (e.keyCode) {\n        case KeyCode.Down:\n          if (selectedIndex < 2) {\n            this.setState(\n              { selectedIndex: selectedIndex + 1 },\n              () => {\n                if (this.state.selectedIndex === 1) {\n                  this.input.setSelectionRange(0, 0);\n                }\n              },\n            );\n            handled = true;\n          }\n          break;\n        case KeyCode.Tab:\n          if (e.shiftKey && selectedIndex > 0) {\n            this.setState({ selectedIndex: selectedIndex - 1 });\n          } else if (!e.shiftKey && selectedIndex < 2) {\n            this.setState(\n              { selectedIndex: selectedIndex + 1 },\n              () => {\n                if (this.state.selectedIndex === 1) {\n                  this.input.setSelectionRange(0, 0);\n                }\n              },\n            );\n          }\n          handled = true;\n          break;\n        case KeyCode.Up:\n          if (selectedIndex > 0) {\n            this.setState({ selectedIndex: selectedIndex - 1 });\n            handled = true;\n          }\n          break;\n        case KeyCode.Enter:\n          e.stopPropagation();\n          break;\n        default:\n          break;\n      }\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  handleDismiss = () => {\n    this.props.onDismiss();\n  }\n\n  handleCopy = (e: any) => {\n    if (this.input) {\n      this.input.focus();\n      this.input.select();\n      if (document.execCommand) {\n        document.execCommand('copy');\n      }\n      this.setState({ showCopiedTooltip: true }, () => {\n        this.input.setSelectionRange(0, 0);\n        this.input.blur();\n      });\n    }\n  }\n\n  handleSettingsClick = () => {\n    this.setState(\n      { showSettingsMenu: true },\n      () => {\n        this.settingsPopover.toggle();\n      },\n    );\n  }\n\n  handleSettingsHide = () => {\n    this.setState({\n      showSettingsMenu: false,\n    });\n  }\n\n  handleSelect = (key: string) => {\n    const { sharedThread, onSharedThreadUpdate } = this.props;\n    const option = settings.filter(setting => setting.key === key)[0];\n    if (sharedThread && onSharedThreadUpdate && option && option.key) {\n      const updated: SharedThread = {\n        ...sharedThread,\n        permissions: {\n          ...sharedThread.permissions,\n          scope: option.key as SharedThreadPermissionScope,\n        },\n      };\n\n      onSharedThreadUpdate(updated);\n      this.handleSettingsHide();\n    }\n  }\n\n  handleViewExpand = (view: string) => {\n    let newView;\n\n    switch (view) {\n      case IntegrationType.Slack:\n        newView = IntegrationType.Slack;\n        break;\n      case IntegrationType.Asana:\n        newView = IntegrationType.Asana;\n        break;\n      default:\n        break;\n    }\n\n    if (newView) {\n      this.setState({ integrationView: newView });\n    }\n  }\n\n  goToIntegrations = () => {\n    browserHistory.push('/settings/integrations');\n  }\n\n  handleSlackMouseEnter = (e: React.MouseEvent<HTMLElement>) => {\n    this.setState({ selectedIndex: 1 });\n    this.input.setSelectionRange(0, 0);\n  }\n\n  handleAsanaMouseEnter = (e: React.MouseEvent<HTMLElement>) => {\n    this.setState({ selectedIndex: 2 });\n    this.input.setSelectionRange(0, 0);\n  }\n\n  handleDeleteMouseEnter = (e: React.MouseEvent<HTMLElement>) => {\n    this.setState({ selectedIndex: 3 });\n    this.input.setSelectionRange(0, 0);\n  }\n\n  handleButtonRef = (ref: HTMLButtonElement) => {\n    this.button = ref;\n  }\n\n  handleSharedDraftsChange = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    const { onSharedThreadUpdate, sharedThread } = this.props;\n    if (onSharedThreadUpdate && sharedThread.permissions) {\n      onSharedThreadUpdate({\n        ...sharedThread,\n        permissions: {\n          ...sharedThread.permissions,\n          drafts: !sharedThread.permissions?.drafts,\n        },\n      });\n    }\n  }\n\n  handleDelete = () => {\n    const { deleteSharedThread, sharedThread } = this.props;\n    if (!deleteSharedThread) {\n      return;\n    }\n    const confirmProps: ConfirmProps = {\n      title: 'Delete this shared conversation?',\n      message: 'This shared conversation, along with any comments and mentions will be removed.' +\n        ' Any links pointing to this shared conversation will no longer be valid.',\n      confirmCopy: 'Delete',\n      onConfirm: () => {\n        deleteSharedThread(sharedThread.id);\n        this.setState({ confirmProps: undefined });\n        this.popover.hide();\n      },\n      onCancel: () => {\n        this.setState({ confirmProps: undefined });\n      },\n    };\n\n    this.setState({ confirmProps });\n  }\n\n  // TODO(SHIN): See if we need to update for public permission scope missing\n  // instead of falling back\n  render() {\n    const { sharedThread, shareLink, asanaEnabled, features } = this.props;\n    const {\n      showCopiedTooltip,\n      showSettingsMenu,\n      selectedIndex,\n      integrationView,\n      confirmProps,\n    } = this.state;\n    let permissionsCopy = 'Anyone with the link can view this conversation. ';\n    if (sharedThread && sharedThread.permissions) {\n      switch (sharedThread.permissions.scope) {\n        case SharedThreadPermissionScope.Private:\n          permissionsCopy = 'Only you can view this conversation. ';\n          break;\n        case SharedThreadPermissionScope.Team:\n          permissionsCopy = 'Only users on your team can view this conversation. ';\n          break;\n        default:\n          break;\n      }\n    }\n\n    const updatedSettings = cloneDeep(settings);\n    if (sharedThread && sharedThread.mentioned && sharedThread.mentioned.length > 0) {\n      const newCopy = sharedThread.mentioned.length > 1\n        ? 'Private + ' + `${sharedThread.mentioned.length} collaborators`\n        : `Private + ${sharedThread.mentioned.length} collaborator`;\n      updatedSettings[2].title = newCopy;\n    }\n\n    // Set url for share link\n    let url = sharedThread.publicUrl;\n    if (shareLink && shareLink.url && shareLink.sharedThread === sharedThread.id) {\n      url = shareLink.url;\n    }\n\n    return (\n      <Popover\n        ref={this.handlePopoverRef}\n        className=\"share-thread-popover\"\n        onHide={this.handleDismiss}\n        onKeyDown={this.handleKeyDown}\n        autoFocusOff\n        fadesOut\n      >\n        {!!confirmProps &&\n          <Confirm\n            {...confirmProps}\n          />\n        }\n        {!integrationView && <div\n          className=\"content\"\n          onMouseLeave={this.dismissTooltip}\n        >\n          <div className=\"title\">\n            Share this conversation\n          </div>\n          <div\n            className=\"copy-area\"\n          >\n            <input\n              dir=\"auto\"\n              type=\"text\"\n              className=\"url-input\"\n              value={url}\n              onClick={this.handleInputClick}\n              ref={this.handleInputRef}\n              readOnly\n            />\n            <button\n              id=\"share-thread-copy-button\"\n              className=\"copy-button\"\n              data-clipboard-text={url}\n              onClick={this.handleClick}\n              tabIndex={-1}\n            >\n              Copy\n            </button>\n            {showCopiedTooltip &&\n              <ToolTip\n                className=\"tooltip\"\n                top=\"-34px\"\n                right=\"-20px\"\n                copy=\"Copied!\"\n                anchorBottom\n              />\n            }\n          </div>\n          <div className=\"options-description\">\n            {permissionsCopy}\n            <button\n              className=\"share-options-button\"\n              onClick={this.handleSettingsClick}\n              tabIndex={-1}\n            >\n            Change this\n            </button>\n            {showSettingsMenu &&\n              <SettingsMenu\n                onSelect={this.handleSelect}\n                ref={this.handleSettingsPopoverRef}\n                me=\"Share Settings\"\n                settings={updatedSettings}\n                selectedKey={sharedThread && sharedThread.permissions &&\n                  sharedThread.permissions.scope || 'public'\n                }\n                onHide={this.handleSettingsHide}\n              />\n            }\n          </div>\n          <div className=\"shared-drafts-section\">\n            <div className=\"description\">\n              Show drafts on shared conversations.\n            </div>\n            <Checkbox\n              onChange={this.handleSharedDraftsChange}\n              checked={sharedThread.permissions?.drafts || false}\n            />\n          </div>\n        </div>}\n        {url && features.comments &&\n        (!integrationView || integrationView === IntegrationType.Slack) &&\n            <ShareToSlack\n              shareUrl={url}\n              onExpand={this.handleViewExpand}\n              showFullView={integrationView === IntegrationType.Slack}\n              selected={selectedIndex === 1}\n              onMouseEnter={this.handleSlackMouseEnter}\n            />\n        }\n        {url && features.comments && ((!integrationView && asanaEnabled)\n          || integrationView === IntegrationType.Asana) &&\n          <NewAsanaTask\n            shareUrl={url}\n            onExpand={this.handleViewExpand}\n            showFullView={integrationView === IntegrationType.Asana}\n            sharedThread={sharedThread}\n            selected={selectedIndex === 2}\n            onMouseEnter={this.handleAsanaMouseEnter}\n          />}\n        {!integrationView && !asanaEnabled &&\n          <button\n            className={classnames('more-integrations', { selected: selectedIndex === 2 })}\n            onClick={this.goToIntegrations}\n            onMouseEnter={this.handleAsanaMouseEnter}\n            ref={this.handleButtonRef}\n          >\n            More Integrations...\n          </button>}\n        {!!sharedThread && !integrationView &&\n          <button\n            className={classnames('delete-button', { selected: selectedIndex === 3 })}\n            onClick={this.handleDelete}\n            onMouseEnter={this.handleDeleteMouseEnter}\n            ref={this.handleButtonRef}\n          >\n            Delete Conversation\n          </button>}\n      </Popover>\n    );\n  }\n}\n\nexport default ShareThreadPopover;\n"]}]}