{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/index.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/index.tsx","mtime":1675280254045},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkgewogICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTsKICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKQogICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0OwogICAgfTsKICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9OwppbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBWaWV3aW5nUGlsbCBmcm9tICcuL1ZpZXdpbmdQaWxsJzsKaW1wb3J0IHsgVFRMIH0gZnJvbSAnQHNyYy9kdWNrcy9zaGFyZWRUaHJlYWRzJzsKdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgdmFyIHRocmVzaG9sZCA9IG1vbWVudCgpLnN1YnRyYWN0KFRUTCwgJ3NlY29uZHMnKTsKICAgIHZhciB1c2VyOwogICAgdmFyIHZpZXdpbmcgPSBPYmplY3Qua2V5cyhzdGF0ZS5zaGFyZWRUaHJlYWRBY3Rpdml0eS52aWV3KQogICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGlkKSB7IHJldHVybiBtb21lbnQoc3RhdGUuc2hhcmVkVGhyZWFkQWN0aXZpdHkudmlld1tpZF0udGltZXN0YW1wKS5pc0FmdGVyKHRocmVzaG9sZCk7IH0pCiAgICAgICAgLm1hcChmdW5jdGlvbiAoaWQpIHsKICAgICAgICB1c2VyID0gc3RhdGUuc2hhcmVkVGhyZWFkQWN0aXZpdHkudmlld1tpZF0udXNlcjsKICAgICAgICBpZiAodXNlcikgewogICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHVzZXIpLCB7IGlkOiBpZCB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZmlyc3ROYW1lOiAnYW5vbnltb3VzJywKICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgIH07CiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgICAgdmlld2luZzogdmlld2luZywKICAgIH07Cn07CmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzKShWaWV3aW5nUGlsbCk7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/index.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ViewingPill/index.tsx"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,aAAa,CAAC;AACtC,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,WAAmC,MAAM,eAAe,CAAC;AAEhE,OAAO,EAAE,GAAG,EAAE,MAAM,0BAA0B,CAAC;AAE/C,IAAM,eAAe,GAAG,UAAC,KAAiB;IACxC,IAAM,SAAS,GAAG,MAAM,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;IAEpD,IAAI,IAAI,CAAC;IACT,IAAM,OAAO,GAAa,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC;SACnE,MAAM,CAAC,UAAA,EAAE,IAAI,OAAA,MAAM,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,EAAxE,CAAwE,CAAC;SACtF,GAAG,CAAC,UAAC,EAAE;QACN,IAAI,GAAG,KAAK,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;QAChD,IAAI,IAAI,EAAE;YACR,6BACK,IAAI,KACP,EAAE,IAAA,IACF;SACH;QAED,OAAO;YACL,SAAS,EAAE,WAAW;YACtB,EAAE,IAAA;SACH,CAAC;IACJ,CAAC,CAAC,CAAC;IAEL,OAAO;QACL,OAAO,SAAA;KACR,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,OAAO,CACpB,eAAe,CAChB,CAAC,WAAW,CAAC,CAAC","sourcesContent":["import { connect } from 'react-redux';\nimport moment from 'moment';\nimport ViewingPill, { StateProps, Viewer } from './ViewingPill';\nimport { StoreState } from '@src/types';\nimport { TTL } from '@src/ducks/sharedThreads';\n\nconst mapStateToProps = (state: StoreState): StateProps => {\n  const threshold = moment().subtract(TTL, 'seconds');\n\n  let user;\n  const viewing: Viewer[] = Object.keys(state.sharedThreadActivity.view)\n    .filter(id => moment(state.sharedThreadActivity.view[id].timestamp).isAfter(threshold))\n    .map((id) => {\n      user = state.sharedThreadActivity.view[id].user;\n      if (user) {\n        return {\n          ...user,\n          id,\n        };\n      }\n\n      return {\n        firstName: 'anonymous',\n        id,\n      };\n    });\n\n  return {\n    viewing,\n  };\n};\n\nexport default connect<StateProps>(\n  mapStateToProps,\n)(ViewingPill);\n"]}]}