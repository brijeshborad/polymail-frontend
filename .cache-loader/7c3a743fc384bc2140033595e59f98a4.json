{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ActivityFeed/ActivityFeed.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ActivityFeed/ActivityFeed.tsx","mtime":1675280254026},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgSW5maW5pdGUgZnJvbSAncmVhY3QtaW5maW5pdGUnOwppbXBvcnQgRW1wdHlTdGF0ZSBmcm9tICcuL2NvbXBvbmVudHMvRW1wdHlTdGF0ZSc7CmltcG9ydCBGaWx0ZXJQb3BvdmVyIGZyb20gJy4vY29tcG9uZW50cy9BY3Rpdml0eUZlZWRGaWx0ZXJQb3BvdmVyJzsKaW1wb3J0IERpc2Nsb3N1cmUgZnJvbSAnQHNyYy9jb21wb25lbnRzL0ljb25zL0Rpc2Nsb3N1cmUuc3ZnJzsKaW1wb3J0IEFjdGl2aXR5Q2VsbCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQ2VsbHMvQWN0aXZpdHlDZWxsJzsKaW1wb3J0IFNlYXJjaElucHV0IGZyb20gJ0BzcmMvY29tcG9uZW50cy9Gb3JtL1NlYXJjaElucHV0L1NlYXJjaElucHV0JzsKaW1wb3J0IHsgQWN0aXZpdHlUeXBlIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCAnLi9BY3Rpdml0eUZlZWQuc2Nzcyc7CmltcG9ydCBVcGdyYWRlUHJvbXB0IGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL1VwZ3JhZGVQcm9tcHQvVXBncmFkZVByb21wdCc7CmltcG9ydCB7IEFtcGxpdHVkZUV2ZW50cywgbG9nQW1wbGl0dWRlRXZlbnQgfSBmcm9tICdAc3JjL2xpYi9hbXBsaXR1ZGUtYW5hbHl0aWNzJzsKdmFyIENFTExfSEVJR0hUID0gNjI7CnZhciBIRUFERVJfSEVJR0hUID0gMTQ5Owp2YXIgQWN0aXZpdHlGZWVkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKEFjdGl2aXR5RmVlZCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEFjdGl2aXR5RmVlZChwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuc2hvd0ZpbHRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMucG9wb3Zlci5zaG93KCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVGaWx0ZXJTZWxlY3QgPSBmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICAgICAgICAgIHZhciBzZWFyY2hBY3Rpdml0eUZlZWQgPSBfdGhpcy5wcm9wcy5zZWFyY2hBY3Rpdml0eUZlZWQ7CiAgICAgICAgICAgIHZhciBxdWVyeSA9IF90aGlzLnN0YXRlLnF1ZXJ5OwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGZpbHRlcjogZmlsdGVyIHx8IHVuZGVmaW5lZCB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWFyY2hBY3Rpdml0eUZlZWQocXVlcnksIF90aGlzLnN0YXRlLmZpbHRlcik7IH0pOwogICAgICAgICAgICBfdGhpcy5wb3BvdmVyLnRvZ2dsZSgpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5wb3BvdmVyID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWFpbkFwcCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JpZ2h0LXNpZGViYXInKTsKICAgICAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IG1haW5BcHBbMF0gPyBtYWluQXBwWzBdLm9mZnNldEhlaWdodCA6IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBsaXN0SGVpZ2h0OiB3aW5kb3dIZWlnaHQgLSBIRUFERVJfSEVJR0hUIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2VhcmNoID0gZnVuY3Rpb24gKHF1ZXJ5LCBjb21wbGV0ZSkgewogICAgICAgICAgICB2YXIgZmlsdGVyID0gX3RoaXMuc3RhdGUuZmlsdGVyOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHF1ZXJ5OiBxdWVyeSB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5zZWFyY2hBY3Rpdml0eUZlZWQocXVlcnksIGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuZmlsdGVycyA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICdBbGwgQWN0aXZpdHknLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ09wZW5lZCcsCiAgICAgICAgICAgICAgICB0eXBlOiBBY3Rpdml0eVR5cGUuUmVhZCwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICdDbGlja2VkJywKICAgICAgICAgICAgICAgIHR5cGU6IEFjdGl2aXR5VHlwZS5MaW5rLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0Rvd25sb2FkZWQnLAogICAgICAgICAgICAgICAgdHlwZTogQWN0aXZpdHlUeXBlLkF0dGFjaG1lbnQsCiAgICAgICAgICAgIH0sCiAgICAgICAgXTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgbGlzdEhlaWdodDogd2luZG93LmlubmVySGVpZ2h0IC0gSEVBREVSX0hFSUdIVCwKICAgICAgICAgICAgZmlsdGVyOiBwcm9wcy5zZWFyY2hNZXRhLnR5cGUsCiAgICAgICAgICAgIHF1ZXJ5OiBwcm9wcy5zZWFyY2hNZXRhLnF1ZXJ5IHx8ICcnLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQWN0aXZpdHlGZWVkLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBhY3Rpdml0aWVzID0gX2EuYWN0aXZpdGllcywgc2VhcmNoQWN0aXZpdHlGZWVkID0gX2Euc2VhcmNoQWN0aXZpdHlGZWVkOwogICAgICAgIGxvZ0FtcGxpdHVkZUV2ZW50KEFtcGxpdHVkZUV2ZW50cy5WaWV3QWN0aXZpdHlGZWVkKTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUpOwogICAgICAgIHRoaXMuaGFuZGxlUmVzaXplKCk7CiAgICAgICAgaWYgKGFjdGl2aXRpZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIHNlYXJjaEFjdGl2aXR5RmVlZCgnJyk7CiAgICAgICAgfQogICAgfTsKICAgIEFjdGl2aXR5RmVlZC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKTsKICAgIH07CiAgICBBY3Rpdml0eUZlZWQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBhY3Rpdml0aWVzID0gX2EuYWN0aXZpdGllcywgYWN0aXZpdHlGZWVkTG9hZGluZyA9IF9hLmFjdGl2aXR5RmVlZExvYWRpbmcsIGZlYXR1cmVzID0gX2EuZmVhdHVyZXM7CiAgICAgICAgdmFyIF9iID0gdGhpcy5zdGF0ZSwgZmlsdGVyID0gX2IuZmlsdGVyLCBsaXN0SGVpZ2h0ID0gX2IubGlzdEhlaWdodCwgcXVlcnkgPSBfYi5xdWVyeTsKICAgICAgICB2YXIgaXNFbXB0eSA9ICFhY3Rpdml0eUZlZWRMb2FkaW5nICYmICFhY3Rpdml0aWVzLmxlbmd0aCAmJiAhZmlsdGVyICYmICFxdWVyeTsKICAgICAgICB2YXIgQWN0aXZpdHlDZWxsQ29ubmVjdCA9IEFjdGl2aXR5Q2VsbDsKICAgICAgICB2YXIgZmlsdGVyVGl0bGUgPSBmaWx0ZXIgJiYgdGhpcy5maWx0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi50eXBlID09PSBmaWx0ZXI7IH0pWzBdLnRpdGxlCiAgICAgICAgICAgIHx8ICdBbGwgQWN0aXZpdHknOwogICAgICAgIHZhciBhY3Rpdml0eUZlZWRVcGdyYWRlRGVzY3JpcHRpb24gPSAnVG8gdmlldyBhIHJlYWwtdGltZSBmZWVkIHdobyBpbnRlcmFjdHMgd2l0aCB5b3VyIGVtYWlscywgdXBncmFkZSB0byBhIHBhaWQgcGxhbi4nOwogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ2FjdGl2aXR5LWZlZWQnLCB7ICdzaG91bGQtdXBncmFkZSc6ICFmZWF0dXJlcy5hY3Rpdml0eUZlZWQgfSkgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJoZWFkaW5nIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDUiLCBudWxsLCAiQWN0aXZpdHkgRmVlZCIpLAogICAgICAgICAgICAgICAgIWlzRW1wdHkgJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBvbkNsaWNrOiB0aGlzLnNob3dGaWx0ZXIgfSwKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJUaXRsZSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERpc2Nsb3N1cmUsIHsgY2xhc3NOYW1lOiAiZGlzY2xvc3VyZSIgfSkpKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGaWx0ZXJQb3BvdmVyLCB7IHJlZjogdGhpcy5oYW5kbGVSZWYsIGZpbHRlcnM6IHRoaXMuZmlsdGVycywgb25GaWx0ZXJTZWxlY3Q6IHRoaXMuaGFuZGxlRmlsdGVyU2VsZWN0LCBzZWxlY3RlZEZpbHRlcjogZmlsdGVyVGl0bGUgfSksCiAgICAgICAgICAgICFpc0VtcHR5ICYmIFsKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VhcmNoSW5wdXQsIHsgb25TZWFyY2g6IHRoaXMuaGFuZGxlU2VhcmNoLCBzZWFyY2g6IHF1ZXJ5LCBkZWZhdWx0VmFsdWU6IHF1ZXJ5LCBzZWFyY2hPbktleURvd246IHRydWUsIGtleTogInNlYXJjaC1pbnB1dCIsIHBsYWNlaG9sZGVyOiAiU2VhcmNoIGJ5IGVtYWlsIG9yIHN1YmplY3QiIH0pLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChJbmZpbml0ZSwgeyBjbGFzc05hbWU6ICJhY3Rpdml0aWVzIiwga2V5OiAiYWN0aXZpdGllcyIsIGVsZW1lbnRIZWlnaHQ6IENFTExfSEVJR0hULCBjb250YWluZXJIZWlnaHQ6IGxpc3RIZWlnaHQgfSwgYWN0aXZpdGllcwogICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGFjdGl2aXR5KSB7IHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEFjdGl2aXR5Q2VsbENvbm5lY3QsIHsgYWN0aXZpdHk6IGFjdGl2aXR5LCBrZXk6IGFjdGl2aXR5LmlkIH0pOyB9KSksCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGlzRW1wdHkgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChFbXB0eVN0YXRlLCBudWxsKSwKICAgICAgICAgICAgIWZlYXR1cmVzLmFjdGl2aXR5RmVlZCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInVwZ3JhZGUiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFVwZ3JhZGVQcm9tcHQsIHsgdGl0bGU6ICJBY3Rpdml0eSBGZWVkIiwgZGVzY3JpcHRpb246IGFjdGl2aXR5RmVlZFVwZ3JhZGVEZXNjcmlwdGlvbiB9KSkpKTsKICAgIH07CiAgICByZXR1cm4gQWN0aXZpdHlGZWVkOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgQWN0aXZpdHlGZWVkOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ActivityFeed/ActivityFeed.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ActivityFeed/ActivityFeed.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport Infinite from 'react-infinite';\nimport EmptyState from './components/EmptyState';\nimport FilterPopover from './components/ActivityFeedFilterPopover';\nimport Disclosure from '@src/components/Icons/Disclosure.svg';\nimport ActivityCell from '@src/components/Cells/ActivityCell';\nimport SearchInput from '@src/components/Form/SearchInput/SearchInput';\n\nimport { Activity, ActivityType, Features } from '@src/types';\n\nimport './ActivityFeed.scss';\n\nimport UpgradePrompt from '@src/components/Base/UpgradePrompt/UpgradePrompt';\nimport { ActivityFeedSearchMeta } from '@src/ducks/activityFeed';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface Props {\n  activities: Activity[];\n  activityFeedLoading: boolean;\n  features: Features;\n  searchMeta: ActivityFeedSearchMeta;\n}\n\ninterface State {\n  filter?: ActivityType;\n  listHeight: number;\n  query: string;\n}\n\nexport interface DispatchProps {\n  searchActivityFeed: (query: string, filter?: ActivityType) => void;\n}\n\nconst CELL_HEIGHT = 62;\nconst HEADER_HEIGHT = 149;\n\nclass ActivityFeed extends React.PureComponent<Props & DispatchProps, State> {\n  private popover: FilterPopover;\n  private filters: Array<{ title: string, type?: ActivityType }>;\n\n  constructor(props: Props & DispatchProps) {\n    super();\n\n    this.filters = [\n      {\n        title: 'All Activity',\n      },\n      {\n        title: 'Opened',\n        type: ActivityType.Read,\n      },\n      {\n        title: 'Clicked',\n        type: ActivityType.Link,\n      },\n      {\n        title: 'Downloaded',\n        type: ActivityType.Attachment,\n      },\n    ];\n\n    this.state = {\n      listHeight: window.innerHeight - HEADER_HEIGHT,\n      filter: props.searchMeta.type,\n      query: props.searchMeta.query || '',\n    };\n  }\n\n  showFilter = () => {\n    this.popover.show();\n  }\n\n  handleFilterSelect = (filter: ActivityType) => {\n    const { searchActivityFeed } = this.props;\n    const { query } = this.state;\n\n    this.setState(\n      { filter: filter || undefined },\n      () => searchActivityFeed(query, this.state.filter),\n    );\n    this.popover.toggle();\n  }\n\n  handleRef = (ref: FilterPopover) => {\n    this.popover = ref;\n  }\n\n  componentDidMount() {\n    const { activities, searchActivityFeed } = this.props;\n    logAmplitudeEvent(AmplitudeEvents.ViewActivityFeed);\n\n    window.addEventListener('resize', this.handleResize);\n    this.handleResize();\n\n    if (activities.length === 0) {\n      searchActivityFeed('');\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  handleResize = () => {\n    const mainApp = document.getElementsByClassName('right-sidebar');\n    const windowHeight = mainApp[0] ? (mainApp[0] as HTMLElement).offsetHeight : window.innerHeight;\n    this.setState({ listHeight: windowHeight - HEADER_HEIGHT });\n  }\n\n  handleSearch = (query: string, complete: boolean) => {\n    const { filter } = this.state;\n\n    this.setState({ query }, () => {\n      if (complete) {\n        this.props.searchActivityFeed(query, filter);\n      }\n    });\n  }\n\n  render() {\n    const { activities, activityFeedLoading, features } = this.props;\n    const { filter, listHeight, query } = this.state;\n    const isEmpty = !activityFeedLoading && !activities.length && !filter && !query;\n    const ActivityCellConnect = ActivityCell as any;\n    const filterTitle = filter && this.filters.filter(f => f.type === filter)[0].title\n      || 'All Activity';\n    const activityFeedUpgradeDescription =\n      'To view a real-time feed who interacts with your emails, upgrade to a paid plan.';\n\n    return (\n      <div className={classnames('activity-feed', { 'should-upgrade': !features.activityFeed })}>\n        <div className=\"heading\">\n          <h5>Activity Feed</h5>\n          {!isEmpty && <button onClick={this.showFilter}>\n            {filterTitle}\n            <Disclosure className=\"disclosure\"/>\n          </button>}\n        </div>\n        <FilterPopover\n          ref={this.handleRef}\n          filters={this.filters}\n          onFilterSelect={this.handleFilterSelect}\n          selectedFilter={filterTitle}\n        />\n        {!isEmpty && [\n          <SearchInput\n            onSearch={this.handleSearch}\n            search={query}\n            defaultValue={query}\n            searchOnKeyDown={true}\n            key=\"search-input\"\n            placeholder=\"Search by email or subject\"\n          />,\n          <Infinite\n            className=\"activities\"\n            key=\"activities\"\n            elementHeight={CELL_HEIGHT}\n            containerHeight={listHeight}\n          >\n            {activities\n              .map(activity => <ActivityCellConnect\n                activity={activity}\n                key={activity.id}\n              />)\n            }\n          </Infinite>,\n        ]}\n        {isEmpty && <EmptyState />}\n        {!features.activityFeed && <div className=\"upgrade\">\n          <UpgradePrompt\n            title=\"Activity Feed\"\n            description={activityFeedUpgradeDescription}\n          />\n        </div>}\n      </div>\n    );\n  }\n}\n\nexport default ActivityFeed;\n"]}]}