{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/SubjectPane/SubjectPane.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/SubjectPane/SubjectPane.tsx","mtime":1675280254002},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IEVkaXRvciwgRWRpdG9yU3RhdGUsIENvbnRlbnRTdGF0ZSwgQ29tcG9zaXRlRGVjb3JhdG9yLCBTZWxlY3Rpb25TdGF0ZSwgTW9kaWZpZXIsIH0gZnJvbSAnZHJhZnQtanMnOwppbXBvcnQgVGVtcGxhdGVUb2tlbiBmcm9tICcuL1RlbXBsYXRlVG9rZW4nOwppbXBvcnQgUG9wb3V0IGZyb20gJ0BzcmMvY29tcG9uZW50cy9JY29ucy9Qb3BvdXQuc3ZnJzsKaW1wb3J0ICcuL1N1YmplY3RQYW5lLnNjc3MnOwppbXBvcnQgVmFyaWFibGVQb3BvdmVyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Db250ZW50RWRpdGFibGUvVmFyaWFibGVQb3BvdmVyJzsKaW1wb3J0IEhvdmVyVGlwIGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL0hvdmVyVGlwJzsKdmFyIFN1YmplY3RQYW5lID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFN1YmplY3RQYW5lLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU3ViamVjdFBhbmUoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5jcmVhdGVDb250ZW50U3RhdGUgPSBmdW5jdGlvbiAoc3ViamVjdCkgewogICAgICAgICAgICB2YXIgdmFyaWFibGVzID0gX3RoaXMucHJvcHMudmFyaWFibGVzOwogICAgICAgICAgICB2YXIgc3ViamVjdEJsb2NrcyA9IHN1YmplY3Quc3BsaXQoJ3t7Jyk7CiAgICAgICAgICAgIHZhciB0ZXh0ID0gJyc7CiAgICAgICAgICAgIHZhciBlbnRpdHlSYW5nZXMgPSBbXTsKICAgICAgICAgICAgdmFyIG9mZnNldDsKICAgICAgICAgICAgdmFyIGxlbmd0aDsKICAgICAgICAgICAgdmFyIGtleTsKICAgICAgICAgICAgdmFyIHRlbXBsYXRlVmFyaWFibGU7CiAgICAgICAgICAgIHZhciBkYXRhOwogICAgICAgICAgICB2YXIgYnJhY2tldFBvczsKICAgICAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICAgICAgdmFyIGVudGl0eUluZm87CiAgICAgICAgICAgIHN1YmplY3RCbG9ja3MuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2spIHsKICAgICAgICAgICAgICAgIGJyYWNrZXRQb3MgPSBibG9jay5pbmRleE9mKCd9fScpOwogICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGV4dC5sZW5ndGg7CiAgICAgICAgICAgICAgICBrZXkgPSBpbmRleDsKICAgICAgICAgICAgICAgIGlmIChicmFja2V0UG9zID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVZhcmlhYmxlID0gYmxvY2suc2xpY2UoMCwgYnJhY2tldFBvcyk7CiAgICAgICAgICAgICAgICAgICAgLy8gSWRlbnRpZnkgaWYgcGxhY2Vob2xkZXIgaXMgYSB2YWxpZCB2YXJpYWJsZQogICAgICAgICAgICAgICAgICAgIHZhciBhbGxWYXJpYWJsZXMgPSB2YXJpYWJsZXMgfHwgW107CiAgICAgICAgICAgICAgICAgICAgdmFyIGludmFsaWRWYXJpYWJsZSA9IGFsbFZhcmlhYmxlcy5pbmRleE9mKHRlbXBsYXRlVmFyaWFibGUpID09PSAtMTsKICAgICAgICAgICAgICAgICAgICAvLyBhY2NvdW50IGZvciByZW1vdmFsIG9mIGJyYWNrZXRzCiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gdGVtcGxhdGVWYXJpYWJsZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0ZW1wbGF0ZVZhcmlhYmxlICsKICAgICAgICAgICAgICAgICAgICAgICAgKGJyYWNrZXRQb3MgPT09IGJsb2NrLmxlbmd0aCAtIDEgPyAnJyA6IGJsb2NrLnNsaWNlKGJyYWNrZXRQb3MgKyAyKSk7CiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGU6IHRlbXBsYXRlVmFyaWFibGUsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgc2V0IGludmFsaWQgd2hlbiB2YXJpYWJsZXMgYXJlIHNldCAoaW4gYSBzZXF1ZW5jZSBtZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkOiB2YXJpYWJsZXMgJiYgaW52YWxpZFZhcmlhYmxlIHx8IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGVudGl0eUluZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdUT0tFTicsCiAgICAgICAgICAgICAgICAgICAgICAgIG11dGFiaWxpdHk6ICdJTU1VVEFCTEUnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZW50aXR5UmFuZ2VzLnB1c2goeyBrZXk6IGtleSwgb2Zmc2V0OiBvZmZzZXQsIGxlbmd0aDogbGVuZ3RoLCBlbnRpdHlJbmZvOiBlbnRpdHlJbmZvIH0pOwogICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IGJsb2NrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gY3JlYXRlIGNvbnRlbnQgc3RhdGUKICAgICAgICAgICAgdmFyIGNvbnRlbnRTdGF0ZSA9IENvbnRlbnRTdGF0ZS5jcmVhdGVGcm9tVGV4dCh0ZXh0KTsKICAgICAgICAgICAgLy8gY3JlYXRlIGVudGl0aWVzCiAgICAgICAgICAgIHZhciBzZWxlY3Rpb247CiAgICAgICAgICAgIGVudGl0eVJhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChyYW5nZSkgewogICAgICAgICAgICAgICAgY29udGVudFN0YXRlID0gY29udGVudFN0YXRlLmNyZWF0ZUVudGl0eShyYW5nZS5lbnRpdHlJbmZvLnR5cGUsIHJhbmdlLmVudGl0eUluZm8ubXV0YWJpbGl0eSwgcmFuZ2UuZW50aXR5SW5mby5kYXRhKTsKICAgICAgICAgICAgICAgIHZhciBibG9ja0tleSA9IGNvbnRlbnRTdGF0ZS5nZXRMYXN0QmxvY2soKS5nZXRLZXkoKTsKICAgICAgICAgICAgICAgIHNlbGVjdGlvbiA9IFNlbGVjdGlvblN0YXRlLmNyZWF0ZUVtcHR5KGJsb2NrS2V5KTsKICAgICAgICAgICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGlvbi5tZXJnZSh7CiAgICAgICAgICAgICAgICAgICAgYW5jaG9yS2V5OiBibG9ja0tleSwKICAgICAgICAgICAgICAgICAgICBmb2N1c0tleTogYmxvY2tLZXksCiAgICAgICAgICAgICAgICAgICAgYW5jaG9yT2Zmc2V0OiByYW5nZS5vZmZzZXQsCiAgICAgICAgICAgICAgICAgICAgZm9jdXNPZmZzZXQ6IHJhbmdlLm9mZnNldCArIHJhbmdlLmxlbmd0aCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29udGVudFN0YXRlID0gTW9kaWZpZXIuYXBwbHlFbnRpdHkoY29udGVudFN0YXRlLCBzZWxlY3Rpb24sIGNvbnRlbnRTdGF0ZS5nZXRMYXN0Q3JlYXRlZEVudGl0eUtleSgpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBjb250ZW50U3RhdGU7CiAgICAgICAgfTsKICAgICAgICAvLyBIQUNLKFNISU4pIEN1c3RvbSBmb2N1cyBiZWhhdmlvciBpbiB0aGUgY2FzZSB3aGVyZSB0aGVyZSBpcyBvbmx5IGEgcGxhY2Vob2xkZXIKICAgICAgICBfdGhpcy5oYW5kbGVDbGljayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmICghX3RoaXMucHJvcHMuc3ViamVjdCkgewogICAgICAgICAgICAgICAgX3RoaXMuZm9jdXMoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU3RyYXRlZ3kgPSBmdW5jdGlvbiAoY29udGVudEJsb2NrLCBjYWxsYmFjaywgY29udGVudFN0YXRlKSB7CiAgICAgICAgICAgIGNvbnRlbnRCbG9jay5maW5kRW50aXR5UmFuZ2VzKGZ1bmN0aW9uIChjaGFyYWN0ZXIpIHsKICAgICAgICAgICAgICAgIHZhciBlbnRpdHlLZXkgPSBjaGFyYWN0ZXIuZ2V0RW50aXR5KCk7CiAgICAgICAgICAgICAgICBpZiAoZW50aXR5S2V5ID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRTdGF0ZS5nZXRFbnRpdHkoZW50aXR5S2V5KS5nZXRUeXBlKCkgPT09ICdUT0tFTic7CiAgICAgICAgICAgIH0sIGNhbGxiYWNrKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnNlbGVjdFRlbXBsYXRlVmFyaWFibGUgPSBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAgICAgdmFyIGNvbnRlbnRTdGF0ZSA9IF90aGlzLnN0YXRlLmVkaXRvclN0YXRlLmdldEN1cnJlbnRDb250ZW50KCk7CiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7CiAgICAgICAgICAgIHZhciBzdGFydDsKICAgICAgICAgICAgdmFyIGVuZDsKICAgICAgICAgICAgY29udGVudFN0YXRlLmdldExhc3RCbG9jaygpLmZpbmRFbnRpdHlSYW5nZXMoZnVuY3Rpb24gKGNoYXJhY3RlcikgewogICAgICAgICAgICAgICAgdmFyIGtleSA9IGNoYXJhY3Rlci5nZXRFbnRpdHkoKTsKICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHMsIGUpIHsKICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHM7CiAgICAgICAgICAgICAgICAgICAgZW5kID0gZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoc3RhcnQgIT09IHVuZGVmaW5lZCAmJiBlbmQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdmFyIGtleSA9IGNvbnRlbnRTdGF0ZS5nZXRCbG9ja01hcCgpLmxhc3QoKS5nZXRLZXkoKTsKICAgICAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBuZXcgU2VsZWN0aW9uU3RhdGUoewogICAgICAgICAgICAgICAgICAgIGFuY2hvcktleToga2V5LAogICAgICAgICAgICAgICAgICAgIGFuY2hvck9mZnNldDogc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgZm9jdXNLZXk6IGtleSwKICAgICAgICAgICAgICAgICAgICBmb2N1c09mZnNldDogZW5kLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gRWRpdG9yU3RhdGUuZm9yY2VTZWxlY3Rpb24oX3RoaXMuc3RhdGUuZWRpdG9yU3RhdGUsIHNlbGVjdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUVkaXRvckNoYW5nZSA9IGZ1bmN0aW9uIChlZGl0b3JTdGF0ZSkgewogICAgICAgICAgICB2YXIgb2xkRWRpdG9yU3RhdGUgPSBfdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZTsKICAgICAgICAgICAgdmFyIHByZXZDdXJzb3JQb3NpdGlvbiA9IG9sZEVkaXRvclN0YXRlLmdldFNlbGVjdGlvbigpLmdldEFuY2hvck9mZnNldCgpOwogICAgICAgICAgICB2YXIgY3Vyc29yUG9zaXRpb24gPSBlZGl0b3JTdGF0ZS5nZXRTZWxlY3Rpb24oKS5nZXRBbmNob3JPZmZzZXQoKTsKICAgICAgICAgICAgdmFyIGNvbnRlbnRTdGF0ZSA9IGVkaXRvclN0YXRlLmdldEN1cnJlbnRDb250ZW50KCk7CiAgICAgICAgICAgIHZhciBibG9jayA9IGNvbnRlbnRTdGF0ZS5nZXRMYXN0QmxvY2soKTsKICAgICAgICAgICAgdmFyIGZpcnN0Rm9jdXMgPSAhX3RoaXMuc3RhdGUuZWRpdG9yU3RhdGUuZ2V0U2VsZWN0aW9uKCkuZ2V0SGFzRm9jdXMoKSAmJgogICAgICAgICAgICAgICAgZWRpdG9yU3RhdGUuZ2V0U2VsZWN0aW9uKCkuZ2V0SGFzRm9jdXMoKTsKICAgICAgICAgICAgdmFyIGVudGl0eUtleTsKICAgICAgICAgICAgaWYgKG9sZEVkaXRvclN0YXRlLmdldFNlbGVjdGlvbigpLmdldEFuY2hvck9mZnNldCgpCiAgICAgICAgICAgICAgICA9PT0gb2xkRWRpdG9yU3RhdGUuZ2V0U2VsZWN0aW9uKCkuZ2V0Rm9jdXNPZmZzZXQoKSkgewogICAgICAgICAgICAgICAgZW50aXR5S2V5ID0gYmxvY2suZ2V0RW50aXR5QXQocHJldkN1cnNvclBvc2l0aW9uIDwgY3Vyc29yUG9zaXRpb24gPwogICAgICAgICAgICAgICAgICAgIGN1cnNvclBvc2l0aW9uIC0gMSA6IGN1cnNvclBvc2l0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbmV3RWRpdG9yU3RhdGUgPSBlZGl0b3JTdGF0ZTsKICAgICAgICAgICAgaWYgKGVudGl0eUtleSAmJiAhZmlyc3RGb2N1cyAmJiBwcmV2Q3Vyc29yUG9zaXRpb24gIT09IGN1cnNvclBvc2l0aW9uKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RhcnRfMTsKICAgICAgICAgICAgICAgIHZhciBlbmRfMTsKICAgICAgICAgICAgICAgIGNvbnRlbnRTdGF0ZS5nZXRMYXN0QmxvY2soKS5maW5kRW50aXR5UmFuZ2VzKGZ1bmN0aW9uIChjaGFyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eSA9IGNoYXIuZ2V0RW50aXR5KCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGl0eSA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHkgPT09IGVudGl0eUtleTsKICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChzLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRfMSA9IHM7CiAgICAgICAgICAgICAgICAgICAgZW5kXzEgPSBlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2YXIga2V5ID0gY29udGVudFN0YXRlLmdldEJsb2NrTWFwKCkubGFzdCgpLmdldEtleSgpOwogICAgICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IG5ldyBTZWxlY3Rpb25TdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgYW5jaG9yS2V5OiBrZXksCiAgICAgICAgICAgICAgICAgICAgYW5jaG9yT2Zmc2V0OiBzdGFydF8xLAogICAgICAgICAgICAgICAgICAgIGZvY3VzS2V5OiBrZXksCiAgICAgICAgICAgICAgICAgICAgZm9jdXNPZmZzZXQ6IGVuZF8xLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBuZXdFZGl0b3JTdGF0ZSA9IEVkaXRvclN0YXRlLmZvcmNlU2VsZWN0aW9uKG5ld0VkaXRvclN0YXRlLCBzZWxlY3Rpb24pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRQbGFjZWhvbGRlckluZGV4ID0gdW5kZWZpbmVkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZWRpdG9yU3RhdGU6IG5ld0VkaXRvclN0YXRlIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLm9uQ2hhbmdlKF90aGlzLmdldFBsYWluVGV4dChfdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZSkpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmdldFBsYWluVGV4dCA9IGZ1bmN0aW9uIChlZGl0b3JTdGF0ZSkgewogICAgICAgICAgICB2YXIgY29udGVudFN0YXRlID0gZWRpdG9yU3RhdGUuZ2V0Q3VycmVudENvbnRlbnQoKTsKICAgICAgICAgICAgdmFyIHBsYWluVGV4dCA9IGNvbnRlbnRTdGF0ZS5nZXRQbGFpblRleHQoKTsKICAgICAgICAgICAgdmFyIGxhc3RFbmQgPSAwOwogICAgICAgICAgICB2YXIgdGV4dCA9ICcnOwogICAgICAgICAgICBjb250ZW50U3RhdGUuZ2V0TGFzdEJsb2NrKCkuZmluZEVudGl0eVJhbmdlcyhmdW5jdGlvbiAoY2hhcikgewogICAgICAgICAgICAgICAgaWYgKGNoYXIuZ2V0RW50aXR5KCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHsKICAgICAgICAgICAgICAgIGlmICghbGFzdEVuZCkgewogICAgICAgICAgICAgICAgICAgIHRleHQgKz0gcGxhaW5UZXh0LnNsaWNlKDAsIHN0YXJ0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRleHQgKz0gcGxhaW5UZXh0LnNsaWNlKGxhc3RFbmQsIHN0YXJ0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRleHQgKz0gInt7IiArIHBsYWluVGV4dC5zbGljZShzdGFydCwgZW5kKSArICJ9fSI7CiAgICAgICAgICAgICAgICBsYXN0RW5kID0gZW5kOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGV4dCArPSBwbGFpblRleHQuc2xpY2UobGFzdEVuZCk7CiAgICAgICAgICAgIHJldHVybiB0ZXh0OwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5lZGl0b3IgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5mb2N1cyA9IGZ1bmN0aW9uIChzZWxlY3RGaXJzdFBsYWNlaG9sZGVyLCBzZWxlY3RMYXN0UGxhY2Vob2xkZXIpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLnRpbWVvdXQpOwogICAgICAgICAgICB2YXIgaGFuZGxlZDsKICAgICAgICAgICAgdmFyIHNldEZvY3VzVGltZW91dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLnRpbWVvdXQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5lZGl0b3IuZm9jdXMoKTsgfSwgMCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChzZWxlY3RGaXJzdFBsYWNlaG9sZGVyIHx8IHNlbGVjdExhc3RQbGFjZWhvbGRlcikgewogICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRQbGFjZWhvbGRlckluZGV4ID0gc2VsZWN0Rmlyc3RQbGFjZWhvbGRlciA/IDAgOiBfdGhpcy5nZXRMYXN0RW50aXR5SW5kZXgoKTsKICAgICAgICAgICAgICAgIHZhciBlZGl0b3JTdGF0ZSA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zZWxlY3RlZFBsYWNlaG9sZGVySW5kZXggIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIGVkaXRvclN0YXRlID0gX3RoaXMuc2VsZWN0VGVtcGxhdGVWYXJpYWJsZShfdGhpcy5zZWxlY3RlZFBsYWNlaG9sZGVySW5kZXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGVkaXRvclN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBlZGl0b3JTdGF0ZTogZWRpdG9yU3RhdGUgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRGb2N1c1RpbWVvdXQoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWhhbmRsZWQpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBlZGl0b3JTdGF0ZTogRWRpdG9yU3RhdGUubW92ZUZvY3VzVG9FbmQoX3RoaXMuc3RhdGUuZWRpdG9yU3RhdGUpLAogICAgICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVRhYlByZXNzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIG9uVGFiUHJlc3MgPSBfdGhpcy5wcm9wcy5vblRhYlByZXNzOwogICAgICAgICAgICB2YXIgZWRpdG9yU3RhdGU7CiAgICAgICAgICAgIGlmICghZS5zaGlmdEtleSkgewogICAgICAgICAgICAgICAgaWYgKF90aGlzLnNlbGVjdGVkUGxhY2Vob2xkZXJJbmRleCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRQbGFjZWhvbGRlckluZGV4ID0gLTE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5zZWxlY3RlZFBsYWNlaG9sZGVySW5kZXggKz0gMTsKICAgICAgICAgICAgICAgIGVkaXRvclN0YXRlID0gX3RoaXMuc2VsZWN0VGVtcGxhdGVWYXJpYWJsZShfdGhpcy5zZWxlY3RlZFBsYWNlaG9sZGVySW5kZXgpOwogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlLnNoaWZ0S2V5KSB7CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2VsZWN0ZWRQbGFjZWhvbGRlckluZGV4ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWxlY3RlZFBsYWNlaG9sZGVySW5kZXggPSBfdGhpcy5nZXRMYXN0RW50aXR5SW5kZXgoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zZWxlY3RlZFBsYWNlaG9sZGVySW5kZXggIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNlbGVjdGVkUGxhY2Vob2xkZXJJbmRleCAtPSAxOwogICAgICAgICAgICAgICAgICAgIGVkaXRvclN0YXRlID0gX3RoaXMuc2VsZWN0VGVtcGxhdGVWYXJpYWJsZShfdGhpcy5zZWxlY3RlZFBsYWNlaG9sZGVySW5kZXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlZGl0b3JTdGF0ZSkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBlZGl0b3JTdGF0ZTogZWRpdG9yU3RhdGUgfSk7CiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRQbGFjZWhvbGRlckluZGV4ID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgZS5wZXJzaXN0KCk7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGVkaXRvclN0YXRlOiBFZGl0b3JTdGF0ZS5tb3ZlRm9jdXNUb0VuZChfdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZSkgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gb25UYWJQcmVzcyAmJiBvblRhYlByZXNzKGUpOyB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gZG8gbm90aGluZyBvbiByZXR1cm4KICAgICAgICBfdGhpcy5oYW5kbGVSZXR1cm4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAnaGFuZGxlZCc7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5nZXRMYXN0RW50aXR5SW5kZXggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjb250ZW50U3RhdGUgPSBfdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZS5nZXRDdXJyZW50Q29udGVudCgpOwogICAgICAgICAgICB2YXIgY29udGVudEJsb2NrID0gY29udGVudFN0YXRlLmdldExhc3RCbG9jaygpOwogICAgICAgICAgICB2YXIgY291bnQgPSAwOwogICAgICAgICAgICBjb250ZW50QmxvY2suZmluZEVudGl0eVJhbmdlcyhmdW5jdGlvbiAoY2hhcikgeyByZXR1cm4gISFjaGFyLmdldEVudGl0eSgpOyB9LCBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgeyByZXR1cm4gY291bnQgKz0gMTsgfSk7CiAgICAgICAgICAgIGlmIChjb3VudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50IC0gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlVmFyaWFibGVTZWxlY3QgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHN1YmplY3QgPSBfYS5zdWJqZWN0LCBvbkNoYW5nZSA9IF9hLm9uQ2hhbmdlOwogICAgICAgICAgICBvbkNoYW5nZShzdWJqZWN0ICsgKCJ7eyIgKyB2YWx1ZSArICJ9fSIpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNsaWNrT3V0c2lkZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmICghX3RoaXMuY29udGFpbmVyUmVmLmNvbnRhaW5zKGUudGFyZ2V0KSkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBmb2N1czogZmFsc2UgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNvbnRhaW5lclJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyUmVmID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRm9jdXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZm9jdXM6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVQb3BvdXRDbGljayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBwb3BvdXRMaW5rID0gX3RoaXMucHJvcHMucG9wb3V0TGluazsKICAgICAgICAgICAgaWYgKHBvcG91dExpbmspIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB3aW5kb3cub3Blbihwb3BvdXRMaW5rLCAnX2JsYW5rJywgJ2hlaWdodD01MDAsd2lkdGg9ODAwJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVBhc3RlZFRleHQgPSBmdW5jdGlvbiAodGV4dCkgewogICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gX3RoaXMuc3RhdGUuZWRpdG9yU3RhdGU7CiAgICAgICAgICAgIHZhciBuZXdDb250ZW50U3RhdGUgPSBNb2RpZmllci5yZXBsYWNlVGV4dChjdXJyZW50U3RhdGUuZ2V0Q3VycmVudENvbnRlbnQoKSwgY3VycmVudFN0YXRlLmdldFNlbGVjdGlvbigpLCB0ZXh0KTsKICAgICAgICAgICAgLy8gSGFuZGxlIHBhc3RlIHRoZW4gdXBkYXRlIHN1YmplY3QKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgZWRpdG9yU3RhdGU6IEVkaXRvclN0YXRlLnB1c2goY3VycmVudFN0YXRlLCBuZXdDb250ZW50U3RhdGUsICdpbnNlcnQtY2hhcmFjdGVycycpLAogICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wcm9wcy5vbkNoYW5nZShfdGhpcy5nZXRQbGFpblRleHQoX3RoaXMuc3RhdGUuZWRpdG9yU3RhdGUpKTsgfSk7CiAgICAgICAgICAgIHJldHVybiAnaGFuZGxlZCc7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5jb21wb3NpdGVEZWNvcmF0b3IgPSBuZXcgQ29tcG9zaXRlRGVjb3JhdG9yKFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc3RyYXRlZ3k6IF90aGlzLmhhbmRsZVN0cmF0ZWd5LAogICAgICAgICAgICAgICAgY29tcG9uZW50OiBUZW1wbGF0ZVRva2VuLAogICAgICAgICAgICB9LAogICAgICAgIF0pOwogICAgICAgIF90aGlzLnN0YXRlID0gewogICAgICAgICAgICBlZGl0b3JTdGF0ZTogRWRpdG9yU3RhdGUuY3JlYXRlRW1wdHkoKSwKICAgICAgICAgICAgZm9jdXM6IGZhbHNlLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU3ViamVjdFBhbmUucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHN1YmplY3QgPSBfYS5zdWJqZWN0LCB2YXJpYWJsZXMgPSBfYS52YXJpYWJsZXM7CiAgICAgICAgaWYgKHN1YmplY3QubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBjb250ZW50U3RhdGUgPSB0aGlzLmNyZWF0ZUNvbnRlbnRTdGF0ZShzdWJqZWN0KTsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBlZGl0b3JTdGF0ZTogRWRpdG9yU3RhdGUuY3JlYXRlV2l0aENvbnRlbnQoY29udGVudFN0YXRlLCB0aGlzLmNvbXBvc2l0ZURlY29yYXRvciksCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAodmFyaWFibGVzKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGlja091dHNpZGUpOwogICAgICAgIH0KICAgIH07CiAgICBTdWJqZWN0UGFuZS5wcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiAobmV4dFByb3BzKSB7CiAgICAgICAgdmFyIGVkaXRvclN0YXRlID0gdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZTsKICAgICAgICBpZiAobmV4dFByb3BzLnN1YmplY3QgIT09IHRoaXMuZ2V0UGxhaW5UZXh0KGVkaXRvclN0YXRlKSAmJgogICAgICAgICAgICAhZWRpdG9yU3RhdGUuZ2V0U2VsZWN0aW9uKCkuZ2V0SGFzRm9jdXMoKSkgewogICAgICAgICAgICAvLyBEbyBub3QgZG8gYW55dGhpbmcgaWYgZWRpdG9yIGlzIGN1cnJlbnRseSBlZGl0aW5nCiAgICAgICAgICAgIGlmIChlZGl0b3JTdGF0ZS5pc0luQ29tcG9zaXRpb25Nb2RlKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgY29udGVudFN0YXRlID0gdGhpcy5jcmVhdGVDb250ZW50U3RhdGUobmV4dFByb3BzLnN1YmplY3QpOwogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZWRpdG9yU3RhdGU6IEVkaXRvclN0YXRlLmNyZWF0ZVdpdGhDb250ZW50KGNvbnRlbnRTdGF0ZSwgdGhpcy5jb21wb3NpdGVEZWNvcmF0b3IpIH0pOwogICAgICAgIH0KICAgIH07CiAgICBTdWJqZWN0UGFuZS5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMudGltZW91dCkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMucHJvcHMudmFyaWFibGVzKSB7CiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGlja091dHNpZGUpOwogICAgICAgIH0KICAgIH07CiAgICAvLyBOT1RFKFNISU4pOiBEcmFmdEpTIEVkaXRvciBzcGVsbGNoZWNrIGRvZXMgbm90IGhhdmUgc3VwcG9ydCBmb3IgV2luZG93cwogICAgLy8gaHR0cHM6Ly9kcmFmdGpzLm9yZy9kb2NzL2FwaS1yZWZlcmVuY2UtZWRpdG9yLmh0bWwjc3BlbGxjaGVjawogICAgU3ViamVjdFBhbmUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBzaG93UG9wb3V0ID0gX2Euc2hvd1BvcG91dCwgcmVhZE9ubHkgPSBfYS5yZWFkT25seSwgdmFyaWFibGVzID0gX2EudmFyaWFibGVzLCBvbkNsaWNrID0gX2Eub25DbGljazsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic3ViamVjdC1wYW5lIiwgcmVmOiB0aGlzLmhhbmRsZUNvbnRhaW5lclJlZiwgb25DbGljazogb25DbGljayB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1haW4iLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUNsaWNrIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEVkaXRvciwgeyBlZGl0b3JTdGF0ZTogdGhpcy5zdGF0ZS5lZGl0b3JTdGF0ZSwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRWRpdG9yQ2hhbmdlLCBwbGFjZWhvbGRlcjogIkVudGVyIFN1YmplY3QuLi4iLCByZWY6IHRoaXMuaGFuZGxlUmVmLCBvblRhYjogdGhpcy5oYW5kbGVUYWJQcmVzcywgaGFuZGxlUmV0dXJuOiB0aGlzLmhhbmRsZVJldHVybiwgcmVhZE9ubHk6IHJlYWRPbmx5LCBvbkZvY3VzOiB0aGlzLmhhbmRsZUZvY3VzLCBzcGVsbENoZWNrOiB0cnVlLCBzdHJpcFBhc3RlZFN0eWxlczogdHJ1ZSwgaGFuZGxlUGFzdGVkVGV4dDogdGhpcy5oYW5kbGVQYXN0ZWRUZXh0IH0pLAogICAgICAgICAgICAgICAgISF2YXJpYWJsZXMgJiYgISF2YXJpYWJsZXMubGVuZ3RoICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVmFyaWFibGVQb3BvdmVyLCB7IHRvcDogLTUsIHJpZ2h0OiAwLCB2YXJpYWJsZXM6IHZhcmlhYmxlcywgb25TZWxlY3Q6IHRoaXMuaGFuZGxlVmFyaWFibGVTZWxlY3QsIHNob3c6IHRoaXMuc3RhdGUuZm9jdXMgfSkpLAogICAgICAgICAgICBzaG93UG9wb3V0ICYmCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEhvdmVyVGlwLCB7IHRvcDogIi0zMnB4IiwgbGVmdDogIi0xMHB4IiwgY29weTogIlBvcCBPdXQgRHJhZnQiLCBhbmNob3JCb3R0b206IHRydWUgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogInBvcG91dCIsIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZVBvcG91dENsaWNrIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3V0LCBudWxsKSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFN1YmplY3RQYW5lOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgU3ViamVjdFBhbmU7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/SubjectPane/SubjectPane.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/SubjectPane/SubjectPane.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Editor,\n  EditorState,\n  ContentState,\n  DraftHandleValue,\n  CompositeDecorator,\n  ContentBlock,\n  SelectionState,\n  Modifier,\n} from 'draft-js';\nimport TemplateToken from './TemplateToken';\n\nimport Popout from '@src/components/Icons/Popout.svg';\n\nimport './SubjectPane.scss';\nimport VariablePopover from '@src/components/ContentEditable/VariablePopover';\nimport HoverTip from '@src/components/Base/HoverTip';\n\ninterface Props {\n  subject: string;\n  onChange: (subject: string) => void;\n  onTabPress?: (e: React.KeyboardEvent<HTMLElement>) => void;\n  onDeletePress?: () => void;\n\n  showPopout?: boolean;\n  readOnly?: boolean;\n  variables?: string[];\n  onClick?: () => void;\n  popoutLink?: string;\n}\n\ninterface State {\n  editorState: EditorState;\n  focus: boolean;\n}\n\nclass SubjectPane extends React.PureComponent<Props, State> {\n  private editor: Editor;\n  private timeout: NodeJS.Timer;\n  private compositeDecorator: CompositeDecorator;\n  private selectedPlaceholderIndex?: number;\n  private containerRef: HTMLDivElement;\n\n  constructor() {\n    super();\n\n    this.compositeDecorator = new CompositeDecorator([\n      {\n        strategy: this.handleStrategy,\n        component: TemplateToken,\n      },\n    ]);\n\n    this.state = {\n      editorState: EditorState.createEmpty(),\n      focus: false,\n    };\n  }\n\n  componentDidMount() {\n    const { subject, variables } = this.props;\n\n    if (subject.length) {\n      const contentState = this.createContentState(subject);\n      this.setState({\n        editorState: EditorState.createWithContent(contentState, this.compositeDecorator),\n      });\n    }\n\n    if (variables) {\n      document.addEventListener('click', this.handleClickOutside);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    const { editorState } = this.state;\n    if (nextProps.subject !== this.getPlainText(editorState) &&\n      !editorState.getSelection().getHasFocus()) {\n\n      // Do not do anything if editor is currently editing\n      if (editorState.isInCompositionMode()) {\n        return;\n      }\n\n      const contentState = this.createContentState(nextProps.subject);\n\n      this.setState(\n        { editorState: EditorState.createWithContent(contentState, this.compositeDecorator) },\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n\n    if (this.props.variables) {\n      document.removeEventListener('click', this.handleClickOutside);\n    }\n  }\n\n  createContentState = (subject: string): ContentState => {\n    const { variables } = this.props;\n    const subjectBlocks = subject.split('{{');\n    let text = '';\n    const entityRanges: any[] = [];\n    let offset;\n    let length;\n    let key;\n    let templateVariable;\n    let data;\n    let bracketPos;\n    let index = 0;\n    let entityInfo;\n\n    subjectBlocks.forEach((block: string) => {\n      bracketPos = block.indexOf('}}');\n      offset = text.length;\n      key = index;\n\n      if (bracketPos > -1) {\n        templateVariable = block.slice(0, bracketPos);\n\n        // Identify if placeholder is a valid variable\n        const allVariables = variables || [];\n        const invalidVariable = allVariables.indexOf(templateVariable) === -1;\n\n        // account for removal of brackets\n        length = templateVariable.length;\n        text += templateVariable +\n          (bracketPos === block.length - 1 ? '' : block.slice(bracketPos + 2));\n\n        data = {\n          variable: templateVariable,\n          // Only set invalid when variables are set (in a sequence message)\n          invalid: variables && invalidVariable || undefined,\n        };\n\n        entityInfo = {\n          type: 'TOKEN',\n          mutability: 'IMMUTABLE',\n          data,\n        };\n        entityRanges.push({ key, offset, length, entityInfo });\n        index += 1;\n      } else {\n        text += block;\n      }\n    });\n\n    // create content state\n    let contentState = ContentState.createFromText(text);\n\n    // create entities\n    let selection;\n    entityRanges.forEach((range) => {\n      contentState = contentState.createEntity(\n        range.entityInfo.type,\n        range.entityInfo.mutability,\n        range.entityInfo.data,\n      );\n\n      const blockKey = contentState.getLastBlock().getKey();\n      selection = SelectionState.createEmpty(blockKey);\n      selection = selection.merge({\n        anchorKey: blockKey,\n        focusKey: blockKey,\n        anchorOffset: range.offset,\n        focusOffset: range.offset + range.length,\n      });\n\n      contentState = Modifier.applyEntity(\n        contentState,\n        selection as SelectionState,\n        contentState.getLastCreatedEntityKey(),\n      );\n    });\n\n    return contentState;\n  }\n\n  // HACK(SHIN) Custom focus behavior in the case where there is only a placeholder\n  handleClick = (e: React.MouseEvent<HTMLElement>) => {\n    if (!this.props.subject) {\n      this.focus();\n    }\n  }\n\n  handleStrategy = (contentBlock: ContentBlock, callback: any, contentState: ContentState) => {\n    contentBlock.findEntityRanges(\n      (character) => {\n        const entityKey = character.getEntity();\n        if (entityKey === null) {\n          return false;\n        }\n        return contentState.getEntity(entityKey).getType() === 'TOKEN';\n      },\n      callback,\n    );\n  }\n\n  selectTemplateVariable = (index: number): EditorState | undefined => {\n    const contentState = this.state.editorState.getCurrentContent();\n    let count = 0;\n    let start;\n    let end;\n    contentState.getLastBlock().findEntityRanges(\n      (character) => {\n        const key = character.getEntity();\n        if (key === null) {\n          return false;\n        }\n        return true;\n      },\n      (s, e) => {\n        if (count === index) {\n          start = s;\n          end = e;\n        }\n        count += 1;\n      },\n    );\n\n    if (start !== undefined && end !== undefined) {\n      const key = contentState.getBlockMap().last().getKey();\n      const selection = new SelectionState({\n        anchorKey: key,\n        anchorOffset: start,\n        focusKey: key,\n        focusOffset: end,\n      });\n\n      return EditorState.forceSelection(this.state.editorState, selection);\n    }\n\n    return undefined;\n  }\n\n  handleEditorChange = (editorState: EditorState) => {\n    const oldEditorState = this.state.editorState;\n    const prevCursorPosition = oldEditorState.getSelection().getAnchorOffset();\n    const cursorPosition = editorState.getSelection().getAnchorOffset();\n    const contentState = editorState.getCurrentContent();\n    const block = contentState.getLastBlock();\n    const firstFocus = !this.state.editorState.getSelection().getHasFocus() &&\n      editorState.getSelection().getHasFocus();\n\n    let entityKey: string | undefined;\n    if (oldEditorState.getSelection().getAnchorOffset()\n      === oldEditorState.getSelection().getFocusOffset()) {\n      entityKey = block.getEntityAt(prevCursorPosition < cursorPosition ?\n        cursorPosition - 1 : cursorPosition);\n    }\n\n    let newEditorState = editorState;\n    if (entityKey && !firstFocus && prevCursorPosition !== cursorPosition) {\n      let start;\n      let end;\n      contentState.getLastBlock().findEntityRanges(\n        (char) => {\n          const entity = char.getEntity();\n          if (entity === null) {\n            return false;\n          }\n\n          return entity === entityKey;\n        },\n        (s, e) => {\n          start = s;\n          end = e;\n        },\n      );\n      const key = contentState.getBlockMap().last().getKey();\n      const selection = new SelectionState({\n        anchorKey: key,\n        anchorOffset: start,\n        focusKey: key,\n        focusOffset: end,\n      });\n\n      newEditorState = EditorState.forceSelection(newEditorState, selection);\n    } else {\n      this.selectedPlaceholderIndex = undefined;\n    }\n\n    this.setState({ editorState: newEditorState }, () => {\n      this.props.onChange(this.getPlainText(this.state.editorState));\n    });\n  }\n\n  getPlainText = (editorState: EditorState) => {\n    const contentState = editorState.getCurrentContent();\n    const plainText = contentState.getPlainText();\n    let lastEnd = 0;\n    let text = '';\n\n    contentState.getLastBlock().findEntityRanges(\n      (char) => {\n        if (char.getEntity()) {\n          return true;\n        }\n\n        return false;\n      },\n      (start: number, end: number) => {\n        if (!lastEnd) {\n          text += plainText.slice(0, start);\n        } else {\n          text += plainText.slice(lastEnd, start);\n        }\n        text += `{{${plainText.slice(start, end)}}}`;\n        lastEnd = end;\n      },\n    );\n\n    text += plainText.slice(lastEnd);\n\n    return text;\n  }\n\n  handleRef = (ref: Editor) => {\n    this.editor = ref;\n  }\n\n  focus = (selectFirstPlaceholder?: boolean, selectLastPlaceholder?: boolean) => {\n    clearTimeout(this.timeout);\n    let handled;\n    const setFocusTimeout = () => {\n      this.timeout = global.setTimeout(() => this.editor.focus(), 0);\n    };\n\n    if (selectFirstPlaceholder || selectLastPlaceholder) {\n      this.selectedPlaceholderIndex = selectFirstPlaceholder ? 0 : this.getLastEntityIndex();\n\n      let editorState;\n      if (this.selectedPlaceholderIndex !== undefined) {\n        editorState = this.selectTemplateVariable(this.selectedPlaceholderIndex);\n      }\n\n      if (editorState) {\n        handled = true;\n        this.setState({ editorState }, () => {\n          setFocusTimeout();\n        });\n      }\n    }\n\n    if (!handled) {\n      this.setState({\n        editorState: EditorState.moveFocusToEnd(this.state.editorState),\n        focus: true,\n      });\n    }\n  }\n\n  handleTabPress = (e: React.KeyboardEvent<HTMLElement>) => {\n    const { onTabPress } = this.props;\n\n    let editorState;\n    if (!e.shiftKey) {\n      if (this.selectedPlaceholderIndex === undefined) {\n        this.selectedPlaceholderIndex = -1;\n      }\n\n      this.selectedPlaceholderIndex += 1;\n      editorState = this.selectTemplateVariable(this.selectedPlaceholderIndex);\n      e.stopPropagation();\n      e.preventDefault();\n\n    } else if (e.shiftKey) {\n      if (this.selectedPlaceholderIndex === undefined) {\n        this.selectedPlaceholderIndex = this.getLastEntityIndex();\n      }\n\n      if (this.selectedPlaceholderIndex !== undefined) {\n        this.selectedPlaceholderIndex -= 1;\n        editorState = this.selectTemplateVariable(this.selectedPlaceholderIndex);\n      }\n    }\n\n    if (editorState) {\n      this.setState({ editorState });\n      e.stopPropagation();\n      e.preventDefault();\n    } else {\n      this.selectedPlaceholderIndex = undefined;\n      e.persist();\n      this.setState(\n        { editorState: EditorState.moveFocusToEnd(this.state.editorState) },\n        () => onTabPress && onTabPress(e),\n      );\n    }\n  }\n\n  // do nothing on return\n  handleReturn = (): DraftHandleValue => {\n    return 'handled';\n  }\n\n  getLastEntityIndex = () => {\n    const contentState = this.state.editorState.getCurrentContent();\n    const contentBlock = contentState.getLastBlock();\n    let count = 0;\n    contentBlock.findEntityRanges(\n      char => !!char.getEntity(),\n      (start, end) => count += 1,\n    );\n\n    if (count) {\n      return count - 1;\n    }\n\n    return undefined;\n  }\n\n  handleVariableSelect = (value: string) => {\n    const { subject, onChange } = this.props;\n\n    onChange(subject + `{{${value}}}`);\n  }\n\n  handleClickOutside = (e: Event) => {\n    if (!this.containerRef.contains(e.target as HTMLElement)) {\n      this.setState({ focus: false });\n    }\n  }\n\n  handleContainerRef = (ref: HTMLDivElement) => {\n    this.containerRef = ref;\n  }\n\n  handleFocus = () => {\n    this.setState({ focus: true });\n  }\n\n  handlePopoutClick = (e: React.MouseEvent<HTMLElement>) => {\n    const { popoutLink } = this.props;\n    if (popoutLink) {\n      e.stopPropagation();\n      e.preventDefault();\n      window.open(popoutLink, '_blank', 'height=500,width=800');\n    }\n  }\n\n  handlePastedText = (text: string) => {\n    const currentState = this.state.editorState;\n    const newContentState = Modifier.replaceText(\n      currentState.getCurrentContent(),\n      currentState.getSelection(),\n      text,\n    );\n\n    // Handle paste then update subject\n    this.setState(\n      {\n        editorState: EditorState.push(currentState, newContentState, 'insert-characters'),\n      },\n      () => this.props.onChange(this.getPlainText(this.state.editorState)),\n    );\n\n    return 'handled' as DraftHandleValue;\n  }\n\n  // NOTE(SHIN): DraftJS Editor spellcheck does not have support for Windows\n  // https://draftjs.org/docs/api-reference-editor.html#spellcheck\n  render() {\n    const { showPopout, readOnly, variables, onClick } = this.props;\n\n    return (\n      <div\n        className=\"subject-pane\"\n        ref={this.handleContainerRef}\n        onClick={onClick}\n      >\n        <div\n          className=\"main\"\n          onClick={this.handleClick}\n        >\n          <Editor\n            editorState={this.state.editorState}\n            onChange={this.handleEditorChange}\n            placeholder=\"Enter Subject...\"\n            ref={this.handleRef}\n            onTab={this.handleTabPress}\n            handleReturn={this.handleReturn}\n            readOnly={readOnly}\n            onFocus={this.handleFocus}\n            spellCheck\n            stripPastedStyles\n            handlePastedText={this.handlePastedText}\n          />\n          {!!variables && !!variables.length && <VariablePopover\n            top={-5}\n            right={0}\n            variables={variables}\n            onSelect={this.handleVariableSelect}\n            show={this.state.focus}\n          />}\n        </div>\n        {showPopout &&\n          <HoverTip\n            top=\"-32px\"\n            left=\"-10px\"\n            copy=\"Pop Out Draft\"\n            anchorBottom\n          >\n            <button\n              className=\"popout\"\n              onMouseDown={this.handlePopoutClick}\n            >\n              <Popout />\n            </button>\n          </HoverTip>\n        }\n      </div>\n    );\n  }\n}\nexport default SubjectPane;\n"]}]}