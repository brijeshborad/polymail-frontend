{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/scheduling.ts","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/scheduling.ts","mtime":1675280254058},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnOwppbXBvcnQgeyBBY3Rpb25TdGF0dXMgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IHsgU0NIRURVTElOR19MSVNULCBzY2hlZHVsaW5nTGlzdCwgc2NoZWR1bGluZ0NyZWF0ZSwgU0NIRURVTElOR19DUkVBVEUsIFNDSEVEVUxJTkdfVVBEQVRFLCBzY2hlZHVsaW5nVXBkYXRlLCBTQ0hFRFVMSU5HX0RFTEVURSwgc2NoZWR1bGluZ0RlbGV0ZSwgVElNRV9TTE9UU19MSVNULCB0aW1lc2xvdHNMaXN0LCBzY2hlZHVsaW5nUHVibGljR2V0LCBDQUxFTkRBUl9FVkVOVF9DUkVBVEUsIGNhbGVuZGFyRXZlbnRDcmVhdGUsIFNDSEVEVUxJTkdfUFVCTElDX0dFVCwgU0NIRURVTElOR19VUkxfQ09QWSwgfSBmcm9tICdAc3JjL2R1Y2tzL3NjaGVkdWxpbmcnOwppbXBvcnQgeyB0b2FzdFNldCwgQ29uZmlybWF0aW9uRXJyb3IgfSBmcm9tICdAc3JjL2R1Y2tzL3RvYXN0cyc7CmltcG9ydCB7IGhhbmRsZVNjaGVkdWxpbmdVcmxDb3B5IH0gZnJvbSAnQHNyYy9saWIvc2NoZWR1bGluZyc7CmltcG9ydCB7IGNvbW1hbmRDb250cm9sSGlkZSB9IGZyb20gJ0BzcmMvZHVja3MvY29tbWFuZENvbnRyb2wnOwppbXBvcnQgYnJvd3Nlckhpc3RvcnkgZnJvbSAnQHNyYy9saWIvYnJvd3Nlckhpc3RvcnknOwp2YXIgc2NoZWR1bGluZ1VybENvcHlFcGljID0gZnVuY3Rpb24gKGFjdGlvbiQsIHN0b3JlLCBkZXBzKSB7CiAgICByZXR1cm4gYWN0aW9uJC5vZlR5cGUoU0NIRURVTElOR19VUkxfQ09QWSkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi5zdGF0dXMgPT09IEFjdGlvblN0YXR1cy5TdGFydDsgfSkKICAgICAgICAuZmxhdE1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgdmFyIF9hOwogICAgICAgIHZhciBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7CiAgICAgICAgdmFyIHVzZXJTbHVnID0gKF9hID0gc3RhdGUubWUuZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNsdWc7CiAgICAgICAgdmFyIHNsdWcgPSBhY3Rpb24ubWV0YS5zbHVnOwogICAgICAgIGlmICh1c2VyU2x1ZykgewogICAgICAgICAgICB2YXIgdXJsID0gcHJvY2Vzcy5lbnYuU0NIRURVTElOR19VUkwgKyAiLyIgKyB1c2VyU2x1ZyArICIvIiArIHNsdWc7CiAgICAgICAgICAgIGhhbmRsZVNjaGVkdWxpbmdVcmxDb3B5KHVybCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBPYnNlcnZhYmxlLm1lcmdlKE9ic2VydmFibGUub2YodG9hc3RTZXQobmV3IENvbmZpcm1hdGlvbkVycm9yKCdDYWxlbmRhciBsaW5rIGNvcGllZCB0byBjbGlwYm9hcmQhJywgdHJ1ZSkpKSwgT2JzZXJ2YWJsZS5vZihjb21tYW5kQ29udHJvbEhpZGUodW5kZWZpbmVkKSkpOwogICAgfSk7Cn07CnZhciBzY2hlZHVsaW5nTGlzdEVwaWMgPSBmdW5jdGlvbiAoYWN0aW9uJCwgc3RvcmUsIGRlcHMpIHsKICAgIHJldHVybiBhY3Rpb24kLm9mVHlwZShTQ0hFRFVMSU5HX0xJU1QpCiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBhY3Rpb24uc3RhdHVzID09PSBBY3Rpb25TdGF0dXMuU3RhcnQ7IH0pCiAgICAgICAgLmZsYXRNYXAoZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgIHJldHVybiBkZXBzLnNjaGVkdWxpbmcubGlzdCgpCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gc2NoZWR1bGluZ0xpc3QoYWN0aW9uLm1ldGEsIHJlc3VsdCk7IH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gT2JzZXJ2YWJsZS5vZihzY2hlZHVsaW5nTGlzdChhY3Rpb24ubWV0YSwgZSkpOyB9KTsKICAgIH0pOwp9Owp2YXIgc2NoZWR1bGluZ0NyZWF0ZUVwaWMgPSBmdW5jdGlvbiAoYWN0aW9uJCwgc3RvcmUsIGRlcHMpIHsKICAgIHJldHVybiBhY3Rpb24kLm9mVHlwZShTQ0hFRFVMSU5HX0NSRUFURSkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi5zdGF0dXMgPT09IEFjdGlvblN0YXR1cy5TdGFydDsgfSkKICAgICAgICAuZmxhdE1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIGRlcHMuc2NoZWR1bGluZy5jcmVhdGUoYWN0aW9uLm1ldGEpCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gc2NoZWR1bGluZ0NyZWF0ZShhY3Rpb24ubWV0YSwgcmVzdWx0KTsgfSkKICAgICAgICAgICAgLmRvKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgaWYgKChfYSA9IGEucGF5bG9hZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlkKSB7CiAgICAgICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKCIvY2FsZW5kYXJzLyIgKyBhLnBheWxvYWQuaWQpOwogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKHRvYXN0U2V0KGUpKTsgfSk7CiAgICB9KTsKfTsKdmFyIHNjaGVkdWxpbmdVcGRhdGVFcGljID0gZnVuY3Rpb24gKGFjdGlvbiQsIHN0b3JlLCBkZXBzKSB7CiAgICByZXR1cm4gYWN0aW9uJC5vZlR5cGUoU0NIRURVTElOR19VUERBVEUpCiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBhY3Rpb24uc3RhdHVzID09PSBBY3Rpb25TdGF0dXMuU3RhcnQ7IH0pCiAgICAgICAgLmZsYXRNYXAoZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgIHJldHVybiBkZXBzLnNjaGVkdWxpbmcudXBkYXRlKGFjdGlvbi5tZXRhKQogICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIHNjaGVkdWxpbmdVcGRhdGUoYWN0aW9uLm1ldGEsIHJlc3VsdCk7IH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gT2JzZXJ2YWJsZS5vZih0b2FzdFNldChlKSk7IH0pOwogICAgfSk7Cn07CnZhciBzY2hlZHVsaW5nRGVsZXRlRXBpYyA9IGZ1bmN0aW9uIChhY3Rpb24kLCBzdG9yZSwgZGVwcykgewogICAgcmV0dXJuIGFjdGlvbiQub2ZUeXBlKFNDSEVEVUxJTkdfREVMRVRFKQogICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gYWN0aW9uLnN0YXR1cyA9PT0gQWN0aW9uU3RhdHVzLlN0YXJ0OyB9KQogICAgICAgIC5mbGF0TWFwKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICByZXR1cm4gZGVwcy5zY2hlZHVsaW5nLmRlbGV0ZShhY3Rpb24ubWV0YS5pZCkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiBzY2hlZHVsaW5nRGVsZXRlKGFjdGlvbi5tZXRhLCByZXN1bHQpOyB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUgJiYgZS5jb2RlID09PSA0MDQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLm9mKHNjaGVkdWxpbmdEZWxldGUoYWN0aW9uLm1ldGEsIG51bGwpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS5vZihzY2hlZHVsaW5nRGVsZXRlKGFjdGlvbi5tZXRhLCBlKSk7CiAgICAgICAgfSk7CiAgICB9KTsKfTsKdmFyIGdldFB1YmxpYyA9IGZ1bmN0aW9uIChhY3Rpb24kLCBzdG9yZSwgZGVwcykgewogICAgcmV0dXJuIGFjdGlvbiQub2ZUeXBlKFNDSEVEVUxJTkdfUFVCTElDX0dFVCkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi5zdGF0dXMgPT09IEFjdGlvblN0YXR1cy5TdGFydDsgfSkKICAgICAgICAuZmxhdE1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgcmV0dXJuIGRlcHMuc2NoZWR1bGluZy5nZXRQdWJsaWMoYWN0aW9uLm1ldGEpCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gc2NoZWR1bGluZ1B1YmxpY0dldChhY3Rpb24ubWV0YSwgcmVzdWx0KTsgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKHNjaGVkdWxpbmdQdWJsaWNHZXQoYWN0aW9uLm1ldGEsIGUpKTsgfSk7CiAgICB9KTsKfTsKdmFyIHRpbWVTbG90c0xpc3RFcGljID0gZnVuY3Rpb24gKGFjdGlvbiQsIHN0b3JlLCBkZXBzKSB7CiAgICByZXR1cm4gYWN0aW9uJC5vZlR5cGUoVElNRV9TTE9UU19MSVNUKQogICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gYWN0aW9uLnN0YXR1cyA9PT0gQWN0aW9uU3RhdHVzLlN0YXJ0OyB9KQogICAgICAgIC5mbGF0TWFwKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICByZXR1cm4gZGVwcy5zY2hlZHVsaW5nLnRpbWVzbG90cyhhY3Rpb24ubWV0YSkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiB0aW1lc2xvdHNMaXN0KGFjdGlvbi5tZXRhLCByZXN1bHQpOyB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIE9ic2VydmFibGUub2YodGltZXNsb3RzTGlzdChhY3Rpb24ubWV0YSwgZSkpOyB9KTsKICAgIH0pOwp9Owp2YXIgZXZlbnRDcmVhdGUgPSBmdW5jdGlvbiAoYWN0aW9uJCwgc3RvcmUsIGRlcHMpIHsKICAgIHJldHVybiBhY3Rpb24kLm9mVHlwZShDQUxFTkRBUl9FVkVOVF9DUkVBVEUpCiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7IHJldHVybiBhY3Rpb24uc3RhdHVzID09PSBBY3Rpb25TdGF0dXMuU3RhcnQ7IH0pCiAgICAgICAgLmZsYXRNYXAoZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgIHJldHVybiBkZXBzLnNjaGVkdWxpbmcuY3JlYXRlRXZlbnQoYWN0aW9uLm1ldGEpCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gY2FsZW5kYXJFdmVudENyZWF0ZShhY3Rpb24ubWV0YSwgcmVzdWx0KTsgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBPYnNlcnZhYmxlLm9mKGNhbGVuZGFyRXZlbnRDcmVhdGUoYWN0aW9uLm1ldGEsIGUpKTsgfSk7CiAgICB9KTsKfTsKZXhwb3J0IGRlZmF1bHQgWwogICAgc2NoZWR1bGluZ0xpc3RFcGljLAogICAgc2NoZWR1bGluZ0NyZWF0ZUVwaWMsCiAgICBzY2hlZHVsaW5nVXBkYXRlRXBpYywKICAgIHNjaGVkdWxpbmdEZWxldGVFcGljLAogICAgdGltZVNsb3RzTGlzdEVwaWMsCiAgICBnZXRQdWJsaWMsCiAgICBldmVudENyZWF0ZSwKICAgIHNjaGVkdWxpbmdVcmxDb3B5RXBpYywKXTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/scheduling.ts","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/scheduling.ts"],"names":[],"mappings":"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","sourcesContent":["import { Observable } from 'rxjs';\nimport { Epic } from 'redux-observable';\n\nimport { ActionStatus, Action, StoreState, CalendarEvent } from '@src/types';\nimport { Scheduling, TimeSlot, SchedulingPublic } from '@src/types/scheduling';\nimport { Deps } from '@src/lib/epic';\nimport {\n  SCHEDULING_LIST, schedulingList,\n  schedulingCreate, SCHEDULING_CREATE,\n  SCHEDULING_UPDATE, schedulingUpdate,\n  SCHEDULING_DELETE, schedulingDelete, SchedulingCreateMeta,\n  TIME_SLOTS_LIST, TimeSlotMeta, timeslotsList,\n  SchedulingPublicMeta, schedulingPublicGet,\n  CalendarEventCreateMeta, CALENDAR_EVENT_CREATE, calendarEventCreate,\n  SCHEDULING_PUBLIC_GET, SCHEDULING_URL_COPY,\n} from '@src/ducks/scheduling';\nimport { ApiError } from '@src/api/base';\nimport { toastSet, ConfirmationError } from '@src/ducks/toasts';\nimport { handleSchedulingUrlCopy } from '@src/lib/scheduling';\nimport { commandControlHide } from '@src/ducks/commandControl';\nimport browserHistory from '@src/lib/browserHistory';\n\nconst schedulingUrlCopyEpic: Epic<Action<\n  Scheduling|Error|ConfirmationError|null|undefined,\n  any\n>, StoreState, Deps> = (action$, store, deps) =>\n    action$.ofType(SCHEDULING_URL_COPY)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap((action: Action<Scheduling, any>) => {\n        const state = store.getState();\n        const userSlug = state.me.data?.slug;\n        const { slug } = action.meta;\n        if (userSlug) {\n          const url = `${process.env.SCHEDULING_URL}/${userSlug}/${slug}`;\n          handleSchedulingUrlCopy(url);\n        }\n\n        return Observable.merge(\n          Observable.of(toastSet(new ConfirmationError(\n            'Calendar link copied to clipboard!',\n            true,\n          ))),\n          Observable.of(commandControlHide(undefined)),\n        );\n      });\n\nconst schedulingListEpic: Epic<Action<null, Scheduling[]>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(SCHEDULING_LIST)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap(action =>\n        deps.scheduling.list()\n          .map(result => schedulingList(action.meta, result))\n          .catch((e: Error) => Observable.of(schedulingList(action.meta, e))),\n    );\n\nconst schedulingCreateEpic: Epic<Action<\n  SchedulingCreateMeta|Error|null, Scheduling|null\n>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(SCHEDULING_CREATE)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap((action: Action<SchedulingCreateMeta, Scheduling>) =>\n        deps.scheduling.create(action.meta)\n          .map(result => schedulingCreate(action.meta, result))\n          .do((a) => {\n            if (a.payload?.id) {\n              browserHistory.push(`/calendars/${a.payload.id}`);\n            }\n          })\n          .catch((e: Error) => Observable.of(toastSet(e))),\n    );\n\nconst schedulingUpdateEpic: Epic<Action<\n  Scheduling|Error|null, Scheduling|null\n>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(SCHEDULING_UPDATE)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap((action: Action<Scheduling, Scheduling>) =>\n        deps.scheduling.update(action.meta)\n          .map(result => schedulingUpdate(action.meta, result))\n          .catch((e: Error) => Observable.of(toastSet(e))),\n    );\n\nconst schedulingDeleteEpic: Epic<Action<Scheduling, null>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(SCHEDULING_DELETE)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap(action =>\n        deps.scheduling.delete(action.meta.id)\n          .map(result => schedulingDelete(action.meta, result))\n          .catch((e) => {\n            if (e as ApiError && e.code === 404) {\n              return Observable.of(schedulingDelete(action.meta, null));\n            }\n\n            return Observable.of(schedulingDelete(action.meta, e));\n          }),\n      );\n\nconst getPublic: Epic<Action<SchedulingPublicMeta, SchedulingPublic>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(SCHEDULING_PUBLIC_GET)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap(action =>\n        deps.scheduling.getPublic(action.meta)\n          .map(result => schedulingPublicGet(action.meta, result))\n          .catch(e => Observable.of(schedulingPublicGet(action.meta, e)),\n      ));\n\nconst timeSlotsListEpic: Epic<Action<TimeSlotMeta, TimeSlot[]>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(TIME_SLOTS_LIST)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap(action =>\n        deps.scheduling.timeslots(action.meta)\n          .map(result => timeslotsList(action.meta, result))\n          .catch(e => Observable.of(timeslotsList(action.meta, e)),\n    ));\n\nconst eventCreate: Epic<Action<CalendarEventCreateMeta, CalendarEvent>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(CALENDAR_EVENT_CREATE)\n      .filter(action => action.status === ActionStatus.Start)\n      .flatMap(action =>\n        deps.scheduling.createEvent(action.meta)\n          .map(result => calendarEventCreate(action.meta, result))\n          .catch(e => Observable.of(calendarEventCreate(action.meta, e)),\n        ));\n\nexport default [\n  schedulingListEpic,\n  schedulingCreateEpic,\n  schedulingUpdateEpic,\n  schedulingDeleteEpic,\n  timeSlotsListEpic,\n  getPublic,\n  eventCreate,\n  schedulingUrlCopyEpic,\n];\n"]}]}