{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/MemberPlanDetail/MemberPlanDetail.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/MemberPlanDetail/MemberPlanDetail.tsx","mtime":1675280254097},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGNhcGl0YWxpemUgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgTmF2aWdhdGlvbkhlYWRlciBmcm9tICdAc3JjL3JvdXRlcy9TZXR0aW5ncy9jb21wb25lbnRzL05hdmlnYXRpb25IZWFkZXInOwppbXBvcnQgeyBCaWxsaW5nU3Vic2NyaXB0aW9uU3RhdHVzIH0gZnJvbSAnQHNyYy90eXBlcy9iaWxsaW5nJzsKaW1wb3J0ICcuL01lbWJlclBsYW5EZXRhaWwuc2Nzcyc7CmltcG9ydCBicm93c2VySGlzdG9yeSBmcm9tICdAc3JjL2xpYi9icm93c2VySGlzdG9yeSc7Ci8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGgKaW1wb3J0IEJpbGxpbmdTdGF0dXNCYW5uZXIgZnJvbSAnQHNyYy9yb3V0ZXMvU2V0dGluZ3Mvcm91dGVzL0JpbGxpbmcvY29tcG9uZW50cy9CaWxsaW5nU3RhdHVzQmFubmVyJzsKaW1wb3J0IHsgdGllckZyb21UZWFtUGxhbiwgdHJpYWxEYXlzTGVmdCB9IGZyb20gJ0BzcmMvbGliL21vZGVscy9iaWxsaW5nJzsKdmFyIE1lbWJlclBsYW5EZXRhaWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoTWVtYmVyUGxhbkRldGFpbCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIE1lbWJlclBsYW5EZXRhaWwoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlQ29udGFjdEFkbWluQ2xpY2sgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy5hZG1pbikgewogICAgICAgICAgICAgICAgdmFyIG1haWx0byA9IGVuY29kZVVSSUNvbXBvbmVudCgibWFpbHRvOiIgKyBfdGhpcy5wcm9wcy5hZG1pbi5lbWFpbCk7CiAgICAgICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKCIvbWFpbC9hbGwvY29tcG9zZT9tYWlsdG89IiArIG1haWx0byk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlclRpdGxlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgc3Vic2NyaXB0aW9uID0gX2Euc3Vic2NyaXB0aW9uLCB0cmlhbEV4cGlyZXMgPSBfYS50cmlhbEV4cGlyZXMsIHRyaWFsUGxhbiA9IF9hLnRyaWFsUGxhbjsKICAgICAgICAgICAgdmFyIG9uVHJpYWwgPSAhc3Vic2NyaXB0aW9uIHx8CiAgICAgICAgICAgICAgICAoc3Vic2NyaXB0aW9uICYmIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IEJpbGxpbmdTdWJzY3JpcHRpb25TdGF0dXMuVHJpYWxpbmcpOwogICAgICAgICAgICB2YXIgZGF5c0xlZnQgPSB0cmlhbERheXNMZWZ0KHRyaWFsRXhwaXJlcyk7CiAgICAgICAgICAgIHZhciB0aWVyID0gKHN1YnNjcmlwdGlvbiAmJiBzdWJzY3JpcHRpb24udGllcikgfHwgKHRyaWFsUGxhbiAmJiB0aWVyRnJvbVRlYW1QbGFuKHRyaWFsUGxhbikpOwogICAgICAgICAgICBpZiAob25UcmlhbCB8fCAhdGllcikgewogICAgICAgICAgICAgICAgdmFyIGVuZENvcHkgPSBkYXlzTGVmdCA+IDAKICAgICAgICAgICAgICAgICAgICA/ICJlbmRzIGluICIgKyBkYXlzTGVmdCArICIgZGF5cy4iCiAgICAgICAgICAgICAgICAgICAgOiAnaGFzIGVuZGVkLic7CiAgICAgICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sCiAgICAgICAgICAgICAgICAgICAgIllvdXIiLAogICAgICAgICAgICAgICAgICAgICcgJywKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJwbGFuLXR5cGUiIH0sICJQb2x5bWFpbCAiICsgY2FwaXRhbGl6ZSh0aWVyIHx8ICcnKSArICIgdHJpYWwgIiksCiAgICAgICAgICAgICAgICAgICAgZW5kQ29weSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwKICAgICAgICAgICAgICAgICJZb3VyIHRlYW0gaXMgb24gdGhlICIsCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJwbGFuLXR5cGUiIH0sIGNhcGl0YWxpemUodGllcikpLAogICAgICAgICAgICAgICAgIiBwbGFuIikpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgTWVtYmVyUGxhbkRldGFpbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGFkbWluID0gX2EuYWRtaW4sIHRyaWFsRXhwaXJlcyA9IF9hLnRyaWFsRXhwaXJlcywgdHJpYWxQbGFuID0gX2EudHJpYWxQbGFuLCBzdWJzY3JpcHRpb24gPSBfYS5zdWJzY3JpcHRpb247CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNldHRpbmdzLXBhbmVsIHByZWZlcmVuY2VzLXRlYW0iIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2aWdhdGlvbkhlYWRlciwgeyB0aXRsZTogIlBsYW5zICYgQmlsbGluZyIgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibWVtYmVyLXBsYW4tZGV0YWlsIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCaWxsaW5nU3RhdHVzQmFubmVyLCB7IHRyaWFsRXhwaXJlczogdHJpYWxFeHBpcmVzLCB0cmlhbFBsYW46IHRyaWFsUGxhbiwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sIGlzQWRtaW46IGZhbHNlIH0pLAogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUaXRsZSgpLAogICAgICAgICAgICAgICAgYWRtaW4gJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhZG1pbi1kZXNjcmlwdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgIllvdXIgYmlsbGluZyBhZG1pbnN0cmF0b3IgaXMiLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJhIiwgeyBjbGFzc05hbWU6ICJhZG1pbi1lbWFpbCIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ29udGFjdEFkbWluQ2xpY2sgfSwgIiAiICsgYWRtaW4uZW1haWwgKyAiICIpKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgIkNvbnRhY3QgdGhlbSB0byBtYWtlIGNoYW5nZXMgdG8geW91ciBhY2NvdW50LiIpKSwKICAgICAgICAgICAgICAgICFhZG1pbiAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImFkbWluLWRlc2NyaXB0aW9uIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInAiLCBudWxsLCAiUGxlYXNlIGNvbnRhY3QgeW91ciBhY2NvdW50IGFkbWluaXN0cmF0b3IgdG8gbWFrZSBjaGFuZ2VzLiIpKSwKICAgICAgICAgICAgICAgIGFkbWluICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWN0aW9uLWJ1dHRvbnMiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBjbGFzc05hbWU6ICJjb250YWN0LWJ1dHRvbiIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ29udGFjdEFkbWluQ2xpY2sgfSwgIkNvbnRhY3QgQWRtaW4iKSkpKSk7CiAgICB9OwogICAgcmV0dXJuIE1lbWJlclBsYW5EZXRhaWw7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBNZW1iZXJQbGFuRGV0YWlsOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/MemberPlanDetail/MemberPlanDetail.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/MemberPlanDetail/MemberPlanDetail.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { MouseEvent } from 'react';\nimport { capitalize } from 'lodash';\n\nimport NavigationHeader from '@src/routes/Settings/components/NavigationHeader';\nimport { TeamMember, TeamPlan } from '@src/types';\nimport { BillingSubscription, BillingSubscriptionStatus } from '@src/types/billing';\n\nimport './MemberPlanDetail.scss';\nimport browserHistory from '@src/lib/browserHistory';\n// tslint:disable-next-line:max-line-length\nimport BillingStatusBanner from '@src/routes/Settings/routes/Billing/components/BillingStatusBanner';\nimport { tierFromTeamPlan, trialDaysLeft } from '@src/lib/models/billing';\n\nexport interface Props {\n  loading: boolean;\n  loadingError: boolean;\n  admin?: TeamMember;\n  trialExpires?: Date;\n  subscription?: BillingSubscription;\n  trialPlan?: TeamPlan;\n}\n\nclass MemberPlanDetail extends React.PureComponent<Props> {\n  handleContactAdminClick = (e: MouseEvent<HTMLAnchorElement> | MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (this.props.admin) {\n      const mailto = encodeURIComponent(`mailto:${this.props.admin.email}`);\n      browserHistory.push(`/mail/all/compose?mailto=${mailto}`);\n    }\n  }\n\n  renderTitle = () => {\n    const { subscription, trialExpires, trialPlan } = this.props;\n    const onTrial = !subscription ||\n      (subscription && subscription.status === BillingSubscriptionStatus.Trialing);\n    const daysLeft = trialDaysLeft(trialExpires);\n    const tier = (subscription && subscription.tier) || (trialPlan && tierFromTeamPlan(trialPlan));\n\n    if (onTrial || !tier) {\n      const endCopy = daysLeft > 0\n        ? `ends in ${daysLeft} days.`\n        : 'has ended.';\n      return (\n        <div className=\"title\">\n          Your{' '}\n          <span className=\"plan-type\">\n            {`Polymail ${capitalize(tier || '')} trial `}\n          </span>\n          {endCopy}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"title\">\n        Your team is on the <span className=\"plan-type\">{capitalize(tier)}</span> plan\n      </div>\n    );\n  }\n\n  render() {\n    const { admin, trialExpires, trialPlan, subscription } = this.props;\n\n    return (\n      <div className=\"settings-panel preferences-team\">\n        <NavigationHeader\n          title=\"Plans & Billing\"\n        />\n        <div className=\"member-plan-detail\">\n          <BillingStatusBanner\n            trialExpires={trialExpires}\n            trialPlan={trialPlan}\n            subscription={subscription}\n            isAdmin={false}\n          />\n          {this.renderTitle()}\n          {admin && <div className=\"admin-description\">\n            <p>\n              Your billing adminstrator is\n                <a className=\"admin-email\" onClick={this.handleContactAdminClick}>\n                {` ${admin.email} `}\n              </a>\n            </p>\n            <p>\n              Contact them to make changes to your account.\n            </p>\n          </div>}\n          {!admin && <div className=\"admin-description\">\n            <p>Please contact your account administrator to make changes.</p>\n          </div>}\n          {admin && <div className=\"action-buttons\">\n            <button\n              className=\"contact-button\"\n              onClick={this.handleContactAdminClick}\n            >\n              Contact Admin\n            </button>\n          </div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MemberPlanDetail;\n"]}]}