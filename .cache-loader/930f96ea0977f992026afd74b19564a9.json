{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/TrackCell/TrackCell.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/TrackCell/TrackCell.tsx","mtime":1675280253994},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCB7IHNob3dNb3N0UmVjZW50LCBUT09MVElQX0ZPUk1BVCB9IGZyb20gJ0BzcmMvbGliL2RhdGV0aW1lJzsKaW1wb3J0IHsgVHJhY2tBY3Rpb25UeXBlLCBDb250YWN0VHlwZSB9IGZyb20gJ0BzcmMvdHlwZXMnOwppbXBvcnQgJy4vVHJhY2tDZWxsLnNjc3MnOwppbXBvcnQgeyBnZXREaXNwbGF5TmFtZSB9IGZyb20gJ0BzcmMvbGliL2FkZHJlc3MnOwp2YXIgVHJhY2tDZWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFRyYWNrQ2VsbCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFRyYWNrQ2VsbCgpIHsKICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICB9CiAgICBUcmFja0NlbGwucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbnRhY3QgPSBfYS5jb250YWN0LCBnZXRDb250YWN0ID0gX2EuZ2V0Q29udGFjdCwgZW1haWwgPSBfYS5lbWFpbDsKICAgICAgICBpZiAoY29udGFjdC50eXBlID09PSBDb250YWN0VHlwZS5EZWZhdWx0KSB7CiAgICAgICAgICAgIGdldENvbnRhY3QoZW1haWwpOwogICAgICAgIH0KICAgIH07CiAgICBUcmFja0NlbGwucHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gKG5leHRQcm9wcykgewogICAgICAgIHZhciBjb250YWN0ID0gbmV4dFByb3BzLmNvbnRhY3QsIGdldENvbnRhY3QgPSBuZXh0UHJvcHMuZ2V0Q29udGFjdCwgZW1haWwgPSBuZXh0UHJvcHMuZW1haWw7CiAgICAgICAgaWYgKGVtYWlsICE9PSB0aGlzLnByb3BzLmVtYWlsICYmIGNvbnRhY3QudHlwZSA9PT0gQ29udGFjdFR5cGUuRGVmYXVsdCkgewogICAgICAgICAgICBnZXRDb250YWN0KGVtYWlsKTsKICAgICAgICB9CiAgICB9OwogICAgVHJhY2tDZWxsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgY29udGFjdCA9IF9hLmNvbnRhY3QsIHRyYWNrQWN0aW9uID0gX2EudHJhY2tBY3Rpb24sIG1haWxib3ggPSBfYS5tYWlsYm94LCBzZWxlY3RDb250YWN0ID0gX2Euc2VsZWN0Q29udGFjdDsKICAgICAgICB2YXIgZGF0ZSA9IG1vbWVudCh0cmFja0FjdGlvbi5kYXRlKTsKICAgICAgICB2YXIgdGltZSA9IGRhdGUuY2FsZW5kYXIoJycsIHsKICAgICAgICAgICAgc2FtZURheTogIlsiICsgZGF0ZS5mcm9tTm93KHRydWUpICsgIl0iLAogICAgICAgICAgICBsYXN0RGF5OiAiWyIgKyBzaG93TW9zdFJlY2VudCh0cmFja0FjdGlvbi5kYXRlKSArICJdIiwKICAgICAgICAgICAgbGFzdFdlZWs6ICJbIiArIHNob3dNb3N0UmVjZW50KHRyYWNrQWN0aW9uLmRhdGUpICsgIl0iLAogICAgICAgICAgICBzYW1lRWxzZTogIlsiICsgc2hvd01vc3RSZWNlbnQodHJhY2tBY3Rpb24uZGF0ZSkgKyAiXSIsCiAgICAgICAgfSk7CiAgICAgICAgdmFyIGRldGFpbGVkVGltZSA9IGRhdGUuZm9ybWF0KFRPT0xUSVBfRk9STUFUKTsKICAgICAgICB2YXIgaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHNlbGVjdENvbnRhY3QoY29udGFjdC5lbWFpbCk7CiAgICAgICAgfTsKICAgICAgICB2YXIgYWN0aW9uOwogICAgICAgIHZhciBzdWJqZWN0OwogICAgICAgIGlmICghbWFpbGJveCkgewogICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCk7CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAodHJhY2tBY3Rpb24udHlwZSkgewogICAgICAgICAgICBjYXNlIFRyYWNrQWN0aW9uVHlwZS5MaW5rOgogICAgICAgICAgICAgICAgYWN0aW9uID0gJ2NsaWNrZWQnOwogICAgICAgICAgICAgICAgc3ViamVjdCA9IHRyYWNrQWN0aW9uLnVybDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFRyYWNrQWN0aW9uVHlwZS5BdHRhY2htZW50OgogICAgICAgICAgICAgICAgYWN0aW9uID0gJ2Rvd25sb2FkZWQnOwogICAgICAgICAgICAgICAgc3ViamVjdCA9IHRyYWNrQWN0aW9uLmZpbGVuYW1lOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBhY3Rpb24gPSAncmVhZCc7CiAgICAgICAgICAgICAgICBzdWJqZWN0ID0gJ3lvdXIgbWVzc2FnZSc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRyYWNrLWNlbGwiLCBvbkNsaWNrOiBjb250YWN0ICYmIGhhbmRsZUNsaWNrIH0sCiAgICAgICAgICAgIGNvbnRhY3QgJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgeyBjbGFzc05hbWU6ICJhdmF0YXIiLCBzcmM6IGNvbnRhY3QucGhvdG9VcmwgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibWFpbiIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidG9wLXJvdyIgfSwKICAgICAgICAgICAgICAgICAgICBjb250YWN0ICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7IGNsYXNzTmFtZTogInVzZXIiIH0sIGdldERpc3BsYXlOYW1lKGNvbnRhY3QpKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0aW1lIiwgdGl0bGU6IGRldGFpbGVkVGltZSB9LCB0aW1lKSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2MiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIGFjdGlvbiksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCdzdWJqZWN0JywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluazogYWN0aW9uICE9PSAncmVhZCcsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCB0aXRsZTogc3ViamVjdCB9LCBzdWJqZWN0KSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFRyYWNrQ2VsbDsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFRyYWNrQ2VsbDsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/TrackCell/TrackCell.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/TrackCell/TrackCell.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport { showMostRecent, TOOLTIP_FORMAT } from '@src/lib/datetime';\nimport { TrackAction, TrackActionType, Contact, Mailbox, ContactType } from '@src/types';\n\nimport './TrackCell.scss';\nimport { getDisplayName } from '@src/lib/address';\n\nexport interface Props {\n  trackAction: TrackAction;\n  email: string;\n  contact: Contact;\n  mailbox?: Mailbox;\n}\n\nexport interface DispatchProps {\n  selectContact: (contact: string) => void;\n  getContact: (email: string) => void;\n}\n\nclass TrackCell extends React.PureComponent<Props & DispatchProps> {\n  componentDidMount() {\n    const { contact, getContact, email } = this.props;\n\n    if (contact.type === ContactType.Default) {\n      getContact(email);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props & DispatchProps) {\n    const { contact, getContact, email } = nextProps;\n\n    if (email !== this.props.email && contact.type === ContactType.Default) {\n      getContact(email);\n    }\n  }\n\n  render() {\n    const { contact, trackAction, mailbox, selectContact } = this.props;\n    const date = moment(trackAction.date);\n    const time = date.calendar('', {\n      sameDay: `[${date.fromNow(true)}]`,\n      lastDay: `[${showMostRecent(trackAction.date)}]`,\n      lastWeek: `[${showMostRecent(trackAction.date)}]`,\n      sameElse: `[${showMostRecent(trackAction.date)}]`,\n    });\n    const detailedTime = date.format(TOOLTIP_FORMAT);\n    const handleClick = (e: React.SyntheticEvent<HTMLElement>) => {\n      e.preventDefault();\n      e.stopPropagation();\n      selectContact(contact.email);\n    };\n    let action;\n    let subject;\n\n    if (!mailbox) {\n      return <div />;\n    }\n\n    switch (trackAction.type) {\n      case TrackActionType.Link:\n        action = 'clicked';\n        subject = trackAction.url;\n        break;\n      case TrackActionType.Attachment:\n        action = 'downloaded';\n        subject = trackAction.filename;\n        break;\n      default:\n        action = 'read';\n        subject = 'your message';\n        break;\n    }\n\n    return (\n      <div className=\"track-cell\" onClick={contact && handleClick}>\n        {contact && <img className=\"avatar\" src={contact.photoUrl}/>}\n        <div className=\"main\">\n          <div className=\"top-row\">\n            {contact && <span className=\"user\">{getDisplayName(contact)}</span>}\n            <span className=\"time\" title={detailedTime}>{time}</span>\n          </div>\n          <div className=\"desc\">\n            <span>{action}</span>\n            <span\n              className={classnames('subject', {\n                link: action !== 'read',\n              })}\n              title={subject}\n            >\n              {subject}\n            </span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TrackCell;\n"]}]}