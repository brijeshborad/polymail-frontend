{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/attachment.ts","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/attachment.ts","mtime":1675280254061},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkgewogICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTsKICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKQogICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0OwogICAgfTsKICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9OwppbXBvcnQgeyBsYXN0IH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHsgRmlsZVR5cGUgfSBmcm9tICdAc3JjL3R5cGVzJzsKZXhwb3J0IHZhciB0cnVuY2F0ZSA9IGZ1bmN0aW9uIChsZW5ndGgpIHsKICAgIC8vIEIKICAgIGlmIChsZW5ndGggPj0gTWF0aC5wb3coMTAwMCwgMCkgJiYgbGVuZ3RoIDwgTWF0aC5wb3coMTAwMCwgMSkpIHsKICAgICAgICByZXR1cm4gbGVuZ3RoLnRvRml4ZWQoMSkgKyAiIEIiOwogICAgfQogICAgLy8gS0IKICAgIGlmIChsZW5ndGggPiBNYXRoLnBvdygxMDAwLCAxKSAmJiBsZW5ndGggPCBNYXRoLnBvdygxMDAwLCAyKSkgewogICAgICAgIHJldHVybiAobGVuZ3RoIC8gMTAwMCkudG9GaXhlZCgxKSArICIgS0IiOwogICAgfQogICAgLy8gTUIKICAgIHJldHVybiAobGVuZ3RoIC8gMTAwMDAwMCkudG9GaXhlZCgxKSArICIgTUIiOwp9OwpleHBvcnQgdmFyIHRydW5jYXRlZFByb2dyZXNzID0gZnVuY3Rpb24gKGxlbmd0aCwgcHJvZ3Jlc3MpIHsKICAgIC8vIEIKICAgIGlmIChsZW5ndGggPiBNYXRoLnBvdygxMDAwLCAwKSAmJiBsZW5ndGggPCBNYXRoLnBvdygxMDAwLCAxKSkgewogICAgICAgIHJldHVybiAobGVuZ3RoICogcHJvZ3Jlc3MpLnRvRml4ZWQoMCkgKyAiIC8gIiArIGxlbmd0aC50b0ZpeGVkKDEpICsgIiBCIjsKICAgIH0KICAgIC8vIEtCCiAgICBpZiAobGVuZ3RoID4gTWF0aC5wb3coMTAwMCwgMSkgJiYgbGVuZ3RoIDwgTWF0aC5wb3coMTAwMCwgMikpIHsKICAgICAgICB2YXIga2JMZW5ndGggPSBsZW5ndGggLyAxMDAwOwogICAgICAgIHZhciBrYlByb2dyZXNzID0gbGVuZ3RoICogcHJvZ3Jlc3MgLyAxMDAwOwogICAgICAgIHJldHVybiAoa2JQcm9ncmVzcykudG9GaXhlZCgwKSArICIgLyAiICsga2JMZW5ndGgudG9GaXhlZCgxKSArICIgS0IiOwogICAgfQogICAgLy8gTUIKICAgIHZhciBtYkxlbmd0aCA9IGxlbmd0aCAvIDEwMDAwMDA7CiAgICB2YXIgbWJQcm9ncmVzcyA9IGxlbmd0aCAqIHByb2dyZXNzIC8gMTAwMDAwMDsKICAgIHJldHVybiAobWJQcm9ncmVzcykudG9GaXhlZCgwKSArICIgLyAiICsgbWJMZW5ndGgudG9GaXhlZCgxKSArICIgTUIiOwp9OwovLyBUT0RPKFNISU4pOiBGaW5pc2ggZm9ybWF0CmV4cG9ydCB2YXIgZmlsZUZvcm1hdCA9IGZ1bmN0aW9uICh0eXBlKSB7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi9tc3dvcmQnOgogICAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JzoKICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC50ZW1wbGF0ZSc6CiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24vdm5kLm1zLXdvcmQuZG9jdW1lbnQubWFjcm9FbmFibGVkLjEyJzoKICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi92bmQubXMtd29yZC50ZW1wbGF0ZS5tYWNyb0VuYWJsZWQuMTInOgogICAgICAgICAgICByZXR1cm4gRmlsZVR5cGUuRG9jdW1lbnQ7CiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24vZXhjZWwnOgogICAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uL3gtZXhjZWwnOgogICAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCc6CiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24vbXNleGNlbCc6CiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24veC1tc2V4Y2VsJzoKICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi94LWRvc19tc19leGNlbCc6CiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24veGxzJzoKICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi94LXhscyc6CiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnOgogICAgICAgICAgICByZXR1cm4gRmlsZVR5cGUuRXhjZWw7CiAgICAgICAgY2FzZSAnYXBwbGljYXRpb24vcG5nJzoKICAgICAgICBjYXNlICdpbWFnZS9qcGVnJzoKICAgICAgICBjYXNlICdpbWFnZS90aWZmJzoKICAgICAgICBjYXNlICdpbWFnZS9naWYnOgogICAgICAgIGNhc2UgJ2ltYWdlL3BuZyc6CiAgICAgICAgICAgIHJldHVybiBGaWxlVHlwZS5JbWFnZTsKICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi94LWNvbXByZXNzZWQnOgogICAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uL3gtemlwLWNvbXByZXNzZWQnOgogICAgICAgIGNhc2UgJ2FwcGxpY2F0aW9uL3ppcCc6CiAgICAgICAgY2FzZSAnbXVsdGlwYXJ0L3gtemlwJzoKICAgICAgICAgICAgcmV0dXJuIEZpbGVUeXBlLlppcDsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gRmlsZVR5cGUuVW5rbm93bjsKICAgIH0KfTsKZXhwb3J0IHZhciBmaWxlbmFtZUljb25VcmwgPSBmdW5jdGlvbiAoZmlsZW5hbWUpIHsKICAgIHZhciBleHRlbnNpb24gPSBsYXN0KGZpbGVuYW1lLnNwbGl0KCcuJykpIHx8ICcnOwogICAgcmV0dXJuIHByb2Nlc3MuZW52LkFQSV9VUkwgKyAiL3YxL2ljb25zL2ZpbGVFeHRlbnNpb25zLyIgKyBleHRlbnNpb247Cn07CmV4cG9ydCBmdW5jdGlvbiBhcHBseUF0dGFjaG1lbnREZWZhdWx0cyhhdHRhY2htZW50KSB7CiAgICB2YXIgbmV3QXR0YWNobWVudCA9IF9fYXNzaWduKHsgZmlsZW5hbWU6ICcnLCB0eXBlOiAnJywgbGVuZ3RoOiAwLCBjbG91ZEZpbGU6ICcnLCBjbG91ZFVybDogJycsIGlubGluZTogZmFsc2UsIHByb2dyZXNzOiAwIH0sIGF0dGFjaG1lbnQpOwogICAgaWYgKCEobmV3QXR0YWNobWVudC5jcmVhdGVkIGluc3RhbmNlb2YgRGF0ZSkgJiYgKHR5cGVvZiBuZXdBdHRhY2htZW50LmNyZWF0ZWQgPT09ICdzdHJpbmcnKSkgewogICAgICAgIG5ld0F0dGFjaG1lbnQuY3JlYXRlZCA9IG5ldyBEYXRlKG5ld0F0dGFjaG1lbnQuY3JlYXRlZCk7CiAgICB9CiAgICBpZiAoIShuZXdBdHRhY2htZW50LnVwZGF0ZWQgaW5zdGFuY2VvZiBEYXRlKSAmJiAodHlwZW9mIG5ld0F0dGFjaG1lbnQudXBkYXRlZCA9PT0gJ3N0cmluZycpKSB7CiAgICAgICAgbmV3QXR0YWNobWVudC51cGRhdGVkID0gbmV3IERhdGUobmV3QXR0YWNobWVudC51cGRhdGVkKTsKICAgIH0KICAgIHJldHVybiBuZXdBdHRhY2htZW50Owp9CmV4cG9ydCB2YXIgY29udmVydFRvQXR0YWNobWVudCA9IGZ1bmN0aW9uIChtZXRhKSB7IHJldHVybiAoewogICAgaWQ6IG1ldGEuYXR0YWNobWVudCwKICAgIGNyZWF0ZWQ6IG5ldyBEYXRlKCksCiAgICB1cGRhdGVkOiBuZXcgRGF0ZSgpLAogICAgZmlsZW5hbWU6IG1ldGEuZmlsZSAmJiBtZXRhLmZpbGUubmFtZSB8fCAnZmlsZScsCiAgICB0eXBlOiBtZXRhLmZpbGUgJiYgbWV0YS5maWxlLnR5cGUgfHwgJ2F0dGFjaG1lbnQnLAogICAgbGVuZ3RoOiBtZXRhLmZpbGUgJiYgbWV0YS5maWxlLnNpemUgfHwgMCwKICAgIGNsb3VkRmlsZTogbWV0YS5jbG91ZEZpbGUgfHwgJycsCiAgICBjbG91ZFVybDogbWV0YS5jbG91ZFVybCB8fCAnJywKICAgIGNsb3VkOiBtZXRhLmNsb3VkIHx8IGZhbHNlLAogICAgaW5saW5lOiBtZXRhLmlubGluZSB8fCBmYWxzZSwKICAgIHRlbXBsYXRlOiBtZXRhLnRlbXBsYXRlLAogICAgcHJvZ3Jlc3M6IDAsCn0pOyB9Owp2YXIgZ2VuZXJhdGVGaWxlID0gZnVuY3Rpb24gKG5hbWUsIHR5cGUsIHNpemUpIHsKICAgIHZhciBibG9iID0gbmV3IEJsb2IoWycnXSwgewogICAgICAgIHR5cGU6IHR5cGUsCiAgICB9KTsKICAgIHZhciBmaWxlQmxvYiA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBibG9iKSwgeyBuYW1lOiBuYW1lLAogICAgICAgIHNpemU6IHNpemUsCiAgICAgICAgdHlwZTogdHlwZSB9KTsKICAgIHJldHVybiBmaWxlQmxvYjsKfTsKZXhwb3J0IHZhciBjb252ZXJ0VG9NZXRhID0gZnVuY3Rpb24gKGF0dGFjaG1lbnQsIHJlc291cmNlSWQpIHsgcmV0dXJuICh7CiAgICBhdHRhY2htZW50OiBhdHRhY2htZW50LmlkLAogICAgZmlsZTogZ2VuZXJhdGVGaWxlKGF0dGFjaG1lbnQuZmlsZW5hbWUsIGF0dGFjaG1lbnQudHlwZSwgYXR0YWNobWVudC5sZW5ndGgpLAogICAgcmVzb3VyY2VJZDogcmVzb3VyY2VJZCwKICAgIGNsb3VkRmlsZTogYXR0YWNobWVudC5jbG91ZEZpbGUgfHwgJycsCiAgICBjbG91ZFVybDogYXR0YWNobWVudC5jbG91ZFVybCB8fCAnJywKICAgIGNsb3VkOiBhdHRhY2htZW50LmNsb3VkIHx8IGZhbHNlLAogICAgaW5saW5lOiBhdHRhY2htZW50LmlubGluZSB8fCBmYWxzZSwKICAgIHRlbXBsYXRlOiBhdHRhY2htZW50LnRlbXBsYXRlLAogICAgcHJvZ3Jlc3M6IDAsCn0pOyB9OwovLyBDb252ZXJ0cyBhIG1ldGEgdG8gYW4gb3B0aW1pc3RpYyBmb3IgYW4gb2ZmbGluZSBzZW5kIG9yIG90aGVyd2lzZQpleHBvcnQgdmFyIGNvbnZlcnRUb09wdGltaXN0aWMgPSBmdW5jdGlvbiAobWV0YSwgcmVzb3VyY2VJZCkgeyByZXR1cm4gKHsKICAgIGlkOiBtZXRhLmF0dGFjaG1lbnQsCiAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpLAogICAgdXBkYXRlZDogbmV3IERhdGUoKSwKICAgIGZpbGVuYW1lOiBtZXRhLmZpbGUgJiYgbWV0YS5maWxlLm5hbWUgfHwgKG1ldGEuZmlsZW5hbWUgfHwgJycpLAogICAgdHlwZTogbWV0YS5maWxlICYmIG1ldGEuZmlsZS50eXBlIHx8ICcnLAogICAgbGVuZ3RoOiBtZXRhLmZpbGUgJiYgbWV0YS5maWxlLnNpemUgfHwgMCwKICAgIGNsb3VkRmlsZTogbWV0YS5jbG91ZEZpbGUgfHwgJycsCiAgICBjbG91ZFVybDogbWV0YS5jbG91ZFVybCB8fCAnJywKICAgIGNsb3VkOiBtZXRhLmNsb3VkIHx8IGZhbHNlLAogICAgaW5saW5lOiBtZXRhLmlubGluZSB8fCBmYWxzZSwKICAgIHRlbXBsYXRlOiBtZXRhLnRlbXBsYXRlLAogICAgcHJvZ3Jlc3M6IDEsCiAgICBvcHRpbWlzdGljOiB0cnVlLAp9KTsgfTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/attachment.ts","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/lib/attachment.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAC9B,OAAO,EAAE,QAAQ,EAA8B,MAAM,YAAY,CAAC;AASlE,MAAM,CAAC,IAAM,QAAQ,GAAG,UAAC,MAAc;IACrC,IAAI;IACJ,IAAI,MAAM,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;QAC7D,OAAU,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAI,CAAC;KACjC;IAED,KAAK;IACL,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;QAC5D,OAAU,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAK,CAAC;KAC3C;IAED,KAAK;IACL,OAAU,CAAC,MAAM,GAAG,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAK,CAAC;AAC/C,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,iBAAiB,GAAG,UAAC,MAAc,EAAE,QAAgB;IAChE,IAAI;IACJ,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;QAC5D,OAAU,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,WAAM,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,OAAI,CAAC;KACrE;IAED,KAAK;IACL,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE;QAC5D,IAAM,QAAQ,GAAI,MAAM,GAAG,IAAI,CAAC;QAChC,IAAM,UAAU,GAAG,MAAM,GAAG,QAAQ,GAAG,IAAI,CAAC;QAC5C,OAAU,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,WAAM,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,QAAK,CAAC;KACjE;IAED,KAAK;IACL,IAAM,QAAQ,GAAI,MAAM,GAAG,OAAO,CAAC;IACnC,IAAM,UAAU,GAAG,MAAM,GAAG,QAAQ,GAAG,OAAO,CAAC;IAC/C,OAAU,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,WAAM,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,QAAK,CAAC;AAClE,CAAC,CAAC;AAEF,4BAA4B;AAC5B,MAAM,CAAC,IAAM,UAAU,GAAG,UAAC,IAAY;IACrC,QAAQ,IAAI,EAAE;QACZ,KAAK,oBAAoB,CAAC;QAC1B,KAAK,yEAAyE,CAAC;QAC/E,KAAK,yEAAyE,CAAC;QAC/E,KAAK,kDAAkD,CAAC;QACxD,KAAK,kDAAkD;YACrD,OAAO,QAAQ,CAAC,QAAQ,CAAC;QAC3B,KAAK,mBAAmB,CAAC;QACzB,KAAK,qBAAqB,CAAC;QAC3B,KAAK,0BAA0B,CAAC;QAChC,KAAK,qBAAqB,CAAC;QAC3B,KAAK,uBAAuB,CAAC;QAC7B,KAAK,4BAA4B,CAAC;QAClC,KAAK,iBAAiB,CAAC;QACvB,KAAK,mBAAmB,CAAC;QACzB,KAAK,mEAAmE;YACtE,OAAO,QAAQ,CAAC,KAAK,CAAC;QACxB,KAAK,iBAAiB,CAAC;QACvB,KAAK,YAAY,CAAC;QAClB,KAAK,YAAY,CAAC;QAClB,KAAK,WAAW,CAAC;QACjB,KAAK,WAAW;YACd,OAAO,QAAQ,CAAC,KAAK,CAAC;QACxB,KAAK,0BAA0B,CAAC;QAChC,KAAK,8BAA8B,CAAC;QACpC,KAAK,iBAAiB,CAAC;QACvB,KAAK,iBAAiB;YACpB,OAAO,QAAQ,CAAC,GAAG,CAAC;QACtB;YACE,OAAO,QAAQ,CAAC,OAAO,CAAC;KAC3B;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,eAAe,GAAG,UAAC,QAAgB;IAC9C,IAAM,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;IAClD,OAAU,OAAO,CAAC,GAAG,CAAC,OAAO,iCAA4B,SAAW,CAAC;AACvE,CAAC,CAAC;AAEF,MAAM,UAAU,uBAAuB,CAAC,UAAsB;IAC5D,IAAM,aAAa,cACjB,QAAQ,EAAE,EAAE,EACZ,IAAI,EAAE,EAAE,EACR,MAAM,EAAE,CAAC,EACT,SAAS,EAAE,EAAE,EACb,QAAQ,EAAE,EAAE,EACZ,MAAM,EAAE,KAAK,EACb,QAAQ,EAAE,CAAC,IACR,UAAU,CACd,CAAC;IAEF,IAAI,CAAC,CAAC,aAAa,CAAC,OAAO,YAAY,IAAI,CAAC,IAAI,CAAC,OAAO,aAAa,CAAC,OAAO,KAAK,QAAQ,CAAC,EAAE;QAC3F,aAAa,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;KACzD;IACD,IAAI,CAAC,CAAC,aAAa,CAAC,OAAO,YAAY,IAAI,CAAC,IAAI,CAAC,OAAO,aAAa,CAAC,OAAO,KAAK,QAAQ,CAAC,EAAE;QAC3F,aAAa,CAAC,OAAO,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;KACzD;IACD,OAAO,aAAa,CAAC;AACvB,CAAC;AAED,MAAM,CAAC,IAAM,mBAAmB,GAAG,UAAC,IAAoB,IAAiB,OAAA,CAAC;IACxE,EAAE,EAAE,IAAI,CAAC,UAAU;IACnB,OAAO,EAAE,IAAI,IAAI,EAAE;IACnB,OAAO,EAAE,IAAI,IAAI,EAAE;IACnB,QAAQ,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,MAAM;IAC/C,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,YAAY;IACjD,MAAM,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;IACxC,SAAS,EAAE,IAAI,CAAC,SAAS,IAAI,EAAE;IAC/B,QAAQ,EAAG,IAAI,CAAC,QAAQ,IAAI,EAAE;IAC9B,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,KAAK;IAC1B,MAAM,EAAE,IAAI,CAAC,MAAM,IAAI,KAAK;IAC5B,QAAQ,EAAE,IAAI,CAAC,QAAQ;IACvB,QAAQ,EAAE,CAAC;CACZ,CAAC,EAbuE,CAavE,CAAC;AAEH,IAAM,YAAY,GAAG,UAAC,IAAY,EAAE,IAAY,EAAE,IAAY;IAC5D,IAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE;QAC1B,IAAI,MAAA;KACL,CAAC,CAAC;IACH,IAAM,QAAQ,yBACT,IAAI,KACP,IAAI,MAAA;QACJ,IAAI,MAAA;QACJ,IAAI,MAAA,GACL,CAAC;IAEF,OAAO,QAAgB,CAAC;AAC1B,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,aAAa,GAAG,UAAC,UAAsB,EAAE,UAAkB,IAAqB,OAAA,CAAC;IAC5F,UAAU,EAAE,UAAU,CAAC,EAAE;IACzB,IAAI,EAAE,YAAY,CAChB,UAAU,CAAC,QAAQ,EACnB,UAAU,CAAC,IAAI,EACf,UAAU,CAAC,MAAM,CAClB;IACD,UAAU,YAAA;IACV,SAAS,EAAE,UAAU,CAAC,SAAS,IAAI,EAAE;IACrC,QAAQ,EAAE,UAAU,CAAC,QAAQ,IAAI,EAAE;IACnC,KAAK,EAAE,UAAU,CAAC,KAAK,IAAI,KAAK;IAChC,MAAM,EAAE,UAAU,CAAC,MAAM,IAAI,KAAK;IAClC,QAAQ,EAAE,UAAU,CAAC,QAAQ;IAC7B,QAAQ,EAAE,CAAC;CACZ,CAAC,EAd2F,CAc3F,CAAC;AAEH,oEAAoE;AACpE,MAAM,CAAC,IAAM,mBAAmB,GAAG,UAAC,IAAoB,EAAE,UAAkB,IAAiB,OAAA,CAAC;IAC5F,EAAE,EAAE,IAAI,CAAC,UAAU;IACnB,OAAO,EAAE,IAAI,IAAI,EAAE;IACnB,OAAO,EAAE,IAAI,IAAI,EAAE;IACnB,QAAQ,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC;IAC9D,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,EAAE;IACvC,MAAM,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;IACxC,SAAS,EAAE,IAAI,CAAC,SAAS,IAAI,EAAE;IAC/B,QAAQ,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE;IAC7B,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,KAAK;IAC1B,MAAM,EAAE,IAAI,CAAC,MAAM,IAAI,KAAK;IAC5B,QAAQ,EAAE,IAAI,CAAC,QAAQ;IACvB,QAAQ,EAAE,CAAC;IACX,UAAU,EAAE,IAAI;CACjB,CAAC,EAd2F,CAc3F,CAAC","sourcesContent":["import { last } from 'lodash';\nimport { FileType, Attachment, AttachmentMeta } from '@src/types';\nimport { Point } from '@src/components/ContentEditable/ContentEditable';\n\nexport interface AttachmentUploadOptions {\n  shiftKey?: boolean;\n  ignoreInline?: boolean;\n  position?: Point;\n}\n\nexport const truncate = (length: number) => {\n  // B\n  if (length >= Math.pow(1000, 0) && length < Math.pow(1000, 1)) {\n    return `${length.toFixed(1)} B`;\n  }\n\n  // KB\n  if (length > Math.pow(1000, 1) && length < Math.pow(1000, 2)) {\n    return `${(length / 1000).toFixed(1)} KB`;\n  }\n\n  // MB\n  return `${(length / 1000000).toFixed(1)} MB`;\n};\n\nexport const truncatedProgress = (length: number, progress: number) => {\n  // B\n  if (length > Math.pow(1000, 0) && length < Math.pow(1000, 1)) {\n    return `${(length * progress).toFixed(0)} / ${length.toFixed(1)} B`;\n  }\n\n  // KB\n  if (length > Math.pow(1000, 1) && length < Math.pow(1000, 2)) {\n    const kbLength =  length / 1000;\n    const kbProgress = length * progress / 1000;\n    return `${(kbProgress).toFixed(0)} / ${kbLength.toFixed(1)} KB`;\n  }\n\n  // MB\n  const mbLength =  length / 1000000;\n  const mbProgress = length * progress / 1000000;\n  return `${(mbProgress).toFixed(0)} / ${mbLength.toFixed(1)} MB`;\n};\n\n// TODO(SHIN): Finish format\nexport const fileFormat = (type: string): FileType => {\n  switch (type) {\n    case 'application/msword':\n    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':\n    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':\n    case 'application/vnd.ms-word.document.macroEnabled.12':\n    case 'application/vnd.ms-word.template.macroEnabled.12':\n      return FileType.Document;\n    case 'application/excel':\n    case 'application/x-excel':\n    case 'application/vnd.ms-excel':\n    case 'application/msexcel':\n    case 'application/x-msexcel':\n    case 'application/x-dos_ms_excel':\n    case 'application/xls':\n    case 'application/x-xls':\n    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':\n      return FileType.Excel;\n    case 'application/png':\n    case 'image/jpeg':\n    case 'image/tiff':\n    case 'image/gif':\n    case 'image/png':\n      return FileType.Image;\n    case 'application/x-compressed':\n    case 'application/x-zip-compressed':\n    case 'application/zip':\n    case 'multipart/x-zip':\n      return FileType.Zip;\n    default:\n      return FileType.Unknown;\n  }\n};\n\nexport const filenameIconUrl = (filename: string) => {\n  const extension = last(filename.split('.')) || '';\n  return `${process.env.API_URL}/v1/icons/fileExtensions/${extension}`;\n};\n\nexport function applyAttachmentDefaults(attachment: Attachment): Attachment {\n  const newAttachment = {\n    filename: '',\n    type: '',\n    length: 0,\n    cloudFile: '',\n    cloudUrl: '',\n    inline: false,\n    progress: 0,\n    ...attachment,\n  };\n\n  if (!(newAttachment.created instanceof Date) && (typeof newAttachment.created === 'string')) {\n    newAttachment.created = new Date(newAttachment.created);\n  }\n  if (!(newAttachment.updated instanceof Date) && (typeof newAttachment.updated === 'string')) {\n    newAttachment.updated = new Date(newAttachment.updated);\n  }\n  return newAttachment;\n}\n\nexport const convertToAttachment = (meta: AttachmentMeta): Attachment => ({\n  id: meta.attachment,\n  created: new Date(),\n  updated: new Date(),\n  filename: meta.file && meta.file.name || 'file',\n  type: meta.file && meta.file.type || 'attachment',\n  length: meta.file && meta.file.size || 0,\n  cloudFile: meta.cloudFile || '',\n  cloudUrl : meta.cloudUrl || '',\n  cloud: meta.cloud || false,\n  inline: meta.inline || false,\n  template: meta.template,\n  progress: 0,\n});\n\nconst generateFile = (name: string, type: string, size: number): File => {\n  const blob = new Blob([''], {\n    type,\n  });\n  const fileBlob = {\n    ...blob,\n    name,\n    size,\n    type,\n  };\n\n  return fileBlob as File;\n};\n\nexport const convertToMeta = (attachment: Attachment, resourceId: string): AttachmentMeta => ({\n  attachment: attachment.id,\n  file: generateFile(\n    attachment.filename,\n    attachment.type,\n    attachment.length,\n  ),\n  resourceId,\n  cloudFile: attachment.cloudFile || '',\n  cloudUrl: attachment.cloudUrl || '',\n  cloud: attachment.cloud || false,\n  inline: attachment.inline || false,\n  template: attachment.template,\n  progress: 0,\n});\n\n// Converts a meta to an optimistic for an offline send or otherwise\nexport const convertToOptimistic = (meta: AttachmentMeta, resourceId: string): Attachment => ({\n  id: meta.attachment,\n  created: new Date(),\n  updated: new Date(),\n  filename: meta.file && meta.file.name || (meta.filename || ''),\n  type: meta.file && meta.file.type || '',\n  length: meta.file && meta.file.size || 0,\n  cloudFile: meta.cloudFile || '',\n  cloudUrl: meta.cloudUrl || '',\n  cloud: meta.cloud || false,\n  inline: meta.inline || false,\n  template: meta.template,\n  progress: 1,\n  optimistic: true,\n});\n"]}]}