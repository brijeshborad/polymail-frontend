{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/DemoVideo/DemoVideo.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/DemoVideo/DemoVideo.tsx","mtime":1675280254004},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBQb3BvdmVyIGZyb20gJy4uL1BvcG92ZXIvUG9wb3Zlcic7CmltcG9ydCAnLi9EZW1vVmlkZW8uc2Nzcyc7CmltcG9ydCB7IHJlY29yZEV2ZW50LCBVc2VyRXZlbnRzIH0gZnJvbSAnQHNyYy9saWIvYW5hbHl0aWNzJzsKdmFyIERlbW9WaWRlbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhEZW1vVmlkZW8sIF9zdXBlcik7CiAgICBmdW5jdGlvbiBEZW1vVmlkZW8oKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLnBvcG92ZXIgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVWaWRlb1JlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMudmlkZW8gPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVTaG93ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy52aWRlby5wbGF5KCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGNsZWFyRGVtb1ZpZGVvID0gX3RoaXMucHJvcHMuY2xlYXJEZW1vVmlkZW87CiAgICAgICAgICAgIGNsZWFyRGVtb1ZpZGVvKCk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBEZW1vVmlkZW8ucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkZW1vVmlkZW8gPSB0aGlzLnByb3BzLmRlbW9WaWRlbzsKICAgICAgICBpZiAoZGVtb1ZpZGVvKSB7CiAgICAgICAgICAgIHRoaXMucG9wb3Zlci5zaG93KCk7CiAgICAgICAgfQogICAgfTsKICAgIERlbW9WaWRlby5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKG9sZFByb3BzKSB7CiAgICAgICAgdmFyIGRlbW9WaWRlbyA9IHRoaXMucHJvcHMuZGVtb1ZpZGVvOwogICAgICAgIC8vIFNob3cgZGVtbyB2aWRlbyBhbmQgcmVjb3JkIGV2ZW50CiAgICAgICAgaWYgKGRlbW9WaWRlbyAmJiAhb2xkUHJvcHMuZGVtb1ZpZGVvKSB7CiAgICAgICAgICAgIHRoaXMucG9wb3Zlci5zaG93KCk7CiAgICAgICAgICAgIHJlY29yZEV2ZW50KFVzZXJFdmVudHMuVmlkZW9WaWV3ZWQsIHsgbmFtZTogZGVtb1ZpZGVvLm5hbWUgfSk7CiAgICAgICAgfQogICAgICAgIGlmICghZGVtb1ZpZGVvKSB7CiAgICAgICAgICAgIHRoaXMucG9wb3Zlci5oaWRlKCk7CiAgICAgICAgfQogICAgfTsKICAgIERlbW9WaWRlby5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkZW1vVmlkZW8gPSB0aGlzLnByb3BzLmRlbW9WaWRlbzsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3ZlciwgeyByZWY6IHRoaXMuaGFuZGxlUmVmLCBvbkhpZGU6IHRoaXMuaGFuZGxlQ2xlYXIsIG9uU2hvdzogdGhpcy5oYW5kbGVTaG93LCBjbGFzc05hbWU6ICJkZW1vLXZpZGVvIiwgZGFya092ZXJsYXk6IHRydWUsIGZhZGVzT3V0OiB0cnVlLCBvdmVybGF5OiB0cnVlIH0sIGRlbW9WaWRlbyAmJiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb250ZW50cyIgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgidmlkZW8iLCB7IHJlZjogdGhpcy5oYW5kbGVWaWRlb1JlZiwgY2xhc3NOYW1lOiAidmlkZW8iLCBjb250cm9sczogdHJ1ZSwgcHJlbG9hZDogIm1ldGFkYXRhIiwgY3Jvc3NPcmlnaW46ICJhbm9ueW1vdXMiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzb3VyY2UiLCB7IHNyYzogZGVtb1ZpZGVvLnVybCB9KSwKICAgICAgICAgICAgICAgIGRlbW9WaWRlby5jYXB0aW9uVXJsICYmIChSZWFjdC5jcmVhdGVFbGVtZW50KCJ0cmFjayIsIHsgc3JjOiBkZW1vVmlkZW8uY2FwdGlvblVybCwgbGFiZWw6ICJFbmdsaXNoIiwga2luZDogInN1YnRpdGxlcyIsIGRlZmF1bHQ6IHRydWUgfSkpKSkpKSk7CiAgICB9OwogICAgcmV0dXJuIERlbW9WaWRlbzsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IERlbW9WaWRlbzsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/DemoVideo/DemoVideo.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/DemoVideo/DemoVideo.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,OAAO,MAAM,oBAAoB,CAAC;AACzC,OAAO,kBAAkB,CAAC;AAE1B,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,MAAM,oBAAoB,CAAC;AAU7D;IAAwB,6BAAmD;IAIzE;QAAA,YACE,iBAAO,SACR;QAuBD,eAAS,GAAG,UAAC,GAAY;YACvB,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACrB,CAAC,CAAA;QAED,oBAAc,GAAG,UAAC,GAAqB;YACrC,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QACnB,CAAC,CAAA;QAED,gBAAU,GAAG;YACX,KAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QACpB,CAAC,CAAA;QAED,iBAAW,GAAG;YACJ,IAAA,2CAAc,CAAgB;YACtC,cAAc,EAAE,CAAC;QACnB,CAAC,CAAA;;IAtCD,CAAC;IAED,qCAAiB,GAAjB;QACU,IAAA,gCAAS,CAAgB;QACjC,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACrB;IACH,CAAC;IAED,sCAAkB,GAAlB,UAAmB,QAAoB;QAC7B,IAAA,gCAAS,CAAgB;QAEjC,mCAAmC;QACnC,IAAI,SAAS,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;YACpC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACpB,WAAW,CAAC,UAAU,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;SAC/D;QAED,IAAI,CAAC,SAAS,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACrB;IACH,CAAC;IAmBD,0BAAM,GAAN;QACU,IAAA,gCAAS,CAAgB;QACjC,OAAO,CACL,oBAAC,OAAO,IACN,GAAG,EAAE,IAAI,CAAC,SAAS,EACnB,MAAM,EAAE,IAAI,CAAC,WAAW,EACxB,MAAM,EAAE,IAAI,CAAC,UAAU,EACvB,SAAS,EAAC,YAAY,EACtB,WAAW,QACX,QAAQ,QACR,OAAO,UAEN,SAAS,IAAI,CACZ,6BAAK,SAAS,EAAC,UAAU;YACvB,+BACE,GAAG,EAAE,IAAI,CAAC,cAAc,EACxB,SAAS,EAAC,OAAO,EACjB,QAAQ,QACR,OAAO,EAAC,UAAU,EAClB,WAAW,EAAC,WAAW;gBAEvB,gCAAQ,GAAG,EAAE,SAAS,CAAC,GAAG,GAAI;gBAC7B,SAAS,CAAC,UAAU,IAAI,CACvB,+BACE,GAAG,EAAE,SAAS,CAAC,UAAU,EACzB,KAAK,EAAC,SAAS,EACf,IAAI,EAAC,WAAW,EAChB,OAAO,SACP,CACH,CACK,CACN,CACL,CACO,CACX,CAAC;IACJ,CAAC;IACH,gBAAC;AAAD,CAAC,AAlFD,CAAwB,KAAK,CAAC,aAAa,GAkF1C;AAED,eAAe,SAAS,CAAC","sourcesContent":["import React from 'react';\nimport Popover from '../Popover/Popover';\nimport './DemoVideo.scss';\nimport { DemoVideoMeta } from '@src/types';\nimport { recordEvent, UserEvents } from '@src/lib/analytics';\n\nexport interface StateProps {\n  demoVideo?: DemoVideoMeta;\n}\n\nexport interface DispatchProps {\n  clearDemoVideo: () => void;\n}\n\nclass DemoVideo extends React.PureComponent<StateProps & DispatchProps, {}> {\n  private popover: Popover;\n  private video: HTMLVideoElement;\n\n  constructor() {\n    super();\n  }\n\n  componentDidMount() {\n    const { demoVideo } = this.props;\n    if (demoVideo) {\n      this.popover.show();\n    }\n  }\n\n  componentDidUpdate(oldProps: StateProps) {\n    const { demoVideo } = this.props;\n\n    // Show demo video and record event\n    if (demoVideo && !oldProps.demoVideo) {\n      this.popover.show();\n      recordEvent(UserEvents.VideoViewed, { name: demoVideo.name });\n    }\n\n    if (!demoVideo) {\n      this.popover.hide();\n    }\n  }\n\n  handleRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  handleVideoRef = (ref: HTMLVideoElement) => {\n    this.video = ref;\n  }\n\n  handleShow = () => {\n    this.video.play();\n  }\n\n  handleClear = () => {\n    const { clearDemoVideo } = this.props;\n    clearDemoVideo();\n  }\n\n  render() {\n    const { demoVideo } = this.props;\n    return (\n      <Popover\n        ref={this.handleRef}\n        onHide={this.handleClear}\n        onShow={this.handleShow}\n        className=\"demo-video\"\n        darkOverlay\n        fadesOut\n        overlay\n      >\n        {demoVideo && (\n          <div className=\"contents\">\n            <video\n              ref={this.handleVideoRef}\n              className=\"video\"\n              controls\n              preload=\"metadata\"\n              crossOrigin=\"anonymous\"\n            >\n              <source src={demoVideo.url} />\n              {demoVideo.captionUrl && (\n                <track\n                  src={demoVideo.captionUrl}\n                  label=\"English\"\n                  kind=\"subtitles\"\n                  default\n                />\n              )}\n            </video>\n        </div>\n        )}\n      </Popover>\n    );\n  }\n}\n\nexport default DemoVideo;\n"]}]}