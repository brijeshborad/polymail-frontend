{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/Security.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/Security.tsx","mtime":1675280254109},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IE5hdmlnYXRpb25IZWFkZXIgZnJvbSAnQHNyYy9yb3V0ZXMvU2V0dGluZ3MvY29tcG9uZW50cy9OYXZpZ2F0aW9uSGVhZGVyJzsKaW1wb3J0IERyb3Bkb3duQ2VsbCBmcm9tICdAc3JjL3JvdXRlcy9TZXR0aW5ncy9jb21wb25lbnRzL0Ryb3Bkb3duQ2VsbCc7CmltcG9ydCBUb2dnbGVDZWxsIGZyb20gJ0BzcmMvcm91dGVzL1NldHRpbmdzL2NvbXBvbmVudHMvVG9nZ2xlQ2VsbCc7CmltcG9ydCB7IFR3b0ZhY3RvckF1dGhlbnRpY2F0aW9uU3RhdHVzIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCAnLi9TZWN1cml0eS5zY3NzJzsKaW1wb3J0IENvbmZpcm0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0Jhc2UvQ29uZmlybSc7CmltcG9ydCBQYXNzd29yZENvbmZpcm0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0Jhc2UvUGFzc3dvcmRDb25maXJtL1Bhc3N3b3JkQ29uZmlybSc7CmltcG9ydCBQaG9uZU51bWJlclBvcG92ZXIgZnJvbSAnLi9jb21wb25lbnRzL1Bob25lTnVtYmVyUG9wb3Zlci9QaG9uZU51bWJlclBvcG92ZXInOwppbXBvcnQgVGZhQ29kZVBvcG92ZXIgZnJvbSAnLi9jb21wb25lbnRzL1RmYUNvZGVQb3BvdmVyL1RmYUNvZGVQb3BvdmVyJzsKaW1wb3J0IGJyb3dzZXJIaXN0b3J5IGZyb20gJ0BzcmMvbGliL2Jyb3dzZXJIaXN0b3J5JzsKdmFyIFNlY3VyaXR5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFNlY3VyaXR5LCBfc3VwZXIpOwogICAgZnVuY3Rpb24gU2VjdXJpdHkoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVVcGRhdGVkTG9naW5FbWFpbFNlbGVjdCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIG1lID0gX2EubWUsIHVwZGF0ZU1lID0gX2EudXBkYXRlTWU7CiAgICAgICAgICAgIGlmICghbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcGFzc3dvcmRDb25maXJtUHJvcHMgPSB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0VudGVyIHlvdXIgcGFzc3dvcmQnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIlRvIGNoYW5nZSBlbWFpbCB0byAiICsgdmFsdWUgKyAiLCBwbGVhc2UgZW50ZXIgeW91ciBQb2x5bWFpbCBwYXNzd29yZCIsCiAgICAgICAgICAgICAgICBvbkNvbnRpbnVlOiBmdW5jdGlvbiAocGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHBhc3N3b3JkQ29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1lKF9fYXNzaWduKF9fYXNzaWduKHt9LCBtZSksIHsgZW1haWw6IHZhbHVlLCBwYXNzd29yZDogcGFzc3dvcmQgfSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBwYXNzd29yZENvbmZpcm1Qcm9wczogdW5kZWZpbmVkIH0pOyB9LAogICAgICAgICAgICB9OwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHBhc3N3b3JkQ29uZmlybVByb3BzOiBwYXNzd29yZENvbmZpcm1Qcm9wcyB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVR3b0ZhY3RvckF1dGhUb2dnbGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBtZSA9IF9hLm1lLCB1bnNldFRmYSA9IF9hLnVuc2V0VGZhOwogICAgICAgICAgICBpZiAoIW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1lLnRmYSAmJiBtZS50ZmEuc3RhdHVzID09PSBUd29GYWN0b3JBdXRoZW50aWNhdGlvblN0YXR1cy5WZXJpZmllZCkgewogICAgICAgICAgICAgICAgdmFyIHBhc3N3b3JkQ29uZmlybVByb3BzID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRW50ZXIgeW91ciBwYXNzd29yZCcsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIlRvIGRpc2FibGUgdHdvIGZhY3RvciBhdXRoZW50aWNhdGlvbiwgcGxlYXNlIGVudGVyIHlvdXIgUG9seW1haWwgcGFzc3dvcmQuIiwKICAgICAgICAgICAgICAgICAgICBvbkNvbnRpbnVlOiBmdW5jdGlvbiAocGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdW5zZXRUZmEocGFzc3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZENvbmZpcm1Qcm9wczogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlQ29weTogJ0Rpc2FibGUnLAogICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zZXRTdGF0ZSh7IHBhc3N3b3JkQ29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7IH0sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBwYXNzd29yZENvbmZpcm1Qcm9wczogcGFzc3dvcmRDb25maXJtUHJvcHMgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dQaG9uZU51bWJlclBvcG92ZXI6IHRydWUgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmFjY291bnRFbWFpbHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBtZSA9IF9hLm1lLCBhY2NvdW50cyA9IF9hLmFjY291bnRzOwogICAgICAgICAgICB2YXIgZW1haWxzID0gYWNjb3VudHMubWFwKGZ1bmN0aW9uIChhY2NvdW50KSB7IHJldHVybiBhY2NvdW50LmVtYWlsOyB9KTsKICAgICAgICAgICAgaWYgKG1lICYmIGVtYWlscy5pbmRleE9mKG1lLmVtYWlsKSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgIGVtYWlscy5wdXNoKG1lLmVtYWlsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZW1haWxzOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgbWUgPSBfYS5tZSwgcmVzZXRQYXNzd29yZCA9IF9hLnJlc2V0UGFzc3dvcmQ7CiAgICAgICAgICAgIGlmICghbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgY29uZmlybVByb3BzID0gewogICAgICAgICAgICAgICAgdGl0bGU6ICdSZXNldHRpbmcgUGFzc3dvcmQnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIkEgbGluayB0byByZXNldCB5b3VyIHBhc3N3b3JkIHdpbGwgYmUgc2VudCB0byAiICsgbWUuZW1haWwsCiAgICAgICAgICAgICAgICBjb25maXJtQ29weTogJ1NlbmQgTGluaycsCiAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogdW5kZWZpbmVkIH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChtZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXNldFBhc3N3b3JkKG1lLmVtYWlsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7IH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiBjb25maXJtUHJvcHMgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVQaG9uZU51bWJlclBvcG92ZXJDYW5jZWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd1Bob25lTnVtYmVyUG9wb3ZlcjogZmFsc2UgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVQaG9uZU51bWJlclBvcG92ZXJDb250aW51ZSA9IGZ1bmN0aW9uIChwaG9uZSkgewogICAgICAgICAgICB2YXIgc2V0VGZhID0gX3RoaXMucHJvcHMuc2V0VGZhOwogICAgICAgICAgICB2YXIgcGFzc3dvcmRDb25maXJtUHJvcHMgPSB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0VudGVyIHlvdXIgcGFzc3dvcmQnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIlRvIGVuYWJsZSB0d28gZmFjdG9yIGF1dGhlbnRpY2F0aW9uLCBwbGVhc2UgZW50ZXIgeW91ciBQb2x5bWFpbCBwYXNzd29yZC4iLAogICAgICAgICAgICAgICAgb25Db250aW51ZTogZnVuY3Rpb24gKHBhc3N3b3JkKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0VGZhKHsgcGhvbmU6IHBob25lLCBwYXNzd29yZDogcGFzc3dvcmQgfSk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZENvbmZpcm1Qcm9wczogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93VGZhQ29kZVBvcG92ZXI6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBwaG9uZSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBwYXNzd29yZENvbmZpcm1Qcm9wczogdW5kZWZpbmVkIH0pOyB9LAogICAgICAgICAgICB9OwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHBhc3N3b3JkQ29uZmlybVByb3BzOiBwYXNzd29yZENvbmZpcm1Qcm9wcywgc2hvd1Bob25lTnVtYmVyUG9wb3ZlcjogZmFsc2UgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVUZmFDb2RlUG9wb3ZlckNhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzaG93VGZhQ29kZVBvcG92ZXI6IGZhbHNlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlVGZhQ29kZVBvcG92ZXJDb250aW51ZSA9IGZ1bmN0aW9uIChjb2RlKSB7CiAgICAgICAgICAgIHZhciB2YWxpZGF0ZVRmYUNvZGUgPSBfdGhpcy5wcm9wcy52YWxpZGF0ZVRmYUNvZGU7CiAgICAgICAgICAgIHZhbGlkYXRlVGZhQ29kZShjb2RlKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVRmYUNvZGVQb3BvdmVyUmVzZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2V0VGZhID0gX3RoaXMucHJvcHMuc2V0VGZhOwogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zdGF0ZSwgcGhvbmVOdW1iZXIgPSBfYS5waG9uZU51bWJlciwgcGFzc3dvcmQgPSBfYS5wYXNzd29yZDsKICAgICAgICAgICAgLy8gVHJ5IHJlY3JlYXRpbmcKICAgICAgICAgICAgaWYgKCEhcGhvbmVOdW1iZXIgJiYgISFwYXNzd29yZCkgewogICAgICAgICAgICAgICAgc2V0VGZhKHsgcGhvbmU6IHBob25lTnVtYmVyLCBwYXNzd29yZDogcGFzc3dvcmQgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGdvIGJhY2sgdG8gcGhvbmVOdW1iZXIgc2VuZAogICAgICAgICAgICBpZiAoISFwaG9uZU51bWJlcikgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzaG93VGZhQ29kZVBvcG92ZXI6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlUGhvbmVOdW1iZXJQb3BvdmVyQ29udGludWUocGhvbmVOdW1iZXIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBnbyBiYWNrIHRvIHBob25lIG51bWJlciBwb3BvdmVyCiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNob3dUZmFDb2RlUG9wb3ZlcjogZmFsc2UsCiAgICAgICAgICAgICAgICBzaG93UGhvbmVOdW1iZXJQb3BvdmVyOiB0cnVlLAogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVRmYUNvZGVQb3BvdmVyQ2hhbmdlUGhvbmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNob3dQaG9uZU51bWJlclBvcG92ZXI6IHRydWUsCiAgICAgICAgICAgICAgICBzaG93VGZhQ29kZVBvcG92ZXI6IGZhbHNlLAogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURlbGV0ZUlucHV0Q2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtRGVsZXRlVmFsdWU6IGUuY3VycmVudFRhcmdldC52YWx1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURlbGV0ZUNvbmZpcm0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBkZWxldGVNZSA9IF9hLmRlbGV0ZU1lLCBzZXRUb2FzdCA9IF9hLnNldFRvYXN0OwogICAgICAgICAgICBpZiAoX3RoaXMuc3RhdGUuY29uZmlybURlbGV0ZVZhbHVlICYmIF90aGlzLnN0YXRlLmNvbmZpcm1EZWxldGVWYWx1ZS50b1VwcGVyQ2FzZSgpID09PSAnREVMRVRFJykgewogICAgICAgICAgICAgICAgZGVsZXRlTWUoKTsKICAgICAgICAgICAgICAgIHNldFRvYXN0KG5ldyBFcnJvcignRGVsZXRpbmcgQWNjb3VudCcpKTsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUb2FzdChuZXcgRXJyb3IoJ0ludmFsaWQgY29uZmlybWF0aW9uIGNvZGUnKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZURlbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGlzVGVhbUFkbWluID0gX2EuaXNUZWFtQWRtaW4sIHRlYW1NZW1iZXJzID0gX2EudGVhbU1lbWJlcnMsIHRlYW0gPSBfYS50ZWFtOwogICAgICAgICAgICB2YXIgbWVzc2FnZTsKICAgICAgICAgICAgdmFyIGNvbmZpcm1Qcm9wczsKICAgICAgICAgICAgdmFyIGhhbmRsZUNhbmNlbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7IH07CiAgICAgICAgICAgIHZhciBoYW5kbGVDb250aW51ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnVG8gaXJyZXZlcnNpYmx5IGRlbGV0ZSB5b3VyIFBvbHltYWlsIGFjY291bnQgYW5kIGFsbCcKICAgICAgICAgICAgICAgICAgICArICcgYXNzb2NpYXRlZCBkYXRhIGFuZCBjYW5jZWwgeW91ciBzdWJzY3JpcHRpb24sIHR5cGUnCiAgICAgICAgICAgICAgICAgICAgKyAnIERFTEVURSBiZWxvdyc7CiAgICAgICAgICAgICAgICBjb25maXJtUHJvcHMgPSB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdDb25maXJtIERlbGV0ZSBBY2NvdW50JywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1Db3B5OiAnQ29uZmlybScsCiAgICAgICAgICAgICAgICAgICAgb25Db25maXJtOiBfdGhpcy5oYW5kbGVEZWxldGVDb25maXJtLAogICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiBoYW5kbGVDYW5jZWwsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IGNvbmZpcm1Qcm9wcywgaXNEZWxldGluZzogdHJ1ZSB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgLy8gT25seSB3aWxsIGJlIGFkbWluIGV2ZW4gaWYgaGUgaGFzIG5vIHRlYW0gbWVtYmVycwogICAgICAgICAgICAvLyBzbyB3ZSBtdXN0IGNoZWNrIGlmIGhlIGhhcyB0ZWFtIG1lbWJlcnMgb3Igbm90IHRvIHByb2NlZWQKICAgICAgICAgICAgdmFyIGhhc05vVGVhbU1lbWJlcnMgPSB0ZWFtTWVtYmVycyAmJiBPYmplY3QudmFsdWVzKHRlYW1NZW1iZXJzKS5sZW5ndGggPD0gMTsKICAgICAgICAgICAgLy8gdXNlciBjYW4gb25seSBkZWxldGUgaGlzIGFjY291bnQgaWYgdGhleSBhcmUgbm90IHRoZSB0ZWFtIGFkbWluCiAgICAgICAgICAgIHZhciBvbmx5TWUgPSBpc1RlYW1BZG1pbiAmJiBoYXNOb1RlYW1NZW1iZXJzOwogICAgICAgICAgICAvLyBvciBpZiB0aGVyZSdzIG90aGVyIGFkbWlucyBpbiB0aGUgdGVhbQogICAgICAgICAgICB2YXIgc2V2ZXJhbEFkbWlucyA9IHRlYW0gJiYgdGVhbS5hZG1pbnMubGVuZ3RoID4gMTsKICAgICAgICAgICAgaWYgKG9ubHlNZSB8fCBzZXZlcmFsQWRtaW5zIHx8ICFpc1RlYW1BZG1pbikgewogICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdUaGlzIHdpbGwgY29tcGxldGVseSBhbmQgaXJyZXZlcnNpYmx5IGRlbGV0ZSB5b3VyICcKICAgICAgICAgICAgICAgICAgICArICdhY2NvdW50IGFuZCBhbGwgeW91ciBQb2x5bWFpbCBkYXRhLCBzdWNoIGFzIGFjdGl2aXR5ICcKICAgICAgICAgICAgICAgICAgICArICd0cmFja2luZywgc2NoZWR1bGVkIGVtYWlscywgZXRjLiwgYW5kIGNhbmNlbCB5b3VyICcKICAgICAgICAgICAgICAgICAgICArICdzdWJzY3JpcHRpb24uIFdvdWxkIHlvdSBsaWtlIHRvIGNvbnRpbnVlPyc7CiAgICAgICAgICAgICAgICBjb25maXJtUHJvcHMgPSB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGUgUG9seW1haWwgQWNjb3VudCcsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICBjb25maXJtQ29weTogJ0NvbnRpbnVlIGFuZCBEZWxldGUnLAogICAgICAgICAgICAgICAgICAgIGV4dHJhQ2xhc3NOYW1lOiAnZGVsZXRlLWFjY291bnQnLAogICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybTogaGFuZGxlQ29udGludWUsCiAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw6IGhhbmRsZUNhbmNlbCwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ0JlZm9yZSB5b3UgZGVsZXRlIHlvdXIgUG9seW1haWwgYWNjb3VudCwgYXNzaWduJwogICAgICAgICAgICAgICAgICAgICsgJyBhbm90aGVyIHRlYW0gbWVtYmVyIGFzIGFuIEFkbWluIG9yIHJlbW92ZSBhbGwgb3RoZXInCiAgICAgICAgICAgICAgICAgICAgKyAnIG1lbWJlcnMgZnJvbSB5b3VyIHRlYW0uJzsKICAgICAgICAgICAgICAgIGNvbmZpcm1Qcm9wcyA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0Fzc2lnbiBhIFRlYW0gQWRtaW4gdG8gRGVsZXRlJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1Db3B5OiAnVmlldyBUZWFtJywKICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJyb3dzZXJIaXN0b3J5LnB1c2goJy9zZXR0aW5ncy90ZWFtJyk7IH0sCiAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw6IGhhbmRsZUNhbmNlbCwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IGNvbmZpcm1Qcm9wcywgaXNEZWxldGluZzogZmFsc2UgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgc2hvd1Bob25lTnVtYmVyUG9wb3ZlcjogZmFsc2UsCiAgICAgICAgICAgIHNob3dUZmFDb2RlUG9wb3ZlcjogZmFsc2UsCiAgICAgICAgICAgIGlzRGVsZXRpbmc6IGZhbHNlLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgLy8gVE9ETyhTSElOKTogSGFuZGxlIGNhc2UgZm9yIGVudGVyaW5nIGJhZCBwaG9uZSBudW1iZXIgYWZ0ZXIgaW5jb21wbGV0ZWQgMmZhIGZsb3cuCiAgICAvLyBDYXNlIDE6IEV4aXN0aW5nIDJmYSB0aGVuIGJhZCBwYXNzd29yZAogICAgLy8gQ2FzZSAyOiBFeGlzdGluZyAyZmEsIGNoYW5nZWQgcGhvbmUsIGJhZCBwYXNzd29yZAogICAgLy8gQ2FzZSAzOiBFeGlzdGluZyAyZmEsIGJhZCBwaG9uZSwgcmlnaHQgcGFzc3dvcmQKICAgIFNlY3VyaXR5LnByb3RvdHlwZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIChuZXh0UHJvcHMpIHsKICAgICAgICBpZiAoIW5leHRQcm9wcy5tZSB8fCAhbmV4dFByb3BzLm1lLnRmYSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmIChuZXh0UHJvcHMubWUgJiYgbmV4dFByb3BzLm1lLnRmYSAmJgogICAgICAgICAgICBuZXh0UHJvcHMubWUudGZhLnN0YXR1cyA9PT0gVHdvRmFjdG9yQXV0aGVudGljYXRpb25TdGF0dXMuVmVyaWZpZWQgJiYKICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93VGZhQ29kZVBvcG92ZXIpIHsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dUZmFDb2RlUG9wb3ZlcjogZmFsc2UgfSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnByb3BzLm1lICYmIHRoaXMucHJvcHMubWUudGZhICYmCiAgICAgICAgICAgIG5leHRQcm9wcy5tZS50ZmEucGhvbmUgPT09IHRoaXMucHJvcHMubWUudGZhLnBob25lKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKG5leHRQcm9wcy5tZS50ZmEucGhvbmUgJiYKICAgICAgICAgICAgbmV4dFByb3BzLm1lLnRmYS5zdGF0dXMgPT09IFR3b0ZhY3RvckF1dGhlbnRpY2F0aW9uU3RhdHVzLlVudmVyaWZpZWQpIHsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dUZmFDb2RlUG9wb3ZlcjogdHJ1ZSB9KTsKICAgICAgICB9CiAgICB9OwogICAgU2VjdXJpdHkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYWNjb3VudEVtYWlscyA9IHRoaXMuYWNjb3VudEVtYWlscygpOwogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIG1lID0gX2EubWUsIGxvZ291dEFsbCA9IF9hLmxvZ291dEFsbCwgdGZhUGFzc3dvcmRDb25maXJtZWQgPSBfYS50ZmFQYXNzd29yZENvbmZpcm1lZDsKICAgICAgICB2YXIgX2IgPSB0aGlzLnN0YXRlLCBjb25maXJtUHJvcHMgPSBfYi5jb25maXJtUHJvcHMsIHBhc3N3b3JkQ29uZmlybVByb3BzID0gX2IucGFzc3dvcmRDb25maXJtUHJvcHMsIHNob3dQaG9uZU51bWJlclBvcG92ZXIgPSBfYi5zaG93UGhvbmVOdW1iZXJQb3BvdmVyLCBzaG93VGZhQ29kZVBvcG92ZXIgPSBfYi5zaG93VGZhQ29kZVBvcG92ZXIsIHBob25lTnVtYmVyID0gX2IucGhvbmVOdW1iZXIsIGlzRGVsZXRpbmcgPSBfYi5pc0RlbGV0aW5nOwogICAgICAgIGlmICghbWUpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHZhciBlbWFpbCA9IG1lLmVtYWlsLCB0ZmEgPSBtZS50ZmE7CiAgICAgICAgdmFyIGRlbGV0ZUlucHV0UHJvcHMgPSB7CiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmNvbmZpcm1EZWxldGVWYWx1ZSwKICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIERFTEVURSB0byBjb250aW51ZScsCiAgICAgICAgICAgIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZURlbGV0ZUlucHV0Q2hhbmdlLAogICAgICAgIH07CiAgICAgICAgdmFyIHRmYVN1YnRpdGxlID0gJ1JlcXVpcmVzIHlvdSB0byBlbnRlciBib3RoIHlvdXIgcGFzc3dvcmQgYW5kIGEgJyArCiAgICAgICAgICAgICdjb2RlIHNlbnQgdG8geW91ciBwaG9uZSBpbiBvcmRlciB0byBzaWduIGluLic7CiAgICAgICAgaWYgKHRmYSAmJiAhIXRmYS5waG9uZSAmJiB0ZmEuc3RhdHVzID09PSBUd29GYWN0b3JBdXRoZW50aWNhdGlvblN0YXR1cy5WZXJpZmllZCkgewogICAgICAgICAgICB0ZmFTdWJ0aXRsZSA9ICdBIFR3by1mYWN0b3IgdmVyaWZpY2F0aW9uIGNvZGUgd2lsbCBiZSBzZW50IHRvIHlvdXIgbW9iaWxlIG51bWJlciBlbmRpbmcgaW4gJwogICAgICAgICAgICAgICAgKyB0ZmEucGhvbmUuc2xpY2UoLTQpICsgJyB3aGVuIGxvZ2dpbmcgaW4nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdXJpdHkiIH0sCiAgICAgICAgICAgIGNvbmZpcm1Qcm9wcyAmJgogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb25maXJtLCBfX2Fzc2lnbih7fSwgY29uZmlybVByb3BzLCB7IGlucHV0OiBpc0RlbGV0aW5nID8gZGVsZXRlSW5wdXRQcm9wcyA6IHVuZGVmaW5lZCB9KSksCiAgICAgICAgICAgIHBhc3N3b3JkQ29uZmlybVByb3BzICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGFzc3dvcmRDb25maXJtLCBfX2Fzc2lnbih7fSwgcGFzc3dvcmRDb25maXJtUHJvcHMpKSwKICAgICAgICAgICAgc2hvd1Bob25lTnVtYmVyUG9wb3ZlciAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KFBob25lTnVtYmVyUG9wb3ZlciwgeyBvbkNhbmNlbDogdGhpcy5oYW5kbGVQaG9uZU51bWJlclBvcG92ZXJDYW5jZWwsIG9uQ29udGludWU6IHRoaXMuaGFuZGxlUGhvbmVOdW1iZXJQb3BvdmVyQ29udGludWUgfSksCiAgICAgICAgICAgIHNob3dUZmFDb2RlUG9wb3ZlciAmJiAhIXBob25lTnVtYmVyICYmICEhdGZhICYmIHRmYVBhc3N3b3JkQ29uZmlybWVkICYmCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRmYUNvZGVQb3BvdmVyLCB7IG9uQ2FuY2VsOiB0aGlzLmhhbmRsZVRmYUNvZGVQb3BvdmVyQ2FuY2VsLCBvbkNvbnRpbnVlOiB0aGlzLmhhbmRsZVRmYUNvZGVQb3BvdmVyQ29udGludWUsIG9uUmVzZW5kOiB0aGlzLmhhbmRsZVRmYUNvZGVQb3BvdmVyUmVzZW5kLCBvbkNoYW5nZVBob25lOiB0aGlzLmhhbmRsZVRmYUNvZGVQb3BvdmVyQ2hhbmdlUGhvbmUsIHBob25lOiBwaG9uZU51bWJlciB9KSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChOYXZpZ2F0aW9uSGVhZGVyLCB7IHRpdGxlOiAiU2VjdXJpdHkiLCBpc01vYmlsZTogdGhpcy5wcm9wcy5pc01vYmlsZSwgY29sbGFwc2VkTW9iaWxlOiB0aGlzLnByb3BzLmNvbGxhcHNlZE1vYmlsZSwgY29sbGFwc2VMc2I6IHRoaXMucHJvcHMuY29sbGFwc2VMc2IgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibWFpbiIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9nZ2xlQ2VsbCwgeyB0aXRsZTogIlR3by1mYWN0b3IgYXV0aGVudGljYXRpb24iLCBzdWJ0aXRsZTogdGZhU3VidGl0bGUsIG9uVG9nZ2xlOiB0aGlzLmhhbmRsZVR3b0ZhY3RvckF1dGhUb2dnbGUsIG9uOiAhIXRmYSAmJiB0ZmEuc3RhdHVzID09PSBUd29GYWN0b3JBdXRoZW50aWNhdGlvblN0YXR1cy5WZXJpZmllZCB9KSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcGRvd25DZWxsLCB7IHRpdGxlOiAiRW1haWwgYWRkcmVzcyIsIHN1YnRpdGxlOiAiVGhlIGVtYWlsIGFkZHJlc3MgeW91IHNpZ24gaW4gdG8geW91ciBQb2x5bWFpbCBhY2NvdW50IHdpdGguIiwgb25TZWxlY3Q6IHRoaXMuaGFuZGxlVXBkYXRlZExvZ2luRW1haWxTZWxlY3QsIHZhbHVlczogYWNjb3VudEVtYWlscywgc3RhcnRJbmRleDogYWNjb3VudEVtYWlscy5pbmRleE9mKGVtYWlsKSB9KSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYnV0dG9uLWNlbGwiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJsZWZ0LWNvbHVtbiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDQiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiQ2hhbmdlIHBhc3N3b3JkIiksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImg1IiwgeyBjbGFzc05hbWU6ICJzdWJ0aXRsZSIgfSwgIkNoYW5nZSB0aGUgcGFzc3dvcmQgeW91IHNpZ24gaW4gdG8geW91ciBQb2x5bWFpbCBhY2NvdW50IHdpdGguIikpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAiYWN0aW9uIGNoYW5nZS1wYXNzd29yZCIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2hhbmdlUGFzc3dvcmQgfSwgIkNoYW5nZSBwYXNzd29yZCIpKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYnV0dG9uLWNlbGwiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJsZWZ0LWNvbHVtbiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDQiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiU2lnbiBvdXQgb2YgUG9seW1haWwgb24gYWxsIGRldmljZXMiKSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDUiLCB7IGNsYXNzTmFtZTogInN1YnRpdGxlIiB9LCAiU2lnbiBvdXQgZnJvbSBQb2x5bWFpbCBvbiBhbGwgZGV2aWNlcyB5b3VcdTIwMTlyZSBsb2dnZWQgaW4gd2l0aC4iKSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBjbGFzc05hbWU6ICJhY3Rpb24gc2lnbi1vdXQiLCBvbkNsaWNrOiBsb2dvdXRBbGwgfSwgIlNpZ24gb3V0IG9mIGFsbCBkZXZpY2VzIikpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJidXR0b24tY2VsbCBkZWxldGUtYWNjb3VudCIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImxlZnQtY29sdW1uIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJoNCIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sICJEZWxldGUgUG9seW1haWwgQWNjb3VudCIpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJoNSIsIHsgY2xhc3NOYW1lOiAic3VidGl0bGUiIH0sICJJcnJldmVyc2libHkgZGVsZXRlIGFsbCBvZiB5b3VyIFBvbHltYWlsIGRhdGEsIGVtYWlscywgdGVtcGxhdGVzLCBldGMuIikpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAiYWN0aW9uIGRlbGV0ZS1hY2NvdW50Iiwgb25DbGljazogdGhpcy5oYW5kbGVEZWxldGUgfSwgIkRlbGV0ZSBQb2x5bWFpbCBBY2NvdW50IikpKSkpOwogICAgfTsKICAgIHJldHVybiBTZWN1cml0eTsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFNlY3VyaXR5Owo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/Security.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/Security.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport NavigationHeader from '@src/routes/Settings/components/NavigationHeader';\nimport DropdownCell from '@src/routes/Settings/components/DropdownCell';\nimport ToggleCell from '@src/routes/Settings/components/ToggleCell';\nimport { Account, Me, TwoFactorAuthenticationStatus, TeamMembers, Team } from '@src/types';\nimport './Security.scss';\nimport Confirm, { Props as ConfirmProps } from '@src/components/Base/Confirm';\nimport PasswordConfirm, {\n  Props as PasswordConfirmProps,\n} from '@src/components/Base/PasswordConfirm/PasswordConfirm';\nimport PhoneNumberPopover from './components/PhoneNumberPopover/PhoneNumberPopover';\nimport { MeTfaSetMeta } from '@src/ducks/me';\nimport TfaCodePopover from './components/TfaCodePopover/TfaCodePopover';\nimport browserHistory from '@src/lib/browserHistory';\n\nexport interface StateProps {\n  accounts: Account[];\n  me?: Me;\n  tfaPasswordConfirmed?: boolean;\n  isMobile?: boolean;\n  collapsedMobile?: boolean;\n  isTeamAdmin?: boolean;\n  teamMembers?: TeamMembers;\n  team?: Team;\n}\n\nexport interface DispatchProps {\n  logoutAll: () => void;\n  resetPassword: (email: string) => void;\n  updateMe: (me: Me) => void;\n  setTfa: (meta: MeTfaSetMeta) => void;\n  unsetTfa: (password: string) => void;\n  validateTfaCode: (code: string) => void;\n  collapseLsb: (collapse: boolean) => void;\n  deleteMe: () => void;\n  setToast: (message: Error|null) => void;\n}\n\ninterface State {\n  password?: string;\n  confirmProps?: ConfirmProps;\n  passwordConfirmProps?: PasswordConfirmProps;\n  showPhoneNumberPopover: boolean;\n  showTfaCodePopover: boolean;\n  phoneNumber?: string;\n  confirmDeleteValue?: string;\n  isDeleting: boolean;\n}\n\nclass Security extends React.PureComponent<StateProps & DispatchProps, State> {\n  constructor() {\n    super();\n\n    this.state = {\n      showPhoneNumberPopover: false,\n      showTfaCodePopover: false,\n      isDeleting: false,\n    };\n  }\n\n  // TODO(SHIN): Handle case for entering bad phone number after incompleted 2fa flow.\n  // Case 1: Existing 2fa then bad password\n  // Case 2: Existing 2fa, changed phone, bad password\n  // Case 3: Existing 2fa, bad phone, right password\n  UNSAFE_componentWillReceiveProps(nextProps: StateProps & DispatchProps) {\n    if (!nextProps.me || !nextProps.me.tfa) {\n      return;\n    }\n\n    if (nextProps.me && nextProps.me.tfa &&\n      nextProps.me.tfa.status === TwoFactorAuthenticationStatus.Verified &&\n      this.state.showTfaCodePopover) {\n      this.setState({ showTfaCodePopover: false });\n    }\n\n    if (this.props.me && this.props.me.tfa &&\n      nextProps.me.tfa.phone === this.props.me.tfa.phone) {\n      return;\n    }\n\n    if (nextProps.me.tfa.phone &&\n      nextProps.me.tfa.status === TwoFactorAuthenticationStatus.Unverified) {\n      this.setState({ showTfaCodePopover: true });\n    }\n  }\n\n  handleUpdatedLoginEmailSelect = (value: string, index: number) => {\n    const { me, updateMe } = this.props;\n    if (!me) {\n      return;\n    }\n\n    const passwordConfirmProps: PasswordConfirmProps = {\n      title: 'Enter your password',\n      message: `To change email to ${value}, please enter your Polymail password`,\n      onContinue: (password: string) => {\n        this.setState({ passwordConfirmProps: undefined });\n        if (me) {\n          updateMe({\n            ...me,\n            email: value,\n            password,\n          });\n        }\n      },\n      onCancel: () => this.setState({ passwordConfirmProps: undefined }),\n    };\n\n    this.setState({ passwordConfirmProps });\n  }\n\n  handleTwoFactorAuthToggle = () => {\n    const { me, unsetTfa } = this.props;\n    if (!me) {\n      return;\n    }\n\n    if (me.tfa && me.tfa.status === TwoFactorAuthenticationStatus.Verified) {\n      const passwordConfirmProps: PasswordConfirmProps = {\n        title: 'Enter your password',\n        message: `To disable two factor authentication, please enter your Polymail password.`,\n        onContinue: (password: string) => {\n          unsetTfa(password);\n          this.setState({\n            password,\n            passwordConfirmProps: undefined,\n          });\n        },\n        continueCopy: 'Disable',\n        onCancel: () => this.setState({ passwordConfirmProps: undefined }),\n      };\n\n      this.setState({ passwordConfirmProps });\n    } else {\n      this.setState({ showPhoneNumberPopover: true });\n    }\n  }\n\n  accountEmails = () => {\n    const { me, accounts } = this.props;\n    const emails = accounts.map(account => account.email);\n    if (me && emails.indexOf(me.email) === -1) {\n      emails.push(me.email);\n    }\n    return emails;\n  }\n\n  handleChangePassword = (e: React.MouseEvent<HTMLElement>) => {\n    const { me, resetPassword } = this.props;\n    if (!me) {\n      return;\n    }\n\n    const confirmProps: ConfirmProps = {\n      title: 'Resetting Password',\n      message: `A link to reset your password will be sent to ${me.email}`,\n      confirmCopy: 'Send Link',\n      onConfirm: () => {\n        this.setState({ confirmProps: undefined });\n        if (me) {\n          resetPassword(me.email);\n        }\n      },\n      onCancel: () => this.setState({ confirmProps: undefined }),\n    };\n\n    this.setState({ confirmProps });\n  }\n\n  handlePhoneNumberPopoverCancel = () => {\n    this.setState({ showPhoneNumberPopover: false });\n  }\n\n  handlePhoneNumberPopoverContinue = (phone: string) => {\n    const { setTfa } = this.props;\n\n    const passwordConfirmProps: PasswordConfirmProps = {\n      title: 'Enter your password',\n      message: `To enable two factor authentication, please enter your Polymail password.`,\n      onContinue: (password: string) => {\n        setTfa({ phone, password });\n        this.setState({\n          passwordConfirmProps: undefined,\n          showTfaCodePopover: true,\n          phoneNumber: phone,\n        });\n      },\n      onCancel: () => this.setState({ passwordConfirmProps: undefined }),\n    };\n\n    this.setState({ passwordConfirmProps, showPhoneNumberPopover: false });\n  }\n\n  handleTfaCodePopoverCancel = () => {\n    this.setState({ showTfaCodePopover: false });\n  }\n\n  handleTfaCodePopoverContinue = (code: string) => {\n    const { validateTfaCode } = this.props;\n\n    validateTfaCode(code);\n  }\n\n  handleTfaCodePopoverResend = () => {\n    const { setTfa } = this.props;\n    const { phoneNumber, password } = this.state;\n\n    // Try recreating\n    if (!!phoneNumber && !!password) {\n      setTfa({ phone: phoneNumber, password });\n      return;\n    }\n\n    // Otherwise go back to phoneNumber send\n    if (!!phoneNumber) {\n      this.setState({ showTfaCodePopover: false });\n      this.handlePhoneNumberPopoverContinue(phoneNumber);\n      return;\n    }\n\n    // Otherwise go back to phone number popover\n    this.setState({\n      showTfaCodePopover: false,\n      showPhoneNumberPopover: true,\n    });\n  }\n\n  handleTfaCodePopoverChangePhone = () => {\n    this.setState({\n      showPhoneNumberPopover: true,\n      showTfaCodePopover: false,\n    });\n  }\n\n  handleDeleteInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ confirmDeleteValue: e.currentTarget.value });\n  }\n\n  handleDeleteConfirm = () => {\n    const { deleteMe, setToast } = this.props;\n\n    if (this.state.confirmDeleteValue && this.state.confirmDeleteValue.toUpperCase() === 'DELETE') {\n      deleteMe();\n      setToast(new Error('Deleting Account'));\n      this.setState({ confirmProps: undefined });\n    } else {\n      setToast(new Error('Invalid confirmation code'));\n    }\n  }\n\n  handleDelete = () => {\n    const { isTeamAdmin, teamMembers, team } = this.props;\n\n    let message: string;\n    let confirmProps: ConfirmProps;\n\n    const handleCancel = () => this.setState({ confirmProps: undefined });\n\n    const handleContinue = () => {\n      message = 'To irreversibly delete your Polymail account and all'\n        + ' associated data and cancel your subscription, type'\n        + ' DELETE below';\n      confirmProps = {\n        title: 'Confirm Delete Account',\n        message,\n        confirmCopy: 'Confirm',\n        onConfirm: this.handleDeleteConfirm,\n        onCancel: handleCancel,\n      };\n\n      this.setState({ confirmProps, isDeleting: true });\n    };\n\n    // Only will be admin even if he has no team members\n    // so we must check if he has team members or not to proceed\n    const hasNoTeamMembers = teamMembers && Object.values(teamMembers).length <= 1;\n\n    // user can only delete his account if they are not the team admin\n    const onlyMe = isTeamAdmin && hasNoTeamMembers;\n    // or if there's other admins in the team\n    const severalAdmins = team && team.admins.length > 1;\n\n    if (onlyMe || severalAdmins || !isTeamAdmin) {\n      message = 'This will completely and irreversibly delete your '\n      + 'account and all your Polymail data, such as activity '\n      + 'tracking, scheduled emails, etc., and cancel your '\n      + 'subscription. Would you like to continue?';\n      confirmProps = {\n        title: 'Delete Polymail Account',\n        message,\n        confirmCopy: 'Continue and Delete',\n        extraClassName: 'delete-account',\n        onConfirm: handleContinue,\n        onCancel: handleCancel,\n      };\n    } else {\n      message = 'Before you delete your Polymail account, assign'\n      + ' another team member as an Admin or remove all other'\n      + ' members from your team.';\n      confirmProps = {\n        title: 'Assign a Team Admin to Delete',\n        message,\n        confirmCopy: 'View Team',\n        onConfirm: () => browserHistory.push('/settings/team'),\n        onCancel: handleCancel,\n      };\n    }\n\n    this.setState({ confirmProps, isDeleting: false });\n  }\n\n  render() {\n    const accountEmails = this.accountEmails();\n    const { me, logoutAll, tfaPasswordConfirmed } = this.props;\n    const {\n      confirmProps,\n      passwordConfirmProps,\n      showPhoneNumberPopover,\n      showTfaCodePopover,\n      phoneNumber,\n      isDeleting,\n    } = this.state;\n\n    if (!me) {\n      return null;\n    }\n\n    const {\n      email,\n      tfa,\n    } = me;\n\n    const deleteInputProps = {\n      value: this.state.confirmDeleteValue,\n      placeholder: 'Type DELETE to continue',\n      onChange: this.handleDeleteInputChange,\n    };\n\n    let tfaSubtitle = 'Requires you to enter both your password and a ' +\n      'code sent to your phone in order to sign in.';\n\n    if (tfa && !!tfa.phone && tfa.status === TwoFactorAuthenticationStatus.Verified) {\n      tfaSubtitle = 'A Two-factor verification code will be sent to your mobile number ending in '\n      + tfa.phone.slice(-4) + ' when logging in';\n    }\n\n    return (\n      <div className=\"security\">\n        {confirmProps &&\n          <Confirm\n            {...confirmProps}\n            input={isDeleting ? deleteInputProps : undefined}\n          />\n        }\n        {passwordConfirmProps && <PasswordConfirm {...passwordConfirmProps} />}\n        {showPhoneNumberPopover && <PhoneNumberPopover\n          onCancel={this.handlePhoneNumberPopoverCancel}\n          onContinue={this.handlePhoneNumberPopoverContinue}\n        />}\n        {showTfaCodePopover && !!phoneNumber && !!tfa && tfaPasswordConfirmed &&\n          <TfaCodePopover\n            onCancel={this.handleTfaCodePopoverCancel}\n            onContinue={this.handleTfaCodePopoverContinue}\n            onResend={this.handleTfaCodePopoverResend}\n            onChangePhone={this.handleTfaCodePopoverChangePhone}\n            phone={phoneNumber}\n          />\n        }\n        <NavigationHeader\n          title=\"Security\"\n          isMobile={this.props.isMobile}\n          collapsedMobile={this.props.collapsedMobile}\n          collapseLsb={this.props.collapseLsb}\n        />\n        <div className=\"main\">\n          <ToggleCell\n            title=\"Two-factor authentication\"\n            subtitle={tfaSubtitle}\n            onToggle={this.handleTwoFactorAuthToggle}\n            on={!!tfa && tfa.status === TwoFactorAuthenticationStatus.Verified}\n          />\n          <DropdownCell\n            title=\"Email address\"\n            subtitle=\"The email address you sign in to your Polymail account with.\"\n            onSelect={this.handleUpdatedLoginEmailSelect}\n            values={accountEmails}\n            startIndex={accountEmails.indexOf(email)}\n          />\n          <div className=\"button-cell\">\n            <div className=\"left-column\">\n              <h4 className=\"title\">Change password</h4>\n              <h5 className=\"subtitle\">\n                Change the password you sign in to your Polymail account with.\n              </h5>\n            </div>\n            <button className=\"action change-password\" onClick={this.handleChangePassword}>\n              Change password\n            </button>\n          </div>\n          <div className=\"button-cell\">\n            <div className=\"left-column\">\n              <h4 className=\"title\">Sign out of Polymail on all devices</h4>\n              <h5 className=\"subtitle\">\n                Sign out from Polymail on all devices youâ€™re logged in with.\n              </h5>\n            </div>\n            <button className=\"action sign-out\" onClick={logoutAll}>\n              Sign out of all devices\n            </button>\n          </div>\n          <div className=\"button-cell delete-account\">\n            <div className=\"left-column\">\n              <h4 className=\"title\">Delete Polymail Account</h4>\n              <h5 className=\"subtitle\">\n                Irreversibly delete all of your Polymail data, emails, templates, etc.\n              </h5>\n            </div>\n            <button className=\"action delete-account\" onClick={this.handleDelete}>\n              Delete Polymail Account\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Security;\n"]}]}