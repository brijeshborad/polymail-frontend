{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/FileDropZone.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/FileDropZone.tsx","mtime":1675280254002},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBEcm9wWm9uZSBmcm9tICdyZWFjdC1kcm9wem9uZSc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgQXR0YWNobWVudCBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvQXR0YWNobWVudC5zdmcnOwppbXBvcnQgJy4vRmlsZURyb3Bab25lLnNjc3MnOwppbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7CmltcG9ydCB7IGNoZWNrRmlsZVZhbGlkaXR5IH0gZnJvbSAnQHNyYy9saWIvZmlsZXMnOwp2YXIgRmlsZURyb3Bab25lID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKEZpbGVEcm9wWm9uZSwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEZpbGVEcm9wWm9uZSgpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZURyb3AgPSBmdW5jdGlvbiAoYWNjZXB0ZWQsIGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBzaGlmdEtleSA9IGV2ZW50LnNoaWZ0S2V5OwogICAgICAgICAgICB2YXIgeFBvc2lpdG9uID0gZXZlbnQucGFnZVg7CiAgICAgICAgICAgIHZhciB5UG9zaXRpb24gPSBldmVudC5wYWdlWTsKICAgICAgICAgICAgZXZlbnQucGVyc2lzdCgpOwogICAgICAgICAgICAvLyBIYW5kbGVyIGZvciBkcm9wcGluZyBjaGVja3MgdG8gc2VlIGlmIHdlIGRyb3BwZWQgaW4gYW55IGRpcmV0b3JpZXMgYW5kIHdpbGwgZXJyb3Igb3V0CiAgICAgICAgICAgIE9ic2VydmFibGUuemlwLmFwcGx5KE9ic2VydmFibGUsIGFjY2VwdGVkLm1hcChmdW5jdGlvbiAoZikgeyByZXR1cm4gY2hlY2tGaWxlVmFsaWRpdHkoZik7IH0pKS5tYXAoZnVuY3Rpb24gKGZpbGVzKSB7IHJldHVybiBmaWxlcy5maWx0ZXIoZnVuY3Rpb24gKGIpIHsgcmV0dXJuICEhYi5lcnJvcjsgfSk7IH0pCiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKHsKICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChibG9icykgewogICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBvbkRyb3AgPSBfYS5vbkRyb3AsIG9uRGlyZWN0b3J5RHJvcEVycm9yID0gX2Eub25EaXJlY3RvcnlEcm9wRXJyb3I7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9uRHJvcCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGFjdGl2ZTogZmFsc2UgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9icy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRpcmVjdG9yeURyb3BFcnJvcihibG9ic1swXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyb3AoYWNjZXB0ZWQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGlmdEtleTogc2hpZnRLZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogeFBvc2lpdG9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiB5UG9zaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsgYWN0aXZlOiBmYWxzZSB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIEZpbGVEcm9wWm9uZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNsYXNzTmFtZSA9IF9hLmNsYXNzTmFtZSwgb25MZWF2ZSA9IF9hLm9uTGVhdmUsIHRpdGxlID0gX2EudGl0bGUsIGRlc2NyaXB0aW9uID0gX2EuZGVzY3JpcHRpb24sIGFsdENvcHkgPSBfYS5hbHRDb3B5LCBjZW50ZXJlZENvcHkgPSBfYS5jZW50ZXJlZENvcHksIGhpZGVJY29uID0gX2EuaGlkZUljb247CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bab25lLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygnZmlsZS1kcm9wLXpvbmUnLCBjbGFzc05hbWUsIHsgYWN0aXZlOiB0cnVlIH0pLCBvbkRyb3BBY2NlcHRlZDogdGhpcy5oYW5kbGVEcm9wLCBvbkRyb3BSZWplY3RlZDogb25MZWF2ZSwgb25EcmFnTGVhdmU6IG9uTGVhdmUsIGRpc2FibGVDbGljazogdHJ1ZSB9LAogICAgICAgICAgICAhaGlkZUljb24gJiYKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQXR0YWNobWVudCwgeyB3aWR0aDogIjMwcHgiLCBoZWlnaHQ6ICIzMHB4IiwgY2xhc3NOYW1lOiAiaWNvbiIgfSksCiAgICAgICAgICAgIHRpdGxlICYmCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCB0aXRsZSksCiAgICAgICAgICAgIGRlc2NyaXB0aW9uICYmCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiB9LCBkZXNjcmlwdGlvbiksCiAgICAgICAgICAgIGFsdENvcHkgJiYKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWx0LWNvcHkiIH0sIGFsdENvcHkpLAogICAgICAgICAgICBjZW50ZXJlZENvcHkgJiYKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2VudGVyZWQtY29weSIgfSwgY2VudGVyZWRDb3B5KSkpOwogICAgfTsKICAgIHJldHVybiBGaWxlRHJvcFpvbmU7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgeyBGaWxlRHJvcFpvbmUgfTsKZXhwb3J0IGRlZmF1bHQgRmlsZURyb3Bab25lOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/FileDropZone.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Compose/FileDropZone.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,QAAuB,MAAM,gBAAgB,CAAC;AACrD,OAAO,UAAU,MAAM,YAAY,CAAC;AACpC,OAAO,UAAU,MAAM,sCAAsC,CAAC;AAC9D,OAAO,qBAAqB,CAAC;AAE7B,OAAO,EAAE,UAAU,EAAE,MAAM,MAAM,CAAC;AAClC,OAAO,EAAkB,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AAkBnE;IAAkC,gCAAiC;IACjE;QAAA,YACE,iBAAO,SAER;QAED,gBAAU,GAAG,UAAC,QAAqB,EAAE,KAAsC;YACzE,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;YAChC,IAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC;YAC9B,IAAM,SAAS,GAAG,KAAK,CAAC,KAAK,CAAC;YAC9B,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,wFAAwF;YACxF,UAAU,CAAC,GAAG,OAAd,UAAU,EACL,QAAQ,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,iBAAiB,CAAC,CAAC,CAAC,EAApB,CAAoB,CAAC,EAC1C,GAAG,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,CAAC,CAAC,KAAK,EAAT,CAAS,CAAC,EAA5B,CAA4B,CAAC;iBAC3C,SAAS,CAAC;gBACT,IAAI,EAAE,UAAC,KAAK;oBACJ,IAAA,gBAA6C,EAA3C,kBAAM,EAAE,8CAAmC,CAAC;oBAEpD,IAAI,MAAM,EAAE;wBACV,KAAI,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;wBACjC,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;4BACpB,oBAAoB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;yBAChC;6BAAM;4BACL,MAAM,CAAC,QAAQ,EAAE;gCACf,QAAQ,UAAA;gCACR,QAAQ,EAAE;oCACR,CAAC,EAAE,SAAS;oCACZ,CAAC,EAAE,SAAS;iCACb;6BACF,CAAC,CAAC;yBACJ;qBACF;gBACH,CAAC;aACF,CAAC,CAAC;QACL,CAAC,CAAA;QAhCC,KAAI,CAAC,KAAK,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;;IACjC,CAAC;IAiCD,6BAAM,GAAN;QACQ,IAAA,eAQQ,EAPZ,wBAAS,EACT,oBAAO,EACP,gBAAK,EACL,4BAAW,EACX,oBAAO,EACP,8BAAY,EACZ,sBACY,CAAC;QACf,OAAO,CACL,oBAAC,QAAQ,IACP,SAAS,EAAE,UAAU,CAAC,gBAAgB,EAAE,SAAS,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,EACpE,cAAc,EAAE,IAAI,CAAC,UAAU,EAC/B,cAAc,EAAE,OAAO,EACvB,WAAW,EAAE,OAAO,EACpB,YAAY;YAEX,CAAC,QAAQ;gBACR,oBAAC,UAAU,IACT,KAAK,EAAC,MAAM,EACZ,MAAM,EAAC,MAAM,EACb,SAAS,EAAC,MAAM,GAChB;YAEH,KAAK;gBACJ,6BAAK,SAAS,EAAC,OAAO,IACnB,KAAK,CACF;YAEP,WAAW;gBACV,6BAAK,SAAS,EAAC,aAAa,IACzB,WAAW,CACR;YAEP,OAAO;gBACN,6BAAK,SAAS,EAAC,UAAU,IACtB,OAAO,CACJ;YAEP,YAAY;gBACX,6BAAK,SAAS,EAAC,eAAe,IAC3B,YAAY,CACT,CAEC,CACZ,CAAC;IACJ,CAAC;IACH,mBAAC;AAAD,CAAC,AArFD,CAAkC,KAAK,CAAC,aAAa,GAqFpD;;AAED,eAAe,YAAY,CAAC","sourcesContent":["import React from 'react';\nimport DropZone, { ImageFile } from 'react-dropzone';\nimport classnames from 'classnames';\nimport Attachment from '@src/components/Icons/Attachment.svg';\nimport './FileDropZone.scss';\nimport { AttachmentUploadOptions } from '@src/lib/attachment';\nimport { Observable } from 'rxjs';\nimport { BlobDescriptor, checkFileValidity } from '@src/lib/files';\n\ninterface Props {\n  className: string;\n  onDrop?: (files: ImageFile[], options: AttachmentUploadOptions) => void;\n  onDirectoryDropError: (filename: BlobDescriptor) => void;\n  onLeave?: () => void;\n  title?: string;\n  description?: string;\n  centeredCopy?: string;\n  altCopy?: string;\n  hideIcon?: boolean;\n}\n\ninterface State {\n  active: boolean;\n}\n\nexport class FileDropZone extends React.PureComponent<Props, State> {\n  constructor() {\n    super();\n    this.state = { active: false };\n  }\n\n  handleDrop = (accepted: ImageFile[], event: React.DragEvent<HTMLDivElement>) => {\n    const shiftKey = event.shiftKey;\n    const xPosiiton = event.pageX;\n    const yPosition = event.pageY;\n    event.persist();\n    // Handler for dropping checks to see if we dropped in any diretories and will error out\n    Observable.zip(\n      ...accepted.map(f => checkFileValidity(f)),\n    ).map(files => files.filter(b => !!b.error))\n    .subscribe({\n      next: (blobs) => {\n        const { onDrop, onDirectoryDropError } = this.props;\n\n        if (onDrop) {\n          this.setState({ active: false });\n          if (blobs.length > 0) {\n            onDirectoryDropError(blobs[0]);\n          } else {\n            onDrop(accepted, {\n              shiftKey,\n              position: {\n                x: xPosiiton,\n                y: yPosition,\n              },\n            });\n          }\n        }\n      },\n    });\n  }\n\n  render() {\n    const {\n      className,\n      onLeave,\n      title,\n      description,\n      altCopy,\n      centeredCopy,\n      hideIcon,\n    } = this.props;\n    return (\n      <DropZone\n        className={classnames('file-drop-zone', className, { active: true })}\n        onDropAccepted={this.handleDrop}\n        onDropRejected={onLeave}\n        onDragLeave={onLeave}\n        disableClick\n      >\n        {!hideIcon &&\n          <Attachment\n            width=\"30px\"\n            height=\"30px\"\n            className=\"icon\"\n          />\n        }\n        {title &&\n          <div className=\"title\">\n            {title}\n          </div>\n        }\n        {description &&\n          <div className=\"description\">\n            {description}\n          </div>\n        }\n        {altCopy &&\n          <div className=\"alt-copy\">\n            {altCopy}\n          </div>\n        }\n        {centeredCopy &&\n          <div className=\"centered-copy\">\n            {centeredCopy}\n          </div>\n        }\n      </DropZone>\n    );\n  }\n}\n\nexport default FileDropZone;\n"]}]}