{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/rightSidebar.ts","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/rightSidebar.ts","mtime":1675280254057},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7CiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspCiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspCiAgICAgICAgICAgIHJba10gPSBhW2pdOwogICAgcmV0dXJuIHI7Cn07CmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJzsKaW1wb3J0IHsgQWN0aW9uU3RhdHVzLCB9IGZyb20gJ0BzcmMvdHlwZXMvaW5kZXgnOwppbXBvcnQgeyBSaWdodFNpZGViYXJUYWIsIFJpZ2h0U2lkZWJhclN1YlRhYiwgUGFnZSwgfSBmcm9tICdAc3JjL3R5cGVzL3JpZ2h0U2lkZWJhcic7CmltcG9ydCB7IFJJR0hUX1NJREVCQVJfU0hPV19DT05UQUNULCByaWdodFNpZGViYXJUYWJTZWxlY3QsIHJpZ2h0U2lkZWJhckNvbGxhcHNlLCBSSUdIVF9TSURFQkFSX1RBQl9TRUxFQ1QsIFJJR0hUX1NJREVCQVJfTElOS1NfU0VULCByaWdodFNpZGViYXJMaW5rc1NldCwgUklHSFRfU0lERUJBUl9DT0xMQVBTRSwgfSBmcm9tICdAc3JjL2R1Y2tzL3JpZ2h0U2lkZWJhcic7CmltcG9ydCB7IGNvbnRhY3RSZXNvdXJjZXNGZXRjaCwgY29udGFjdFNlbGVjdCB9IGZyb20gJ0BzcmMvZHVja3MvY29udGFjdHMnOwppbXBvcnQgeyByZWNvcmRFdmVudCwgVXNlckV2ZW50cyB9IGZyb20gJ0BzcmMvbGliL2FuYWx5dGljcyc7CmltcG9ydCB7IHNlbGVjdE1lc3NhZ2VCb2RpZXMgfSBmcm9tICdAc3JjL2R1Y2tzL21lc3NhZ2VCb2RpZXMnOwppbXBvcnQgeyBGYWtlRE9NIH0gZnJvbSAnQHNyYy9saWIvaHRtbCc7CmltcG9ydCB7IHVuaXFCeSB9IGZyb20gJ2xvZGFzaCc7CnZhciByaWdodFNpZGViYXJMaW5rc1NldEVwaWMgPSBmdW5jdGlvbiAoYWN0aW9uJCwgc3RvcmUsIGRlcHMpIHsKICAgIHJldHVybiBhY3Rpb24kLm9mVHlwZShSSUdIVF9TSURFQkFSX0xJTktTX1NFVCkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi5zdGF0dXMgPT09IEFjdGlvblN0YXR1cy5TdGFydDsgfSkKICAgICAgICAubWFwKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICB2YXIgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpOwogICAgICAgIHZhciBib2RpZXMgPSBzZWxlY3RNZXNzYWdlQm9kaWVzKHN0YXRlLCBzdGF0ZS5zZWxlY3RlZFRocmVhZCAmJiBzdGF0ZS5zZWxlY3RlZFRocmVhZC5pZCB8fCAnJyk7CiAgICAgICAgdmFyIGFsbEFuY2hvcnMgPSBbXTsKICAgICAgICAvLyBIYW5kbGUgZXh0cmFjdGluZyBsaW5rcwogICAgICAgIGJvZGllcy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBGYWtlRE9NKCkuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBiLmJvZHk7CiAgICAgICAgICAgIHZhciBhbmNob3JFbGVtZW50cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdhJyk7CiAgICAgICAgICAgIGFuY2hvckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgIHZhciB0ZXh0Q29udGVudCA9IGEudGV4dENvbnRlbnQ7CiAgICAgICAgICAgICAgICBpZiAodGV4dENvbnRlbnQgJiYgdGV4dENvbnRlbnQudHJpbSgpICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgIGFsbEFuY2hvcnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0ZXh0Q29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogYS5ocmVmLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmlnaHRTaWRlYmFyTGlua3NTZXQoYWN0aW9uLm1ldGEsIHVuaXFCeShhbGxBbmNob3JzLCAnaHJlZicpKTsKICAgIH0pOwp9Owp2YXIgcmlnaHRTaWRlYmFyVGFiU2VsZWN0RXBpYyA9IGZ1bmN0aW9uIChhY3Rpb24kLCBzdG9yZSkgewogICAgcmV0dXJuIGFjdGlvbiQub2ZUeXBlKFJJR0hUX1NJREVCQVJfVEFCX1NFTEVDVCkKICAgICAgICAuZG8oZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgIGlmIChhY3Rpb24ubWV0YS5yc2JUYWIgPT09IFJpZ2h0U2lkZWJhclRhYi5BY3Rpdml0eSkgewogICAgICAgICAgICByZWNvcmRFdmVudChVc2VyRXZlbnRzLkFjdGl2aXR5RmVlZFZpZXdlZCk7CiAgICAgICAgfQogICAgICAgIGlmIChhY3Rpb24ubWV0YS5yc2JUYWIgPT09IFJpZ2h0U2lkZWJhclRhYi5TYWxlc2ZvcmNlKSB7CiAgICAgICAgICAgIHJlY29yZEV2ZW50KFVzZXJFdmVudHMuU2FsZXNmb3JjZVZpZXdlZCk7CiAgICAgICAgfQogICAgfSkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICB2YXIgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpOwogICAgICAgIHZhciBzZWxlY3RlZENvbnRhY3QgPSBzdGF0ZS5zZWxlY3RlZENvbnRhY3Q7CiAgICAgICAgcmV0dXJuICEhc2VsZWN0ZWRDb250YWN0ICYmIGFjdGlvbi5tZXRhLnJzYlRhYiA9PT0gUmlnaHRTaWRlYmFyVGFiLkNvbnRhY3Q7CiAgICB9KQogICAgICAgIC5tYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gY29udGFjdFJlc291cmNlc0ZldGNoKHN0b3JlLmdldFN0YXRlKCkuc2VsZWN0ZWRDb250YWN0KTsgfSk7Cn07CnZhciByaWdodFNpZGViYXJTaG93Q29udGFjdCA9IGZ1bmN0aW9uIChhY3Rpb24kLCBzdG9yZSwgZGVwcykgewogICAgcmV0dXJuIGFjdGlvbiQub2ZUeXBlKFJJR0hUX1NJREVCQVJfU0hPV19DT05UQUNUKQogICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gYWN0aW9uLnN0YXR1cyA9PT0gQWN0aW9uU3RhdHVzLlN0YXJ0OyB9KQogICAgICAgIC5mbGF0TWFwKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICB2YXIgYWN0aW9ucyA9IFsKICAgICAgICAgICAgT2JzZXJ2YWJsZS5vZihjb250YWN0U2VsZWN0KGFjdGlvbi5tZXRhKSksCiAgICAgICAgICAgIE9ic2VydmFibGUub2YocmlnaHRTaWRlYmFyVGFiU2VsZWN0KHsKICAgICAgICAgICAgICAgIHJzYlRhYjogUmlnaHRTaWRlYmFyVGFiLkNvbnRhY3QsCiAgICAgICAgICAgICAgICByc2JTdWJUYWI6IFJpZ2h0U2lkZWJhclN1YlRhYi5Db252ZXJzYXRpb24sCiAgICAgICAgICAgIH0pKSwKICAgICAgICBdOwogICAgICAgIC8vIFVuY29sbGFwc2UgaWYgY29sbGFwc2VkCiAgICAgICAgaWYgKHN0b3JlLmdldFN0YXRlKCkucmlnaHRTaWRlYmFyLmNvbGxhcHNlZC50aHJlYWRzKSB7CiAgICAgICAgICAgIGFjdGlvbnMgPSBfX3NwcmVhZEFycmF5cyhhY3Rpb25zLCBbCiAgICAgICAgICAgICAgICBPYnNlcnZhYmxlLm9mKHJpZ2h0U2lkZWJhckNvbGxhcHNlKHsgY29sbGFwc2VkOiBmYWxzZSwgcGFnZTogUGFnZS5UaHJlYWRzIH0pKSwKICAgICAgICAgICAgXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBPYnNlcnZhYmxlLmNvbmNhdC5hcHBseShPYnNlcnZhYmxlLCBhY3Rpb25zKTsKICAgIH0pOwp9OwovLyBGZXRjaCBhZGRpdGlvbmFsIGNvbnRhY3QgZmV0Y2hlcyBpZiB1bmNvbGxhcHNpbmcgc2lkZWJhciBhbmQgc2V0dGluZyB0byBSU0IuQ29udGFjdAp2YXIgcmlnaHRTaWRlYmFyQ29sbGFwc2VFcGljID0gZnVuY3Rpb24gKGFjdGlvbiQsIHN0b3JlLCBkZXBzKSB7CiAgICByZXR1cm4gYWN0aW9uJC5vZlR5cGUoUklHSFRfU0lERUJBUl9DT0xMQVBTRSkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi5zdGF0dXMgPT09IEFjdGlvblN0YXR1cy5TdGFydDsgfSkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICB2YXIgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpOwogICAgICAgIHJldHVybiAhYWN0aW9uLm1ldGEuY29sbGFwc2VkICYmICEhc3RhdGUuc2VsZWN0ZWRDb250YWN0OwogICAgfSkKICAgICAgICAuZmxhdE1hcChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgdmFyIHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTsKICAgICAgICB2YXIgcHJvZmlsZVNlbGVjdGVkID0gc3RhdGUucmlnaHRTaWRlYmFyLnRhYiA9PT0gUmlnaHRTaWRlYmFyVGFiLkNvbnRhY3Q7CiAgICAgICAgdmFyIHNlbGVjdGVkQ29udGFjdCA9IHN0b3JlLmdldFN0YXRlKCkuc2VsZWN0ZWRDb250YWN0OwogICAgICAgIHZhciBhY3Rpb25zID0gWwogICAgICAgICAgICBPYnNlcnZhYmxlLm9mKHJpZ2h0U2lkZWJhckNvbGxhcHNlKGFjdGlvbi5tZXRhLCBudWxsKSksCiAgICAgICAgXTsKICAgICAgICAvLyBIYW5kbGUgcmVmZXRjaGluZyBjb250YWN0IG9uIHVuY29sbGFwc2UKICAgICAgICBpZiAoc2VsZWN0ZWRDb250YWN0ICYmIHByb2ZpbGVTZWxlY3RlZCkgewogICAgICAgICAgICBhY3Rpb25zID0gX19zcHJlYWRBcnJheXMoYWN0aW9ucywgWwogICAgICAgICAgICAgICAgT2JzZXJ2YWJsZS5vZihjb250YWN0UmVzb3VyY2VzRmV0Y2goc2VsZWN0ZWRDb250YWN0KSksCiAgICAgICAgICAgIF0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS5jb25jYXQuYXBwbHkoT2JzZXJ2YWJsZSwgYWN0aW9ucyk7CiAgICB9KTsKfTsKZXhwb3J0IGRlZmF1bHQgWwogICAgcmlnaHRTaWRlYmFyU2hvd0NvbnRhY3QsCiAgICByaWdodFNpZGViYXJDb2xsYXBzZUVwaWMsCiAgICByaWdodFNpZGViYXJUYWJTZWxlY3RFcGljLAogICAgcmlnaHRTaWRlYmFyTGlua3NTZXRFcGljLApdOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/rightSidebar.ts","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/rightSidebar.ts"],"names":[],"mappings":"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","sourcesContent":["import { Observable } from 'rxjs';\nimport { Epic } from 'redux-observable';\n\nimport {\n  StoreState,\n  Action,\n  ActionStatus,\n  MessageBody,\n} from '@src/types/index';\nimport {\n  RightSidebarTab,\n  RightSidebarSubTab,\n  Page,\n} from '@src/types/rightSidebar';\n\nimport { Deps } from '@src/lib/epic';\nimport {\n  RIGHT_SIDEBAR_SHOW_CONTACT,\n  rightSidebarTabSelect,\n  rightSidebarCollapse,\n  RightSidebarMeta,\n  RIGHT_SIDEBAR_TAB_SELECT,\n  RIGHT_SIDEBAR_LINKS_SET,\n  rightSidebarLinksSet,\n  RightSidebarCollapseMeta,\n  RIGHT_SIDEBAR_COLLAPSE,\n} from '@src/ducks/rightSidebar';\nimport { contactResourcesFetch, contactSelect } from '@src/ducks/contacts';\nimport { recordEvent, UserEvents } from '@src/lib/analytics';\nimport { selectMessageBodies } from '@src/ducks/messageBodies';\nimport { AnchorElement, FakeDOM } from '@src/lib/html';\nimport { uniqBy } from 'lodash';\n\nconst rightSidebarLinksSetEpic: Epic<any, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(RIGHT_SIDEBAR_LINKS_SET)\n      .filter(action => action.status === ActionStatus.Start)\n      .map((action) => {\n        const state = store.getState();\n        const bodies: MessageBody[] = selectMessageBodies(\n          state,\n          state.selectedThread && state.selectedThread.id || '',\n        );\n        const allAnchors: AnchorElement[] = [];\n\n        // Handle extracting links\n        bodies.forEach((b) => {\n          const container = FakeDOM().createElement('div');\n          container.innerHTML = b.body;\n          const anchorElements = container.querySelectorAll('a');\n          anchorElements.forEach((a) => {\n            const textContent = a.textContent;\n            if (textContent && textContent.trim() !== '') {\n              allAnchors.push({\n                value: textContent,\n                href: a.href,\n              });\n            }\n          });\n        });\n        return rightSidebarLinksSet(action.meta, uniqBy(allAnchors, 'href'));\n      });\n\nconst rightSidebarTabSelectEpic: Epic<\n  Action<RightSidebarMeta|string|undefined, null|undefined>, StoreState, Deps>\n  = (action$, store) =>\n  action$.ofType(RIGHT_SIDEBAR_TAB_SELECT)\n    .do((action: Action<RightSidebarMeta, any>) => {\n      if (action.meta.rsbTab === RightSidebarTab.Activity) {\n        recordEvent(UserEvents.ActivityFeedViewed);\n      }\n\n      if (action.meta.rsbTab === RightSidebarTab.Salesforce) {\n        recordEvent(UserEvents.SalesforceViewed);\n      }\n    })\n    .filter((action: Action<RightSidebarMeta, any>) => {\n      const state = store.getState();\n      const selectedContact = state.selectedContact;\n      return !!selectedContact && action.meta.rsbTab === RightSidebarTab.Contact;\n    })\n    .map(() => contactResourcesFetch(store.getState().selectedContact));\n\nconst rightSidebarShowContact: Epic<Action<any, any>, StoreState, Deps>\n  = (action$, store, deps) =>\n  action$.ofType(RIGHT_SIDEBAR_SHOW_CONTACT)\n    .filter(action => action.status === ActionStatus.Start)\n    .flatMap((action) => {\n      let actions: Array<Observable<Action<any, any>>> = [\n        Observable.of(contactSelect(action.meta)),\n        Observable.of(rightSidebarTabSelect({\n          rsbTab: RightSidebarTab.Contact,\n          rsbSubTab: RightSidebarSubTab.Conversation,\n        })),\n      ];\n\n      // Uncollapse if collapsed\n      if (store.getState().rightSidebar.collapsed.threads) {\n        actions = [\n          ...actions,\n          Observable.of(rightSidebarCollapse({ collapsed: false, page: Page.Threads })),\n        ];\n      }\n\n      return Observable.concat(\n        ...actions,\n      );\n    },\n  );\n\n// Fetch additional contact fetches if uncollapsing sidebar and setting to RSB.Contact\nconst rightSidebarCollapseEpic: Epic<\n  Action<RightSidebarCollapseMeta|string|undefined, any>, StoreState, Deps\n> = (action$, store, deps) =>\n    action$.ofType(RIGHT_SIDEBAR_COLLAPSE)\n      .filter(action => action.status === ActionStatus.Start)\n      .filter((action: Action<RightSidebarCollapseMeta, any>) => {\n        const state = store.getState();\n        return !action.meta.collapsed && !!state.selectedContact;\n      })\n      .flatMap((action: Action<RightSidebarCollapseMeta, null>) => {\n        const state = store.getState();\n        const profileSelected = state.rightSidebar.tab === RightSidebarTab.Contact;\n        const selectedContact = store.getState().selectedContact;\n        let actions: Array<Observable<Action<RightSidebarCollapseMeta|string|undefined, any>>> = [\n          Observable.of(rightSidebarCollapse(action.meta, null)),\n        ];\n\n        // Handle refetching contact on uncollapse\n        if (selectedContact && profileSelected) {\n          actions = [\n            ...actions,\n            Observable.of(contactResourcesFetch(selectedContact)),\n          ];\n        }\n\n        return Observable.concat(\n          ...actions,\n        );\n      });\n\nexport default [\n  rightSidebarShowContact,\n  rightSidebarCollapseEpic,\n  rightSidebarTabSelectEpic,\n  rightSidebarLinksSetEpic,\n];\n"]}]}