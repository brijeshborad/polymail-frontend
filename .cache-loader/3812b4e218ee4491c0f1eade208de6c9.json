{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/RecipientsEditor/components/ContactTypeaheadPopover.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/RecipientsEditor/components/ContactTypeaheadPopover.tsx","mtime":1675280254007},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgUG9wb3ZlciBmcm9tICdAc3JjL2NvbXBvbmVudHMvUG9wb3Zlci9Qb3BvdmVyJzsKaW1wb3J0ICcuL0NvbnRhY3RUeXBlYWhlYWRQb3BvdmVyLnNjc3MnOwppbXBvcnQgQ29udGFjdEdyb3VwSWNvbiBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvQ29udGFjdEdyb3VwLnN2Zyc7CnZhciBDb250YWN0VHlwZWFoZWFkUG9wb3ZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhDb250YWN0VHlwZWFoZWFkUG9wb3ZlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIENvbnRhY3RUeXBlYWhlYWRQb3BvdmVyKHByb3BzKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMudG9nZ2xlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5wb3BvdmVyLnRvZ2dsZSgpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc2hvdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMucG9wb3Zlci5zaG93KCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oaWRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5wb3BvdmVyLmhpZGUoKTsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZEluZGV4OiAwIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vIGV4aXN0ZW5jZSBjaGVjayBmb3IgdGVzdHMKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5yZWYgJiYgX3RoaXMucmVmLnNjcm9sbFRvKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVmLnNjcm9sbFRvKHsgdG9wOiAwIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVNlbGVjdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBvblNlbGVjdCA9IF9hLm9uU2VsZWN0LCBjb250YWN0cyA9IF9hLmNvbnRhY3RzOwogICAgICAgICAgICB2YXIgaW5kZXggPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldCAmJiBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5pbmRleDsKICAgICAgICAgICAgaWYgKGluZGV4KSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkSW5kZXg6IHBhcnNlSW50KGluZGV4LCAxMCkgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0KGNvbnRhY3RzW190aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXhdKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVQb3BvdmVyUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5wb3BvdmVyID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5yZWYgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5vbkRvd25BcnJvdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGNvbnRhY3RzID0gX3RoaXMucHJvcHMuY29udGFjdHM7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gX3RoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleDsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXggPCBjb250YWN0cy5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkSW5kZXg6IHNlbGVjdGVkSW5kZXggKyAxIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMudGltZW91dCk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGltZW91dCA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gX3RoaXMucmVmICYmIF90aGlzLnJlZi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb250YWN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHMgJiYgZWxlbWVudHNbX3RoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXJSZWN0ID0gX3RoaXMucmVmICYmIF90aGlzLnJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnJlZiAmJiBlbGVtZW50ICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoX3RoaXMucmVmLnNjcm9sbFRvcCArIGNvbnRhaW5lclJlY3QuaGVpZ2h0KSA8IChlbGVtZW50Lm9mZnNldFRvcCArIDUwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbX3RoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleF0uc2Nyb2xsSW50b1ZpZXcoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMub25VcEFycm93ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IF90aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXg7CiAgICAgICAgICAgIGlmIChzZWxlY3RlZEluZGV4ID4gMCkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZEluZGV4OiBzZWxlY3RlZEluZGV4IC0gMSB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLnRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLnRpbWVvdXQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IF90aGlzLnJlZiAmJiBfdGhpcy5yZWYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY29udGFjdCcpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzICYmIGVsZW1lbnRzW190aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucmVmICYmIGVsZW1lbnQgJiYgX3RoaXMucmVmLnNjcm9sbFRvcCA+IGVsZW1lbnQub2Zmc2V0VG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tfdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGV4XS5zY3JvbGxJbnRvVmlldyh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLm9uRW50ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBvblNlbGVjdCA9IF9hLm9uU2VsZWN0LCBjb250YWN0cyA9IF9hLmNvbnRhY3RzOwogICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IF90aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXg7CiAgICAgICAgICAgIG9uU2VsZWN0KGNvbnRhY3RzW3NlbGVjdGVkSW5kZXhdKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0gewogICAgICAgICAgICBzZWxlY3RlZEluZGV4OiAwLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQ29udGFjdFR5cGVhaGVhZFBvcG92ZXIucHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gKG5leHRQcm9wcykgewogICAgICAgIGlmIChuZXh0UHJvcHMuY29udGFjdHMgIT09IHRoaXMucHJvcHMuY29udGFjdHMpIHsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkSW5kZXg6IDAgfSk7CiAgICAgICAgfQogICAgfTsKICAgIENvbnRhY3RUeXBlYWhlYWRQb3BvdmVyLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAocHJldlByb3BzLCBwcmV2U3RhdGUpIHsKICAgICAgICB2YXIgb25DaGFuZ2UgPSB0aGlzLnByb3BzLm9uQ2hhbmdlOwogICAgICAgIGlmIChvbkNoYW5nZSAmJiBwcmV2U3RhdGUuc2VsZWN0ZWRJbmRleCAhPT0gdGhpcy5zdGF0ZS5zZWxlY3RlZEluZGV4KSB7CiAgICAgICAgICAgIG9uQ2hhbmdlKHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleCk7CiAgICAgICAgfQogICAgfTsKICAgIENvbnRhY3RUeXBlYWhlYWRQb3BvdmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBjb250YWN0cyA9IF9hLmNvbnRhY3RzLCBvbkhpZGUgPSBfYS5vbkhpZGUsIG9uU2hvdyA9IF9hLm9uU2hvdywgc3R5bGUgPSBfYS5zdHlsZTsKICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleDsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3ZlciwgeyByZWY6IHRoaXMuaGFuZGxlUG9wb3ZlclJlZiwgY2xhc3NOYW1lOiAiY29udGFjdC10eXBlYWhlYWQtcG9wb3ZlciIsIG9uU2hvdzogb25TaG93LCBvbkhpZGU6IG9uSGlkZSwgc3R5bGU6IHN0eWxlLCBhdXRvRm9jdXNPZmY6IHRydWUgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyByZWY6IHRoaXMuaGFuZGxlUmVmIH0sIGNvbnRhY3RzLm1hcChmdW5jdGlvbiAoY29udGFjdCwgaW5kZXgpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygnY29udGFjdCcsIHsgc2VsZWN0ZWQ6IHNlbGVjdGVkSW5kZXggPT09IGluZGV4IH0pLCAiZGF0YS1pbmRleCI6IGluZGV4LCBrZXk6IGNvbnRhY3QuaWQsIG9uTW91c2VEb3duOiBfdGhpcy5oYW5kbGVTZWxlY3QgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7IGNsYXNzTmFtZTogImljb24iIH0sIGNvbnRhY3QucGhvdG9VcmwgPwogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsgc3JjOiBjb250YWN0LnBob3RvVXJsIH0pIDoKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRhY3RHcm91cEljb24sIHsgY2xhc3NOYW1lOiAiY29udGFjdC1ncm91cC1pY29uIiB9KSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2MiIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDQiLCBudWxsLCBjb250YWN0LmZ1bGxOYW1lIHx8IGNvbnRhY3QubmFtZSksCiAgICAgICAgICAgICAgICAgICAgY29udGFjdC5lbWFpbCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KCJoNSIsIG51bGwsIGNvbnRhY3QuZW1haWwpKSkpOyB9KSkpKTsKICAgIH07CiAgICByZXR1cm4gQ29udGFjdFR5cGVhaGVhZFBvcG92ZXI7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBDb250YWN0VHlwZWFoZWFkUG9wb3ZlcjsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/RecipientsEditor/components/ContactTypeaheadPopover.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Form/RecipientsEditor/components/ContactTypeaheadPopover.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\n\nimport Popover from '@src/components/Popover/Popover';\nimport { Contact, ContactGroup } from '@src/types';\n\nimport './ContactTypeaheadPopover.scss';\nimport ContactGroupIcon from '@src/components/Icons/ContactGroup.svg';\n\ninterface Props {\n  contacts: Array<Contact|ContactGroup>;\n  onSelect: (contact: Contact|ContactGroup) => void;\n  onShow?: () => void;\n  onHide?: () => void;\n  onChange?: (index: number) => void;\n  style?: any;\n}\n\ninterface State {\n  selectedIndex: number;\n}\n\nclass ContactTypeaheadPopover extends React.PureComponent<Props, State> {\n  private popover: Popover;\n  private timeout: NodeJS.Timer;\n  private ref: HTMLDivElement;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      selectedIndex: 0,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.contacts !== this.props.contacts) {\n      this.setState({ selectedIndex: 0 });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    const { onChange } = this.props;\n\n    if (onChange && prevState.selectedIndex !== this.state.selectedIndex) {\n      onChange(this.state.selectedIndex);\n    }\n  }\n\n  toggle = () => {\n    this.popover.toggle();\n  }\n\n  show = () => {\n    this.popover.show();\n  }\n\n  hide = () => {\n    this.popover.hide();\n    this.setState({ selectedIndex: 0 }, () => {\n      // existence check for tests\n      if (this.ref && this.ref.scrollTo) {\n        this.ref.scrollTo({ top: 0 });\n      }\n    });\n  }\n\n  handleSelect = (e: React.SyntheticEvent<HTMLElement>) => {\n    const { onSelect, contacts } = this.props;\n    const index = e.currentTarget.dataset && e.currentTarget.dataset.index;\n    if (index) {\n      this.setState({ selectedIndex: parseInt(index, 10) }, () => {\n        onSelect(contacts[this.state.selectedIndex]);\n      });\n    }\n  }\n\n  handlePopoverRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  handleRef = (ref: HTMLDivElement) => {\n    this.ref = ref;\n  }\n\n  onDownArrow = () => {\n    const { contacts } = this.props;\n    const { selectedIndex } = this.state;\n\n    if (selectedIndex < contacts.length - 1) {\n      this.setState(\n        { selectedIndex: selectedIndex + 1 },\n        () => {\n          clearTimeout(this.timeout);\n          this.timeout = global.setTimeout(\n            () => {\n              const elements = this.ref && this.ref.getElementsByClassName('contact');\n              const element = elements && elements[this.state.selectedIndex] as HTMLElement;\n              const containerRect = this.ref && this.ref.getBoundingClientRect();\n              if (this.ref && element &&\n                (this.ref.scrollTop + containerRect.height) < (element.offsetTop + 50)) {\n                elements[this.state.selectedIndex].scrollIntoView(false);\n              }\n            },\n            0,\n          );\n        },\n      );\n    }\n  }\n\n  onUpArrow = () => {\n    const { selectedIndex } = this.state;\n\n    if (selectedIndex > 0) {\n      this.setState(\n        { selectedIndex: selectedIndex - 1 },\n        () => {\n          clearTimeout(this.timeout);\n          this.timeout = global.setTimeout(\n            () => {\n              const elements = this.ref && this.ref.getElementsByClassName('contact');\n              const element = elements && elements[this.state.selectedIndex] as HTMLElement;\n              if (this.ref && element && this.ref.scrollTop > element.offsetTop) {\n                elements[this.state.selectedIndex].scrollIntoView(true);\n              }\n            },\n            0,\n          );\n        },\n      );\n    }\n  }\n\n  onEnter = () => {\n    const { onSelect, contacts } = this.props;\n    const { selectedIndex } = this.state;\n\n    onSelect(contacts[selectedIndex]);\n  }\n\n  render() {\n    const { contacts, onHide, onShow, style } = this.props;\n    const { selectedIndex } = this.state;\n\n    return (\n      <Popover\n        ref={this.handlePopoverRef}\n        className=\"contact-typeahead-popover\"\n        onShow={onShow}\n        onHide={onHide}\n        style={style}\n        autoFocusOff\n      >\n        <div ref={this.handleRef}>\n          {contacts.map((contact: Contact|ContactGroup, index: number) => (\n            <button\n              className={classnames('contact', { selected: selectedIndex === index })}\n              data-index={index}\n              key={contact.id}\n              onMouseDown={this.handleSelect}\n            >\n              <span className=\"icon\">\n                {(contact as Contact).photoUrl ?\n                  <img src={(contact as Contact).photoUrl} /> :\n                  <ContactGroupIcon className=\"contact-group-icon\" />\n                }\n              </span>\n              <div className=\"desc\">\n                <h4>{(contact as Contact).fullName || (contact as ContactGroup).name}</h4>\n                {(contact as Contact).email && <h5>{(contact as Contact).email}</h5>}\n              </div>\n            </button>\n          ))}\n        </div>\n      </Popover>\n    );\n  }\n}\n\nexport default ContactTypeaheadPopover;\n"]}]}