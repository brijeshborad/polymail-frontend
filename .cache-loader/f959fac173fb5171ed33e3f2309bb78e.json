{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ContactInfo/components/ContactInteractions/components/FilesPane/File/File.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ContactInfo/components/ContactInteractions/components/FilesPane/File/File.tsx","mtime":1675280254028},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgQ29udGFjdFR5cGUgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IEF0dGFjaG1lbnRDZWxsIGZyb20gJ0BzcmMvY29tcG9uZW50cy9DZWxscy9BdHRhY2htZW50Q2VsbCc7CmltcG9ydCAnLi9GaWxlLnNjc3MnOwppbXBvcnQgeyBzaG93TW9zdFJlY2VudCB9IGZyb20gJ0BzcmMvbGliL2RhdGV0aW1lJzsKaW1wb3J0IHsgZ2V0RGlzcGxheU5hbWUgfSBmcm9tICdAc3JjL2xpYi9hZGRyZXNzJzsKdmFyIEZpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoRmlsZSwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEZpbGUoKSB7CiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgfQogICAgRmlsZS5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgY29udGFjdCA9IF9hLmNvbnRhY3QsIGZpbGUgPSBfYS5maWxlLCBnZXRDb250YWN0ID0gX2EuZ2V0Q29udGFjdDsKICAgICAgICBpZiAoY29udGFjdC50eXBlID09PSBDb250YWN0VHlwZS5EZWZhdWx0KSB7CiAgICAgICAgICAgIGdldENvbnRhY3QoZmlsZS5jb250YWN0KTsKICAgICAgICB9CiAgICB9OwogICAgRmlsZS5wcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiAobmV4dFByb3BzKSB7CiAgICAgICAgdmFyIGNvbnRhY3QgPSBuZXh0UHJvcHMuY29udGFjdCwgZmlsZSA9IG5leHRQcm9wcy5maWxlLCBnZXRDb250YWN0ID0gbmV4dFByb3BzLmdldENvbnRhY3Q7CiAgICAgICAgaWYgKGZpbGUuY29udGFjdCAhPT0gdGhpcy5wcm9wcy5maWxlLmNvbnRhY3QgJiYgY29udGFjdC50eXBlID09PSBDb250YWN0VHlwZS5EZWZhdWx0KSB7CiAgICAgICAgICAgIGdldENvbnRhY3QoZmlsZS5jb250YWN0KTsKICAgICAgICB9CiAgICB9OwogICAgRmlsZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGF0dGFjaG1lbnQgPSBfYS5hdHRhY2htZW50LCBjb250YWN0ID0gX2EuY29udGFjdCwgY3JlYXRlZCA9IF9hLmNyZWF0ZWQsIG1lID0gX2EubWUsIGNlbGxIZWlnaHQgPSBfYS5jZWxsSGVpZ2h0OwogICAgICAgIHZhciBkYXRlID0gbW9tZW50KGNyZWF0ZWQpOwogICAgICAgIHZhciB0aW1lID0gZGF0ZS5jYWxlbmRhcignJywgewogICAgICAgICAgICBzYW1lRGF5OiAnaDptbWEnLAogICAgICAgICAgICBsYXN0RGF5OiAnW1llc3RlcmRheV0gaDptbWEnLAogICAgICAgICAgICBsYXN0V2VlazogIlsiICsgc2hvd01vc3RSZWNlbnQoY3JlYXRlZCkgKyAiIGF0XSBoOm1tYSIsCiAgICAgICAgICAgIHNhbWVFbHNlOiAiWyIgKyBzaG93TW9zdFJlY2VudChjcmVhdGVkKSArICIgYXRdIGg6bW1hIiwKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmlsZSIsIHN0eWxlOiB7IGhlaWdodDogY2VsbEhlaWdodCB9IH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29udGFjdC1pbmZvIiB9LAogICAgICAgICAgICAgICAgY29udGFjdCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJuYW1lIiB9LCBnZXREaXNwbGF5TmFtZShjb250YWN0LCBtZSkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGltZSIgfSwgdGltZSkpLAogICAgICAgICAgICBhdHRhY2htZW50ICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQXR0YWNobWVudENlbGwsIHsgYXR0YWNobWVudDogYXR0YWNobWVudCB9KSkpOwogICAgfTsKICAgIHJldHVybiBGaWxlOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgRmlsZTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ContactInfo/components/ContactInteractions/components/FilesPane/File/File.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/ContactInfo/components/ContactInteractions/components/FilesPane/File/File.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,EAAqD,WAAW,EAAE,MAAM,YAAY,CAAC;AAC5F,OAAO,cAAc,MAAM,sCAAsC,CAAC;AAClE,OAAO,aAAa,CAAC;AACrB,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AACnD,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AAelD;IAAmB,wBAA0C;IAA7D;;IAuCA,CAAC;IAtCC,gCAAiB,GAAjB;QACQ,IAAA,eAA0C,EAAxC,oBAAO,EAAE,cAAI,EAAE,0BAAyB,CAAC;QAEjD,IAAI,OAAO,CAAC,IAAI,KAAK,WAAW,CAAC,OAAO,EAAE;YACxC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC1B;IACH,CAAC;IAED,+CAAgC,GAAhC,UAAiC,SAAgC;QACvD,IAAA,2BAAO,EAAE,qBAAI,EAAE,iCAAU,CAAe;QAEhD,IAAI,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,IAAI,KAAK,WAAW,CAAC,OAAO,EAAE;YACpF,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC1B;IACH,CAAC;IAED,qBAAM,GAAN;QACQ,IAAA,eAA6D,EAA3D,0BAAU,EAAE,oBAAO,EAAE,oBAAO,EAAE,UAAE,EAAE,0BAAyB,CAAC;QACpE,IAAM,IAAI,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;QAC7B,IAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;YAC7B,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,mBAAmB;YAC5B,QAAQ,EAAE,MAAI,cAAc,CAAC,OAAO,CAAC,eAAY;YACjD,QAAQ,EAAE,MAAI,cAAc,CAAC,OAAO,CAAC,eAAY;SAClD,CAAC,CAAC;QAEH,OAAO,CACL,6BAAK,SAAS,EAAC,MAAM,EAAC,KAAK,EAAE,EAAE,MAAM,EAAE,UAAU,EAAE;YACjD,6BAAK,SAAS,EAAC,cAAc;gBAC1B,OAAO,IAAI,8BAAM,SAAS,EAAC,MAAM,IAC/B,cAAc,CAAC,OAAO,EAAE,EAAE,CAAC,CACvB;gBACP,8BAAM,SAAS,EAAC,MAAM,IAAE,IAAI,CAAQ,CAChC;YACL,UAAU,IAAI,oBAAC,cAAc,IAAC,UAAU,EAAE,UAAU,GAAI,CACrD,CACP,CAAC;IACJ,CAAC;IACH,WAAC;AAAD,CAAC,AAvCD,CAAmB,KAAK,CAAC,aAAa,GAuCrC;AAED,eAAe,IAAI,CAAC","sourcesContent":["import React from 'react';\nimport moment from 'moment';\nimport { MessageAttachment, Contact, ContactAttachment, Me, ContactType } from '@src/types';\nimport AttachmentCell from '@src/components/Cells/AttachmentCell';\nimport './File.scss';\nimport { showMostRecent } from '@src/lib/datetime';\nimport { getDisplayName } from '@src/lib/address';\n\nexport interface Props {\n  file: ContactAttachment;\n  attachment: MessageAttachment;\n  contact: Contact;\n  created: Date;\n  me: Me;\n  cellHeight: number;\n}\n\nexport interface DispatchProps {\n  getContact: (email: string) => void;\n}\n\nclass File extends React.PureComponent<Props & DispatchProps> {\n  componentDidMount() {\n    const { contact, file, getContact } = this.props;\n\n    if (contact.type === ContactType.Default) {\n      getContact(file.contact);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props & DispatchProps) {\n    const { contact, file, getContact } = nextProps;\n\n    if (file.contact !== this.props.file.contact && contact.type === ContactType.Default) {\n      getContact(file.contact);\n    }\n  }\n\n  render() {\n    const { attachment, contact, created, me, cellHeight } = this.props;\n    const date = moment(created);\n    const time = date.calendar('', {\n      sameDay: 'h:mma',\n      lastDay: '[Yesterday] h:mma',\n      lastWeek: `[${showMostRecent(created)} at] h:mma`,\n      sameElse: `[${showMostRecent(created)} at] h:mma`,\n    });\n\n    return (\n      <div className=\"file\" style={{ height: cellHeight }}>\n        <div className=\"contact-info\">\n          {contact && <span className=\"name\">\n            {getDisplayName(contact, me)}\n          </span>}\n          <span className=\"time\">{time}</span>\n        </div>\n        {attachment && <AttachmentCell attachment={attachment} />}\n      </div>\n    );\n  }\n}\n\nexport default File;\n"]}]}