{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/UserProfile/UserProfile.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/UserProfile/UserProfile.tsx","mtime":1675280254081},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFRleHRJbnB1dCBmcm9tICdAc3JjL2NvbXBvbmVudHMvRm9ybS9UZXh0SW5wdXQnOwppbXBvcnQgRHJvcGRvd24gZnJvbSAnQHNyYy9jb21wb25lbnRzL0Zvcm0vRHJvcGRvd24nOwppbXBvcnQgTG9hZGVyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Mb2FkZXIvTG9hZGVyJzsKaW1wb3J0ICcuL1VzZXJQcm9maWxlLnNjc3MnOwppbXBvcnQgeyBtZW1vaXplIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IGJyb3dzZXJIaXN0b3J5IGZyb20gJ0BzcmMvbGliL2Jyb3dzZXJIaXN0b3J5JzsKaW1wb3J0IFVwbG9hZEJ1dHRvbiBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9VcGxvYWRCdXR0b24nOwppbXBvcnQgeyBBbXBsaXR1ZGVFdmVudHMsIGxvZ0FtcGxpdHVkZUV2ZW50IH0gZnJvbSAnQHNyYy9saWIvYW1wbGl0dWRlLWFuYWx5dGljcyc7CmV4cG9ydCB2YXIgdGVhbVZhbHVlcyA9IFsKICAgICdKdXN0IG1lJywKICAgICcyLTUnLAogICAgJzYtMTAnLAogICAgJzExLTIwJywKICAgICcyMS0zMCcsCiAgICAnMzErJywKXTsKdmFyIFVzZXJQcm9maWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFVzZXJQcm9maWxlLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVXNlclByb2ZpbGUocHJvcHMpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVUZWFtU2l6ZUNoYW5nZSA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyB0ZWFtU2l6ZTogdGVhbVZhbHVlc1tpbmRleF0gfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiAocHJvcGVydHlOYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIG5ld1N0YXRlID0ge307CiAgICAgICAgICAgICAgICBuZXdTdGF0ZVtwcm9wZXJ0eU5hbWVdID0gZS5jdXJyZW50VGFyZ2V0LnZhbHVlOwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUobmV3U3RhdGUpOwogICAgICAgICAgICB9OwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU3VibWl0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zdGF0ZSwgZmlyc3ROYW1lID0gX2EuZmlyc3ROYW1lLCBsYXN0TmFtZSA9IF9hLmxhc3ROYW1lLCB0ZWFtTmFtZSA9IF9hLnRlYW1OYW1lLCB0ZWFtU2l6ZSA9IF9hLnRlYW1TaXplOwogICAgICAgICAgICB2YXIgX2IgPSBfdGhpcy5wcm9wcywgdXBkYXRlTWUgPSBfYi51cGRhdGVNZSwgbWUgPSBfYi5tZSwgdGVhbSA9IF9iLnRlYW0sIHVwZGF0ZVRlYW0gPSBfYi51cGRhdGVUZWFtLCBjb25uZWN0UHJvdmlkZXIgPSBfYi5jb25uZWN0UHJvdmlkZXIsIHVwZGF0ZU1lU2lnblVwSW5mbyA9IF9iLnVwZGF0ZU1lU2lnblVwSW5mbywgdW5zdWJzY3JpYmVyID0gX2IudW5zdWJzY3JpYmVyOwogICAgICAgICAgICBpZiAobWUpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZU1lKF9fYXNzaWduKF9fYXNzaWduKHt9LCBtZSksIHsgZmlyc3ROYW1lOiBmaXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lIH0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGVhbSAmJiB0ZWFtTmFtZSkgewogICAgICAgICAgICAgICAgdXBkYXRlVGVhbSh7CiAgICAgICAgICAgICAgICAgICAgdGVhbTogdGVhbS5pZCwKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0ZWFtTmFtZSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0ZWFtU2l6ZSkgewogICAgICAgICAgICAgICAgdXBkYXRlTWVTaWduVXBJbmZvKHsgdGVhbVNpemU6IHRlYW1TaXplIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvZ0FtcGxpdHVkZUV2ZW50KEFtcGxpdHVkZUV2ZW50cy5Db21wbGV0ZVVzZXJQcm9maWxlKTsKICAgICAgICAgICAgaWYgKGNvbm5lY3RQcm92aWRlcikgewogICAgICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnL2xvZ2luL2Nvbm5lY3RQcm92aWRlcicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHVuc3Vic2NyaWJlcikgewogICAgICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnL3Vuc3Vic2NyaWJlcicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKG1lID09PSBudWxsIHx8IG1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZS5vbmJvYXJkaW5nU2tpcHBlZFRlYW0pIHsKICAgICAgICAgICAgICAgIC8vIERyb3AgdXNlciBpbnRvIHRoZSBhcHAgaWYgc2tpcHBpbmcgdGVhbSBvbmJvYXJkaW5nCiAgICAgICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKCcvJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKCcvb25ib2FyZGluZy90ZWFtaW52aXRlJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVVwbG9hZCA9IGZ1bmN0aW9uIChmaWxlcykgewogICAgICAgICAgICB2YXIgdXBkYXRlTWVQaG90byA9IF90aGlzLnByb3BzLnVwZGF0ZU1lUGhvdG87CiAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZU1lUGhvdG8oZmlsZXNbMF0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2VNZW1vaXplZCA9IG1lbW9pemUoX3RoaXMuaGFuZGxlQ2hhbmdlKTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgdGVhbU5hbWU6IHByb3BzLnRlYW0gJiYgcHJvcHMudGVhbS5uYW1lIHx8ICcnLAogICAgICAgICAgICB0ZWFtU2l6ZTogJycsCiAgICAgICAgICAgIGZpcnN0TmFtZTogKHByb3BzLm1lICYmIHByb3BzLm1lLmZpcnN0TmFtZSkgfHwgJycsCiAgICAgICAgICAgIGxhc3ROYW1lOiAocHJvcHMubWUgJiYgcHJvcHMubWUubGFzdE5hbWUpIHx8ICcnLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVXNlclByb2ZpbGUucHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gKG5leHRQcm9wcykgewogICAgICAgIGlmIChuZXh0UHJvcHMubWUgIT09IHRoaXMucHJvcHMubWUgfHwgbmV4dFByb3BzLnRlYW0gIT09IHRoaXMucHJvcHMudGVhbSkgewogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHRlYW1OYW1lOiBuZXh0UHJvcHMudGVhbSAmJiBuZXh0UHJvcHMudGVhbS5uYW1lIHx8IHRoaXMuc3RhdGUudGVhbU5hbWUsCiAgICAgICAgICAgICAgICB0ZWFtU2l6ZTogJycsCiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IChuZXh0UHJvcHMubWUgJiYgbmV4dFByb3BzLm1lLmZpcnN0TmFtZSkgfHwgJycsCiAgICAgICAgICAgICAgICBsYXN0TmFtZTogKG5leHRQcm9wcy5tZSAmJiBuZXh0UHJvcHMubWUubGFzdE5hbWUpIHx8ICcnLAogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgVXNlclByb2ZpbGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBsb2FkaW5nID0gX2EubG9hZGluZywgbWUgPSBfYS5tZSwgdGVhbSA9IF9hLnRlYW0sIHVuc3Vic2NyaWJlciA9IF9hLnVuc3Vic2NyaWJlcjsKICAgICAgICB2YXIgX2IgPSB0aGlzLnN0YXRlLCBmaXJzdE5hbWUgPSBfYi5maXJzdE5hbWUsIGxhc3ROYW1lID0gX2IubGFzdE5hbWUsIHRlYW1OYW1lID0gX2IudGVhbU5hbWU7CiAgICAgICAgaWYgKGxvYWRpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9hZGVyLCBudWxsKTsKICAgICAgICB9CiAgICAgICAgLy8gUmVtb3ZlIHRlYW0gaW5mbyBmaWVsZHMgaWYgdGhlIHVzZXIgaGFzIGpvaW5lZCBhbiBleGlzdGluZyB0ZWFtCiAgICAgICAgdmFyIHJlbW92ZVRlYW1GaWVsZHMgPSAobWUgPT09IG51bGwgfHwgbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1lLm9uYm9hcmRpbmdTa2lwcGVkVGVhbSkgfHwgKHRlYW0gJiYgdGVhbS5zZWF0c1VzZWQgPiAxKTsKICAgICAgICB2YXIgdGl0bGUgPSAnQ29tcGxldGUgeW91ciBQb2x5bWFpbCBwcm9maWxlJzsKICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSAnVGhpcyBoZWxwcyB1cyB0YWlsb3IgeW91ciBQb2x5bWFpbCBleHBlcmllbmNlIHRvIHlvdS4nOwogICAgICAgIC8vIEFkanVzdCBjb3B5IGZvciB1bnN1YnNjcmliZXIKICAgICAgICBpZiAodW5zdWJzY3JpYmVyKSB7CiAgICAgICAgICAgIHRpdGxlID0gJ0NvbXBsZXRlIHlvdXIgUHJvZmlsZSc7CiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gJ1lvdVwnbGwgYmUgZ3JhbnRlZCBhY2Nlc3MgdG8gVW5zdWJzY3JpYmVyIGFmdGVyIHRoaXMgaXMgY29tcGxldGUuJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImxvZ2luLXVzZXItcHJvZmlsZSIgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJwcm9tcHQiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCB0aXRsZSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiB9LCBkZXNjcmlwdGlvbikpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImF2YXRhci1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgbWUgJiYgbWUucGhvdG9DbG91ZEZpbGUgJiYgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhdmF0YXItaW1hZ2UiLCBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICJ1cmwoIiArIG1lLnBob3RvVXJsICsgIikiLAogICAgICAgICAgICAgICAgICAgIH0gfSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFVwbG9hZEJ1dHRvbiwgeyB1cGxvYWQ6IHRoaXMuaGFuZGxlVXBsb2FkLCBjbGFzc05hbWU6ICJ1cGRhdGUtYXZhdGFyLWJ1dHRvbiIsIGRlc2NyaXB0aW9uOiBtZSAmJiBtZS5waG90b0Nsb3VkRmlsZSA/ICcnIDogJ0FkZCBwaG90bycsIGxpbWl0VG9PbmU6IHRydWUsIGFjY2VwdDogImltYWdlLyoiIH0pKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZm9ybSIsIHsgb25TdWJtaXQ6IHRoaXMuaGFuZGxlU3VibWl0IH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm5hbWUtcGFuZSIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRJbnB1dCwgeyBkZXNjcmlwdGlvbjogIkZpcnN0IG5hbWUiLCBwbGFjZWhvbGRlcjogIkZpcnN0IiwgdmFsdWU6IGZpcnN0TmFtZSwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlQ2hhbmdlTWVtb2l6ZWQoJ2ZpcnN0TmFtZScpLCB0eXBlOiAidGV4dCIsIGF1dG9mb2N1czogdHJ1ZSwgYXV0b0NvbXBsZXRlOiAiZ2l2ZW4tbmFtZSIgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUZXh0SW5wdXQsIHsgZGVzY3JpcHRpb246ICJMYXN0IG5hbWUiLCBwbGFjZWhvbGRlcjogIkxhc3QiLCB2YWx1ZTogbGFzdE5hbWUsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNoYW5nZU1lbW9pemVkKCdsYXN0TmFtZScpLCB0eXBlOiAidGV4dCIsIGF1dG9Db21wbGV0ZTogImZhbWlseS1uYW1lIiB9KSksCiAgICAgICAgICAgICAgICAhcmVtb3ZlVGVhbUZpZWxkcyAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRJbnB1dCwgeyBkZXNjcmlwdGlvbjogIk9yZ2FuaXphdGlvbiBuYW1lIiwgcGxhY2Vob2xkZXI6ICJjb21wYW55L29yZ2FuaXphdGlvbiBuYW1lIiwgdmFsdWU6IHRlYW1OYW1lLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVDaGFuZ2VNZW1vaXplZCgndGVhbU5hbWUnKSwgdHlwZTogInRleHQiLCBhdXRvZm9jdXM6IHRydWUsIHJlYWRPbmx5OiByZW1vdmVUZWFtRmllbGRzIH0pLAogICAgICAgICAgICAgICAgIXJlbW92ZVRlYW1GaWVsZHMgJiYKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7IGRlc2NyaXB0aW9uOiAiSG93IG1hbnkgcGVvcGxlIG9uIHlvdXIgdGVhbSB3aWxsIGJlIHVzaW5nIFBvbHltYWlsPyIsIHBsYWNlaG9sZGVyOiAiU2VsZWN0IG9uZSIsIG9uU2VsZWN0OiB0aGlzLmhhbmRsZVRlYW1TaXplQ2hhbmdlLCB2YWx1ZXM6IHRlYW1WYWx1ZXMgfSksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IHR5cGU6ICJzdWJtaXQiLCBjbGFzc05hbWU6ICJjcmVhdGUtYnV0dG9uIiB9LCAiQ29udGludWUiKSkpKTsKICAgIH07CiAgICByZXR1cm4gVXNlclByb2ZpbGU7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBVc2VyUHJvZmlsZTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/UserProfile/UserProfile.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/UserProfile/UserProfile.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport TextInput from '@src/components/Form/TextInput';\nimport Dropdown from '@src/components/Form/Dropdown';\nimport Loader from '@src/components/Loader/Loader';\n\nimport './UserProfile.scss';\nimport { MemoizedFunction, memoize } from 'lodash';\nimport { TeamUpdateMeta } from '@src/ducks/team';\nimport { Me, Team } from '@src/types';\nimport browserHistory from '@src/lib/browserHistory';\nimport UploadButton from '@src/components/Base/UploadButton';\nimport { MeSignUpInfoMeta } from '@src/ducks/me';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface StateProps {\n  loading: boolean;\n  me?: Me;\n  team?: Team;\n  connectProvider: boolean;\n  unsubscriber?: boolean;\n}\n\nexport interface DispatchProps {\n  updateMe: (me: Me) => void;\n  updateTeam: (team: TeamUpdateMeta) => void;\n  setToast: (e: Error) => void;\n  updateMePhoto: (file: File) => void;\n  updateMeSignUpInfo: (meta: MeSignUpInfoMeta) => void;\n}\n\nexport interface State {\n  teamName: string;\n  teamSize: string;\n  firstName: string;\n  lastName: string;\n}\n\nexport const teamValues = [\n  'Just me',\n  '2-5',\n  '6-10',\n  '11-20',\n  '21-30',\n  '31+',\n];\n\nclass UserProfile extends React.PureComponent<StateProps & DispatchProps, State> {\n  handleChangeMemoized: MemoizedFunction;\n\n  constructor(props: StateProps & DispatchProps) {\n    super(props);\n\n    this.handleChangeMemoized = memoize(this.handleChange);\n\n    this.state = {\n      teamName: props.team && props.team.name || '',\n      teamSize: '',\n      firstName: (props.me && props.me.firstName) || '',\n      lastName: (props.me && props.me.lastName) || '',\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: StateProps & DispatchProps) {\n    if (nextProps.me !== this.props.me || nextProps.team !== this.props.team) {\n      this.setState({\n        teamName: nextProps.team && nextProps.team.name || this.state.teamName,\n        teamSize: '',\n        firstName: (nextProps.me && nextProps.me.firstName) || '',\n        lastName: (nextProps.me && nextProps.me.lastName) || '',\n      });\n    }\n  }\n\n  handleTeamSizeChange = (value: string, index: number) => {\n    this.setState({ teamSize: teamValues[index] });\n  }\n\n  handleChange = (propertyName: string) => {\n    return (e: React.FormEvent<HTMLInputElement>) => {\n      const newState: any = {};\n      newState[propertyName] = e.currentTarget.value;\n      this.setState(newState);\n    };\n  }\n\n  handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const { firstName, lastName, teamName, teamSize } = this.state;\n    const {\n      updateMe, me, team, updateTeam,\n      connectProvider, updateMeSignUpInfo, unsubscriber,\n     } = this.props;\n\n    if (me) {\n      updateMe({\n        ...me,\n        firstName,\n        lastName,\n      });\n    }\n\n    if (team && teamName) {\n      updateTeam({\n        team: team.id,\n        name: teamName,\n      });\n    }\n\n    if (teamSize) {\n      updateMeSignUpInfo({ teamSize });\n    }\n\n    logAmplitudeEvent(AmplitudeEvents.CompleteUserProfile);\n\n    if (connectProvider) {\n      browserHistory.push('/login/connectProvider');\n    } else if (unsubscriber) {\n      browserHistory.push('/unsubscriber');\n    } else if (me?.onboardingSkippedTeam) {\n      // Drop user into the app if skipping team onboarding\n      browserHistory.push('/');\n    } else {\n      browserHistory.push('/onboarding/teaminvite');\n    }\n  }\n\n  handleUpload = (files: File[]) => {\n    const { updateMePhoto } = this.props;\n\n    if (files.length) {\n      updateMePhoto(files[0]);\n    }\n  }\n\n  render() {\n    const { loading, me, team, unsubscriber } = this.props;\n    const {\n      firstName,\n      lastName,\n      teamName,\n    } = this.state;\n\n    if (loading) {\n      return <Loader />;\n    }\n\n    // Remove team info fields if the user has joined an existing team\n    const removeTeamFields =  me?.onboardingSkippedTeam || (team && team.seatsUsed > 1);\n    let title = 'Complete your Polymail profile';\n    let description = 'This helps us tailor your Polymail experience to you.';\n\n    // Adjust copy for unsubscriber\n    if (unsubscriber) {\n      title = 'Complete your Profile';\n      description = 'You\\'ll be granted access to Unsubscriber after this is complete.';\n    }\n\n    return (\n      <div className=\"login-user-profile\">\n        <div className=\"prompt\">\n          <div className=\"title\">\n            {title}\n          </div>\n          <div className=\"description\">\n            {description}\n          </div>\n        </div>\n        <div\n          className=\"avatar-section\"\n        >\n          {me && me.photoCloudFile && <div\n            className=\"avatar-image\"\n            style={{\n              backgroundImage: `url(${me.photoUrl})`,\n            }}\n          />}\n          <UploadButton\n            upload={this.handleUpload}\n            className=\"update-avatar-button\"\n            description={me && me.photoCloudFile ? '' : 'Add photo'}\n            limitToOne={true}\n            accept=\"image/*\"\n          />\n        </div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"name-pane\">\n            <TextInput\n              description=\"First name\"\n              placeholder=\"First\"\n              value={firstName}\n              onChange={this.handleChangeMemoized('firstName')}\n              type=\"text\"\n              autofocus={true}\n              autoComplete=\"given-name\"\n            />\n            <TextInput\n              description=\"Last name\"\n              placeholder=\"Last\"\n              value={lastName}\n              onChange={this.handleChangeMemoized('lastName')}\n              type=\"text\"\n              autoComplete=\"family-name\"\n            />\n          </div>\n          {!removeTeamFields && <TextInput\n            description=\"Organization name\"\n            placeholder=\"company/organization name\"\n            value={teamName}\n            onChange={this.handleChangeMemoized('teamName')}\n            type=\"text\"\n            autofocus={true}\n            readOnly={removeTeamFields}\n          />}\n          {!removeTeamFields &&\n            <Dropdown\n              description=\"How many people on your team will be using Polymail?\"\n              placeholder=\"Select one\"\n              onSelect={this.handleTeamSizeChange}\n              values={teamValues}\n            />\n          }\n          <button\n            type=\"submit\"\n            className=\"create-button\"\n          >\n            Continue\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default UserProfile;\n"]}]}