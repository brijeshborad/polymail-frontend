{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/shareLinks.ts","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/shareLinks.ts","mtime":1675280254058},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkgewogICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTsKICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKQogICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0OwogICAgfTsKICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9OwppbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7CmltcG9ydCB7IEFjdGlvblN0YXR1cywgfSBmcm9tICdAc3JjL3R5cGVzL2luZGV4JzsKaW1wb3J0IHsgU0hBUkVfTElOS19DUkVBVEUsIHNoYXJlTGlua0NyZWF0ZSwgfSBmcm9tICdAc3JjL2R1Y2tzL3NoYXJlTGlua3MnOwpleHBvcnQgdmFyIHNoYXJlTGlua0NyZWF0ZUVwaWMgPSBmdW5jdGlvbiAoYWN0aW9uJCwgc3RvcmUsIGRlcHMpIHsKICAgIHJldHVybiBhY3Rpb24kLm9mVHlwZShTSEFSRV9MSU5LX0NSRUFURSkKICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIGFjdGlvbi5zdGF0dXMgPT09IEFjdGlvblN0YXR1cy5TdGFydCAmJiAhIWFjdGlvbi5tZXRhLm1lc3NhZ2U7IH0pCiAgICAgICAgLmZsYXRNYXAoZnVuY3Rpb24gKGFjdGlvbikgewogICAgICAgIHJldHVybiBkZXBzLnNoYXJlZFRocmVhZHMKICAgICAgICAgICAgLm1lc3NhZ2VMaW5rKGFjdGlvbi5tZXRhLnNoYXJlZFRocmVhZCwgYWN0aW9uLm1ldGEubWVzc2FnZSkKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocmVzcG9uc2UpIHsgcmV0dXJuIHNoYXJlTGlua0NyZWF0ZShhY3Rpb24ubWV0YSwgX19hc3NpZ24oX19hc3NpZ24oe30sIGFjdGlvbi5tZXRhKSwgeyB1cmw6IHJlc3BvbnNlIH0pKTsgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIE9ic2VydmFibGUub2Yoc2hhcmVMaW5rQ3JlYXRlKGFjdGlvbi5tZXRhLCBlcnIpKTsgfSk7CiAgICB9KTsKfTsKZXhwb3J0IGRlZmF1bHQgW3NoYXJlTGlua0NyZWF0ZUVwaWNdOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/shareLinks.ts","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/epics/shareLinks.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,MAAM,CAAC;AAGlC,OAAO,EAEL,YAAY,GAEb,MAAM,kBAAkB,CAAC;AAG1B,OAAO,EACL,iBAAiB,EACjB,eAAe,GAEhB,MAAM,uBAAuB,CAAC;AAE/B,MAAM,CAAC,IAAM,mBAAmB,GAE5B,UAAC,OAAO,EAAE,KAAK,EAAE,IAAI;IACrB,OAAA,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC;SAC9B,MAAM,CAAC,UAAA,MAAM,IAAI,OAAA,MAAM,CAAC,MAAM,KAAK,YAAY,CAAC,KAAK,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAA7D,CAA6D,CAAC;SAC/E,OAAO,CAAC,UAAC,MAAwC;QAChD,OAAO,IAAI,CAAC,aAAa;aACtB,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,IAAI,CAAC,OAAQ,CAAC;aAC3D,GAAG,CAAC,UAAA,QAAQ,IAAI,OAAA,eAAe,CAC9B,MAAM,CAAC,IAAI,wBACN,MAAM,CAAC,IAAI,KAAE,GAAG,EAAE,QAAQ,IAAG,EAFnB,CAEmB,CACnC;aACA,KAAK,CAAC,UAAA,GAAG,IAAI,OAAA,UAAU,CAAC,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,EAAhD,CAAgD,CAAC,CAAC;IACpE,CAAC,CACF;AAXD,CAWC,CAAC;AAEN,eAAe,CAAC,mBAAmB,CAAC,CAAC","sourcesContent":["import { Observable } from 'rxjs';\nimport { Epic } from 'redux-observable';\n\nimport { StoreState,\n  Action,\n  ActionStatus,\n  ShareLink,\n} from '@src/types/index';\n\nimport { Deps } from '@src/lib/epic';\nimport {\n  SHARE_LINK_CREATE,\n  shareLinkCreate,\n  ShareLinkMeta,\n} from '@src/ducks/shareLinks';\n\nexport const shareLinkCreateEpic:\n  Epic<Action<ShareLinkMeta, ShareLink>, StoreState, Deps>\n  = (action$, store, deps) =>\n    action$.ofType(SHARE_LINK_CREATE)\n      .filter(action => action.status === ActionStatus.Start && !!action.meta.message)\n      .flatMap((action: Action<ShareLinkMeta, ShareLink>) => {\n        return deps.sharedThreads\n          .messageLink(action.meta.sharedThread, action.meta.message!)\n          .map(response => shareLinkCreate(\n            action.meta,\n            { ...action.meta, url: response }),\n          )\n          .catch(err => Observable.of(shareLinkCreate(action.meta, err)));\n      },\n    );\n\nexport default [shareLinkCreateEpic];\n"]}]}