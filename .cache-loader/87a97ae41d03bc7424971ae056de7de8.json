{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/YearInReview/YearInReview.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/YearInReview/YearInReview.tsx","mtime":1675280254119},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJzsKaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7CmltcG9ydCBPdmVydmlld0NlbGwsIHsgT3ZlcnZpZXdDZWxsVHlwZSB9IGZyb20gJy4vY29tcG9uZW50cy9PdmVydmlld0NlbGwnOwppbXBvcnQgUG9seW1haWxMb2dvIGZyb20gJ0BzcmMvcm91dGVzL0xvZ2luL0ljb25zL1BvbHltYWlsTG9nb0RhcmtNb2RlQDN4LnBuZyc7CmltcG9ydCAnLi9ZZWFySW5SZXZpZXcuc2Nzcyc7CmltcG9ydCB7IFNwcmluZywgYW5pbWF0ZWQsIGNvbmZpZyB9IGZyb20gJ3JlYWN0LXNwcmluZyc7CmltcG9ydCBSZWFjdFZpc2liaWxpdHlTZW5zb3IgZnJvbSAncmVhY3QtdmlzaWJpbGl0eS1zZW5zb3InOwppbXBvcnQgV2F2ZXNTZXBhcmF0b3IgZnJvbSAnLi9jb21wb25lbnRzL1dhdmVzU2VwYXJhdG9yL1dhdmVzU2VwYXJhdG9yJzsKaW1wb3J0IHsgU29jaWFsTmV0d29yayB9IGZyb20gJ0BzcmMvdHlwZXMnOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CmltcG9ydCBTcXVpZ2dseUFycm93IGZyb20gJy4vY29tcG9uZW50cy9JY29ucy9TcXVpZ2dseUFycm93LnN2Zyc7CmltcG9ydCBDYWxlbmRhckljb24gZnJvbSAnQHNyYy9yb3V0ZXMvQ2FsZW5kYXIvY29tcG9uZW50cy9JY29ucy9TY2hlZHVsaW5nT25ib2FyZGluZ0ljb24uc3ZnJzsKaW1wb3J0IENvbnRhY3RDYXJkQ2VsbCBmcm9tICcuL2NvbXBvbmVudHMvQ29udGFjdENhcmRDZWxsL0NvbnRhY3RDYXJkQ2VsbCc7CmltcG9ydCB7IGZpbmRJbmRleCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCBBd2FyZENlbGwsIHsgQXdhcmRDZWxsVHlwZSB9IGZyb20gJy4vY29tcG9uZW50cy9Bd2FyZENlbGwvQXdhcmRDZWxsJzsKaW1wb3J0IEVtcHR5U3RhdENlbGwgZnJvbSAnLi9jb21wb25lbnRzL0VtcHR5U3RhdENlbGwvRW1wdHlTdGF0Q2VsbCc7CmltcG9ydCB7IGlzRWxlY3Ryb24gfSBmcm9tICdAc3JjL2xpYi9lbGVjdHJvbic7CmltcG9ydCBTb2NpYWxJY29uLCB7IEljb25UeXBlIH0gZnJvbSAnQHNyYy9jb21wb25lbnRzL1JpZ2h0U2lkZWJhci9jb21wb25lbnRzL0NvbnRhY3RJbmZvL2NvbXBvbmVudHMvU29jaWFsSWNvbic7CnZhciBZZWFySW5SZXZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoWWVhckluUmV2aWV3LCBfc3VwZXIpOwogICAgZnVuY3Rpb24gWWVhckluUmV2aWV3KCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlQ29udGFjdEhvdmVyID0gZnVuY3Rpb24gKGNvbnRhY3QpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZENvbnRhY3Q6IGNvbnRhY3QgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVJbmZvVmlzaWJsZSA9IGZ1bmN0aW9uICh2aXNpYmxlKSB7CiAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dJbmZvU2VjdGlvbjogdHJ1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlT3ZlcnZpZXdWaXNpYmxlID0gZnVuY3Rpb24gKHZpc2libGUpIHsKICAgICAgICAgICAgaWYgKHZpc2libGUpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd092ZXJ2aWV3U2VjdGlvbjogdHJ1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRmF2b3JpdGVDb250YWN0ID0gZnVuY3Rpb24gKHZpc2libGUpIHsKICAgICAgICAgICAgaWYgKHZpc2libGUpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd0Zhdm9yaXRlQ29udGFjdDogdHJ1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2VuZGluZ1Zpc2libGUgPSBmdW5jdGlvbiAodmlzaWJsZSkgewogICAgICAgICAgICBpZiAodmlzaWJsZSkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzaG93U2VuZGluZ1N0YXRzU2VjdGlvbjogdHJ1ZSB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmV0dXJuVG9BcHAgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlckZhdm9yaXRlU2VuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zdGF0ZSwgc2hvd0Zhdm9yaXRlQ29udGFjdCA9IF9hLnNob3dGYXZvcml0ZUNvbnRhY3QsIHNlbGVjdGVkQ29udGFjdCA9IF9hLnNlbGVjdGVkQ29udGFjdDsKICAgICAgICAgICAgdmFyIHN0YXRzID0gX3RoaXMucHJvcHMuc3RhdHM7CiAgICAgICAgICAgIGlmICghc3RhdHMgfHwgIXN0YXRzLnRvcEV4Y2hhbmdlcykgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHRvcEV4Y2hhbmdlcyA9IHN0YXRzLnRvcEV4Y2hhbmdlczsKICAgICAgICAgICAgLy8gQ29tcHV0ZSBEZXNjcmlwdG9yCiAgICAgICAgICAgIHZhciBjb250YWN0SW5kZXggPSBzZWxlY3RlZENvbnRhY3QgJiYKICAgICAgICAgICAgICAgIGZpbmRJbmRleCh0b3BFeGNoYW5nZXMsIHsgZW1haWw6IHNlbGVjdGVkQ29udGFjdCB9KSB8fCAwOwogICAgICAgICAgICB2YXIgZnVsbENvbnRhY3QgPSB0b3BFeGNoYW5nZXNbY29udGFjdEluZGV4XTsKICAgICAgICAgICAgLy8gUG9zaXRpb24gZGVzY3JpcHRvcgogICAgICAgICAgICB2YXIgcG9zaXRpb25EZXNjcmlwdG9yID0gJ3RoZSBtb3N0JzsKICAgICAgICAgICAgaWYgKGNvbnRhY3RJbmRleCA9PT0gMSkgewogICAgICAgICAgICAgICAgcG9zaXRpb25EZXNjcmlwdG9yID0gJ3RoZSAybmQgbW9zdCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvbnRhY3RJbmRleCA9PT0gMikgewogICAgICAgICAgICAgICAgcG9zaXRpb25EZXNjcmlwdG9yID0gJ3RoZSAzcmQgbW9zdCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRpb24iLCBrZXk6ICdkZXNjcmlwdG9yJyArIGZ1bGxDb250YWN0LmVtYWlsIH0sCiAgICAgICAgICAgICAgICAiWW91IGV4Y2hhbmdlZCAiLAogICAgICAgICAgICAgICAgcG9zaXRpb25EZXNjcmlwdG9yLAogICAgICAgICAgICAgICAgIiBlbWFpbHMgd2l0aCAiLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYiIsIG51bGwsCiAgICAgICAgICAgICAgICAgICAgZnVsbENvbnRhY3QuZ2l2ZW5OYW1lLAogICAgICAgICAgICAgICAgICAgICIgIiwKICAgICAgICAgICAgICAgICAgICBmdWxsQ29udGFjdC5mYW1pbHlOYW1lKSwKICAgICAgICAgICAgICAgICIgdGhpcyB5ZWFyISIsCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnIiLCBudWxsKSwKICAgICAgICAgICAgICAgICJZb3Ugc2VudCAiLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYiIsIG51bGwsIGZ1bGxDb250YWN0LnNlbnQpLAogICAgICAgICAgICAgICAgIiBtZXNzYWdlcyBhbmQgcmVjZWl2ZWQgIiwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImIiLCBudWxsLCBmdWxsQ29udGFjdC5yZWNlaXZlZCksCiAgICAgICAgICAgICAgICAiIGVtYWlscyBiYWNrLiBXaGF0IGEgbHVja3kgcGVyc29uISBcdUQ4M0VcdURENzMiKSk7CiAgICAgICAgICAgIC8vIERvbnQgcmV0dXJuIHNlY3Rpb24gaWYgZmFpbGVkCiAgICAgICAgICAgIGlmICghZnVsbENvbnRhY3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNvY2lhbCBjb3B5CiAgICAgICAgICAgIHZhciBzb2NpYWxDb3B5ID0gIk15IGZhdm9yaXRlIHBlcnNvbiB0byBlbWFpbCBpbiAyMDIwIHdhcyAiICsgZnVsbENvbnRhY3QuZ2l2ZW5OYW1lICsgIiAiICsgZnVsbENvbnRhY3QuZmFtaWx5TmFtZSArICIhIFdlIGV4Y2hhbmdlZCAiICsgZnVsbENvbnRhY3QudG90YWwgKyAiIG1lc3NhZ2VzIG92ZXIgZW1haWwgdGhpcyB5ZWFyISI7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdFZpc2liaWxpdHlTZW5zb3IsIHsgb25DaGFuZ2U6IF90aGlzLmhhbmRsZUZhdm9yaXRlQ29udGFjdCB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmYXZvcml0ZS1zZW5kZXItc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24tY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJTb2NpYWxJbnRlbnQoc29jaWFsQ29weSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29weS1jb2x1bW4iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiV2hvIGRpZCB5b3UgY29udGFjdCBtb3N0IGluIDIwMjA/IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VuZGVycy1jb2x1bW4iIH0sIHN0YXRzLnRvcEV4Y2hhbmdlcy5zbGljZSgwLCAzKS5tYXAoZnVuY3Rpb24gKGMsIGkpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFNwcmluZywgeyBrZXk6IGMuZW1haWwsIGNvbmZpZzogY29uZmlnLnNsb3csIGZyb206IHsgb3BhY2l0eTogMCwgdDogMCB9LCB0bzogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IHNob3dGYXZvcml0ZUNvbnRhY3QgPyAxIDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0OiBzaG93RmF2b3JpdGVDb250YWN0ID8gMSA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWxheTogKGkgKyAxKSAqIDQwMCB9LCBmdW5jdGlvbiAoc3R5bGVzKSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChDb250YWN0Q2FyZENlbGwsIHsga2V5OiBjLmVtYWlsICsgJy1jYXJkJywgc3R5bGVzOiBzdHlsZXMsIGNvbnRhY3Q6IGMsIG9uSG92ZXI6IF90aGlzLmhhbmRsZUNvbnRhY3RIb3ZlciwgaXNTZWxlY3RlZDogc2VsZWN0ZWRDb250YWN0ID09PSBjLmVtYWlsIH0pKTsgfSkpOyB9KSkpKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyT3ZlcnZpZXcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzdGF0cyA9IF90aGlzLnByb3BzLnN0YXRzOwogICAgICAgICAgICBpZiAoIXN0YXRzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGltZSBlc3RpbWF0ZQogICAgICAgICAgICB2YXIgdGltZUVzdGltYXRlID0gKHN0YXRzLm1lc3NhZ2VTZW50ICogMTEgLyAzNjAwKS50b0ZpeGVkKDEpOwogICAgICAgICAgICB2YXIgdGltZUVzdGltYXRlU3BhbiA9IChSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwKICAgICAgICAgICAgICAgICJJdCB3b3VsZCBoYXZlIHRha2VuIHRoZSBhdmVyYWdlIHBlcnNvbiAiLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYiIsIG51bGwsIHRpbWVFc3RpbWF0ZSksCiAgICAgICAgICAgICAgICAiIGhvdXJzIHRvIHJlYWQgdGhyb3VnaCBhbGwgdGhlIGVtYWlscyB5b3UgcmVjZWl2ZWQgdGhpcyB5ZWFyISIpKTsKICAgICAgICAgICAgdmFyIHNvY2lhbENvcHkgPSAiSSByZWFkICIgKyBzdGF0cy50aHJlYWRSZWFkICsgIiBlbWFpbHMgYW5kIHNlbnQgIiArIHN0YXRzLm1lc3NhZ2VTZW50ICsgIiBlbWFpbHMgaW4gMjAyMC4gSG93IG1hbnkgZGlkIHlvdSBzZW5kPyBAUG9seW1haWwgI1llYXJJblJldmlldyI7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdFZpc2liaWxpdHlTZW5zb3IsIHsgb25DaGFuZ2U6IF90aGlzLmhhbmRsZU92ZXJ2aWV3VmlzaWJsZSB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJvdmVydmlldy1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdGlvbi1jb250YWluZXIiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclNvY2lhbEludGVudChzb2NpYWxDb3B5KSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJyb3ctY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb3B5LWNvbHVtbiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiWW91J3ZlIGdvbmUgdGhyb3VnaCBxdWl0ZSBhIGZldyBlbWFpbHMgdGhpcyB5ZWFyISIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJHcmVhdCBqb2Igc3RheWluZyBvbiB0b3Agb2YgYWxsIHlvdXIgaW1wb3J0YW50IGNvbW11bmljYXRpb25zISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVFc3RpbWF0ZVNwYW4pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2VsbHMiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChPdmVydmlld0NlbGwsIHsgdGl0bGU6ICJFbWFpbHMgUmVjZWl2ZWQiLCBkZXNjcmlwdGlvbjogIk51bWJlciBvZiBlbWFpbHMgeW91J3ZlIHJlYWQuIiwgdmFsdWU6IHN0YXRzLnRocmVhZFJlYWQsIHR5cGU6IE92ZXJ2aWV3Q2VsbFR5cGUuQ2FyZCB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJ2aWV3Q2VsbCwgeyB0aXRsZTogIkVtYWlscyBTZW50IiwgZGVzY3JpcHRpb246ICJOdW1iZXIgb2YgZW1haWxzIHlvdSd2ZSBzZW50LiIsIHZhbHVlOiBzdGF0cy5tZXNzYWdlU2VudCwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5DYXJkIH0pKSkpKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyVW5zdWJzY3JpYmVyU2VjdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHN0YXRzID0gX3RoaXMucHJvcHMuc3RhdHM7CiAgICAgICAgICAgIGlmICghc3RhdHMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIERvIG5vdCByZW5kZXIgY29sbGFib3JhdGlvbiBzZWN0aW9uIGlmIG5vIHJlc3VsdHMKICAgICAgICAgICAgdmFyIG5vUmVzdWx0cyA9IHN0YXRzLmZpbHRlckFwcGxpZWQgKyBzdGF0cy5maWx0ZXJDcmVhdGVkID09PSAwOwogICAgICAgICAgICBpZiAobm9SZXN1bHRzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidW5zdWJzY3JpYmVyLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzZWN0aW9uLWNvbnRhaW5lciIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgeyBzcmM6ICJodHRwczovL21haWxlci1hc3NldHMucG9seW1haWwuaW8vMjAxOS8xMi0xNi1lbmQtb2YteWVhci1yZXBvcnQtdjIvYnJvb20ucG5nIiwgY2xhc3NOYW1lOiAic2VjdGlvbi1pY29uIiB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwgIkJsb2NrZWQgU2VuZGVycyIpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNlbGxzIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChFbXB0eVN0YXRDZWxsLCB7IGF3YXJkVHlwZTogQXdhcmRDZWxsVHlwZS5CbG9ja2VkLCBpc0NhcmQ6IHRydWUgfSkpKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aW1lIGVzdGltYXRlCiAgICAgICAgICAgIHZhciB0aW1lRXN0aW1hdGUgPSAoc3RhdHMuZmlsdGVyQXBwbGllZCAqIDExIC8gMzYwMCkudG9GaXhlZCgxKTsKICAgICAgICAgICAgdmFyIHRpbWVFc3RpbWF0ZVNwYW4gPSAoUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsCiAgICAgICAgICAgICAgICAiWW91IHNhdmVkIHlvdXJzZWxmICIsCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiIiwgbnVsbCwgdGltZUVzdGltYXRlKSwKICAgICAgICAgICAgICAgICIgaG91cnMgZnJvbSByZWFkaW5nIHVud2F0ZWQgZW1haWxzIHRocm91Z2ggdGhpcyB5ZWFyISIpKTsKICAgICAgICAgICAgdmFyIHNvY2lhbENvcHkgPSAiSSBibG9ja2VkICIgKyBzdGF0cy5maWx0ZXJDcmVhdGVkICsgIiBzZW5kZXJzIGFuZCBibG9ja2VkICIgKyBzdGF0cy5maWx0ZXJBcHBsaWVkICsgIiBlbWFpbHMsIHNhdmluZyBtZSAiICsgdGltZUVzdGltYXRlICsgIiBob3VycyBpbiAyMDIwISBAUG9seW1haWwgI1llYXJJblJldmlldyI7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ1bnN1YnNjcmliZXItc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdGlvbi1jb250YWluZXIiIH0sCiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyU29jaWFsSW50ZW50KHNvY2lhbENvcHkpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsgc3JjOiAiaHR0cHM6Ly9tYWlsZXItYXNzZXRzLnBvbHltYWlsLmlvLzIwMTkvMTItMTYtZW5kLW9mLXllYXItcmVwb3J0LXYyL2Jyb29tLnBuZyIsIGNsYXNzTmFtZTogInNlY3Rpb24taWNvbiIgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwgIkdvb2Qgam9iIGJlaW5nIHNlbGVjdGl2ZSB3aXRoIHlvdXIgaW5ib3ghIiksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJkZXNjcmlwdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgIllvdSBzYXZlZCBzb21lIHRpbWUgdGhpcyB5ZWFyIGJ5IHRha2luZyB0aGUgaW5pdGlhdGl2ZSB0byByZW1vdmUgc2VuZGVycyB5b3UgZGlkbid0IHdhbnQgZW1haWxzIGZyb20gYW55bW9yZS4iLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAoKHN0YXRzLmZpbHRlckFwcGxpZWQgKiAxMSAvIDM2MDApID4gMC4zKSAmJiAodGltZUVzdGltYXRlU3BhbikpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2VsbHMiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcnZpZXdDZWxsLCB7IHRpdGxlOiAiU2VuZGVycyBCbG9ja2VkIiwgZGVzY3JpcHRpb246ICJOdW1iZXIgb2Ygc2VuZGVycyB5b3UndmUgZGVjaWRlZCB0byBzYXkgZ29vZGJ5ZSB0by4iLCB2YWx1ZTogc3RhdHMuZmlsdGVyQ3JlYXRlZCwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5DYXJkIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJ2aWV3Q2VsbCwgeyB0aXRsZTogIkVtYWlscyBCbG9ja2VkIiwgZGVzY3JpcHRpb246ICJUaGUgbnVtYmVyIG9mIHVud2FudGVkIGVtYWlscyB0aGF0IHdlIHByZXZlbnRlZCBmcm9tIGVudGVyaW5nIHlvdXIgaW5ib3giLCB2YWx1ZTogc3RhdHMuZmlsdGVyQXBwbGllZCwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5DYXJkIH0pKSkpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlclNlbmRpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaG93U2VuZGluZ1N0YXRzU2VjdGlvbiA9IF90aGlzLnN0YXRlLnNob3dTZW5kaW5nU3RhdHNTZWN0aW9uOwogICAgICAgICAgICB2YXIgc3RhdHMgPSBfdGhpcy5wcm9wcy5zdGF0czsKICAgICAgICAgICAgaWYgKCFzdGF0cykgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0VmlzaWJpbGl0eVNlbnNvciwgeyBvbkNoYW5nZTogX3RoaXMuaGFuZGxlU2VuZGluZ1Zpc2libGUgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VuZGluZy1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmlsbGVyRGl2LCBudWxsKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24tY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiTGV0J3MgYnJlYWsgZG93biB0aGUgbWVzc2FnZXMgeW91J3ZlIHNlbnQhIiksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGVzY3JpcHRpb24gd2hpdGUiIH0sICJHcmVhdCBqb2IgbWFraW5nIHN1cmUgeW91IHNlbnQgcXVhbGl0eSBtZXNzYWdlcyB0aGlzIHllYXIhIiksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2VsbHMiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNwcmluZywgeyBmcm9tOiB7IG9wYWNpdHk6IDAgfSwgdG86IHsgb3BhY2l0eTogc2hvd1NlbmRpbmdTdGF0c1NlY3Rpb24gPyAxIDogMCB9IH0sIGZ1bmN0aW9uIChzdHlsZXMpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJ2aWV3Q2VsbCwgeyB0aXRsZTogIlVuZG8gU2VuZHMiLCBkZXNjcmlwdGlvbjogIk51bWJlciBvZiB0aW1lcyB5b3UndmUgc2F2ZWQgeW91cnNlbGYgZnJvbSBhIG1pc3Rha2UhIiwgdmFsdWU6IHN0YXRzLnVuZG9TZW5kLCB0eXBlOiBPdmVydmlld0NlbGxUeXBlLkNhcmQsIHN0eWxlczogc3R5bGVzLCBoYXNCYWNrZ3JvdW5kOiB0cnVlIH0pKTsgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNwcmluZywgeyBmcm9tOiB7IG9wYWNpdHk6IDAgfSwgdG86IHsgb3BhY2l0eTogc2hvd1NlbmRpbmdTdGF0c1NlY3Rpb24gPyAxIDogMCB9LCBkZWxheTogMTAwMCB9LCBmdW5jdGlvbiAoc3R5bGVzKSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChPdmVydmlld0NlbGwsIHsgdGl0bGU6ICJTY2hlZHVsZWQgRW1haWxzIiwgZGVzY3JpcHRpb246ICJHcmVhdCBqb2IgYmVpbmcgY29uc2lkZXJhdGUgb2YgeW91ciByZWNpcGllbnQncyB0aW1lISIsIHZhbHVlOiBzdGF0cy5zZW50TGF0ZXIsIHR5cGU6IE92ZXJ2aWV3Q2VsbFR5cGUuQ2FyZCwgc3R5bGVzOiBzdHlsZXMsIGhhc0JhY2tncm91bmQ6IHRydWUgfSkpOyB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3ByaW5nLCB7IGZyb206IHsgb3BhY2l0eTogMCB9LCB0bzogeyBvcGFjaXR5OiBzaG93U2VuZGluZ1N0YXRzU2VjdGlvbiA/IDEgOiAwIH0sIGRlbGF5OiAyMDAwIH0sIGZ1bmN0aW9uIChzdHlsZXMpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJ2aWV3Q2VsbCwgeyB0aXRsZTogIk1lc3NhZ2UgVGVtcGxhdGVzIHVzZWQiLCBkZXNjcmlwdGlvbjogIkhvdyBtYW55IHRpbWVzIHlvdSBzYXZlZCB0aW1lIGNvbXBvc2luZyBhbiBlbWFpbC4iLCB2YWx1ZTogc3RhdHMuc2VudFRlbXBsYXRlLCB0eXBlOiBPdmVydmlld0NlbGxUeXBlLkNhcmQsIHN0eWxlczogc3R5bGVzLCBoYXNCYWNrZ3JvdW5kOiB0cnVlIH0pKTsgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNwcmluZywgeyBmcm9tOiB7IG9wYWNpdHk6IDAgfSwgdG86IHsgb3BhY2l0eTogc2hvd1NlbmRpbmdTdGF0c1NlY3Rpb24gPyAxIDogMCB9LCBkZWxheTogMzAwMCB9LCBmdW5jdGlvbiAoc3R5bGVzKSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChPdmVydmlld0NlbGwsIHsgdGl0bGU6ICJGb2xsb3ctdXBzIHVzZWQiLCBkZXNjcmlwdGlvbjogIkdvb2Qgam9iIG1ha2luZyBzdXJlIHlvdSBzdGF5IG9uIHRvcCBvZiB5b3VyIGVtYWlscyEiLCB2YWx1ZTogc3RhdHMuc2VudEZvbGxvd1VwLCB0eXBlOiBPdmVydmlld0NlbGxUeXBlLkNhcmQsIHN0eWxlczogc3R5bGVzLCBoYXNCYWNrZ3JvdW5kOiB0cnVlIH0pKTsgfSkpKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZpbGxlckRpdiwgbnVsbCkpKSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJTb2NpYWxJbnRlbnQgPSBmdW5jdGlvbiAoY29weSkgewogICAgICAgICAgICB2YXIgdXJsRW5jb2RlZFRleHQgPSBlbmNvZGVVUklDb21wb25lbnQoY29weSk7CiAgICAgICAgICAgIHZhciBzb2NpYWxzID0gWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAnQHBvbHltYWlsJywKICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD90ZXh0PSIgKyB1cmxFbmNvZGVkVGV4dCwKICAgICAgICAgICAgICAgICAgICBuZXR3b3JrOiBTb2NpYWxOZXR3b3JrLlR3aXR0ZXIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdOwogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGlzdC1zZWN0aW9uIiB9LCBzb2NpYWxzLm1hcChmdW5jdGlvbiAocykgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoU29jaWFsSWNvbiwgeyBzb2NpYWw6IHMsIHR5cGU6IEljb25UeXBlLkljb24sIGtleTogImRpc3Qtcy0iICsgcy5uZXR3b3JrIH0pKTsgfSkpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlck9yZ2FuaXphdGlvblNlY3Rpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzdGF0cyA9IF90aGlzLnByb3BzLnN0YXRzOwogICAgICAgICAgICBpZiAoIXN0YXRzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgb3JnYW5pemF0aW9uU3RyaW5nID0gIkhvdyB5b3Ugb3JnYW5pemVkIHlvdXIgbWVzc2FnZXMiOwogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAib3JnYW5pemF0aW9uLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24tY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsgc3JjOiAiaHR0cHM6Ly9tYWlsZXItYXNzZXRzLnBvbHltYWlsLmlvLzIwMTkvMTItMTYtZW5kLW9mLXllYXItcmVwb3J0LXYyL2ZvbGRlci5wbmciLCBjbGFzc05hbWU6ICJzZWN0aW9uLWljb24iIH0pLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sICJUaGlzIGlzIGhvdyB5b3UgY2hvc2UgdG8gdGlkeSB5b3VyIGluYm94IHRoaXMgeWVhci4iKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiB9LCBvcmdhbml6YXRpb25TdHJpbmcpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2VsbHMiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcnZpZXdDZWxsLCB7IHRpdGxlOiAiQXJjaGl2ZSIsIGRlc2NyaXB0aW9uOiAiSG93IG1hbnkgZW1haWxzIHlvdSBzZW50IHRvIHRoZSBhcmNoaXZlLiIsIHZhbHVlOiBzdGF0cy5hcmNoaXZlLCB0eXBlOiBPdmVydmlld0NlbGxUeXBlLlRleHRCbG9jayB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChPdmVydmlld0NlbGwsIHsgdGl0bGU6ICJUcmFzaCIsIGRlc2NyaXB0aW9uOiAiRW1haWxzIHRoYXQgeW91IGRpc3Bvc2VkIG9mIHRvIG5ldmVyIHNlZSBhZ2FpbiIsIHZhbHVlOiBzdGF0cy50cmFzaCwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5UZXh0QmxvY2sgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcnZpZXdDZWxsLCB7IHRpdGxlOiAiUmVhZCBMYXRlciIsIGRlc2NyaXB0aW9uOiAiTnVtYmVyIG9mIGVtYWlscyB5b3UndmUgc25vb3plZCB0byByZWFkIGxhdGVyLiIsIHZhbHVlOiBzdGF0cy5sYXRlciwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5UZXh0QmxvY2sgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcnZpZXdDZWxsLCB7IHRpdGxlOiAiTGFiZWxlZCIsIGRlc2NyaXB0aW9uOiAiTnVtYmVyIG9mIGVtYWlscyB5b3UndmUgb3JnYW5pemVkIHdpdGggYSBsYWJlbC4iLCB2YWx1ZTogc3RhdHMubGlzdCwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5UZXh0QmxvY2sgfSkpKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyQ29sbGFib3JhdGlvblNlY3Rpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzdGF0cyA9IF90aGlzLnByb3BzLnN0YXRzOwogICAgICAgICAgICBpZiAoIXN0YXRzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBEbyBub3QgcmVuZGVyIGNvbGxhYm9yYXRpb24gc2VjdGlvbiBpZiBubyByZXN1bHRzCiAgICAgICAgICAgIHZhciBub1Jlc3VsdHMgPSBzdGF0cy50aHJlYWRTaGFyZWQgKyBzdGF0cy5jb21tZW50UG9zdGVkID09PSAwOwogICAgICAgICAgICBpZiAobm9SZXN1bHRzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29sbGFib3JhdGlvbi1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdGlvbi1jb250YWluZXIiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUgd2hpdGUiIH0sICJDb21tZW50cyAmIE1lbnRpb25zIiksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2VsbHMiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEVtcHR5U3RhdENlbGwsIHsgYXdhcmRUeXBlOiBBd2FyZENlbGxUeXBlLlNoYXJlZENvbnZlcnNhdGlvbnMgfSkpKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNrZXdlZC1iYWNrZ3JvdW5kIGluYm94IiB9KSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb2xsYWJvcmF0aW9uLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24tY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUgd2hpdGUiIH0sICJZb3Ugd2VyZSBxdWl0ZSBjb2xsYWJvcmF0aXZlIHRoaXMgeWVhciEiKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIHdoaXRlIiB9LCAiR3JlYXQgam9iIG1ha2luZyBzdXJlIHRoYXQgdGhlIHByb3BlciBjb250ZXh0IHdhcyBhbHdheXMgcHJvdmlkZWQgb24geW91ciBpbXBvcnRhbnQgY29udmVyc2F0aW9ucyEiKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNlbGxzIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJ2aWV3Q2VsbCwgeyB0aXRsZTogIkNvbnZlcnNhdGlvbnMgU2hhcmVkIiwgZGVzY3JpcHRpb246ICJZb3UgbWFkZSBpdCBlYXN5IHRvIGNvbnRyaWJ1dGUgdG8geW91ciBpbXBvcnRhbnQgY29udmVyc2F0aW9ucy4iLCB2YWx1ZTogc3RhdHMudGhyZWFkU2hhcmVkLCB0eXBlOiBPdmVydmlld0NlbGxUeXBlLkNhcmQsIHZhbHVlRGVzY3JpcHRvcjogImNvbnZlcnNhdGlvbnMiLCBoYXNCYWNrZ3JvdW5kOiB0cnVlIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJ2aWV3Q2VsbCwgeyB0aXRsZTogIkNvbW1lbnRzIFBvc3RlZCIsIGRlc2NyaXB0aW9uOiAiVGltZXMgeW91IGRpZG4ndCBoYXZlIHRvIGZpbmQgY29udGV4dCBhcm91bmQgYSBjb252ZXJzYXRpb24iLCB2YWx1ZTogc3RhdHMuY29tbWVudFBvc3RlZCwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5DYXJkLCB2YWx1ZURlc2NyaXB0b3I6ICJjb21tZW50cyIsIGhhc0JhY2tncm91bmQ6IHRydWUgfSkpKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2tld2VkLWJhY2tncm91bmQgaW5ib3giIH0pKSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJTY2hlZHVsaW5nU2VjdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHN0YXRzID0gX3RoaXMucHJvcHMuc3RhdHM7CiAgICAgICAgICAgIGlmICghc3RhdHMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIERvIG5vdCByZW5kZXIgY29sbGFib3JhdGlvbiBzZWN0aW9uIGlmIG5vIHJlc3VsdHMKICAgICAgICAgICAgdmFyIG5vUmVzdWx0cyA9IHN0YXRzLnNjaGVkdWxpbmdNZWV0aW5nQ3JlYXRlZCA9PT0gMDsKICAgICAgICAgICAgaWYgKG5vUmVzdWx0cykgewogICAgICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNjaGVkdWxpbmctc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24tY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJpbWciLCB7IHNyYzogImh0dHBzOi8vbWFpbGVyLWFzc2V0cy5wb2x5bWFpbC5pby8yMDE5LzEyLTE2LWVuZC1vZi15ZWFyLXJlcG9ydC12Mi9jYWxlbmRhci5wbmciLCBjbGFzc05hbWU6ICJzZWN0aW9uLWljb24iIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiUG9seW1haWwgTWVldGluZyBUaW1lcyIpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNlbGxzIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChFbXB0eVN0YXRDZWxsLCB7IGF3YXJkVHlwZTogQXdhcmRDZWxsVHlwZS5TY2hlZHVsaW5nLCBpc0NhcmQ6IHRydWUgfSkpKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBzb2NpYWxDb3B5ID0gIkkgc2NoZWR1bGVkICIgKyBzdGF0cy5zY2hlZHVsaW5nTWVldGluZ0NyZWF0ZWQgKyAiIG1lZXRpbmdzIHdpdGggQFBvbHltYWlsIGluIDIwMjAhICNZZWFySW5SZXZpZXciOwogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2NoZWR1bGluZy1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzZWN0aW9uLWNvbnRhaW5lciIgfSwKICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW5kZXJTb2NpYWxJbnRlbnQoc29jaWFsQ29weSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgeyBzcmM6ICJodHRwczovL21haWxlci1hc3NldHMucG9seW1haWwuaW8vMjAxOS8xMi0xNi1lbmQtb2YteWVhci1yZXBvcnQtdjIvY2FsZW5kYXIucG5nIiwgY2xhc3NOYW1lOiAic2VjdGlvbi1pY29uIiB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiTWVldGluZ3MgQm9va2VkIHdpdGggWW91ciBTY2hlZHVsaW5nIFBhZ2UhIiksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJkZXNjcmlwdGlvbiIgfSwgIk5vIGlzc3VlIGNvb3JkaW5hdGluZyB0aW1lcyB0byBtZWV0IHRoaXMgeWVhciB0aGFua3MgdG8geW91ciBQb2x5bWFpbCBTY2hlZHVsaW5nIFBhZ2UhIiksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjZWxscyIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChPdmVydmlld0NlbGwsIHsgdGl0bGU6ICJNZWV0aW5ncyBTY2hlZHVsZWQiLCB2YWx1ZURlc2NyaXB0b3I6ICJtZWV0aW5ncyIsIGRlc2NyaXB0aW9uOiAiR29vZCBqb2IgZ2V0dGluZyBtZWV0aW5ncyBib29rZWQgb24geW91ciBjYWxlbmRhciEiLCB2YWx1ZTogc3RhdHMuc2NoZWR1bGluZ01lZXRpbmdDcmVhdGVkLCB0eXBlOiBPdmVydmlld0NlbGxUeXBlLkNhcmQgfSkpKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyQXdhcmRzU2VjdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHN0YXRzID0gX3RoaXMucHJvcHMuc3RhdHM7CiAgICAgICAgICAgIGlmICghc3RhdHMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBhbGxTdGF0cyA9IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBBd2FyZENlbGxUeXBlLk1lc3NhZ2VTZW50LAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0cy5tZXNzYWdlU2VudFBlcmNlbnRpbGUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHR5cGU6IEF3YXJkQ2VsbFR5cGUuTGF0ZXJTZW50LAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0cy5zZW5kTGF0ZXJDb3VudFBlcmNlbnRpbGUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHR5cGU6IEF3YXJkQ2VsbFR5cGUuRm9sbG93VXAsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRzLnNlbmRGb2xsb3dVcENvdW50UGVyY2VudGlsZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogQXdhcmRDZWxsVHlwZS5TY2hlZHVsaW5nLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0cy5zY2hlZHVsaW5nQ291bnRQZXJjZW50aWxlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiBBd2FyZENlbGxUeXBlLk1lc3NhZ2VUZW1wbGF0ZXMsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRzLnNlbmRUZW1wbGF0ZUNvdW50UGVyY2VudGlsZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogQXdhcmRDZWxsVHlwZS5CbG9ja2VkLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0cy5ibG9ja0FwcGxpZWRDb3VudFBlcmNlbnRpbGUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHR5cGU6IEF3YXJkQ2VsbFR5cGUuVGhyZWFkUmVhZCwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdHMudGhyZWFkUmVhZENvdW50UGVyY2VudGlsZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogQXdhcmRDZWxsVHlwZS5SZWFkTGF0ZXIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRzLnJlYWRMYXRlckNvdW50UGVyY2VudGlsZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogQXdhcmRDZWxsVHlwZS5TaGFyZWRDb252ZXJzYXRpb25zLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0cy50aHJlYWRTaGFyZWRDb3VudFBlcmNlbnRpbGUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICBdOwogICAgICAgICAgICB2YXIgZmlsdGVyZWRBd2FyZHMgPSBhbGxTdGF0cy5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudmFsdWUgPiAwLjg7IH0pOwogICAgICAgICAgICB2YXIgc29jaWFsQ29weSA9ICJJIG1hZGUgdGhlIHBvd2VyIHVzZXJzIGxpc3QgaW4gdGhlIEBQb2x5bWFpbCBZZWFyIEluIFJldmlldyBmb3IgMjAyMCI7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhd2FyZHMtc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdGlvbi1jb250YWluZXIiIH0sCiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyU29jaWFsSW50ZW50KHNvY2lhbENvcHkpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsgc3JjOiAiaHR0cHM6Ly9tYWlsZXItYXNzZXRzLnBvbHltYWlsLmlvLzIwMTkvMTItMTYtZW5kLW9mLXllYXItcmVwb3J0LXYyL3Ryb3BoeS5wbmciLCBhbHQ6ICIiLCBjbGFzc05hbWU6ICJhd2FyZHMtaWNvbiIgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwgIkFjY29sYWRlcyB5b3UgZGVzZXJ2ZSB0byBwdXQgdXAgb24gdGhlIGZyaWRnZSEiKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiB9LCAiR3JlYXQgam9iIG9uIHlvdXIgZW1haWwgdGhpcyB5ZWFyISBZb3UgcG9zdGVkIHNvbWUgYWNoaWV2ZW1lbnRzIHRoaXMgeWVhciEiKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNlbGxzIiB9LCBmaWx0ZXJlZEF3YXJkcy5tYXAoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEF3YXJkQ2VsbCwgeyBrZXk6ICJhd2FyZC10eXBlLSIgKyBhLnR5cGUsIGF3YXJkVHlwZTogYS50eXBlLCBhd2FyZFZhbHVlOiBhLnZhbHVlIH0pKTsgfSkpKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyRW5kU2VjdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImVuZC1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzZWN0aW9uLWNvbnRhaW5lciIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LCAiQ2xvc2luZyAyMDIwIiksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJkZXNjcmlwdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbmdyYXR1bGF0aW9ucyBvbiBhIHByb2R1Y3RpdmUgMjAyMCEgV2UncmUgdHJ1bHkgYXBwcmVjaWF0aXZlIG9mIGFsbCB0aGUgc3VwcG9ydCB5b3UndmUgZ2l2ZW4gdXMgYW5kIG90aGVycyB0aGlzIHllYXIuIFdlIGhvcGUgMjAyMSBpcyBldmVuIG1vcmUgcHJvZHVjdGl2ZSBhbmQgZnVsZmlsbGluZyBmb3IgeW91LiBJZiB5b3UgZW5qb3llZCB0aGlzIFllYXIgaW4gUmV2aWV3LCBpdCdkIG1lYW4gYSB0b24gZm9yIHVzIGlmIHlvdSdkIHNoYXJlIHdpdGggeW91ciBmcmllbmRzIG9yIGxldCB1cyBrbm93IGF0IEBQb2x5bWFpbCEiLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNpZ24tb2ZmIiB9LCAiXHVEODNEXHVEQzhDXHUwMEEwUG9seW1haWwgVGVhbSIpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZpbGxlckRpdiwgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAicmV0dXJuLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IG9uQ2xpY2s6IF90aGlzLmhhbmRsZVJldHVyblRvQXBwLCBjbGFzc05hbWU6ICJyZXR1cm4tYnV0dG9uIiB9LCAiUmV0dXJuIHRvIFBvbHltYWlsIikpKSkpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlckJ1c2llc3RTZWN0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc3RhdHMgPSBfdGhpcy5wcm9wcy5zdGF0czsKICAgICAgICAgICAgaWYgKCFzdGF0cykgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHNvY2lhbENvcHkgPSAiSSBzZW50IHRoZSBtb3N0IG1lc3NhZ2VzIGluICIgKyBtb21lbnQubW9udGhzKClbc3RhdHMubWF4TW9udGhdICsgIiAoIiArIHN0YXRzLm1heE1vbnRoVmFsdWUgKyAiIGVtYWlscykgYW5kICIgKyBtb21lbnQubW9udGhzKClbc3RhdHMubWF4RG93XSArICIgKCIgKyBzdGF0cy5tYXhEb3dWYWx1ZSArICIgZW1haWxzKSBpbiAyMDIwLiBAUG9seW1haWwgI1llYXJJblJldmlldyI7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJidXNpZXN0LXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24tY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclNvY2lhbEludGVudChzb2NpYWxDb3B5KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENhbGVuZGFySWNvbiwgeyBjbGFzc05hbWU6ICJjYWxlbmRhci1pY29uIiB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIHdoaXRlIiB9LCAiV2hlbiB3ZXJlIHlvdSBidXNpZXN0IHRoaXMgeWVhcj8iKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIHdoaXRlIiB9LCAiTGV0J3MgdGFrZSBhIGxvb2sgYXQgd2hhdCB5b3VyIGJ1c2llc3QgZGF5IGFuZCBtb250aHMgd2VyZSBieSBob3cgbWFueSBlbWFpbHMgeW91IHNlbnQgb3V0ISIpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2VsbHMiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcnZpZXdDZWxsLCB7IHRpdGxlOiBtb21lbnQubW9udGhzKClbc3RhdHMubWF4TW9udGhdLCBkZXNjcmlwdGlvbjogIkNvbmdyYXR1bGF0aW9ucyBvbiBhbGwgdGhlIHdvcmsgeW91IGdvdCBkb25lIG9uIHRoaXMgbW9udGghIiwgdmFsdWU6IHN0YXRzLm1heE1vbnRoVmFsdWUsIHR5cGU6IE92ZXJ2aWV3Q2VsbFR5cGUuQ2FyZCwgdmFsdWVEZXNjcmlwdG9yOiAibWVzc2FnZXMgc2VudCIsIGhhc0JhY2tncm91bmQ6IHRydWUgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcnZpZXdDZWxsLCB7IHRpdGxlOiBtb21lbnQud2Vla2RheXMoKVtzdGF0cy5tYXhEb3ddLCBkZXNjcmlwdGlvbjogIkluIGNhc2Ugc29tZW9uZSBhc2tzIHlvdSB0aGUgYmVzdCBkYXkgdG8gYmUgcmVhY2hlZCIsIHZhbHVlOiBzdGF0cy5tYXhEb3dWYWx1ZSwgdHlwZTogT3ZlcnZpZXdDZWxsVHlwZS5DYXJkLCB2YWx1ZURlc2NyaXB0b3I6ICJtZXNzYWdlcyBzZW50IiwgaGFzQmFja2dyb3VuZDogdHJ1ZSB9KSkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJza2V3ZWQtYmFja2dyb3VuZCBhcmNoaXZlIiB9KSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMucmVuZGVyRXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ3llYXItaW4tcmV2aWV3LWFwcCcpIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1haW4iIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJlcnJvci1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlY3Rpb24tY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwgIldlIHdlcmUgdW5hYmxlIHRvIGdlbmVyYXRlIHlvdXIgMjAyMCBZZWFyIGluIFJldmlldyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJkZXNjcmlwdGlvbiIgfSwgIkNsaWNrIHRoZSBidXR0b24gYmVsb3cgdG8gcmV0dXJuIGJhY2sgdG8gUG9seW1haWwuIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZpbGxlckRpdiwgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInJldHVybi1zZWN0aW9uIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgb25DbGljazogX3RoaXMuaGFuZGxlUmV0dXJuVG9BcHAsIGNsYXNzTmFtZTogInJldHVybi1idXR0b24iIH0sICJSZXR1cm4gdG8gUG9seW1haWwiKSkpKSkpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVNjcm9sbCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBzaG93UmV0dXJuQnV0dG9uID0gX3RoaXMuc3RhdGUuc2hvd1JldHVybkJ1dHRvbjsKICAgICAgICAgICAgaWYgKGUuY3VycmVudFRhcmdldC5zY3JvbGxUb3AgPiAxMDApIHsKICAgICAgICAgICAgICAgIGlmICghc2hvd1JldHVybkJ1dHRvbikgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd1JldHVybkJ1dHRvbjogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd1JldHVybkJ1dHRvbjogZmFsc2UgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0geyBiYWNrZ3JvdW5kQ29sb3I6ICdhenVyZScgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBZZWFySW5SZXZpZXcucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHN0YXRzID0gX2Euc3RhdHMsIGZldGNoWWVhcmx5U3VtbWFyeSA9IF9hLmZldGNoWWVhcmx5U3VtbWFyeSwgcmVhZFllYXJseVN1bW1hcnkgPSBfYS5yZWFkWWVhcmx5U3VtbWFyeTsKICAgICAgICBpZiAoIXN0YXRzKSB7CiAgICAgICAgICAgIGZldGNoWWVhcmx5U3VtbWFyeSgpOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhdHMgJiYgIXN0YXRzLnNlZW4pIHsKICAgICAgICAgICAgcmVhZFllYXJseVN1bW1hcnkoKTsKICAgICAgICB9CiAgICB9OwogICAgWWVhckluUmV2aWV3LnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAob2xkUHJvcHMpIHsKICAgICAgICB2YXIgX2E7CiAgICAgICAgdmFyIF9iID0gdGhpcy5wcm9wcywgc3RhdHMgPSBfYi5zdGF0cywgcmVhZFllYXJseVN1bW1hcnkgPSBfYi5yZWFkWWVhcmx5U3VtbWFyeTsKICAgICAgICBpZiAoc3RhdHMgJiYgIXN0YXRzLnNlZW4gJiYgc3RhdHMuc2VlbiAhPT0gKChfYSA9IG9sZFByb3BzLnN0YXRzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2VlbikpIHsKICAgICAgICAgICAgcmVhZFllYXJseVN1bW1hcnkoKTsKICAgICAgICB9CiAgICB9OwogICAgWWVhckluUmV2aWV3LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9hOwogICAgICAgIHZhciBlcnJvciA9IHRoaXMucHJvcHMuZXJyb3I7CiAgICAgICAgdmFyIF9iID0gdGhpcy5zdGF0ZSwgYmFja2dyb3VuZENvbG9yID0gX2IuYmFja2dyb3VuZENvbG9yLCBzaG93UmV0dXJuQnV0dG9uID0gX2Iuc2hvd1JldHVybkJ1dHRvbjsKICAgICAgICB2YXIgaW5mb0Rlc2NyaXB0aW9uID0gIldpdGggYWxsIHRoZSBjcmF6eSB0aGluZ3MgZ29pbmcgb24gaW4gdGhlIHdvcmxkLCB3ZSB3YW50ZWQgdG8gdGFrZSBhIHBhdXNlIHRvIGNlbGVicmF0ZSBhbGwgdGhlIHdvcmsgeW91IHB1dCBpbiB0byBjb25uZWN0IGFuZCBjb21tdW5pY2F0ZSB3aXRoIG90aGVycy4gTGV0J3MgdGFrZSBhIGxvb2sgYXQgYWxsIHRoYXQgeW91J3ZlIGdvdHRlbiBkb25lIGluIFBvbHltYWlsIHRoaXMgeWVhciEiOwogICAgICAgIC8vIEhhbmRsZSBlcnJvciBjYXNlIGZvciBZZWFyIGluIFJldmlldyB0byBhbGxvdyB1c2VyIHRvIHJldHVybiBiYWNrIHRvIHRoZSBhcHAKICAgICAgICBpZiAoISFlcnJvcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJFcnJvcigpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCd5ZWFyLWluLXJldmlldy1hcHAnLCAoX2EgPSB7fSwgX2FbYmFja2dyb3VuZENvbG9yXSA9IHRydWUsIF9hKSksIG9uU2Nyb2xsOiB0aGlzLmhhbmRsZVNjcm9sbCB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygndG9wLXJldHVybi1idXR0b24nLCB7CiAgICAgICAgICAgICAgICAgICAgc2hvdzogc2hvd1JldHVybkJ1dHRvbiwKICAgICAgICAgICAgICAgICAgICBlbGVjdHJvbjogISFpc0VsZWN0cm9uLAogICAgICAgICAgICAgICAgfSksIG9uQ2xpY2s6IHRoaXMuaGFuZGxlUmV0dXJuVG9BcHAgfSwgIlJldHVybiB0byBQb2x5bWFpbCIpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1haW4iIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImhlcm8tc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImxvZ28iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImltZyIsIHsgc3JjOiBQb2x5bWFpbExvZ28sIGFsdDogIiIsIGNsYXNzTmFtZTogIiIgfSkpLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3ByaW5nLCB7IGZyb206IHsgb3BhY2l0eTogMCB9LCB0bzogeyBvcGFjaXR5OiAxIH0sIGRlbGF5OiA1MDAgfSwgZnVuY3Rpb24gKHN0eWxlcykgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoYW5pbWF0ZWQuZGl2LCB7IGNsYXNzTmFtZTogInRpdGxlIiwgc3R5bGU6IHN0eWxlcyB9LCAiMjAyMCIpKTsgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTcHJpbmcsIHsgZnJvbTogeyBvcGFjaXR5OiAwIH0sIHRvOiB7IG9wYWNpdHk6IDEgfSwgZGVsYXk6IDE1MDAgfSwgZnVuY3Rpb24gKHN0eWxlcykgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoYW5pbWF0ZWQuZGl2LCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiwgc3R5bGU6IHN0eWxlcyB9LCAiWW91ciBZZWFyIGluIFJldmlldyIpKTsgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChXYXZlc1NlcGFyYXRvciwgbnVsbCkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdFZpc2liaWxpdHlTZW5zb3IsIHsgb25DaGFuZ2U6IHRoaXMuaGFuZGxlSW5mb1Zpc2libGUgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImludHJvLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sICJDZWxlYnJhdGluZyBZb3VyIFdvcmsgaW4gMjAyMCIpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiB9LCBpbmZvRGVzY3JpcHRpb24pLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNxdWlnZ2x5QXJyb3csIHsgY2xhc3NOYW1lOiAiZG93bi1hcnJvdyIgfSkpKSwKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyT3ZlcnZpZXcoKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmlsbGVyRGl2LCBudWxsKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmlsbGVyRGl2LCBudWxsKSwKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2VuZGluZygpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGaWxsZXJEaXYsIG51bGwpLAogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJGYXZvcml0ZVNlbmRlcigpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGaWxsZXJEaXYsIG51bGwpLAogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXNpZXN0U2VjdGlvbigpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGaWxsZXJEaXYsIG51bGwpLAogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPcmdhbml6YXRpb25TZWN0aW9uKCksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZpbGxlckRpdiwgbnVsbCksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZpbGxlckRpdiwgbnVsbCksCiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclVuc3Vic2NyaWJlclNlY3Rpb24oKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmlsbGVyRGl2LCBudWxsKSwKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2NoZWR1bGluZ1NlY3Rpb24oKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmlsbGVyRGl2LCBudWxsKSwKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29sbGFib3JhdGlvblNlY3Rpb24oKSwKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQXdhcmRzU2VjdGlvbigpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGaWxsZXJEaXYsIG51bGwpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgeyBzcmM6ICJodHRwczovL21haWxlci1hc3NldHMucG9seW1haWwuaW8vMjAyMC8xMi0yOS1lbmQtb2YteWVhci1yZXBvcnQvd2F2ZS5wbmciLCBhbHQ6ICIiLCBjbGFzc05hbWU6ICJ3YXZlLXN0YXRpYyBmbGlwcGVkIiB9KSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmlsbGVyRGl2LCBudWxsKSwKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRW5kU2VjdGlvbigpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGaWxsZXJEaXYsIG51bGwpKSkpOwogICAgfTsKICAgIHJldHVybiBZZWFySW5SZXZpZXc7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwp2YXIgRmlsbGVyRGl2ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmlsbGVyLWRpdiIgfSkpOyB9OwpleHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKFllYXJJblJldmlldyk7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/YearInReview/YearInReview.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/YearInReview/YearInReview.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport classnames from 'classnames';\nimport OverviewCell, { OverviewCellType } from './components/OverviewCell';\nimport PolymailLogo from '@src/routes/Login/Icons/PolymailLogoDarkMode@3x.png';\n\nimport './YearInReview.scss';\nimport { Spring, animated, config } from 'react-spring';\nimport ReactVisibilitySensor from 'react-visibility-sensor';\nimport WavesSeparator from './components/WavesSeparator/WavesSeparator';\nimport { StatYearlySummary } from '@src/api/analytics';\nimport { Me, Social, SocialNetwork } from '@src/types';\nimport moment from 'moment';\nimport SquigglyArrow from './components/Icons/SquigglyArrow.svg';\nimport CalendarIcon from '@src/routes/Calendar/components/Icons/SchedulingOnboardingIcon.svg';\nimport ContactCardCell from './components/ContactCardCell/ContactCardCell';\nimport { findIndex } from 'lodash';\nimport AwardCell, { AwardCellType } from './components/AwardCell/AwardCell';\nimport EmptyStatCell from './components/EmptyStatCell/EmptyStatCell';\nimport { isElectron } from '@src/lib/electron';\nimport SocialIcon, { IconType } from '@src/components/RightSidebar/components/ContactInfo/components/SocialIcon';\n\nexport interface StateProps {\n  stats?: StatYearlySummary;\n  me?: Me;\n  error?: boolean;\n}\n\nexport interface DispatchProps {\n  fetchYearlySummary: () => void;\n  readYearlySummary: () => void;\n}\n\ninterface State {\n  backgroundColor: string;\n  showInfoSection?: boolean;\n  showOverviewSection?: boolean;\n  showFavoriteContact?: boolean;\n  showSendingStatsSection?: boolean;\n  selectedContact?: string;\n  showReturnButton?: boolean;\n}\n\nclass YearInReview extends React.PureComponent<StateProps & DispatchProps, State> {\n  constructor() {\n    super();\n    this.state = { backgroundColor: 'azure' };\n  }\n\n  componentDidMount() {\n    const { stats, fetchYearlySummary, readYearlySummary } = this.props;\n    if (!stats) {\n      fetchYearlySummary();\n    }\n\n    if (stats && !stats.seen) {\n      readYearlySummary();\n    }\n  }\n\n  componentDidUpdate(oldProps: StateProps) {\n    const { stats, readYearlySummary } = this.props;\n\n    if (stats && !stats.seen && stats.seen !== oldProps.stats?.seen) {\n      readYearlySummary();\n    }\n  }\n\n  handleContactHover = (contact: string) => {\n    this.setState({ selectedContact: contact });\n  }\n\n  handleInfoVisible = (visible: boolean) => {\n    if (visible) {\n      this.setState({ showInfoSection: true });\n    }\n  }\n\n  handleOverviewVisible = (visible: boolean) => {\n    if (visible) {\n      this.setState({ showOverviewSection: true });\n    }\n  }\n\n  handleFavoriteContact = (visible: boolean) => {\n    if (visible) {\n      this.setState({ showFavoriteContact: true });\n    }\n  }\n\n  handleSendingVisible = (visible: boolean) => {\n    if (visible) {\n      this.setState({ showSendingStatsSection: true });\n    }\n  }\n\n  handleReturnToApp = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    window.location.href = window.location.origin;\n  }\n\n  renderFavoriteSender = () => {\n    const { showFavoriteContact, selectedContact } = this.state;\n    const { stats } = this.props;\n\n    if (!stats || !stats.topExchanges) {\n      return null;\n    }\n\n    const { topExchanges } = stats;\n\n    // Compute Descriptor\n    const contactIndex = selectedContact &&\n      findIndex(topExchanges, { email: selectedContact }) || 0;\n    const fullContact = topExchanges[contactIndex];\n\n    // Position descriptor\n    let positionDescriptor = 'the most';\n\n    if (contactIndex === 1) {\n      positionDescriptor = 'the 2nd most';\n    }\n\n    if (contactIndex === 2) {\n      positionDescriptor = 'the 3rd most';\n    }\n\n    const description = (\n      <div\n        className=\"description\"\n        key={'descriptor' + fullContact.email}\n      >\n        {/* tslint:disable-next-line:max-line-length */}\n        You exchanged {positionDescriptor} emails with <b>{fullContact.givenName} {fullContact.familyName}</b> this year!\n        <br />\n        <br />\n        {/* tslint:disable-next-line:max-line-length */}\n        You sent <b>{fullContact.sent}</b> messages and received <b>{fullContact.received}</b> emails back. What a lucky person! 🥳\n      </div>\n    );\n\n    // Dont return section if failed\n    if (!fullContact) {\n      return null;\n    }\n\n    // Social copy\n    const socialCopy = `My favorite person to email in 2020 was ${fullContact.givenName} ${fullContact.familyName}! We exchanged ${fullContact.total} messages over email this year!`;\n\n    return (\n      <ReactVisibilitySensor\n            onChange={this.handleFavoriteContact}\n          >\n          <div className=\"favorite-sender-section\">\n            <div className=\"section-container\">\n              {this.renderSocialIntent(socialCopy)}\n              <div className=\"copy-column\">\n                <div className=\"title\">Who did you contact most in 2020?</div>\n                  {description}\n                </div>\n                <div className=\"senders-column\">\n                {stats.topExchanges.slice(0, 3).map((c, i) => (\n                  <Spring\n                    key={c.email}\n                    config={config.slow}\n                    from={{ opacity: 0, t: 0 }}\n                    to={{\n                      opacity: showFavoriteContact ? 1 : 0,\n                      t: showFavoriteContact ? 1 : 0,\n                    }}\n                    delay={(i + 1) * 400}\n                  >\n                    {styles => (\n                      <ContactCardCell\n                        key={c.email + '-card'}\n                        styles={styles}\n                        contact={c}\n                        onHover={this.handleContactHover}\n                        isSelected={selectedContact === c.email}\n                      />\n                    )}\n                  </Spring>\n                ))}\n                </div>\n              </div>\n            </div>\n          </ReactVisibilitySensor>\n    );\n  }\n\n  renderOverview = () => {\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    // Calculate time estimate\n    const timeEstimate = (stats.messageSent * 11 / 3600).toFixed(1);\n    const timeEstimateSpan = (\n      <span>\n        {/* tslint:disable-next-line:max-line-length */}\n        It would have taken the average person <b>{timeEstimate}</b> hours to read through all the emails you received this year!\n      </span>\n    );\n\n    const socialCopy = `I read ${stats.threadRead} emails and sent ${stats.messageSent} emails in 2020. How many did you send? @Polymail #YearInReview`;\n\n    return (\n      <ReactVisibilitySensor\n        onChange={this.handleOverviewVisible}\n      >\n        <div className=\"overview-section\">\n          <div className=\"section-container\">\n            {this.renderSocialIntent(socialCopy)}\n            <div className=\"row-container\">\n              <div className=\"copy-column\">\n                <div className=\"title\">\n                  You've gone through quite a few emails this year!\n                </div>\n                <div className=\"description\">\n                  Great job staying on top of all your important communications!\n                  <br />\n                  <br />\n                  {timeEstimateSpan}\n                </div>\n              </div>\n              <div className=\"cells\">\n                <OverviewCell\n                  title=\"Emails Received\"\n                  description=\"Number of emails you've read.\"\n                  value={stats.threadRead}\n                  type={OverviewCellType.Card}\n                />\n                <OverviewCell\n                  title=\"Emails Sent\"\n                  description=\"Number of emails you've sent.\"\n                  value={stats.messageSent}\n                  type={OverviewCellType.Card}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </ReactVisibilitySensor>\n    );\n  }\n\n  renderUnsubscriberSection = () => {\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    // Do not render collaboration section if no results\n    const noResults = stats.filterApplied + stats.filterCreated  === 0;\n    if (noResults) {\n      return (\n        <div className=\"unsubscriber-section\">\n        <div className=\"section-container\">\n          <img\n            src=\"https://mailer-assets.polymail.io/2019/12-16-end-of-year-report-v2/broom.png\"\n            className=\"section-icon\"\n          />\n          <div className=\"title\">\n            Blocked Senders\n          </div>\n          <div className=\"cells\">\n            <EmptyStatCell\n              awardType={AwardCellType.Blocked}\n              isCard\n            />\n          </div>\n        </div>\n      </div>\n      );\n    }\n\n    // Calculate time estimate\n    const timeEstimate = (stats.filterApplied * 11 / 3600).toFixed(1);\n    const timeEstimateSpan = (\n      <span>\n        {/* tslint:disable-next-line:max-line-length */}\n        You saved yourself <b>{timeEstimate}</b> hours from reading unwated emails through this year!\n      </span>\n    );\n\n    const socialCopy = `I blocked ${stats.filterCreated} senders and blocked ${stats.filterApplied} emails, saving me ${timeEstimate} hours in 2020! @Polymail #YearInReview`;\n\n    return (\n      <div className=\"unsubscriber-section\">\n        <div className=\"section-container\">\n          {this.renderSocialIntent(socialCopy)}\n          <img\n            src=\"https://mailer-assets.polymail.io/2019/12-16-end-of-year-report-v2/broom.png\"\n            className=\"section-icon\"\n          />\n          <div className=\"title\">\n            Good job being selective with your inbox!\n          </div>\n          <div className=\"description\">\n            {/* tslint:disable-next-line:max-line-length */}\n            You saved some time this year by taking the initiative to remove senders you didn't want emails from anymore.\n            <br />\n            <br />\n            {((stats.filterApplied * 11 / 3600) > 0.3) && (\n              timeEstimateSpan\n            )}\n          </div>\n            <div className=\"cells\">\n              <OverviewCell\n                title=\"Senders Blocked\"\n                description=\"Number of senders you've decided to say goodbye to.\"\n                value={stats.filterCreated}\n                type={OverviewCellType.Card}\n              />\n              <OverviewCell\n                title=\"Emails Blocked\"\n                description=\"The number of unwanted emails that we prevented from entering your inbox\"\n                value={stats.filterApplied}\n                type={OverviewCellType.Card}\n              />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderSending = () => {\n    const { showSendingStatsSection } = this.state;\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    return (\n      <ReactVisibilitySensor\n        onChange={this.handleSendingVisible}\n      >\n        <div className=\"sending-section\">\n          <FillerDiv />\n          <div className=\"section-container\">\n            <div className=\"title\">\n              Let's break down the messages you've sent!\n            </div>\n            <div className=\"description white\">\n              {/* tslint:disable-next-line:max-line-length */}\n              Great job making sure you sent quality messages this year!\n            </div>\n            <div className=\"cells\">\n                <Spring\n                  from={{ opacity: 0 }}\n                  to={{ opacity: showSendingStatsSection ? 1 : 0 }}\n                >\n                  {styles => (\n                    <OverviewCell\n                      title=\"Undo Sends\"\n                      description=\"Number of times you've saved yourself from a mistake!\"\n                      value={stats.undoSend}\n                      type={OverviewCellType.Card}\n                      styles={styles}\n                      hasBackground\n                    />\n                  )}\n                </Spring>\n                <Spring\n                  from={{ opacity: 0 }}\n                  to={{ opacity: showSendingStatsSection ? 1 : 0 }}\n                  delay={1000}\n                >\n                  {styles => (\n                    <OverviewCell\n                      title=\"Scheduled Emails\"\n                      description=\"Great job being considerate of your recipient's time!\"\n                      value={stats.sentLater}\n                      type={OverviewCellType.Card}\n                      styles={styles}\n                      hasBackground\n                    />\n                  )}\n                </Spring>\n                <Spring\n                  from={{ opacity: 0 }}\n                  to={{ opacity: showSendingStatsSection ? 1 : 0 }}\n                  delay={2000}\n                >\n                  {styles => (\n                    <OverviewCell\n                      title=\"Message Templates used\"\n                      description=\"How many times you saved time composing an email.\"\n                      value={stats.sentTemplate}\n                      type={OverviewCellType.Card}\n                      styles={styles}\n                      hasBackground\n                    />\n                  )}\n                </Spring>\n                <Spring\n                  from={{ opacity: 0 }}\n                  to={{ opacity: showSendingStatsSection ? 1 : 0 }}\n                  delay={3000}\n                >\n                  {styles => (\n                    <OverviewCell\n                      title=\"Follow-ups used\"\n                      description=\"Good job making sure you stay on top of your emails!\"\n                      value={stats.sentFollowUp}\n                      type={OverviewCellType.Card}\n                      styles={styles}\n                      hasBackground\n                    />\n                  )}\n                </Spring>\n            </div>\n          </div>\n          <FillerDiv />\n        </div>\n      </ReactVisibilitySensor>\n    );\n  }\n\n  renderSocialIntent = (copy: string) => {\n    const urlEncodedText = encodeURIComponent(copy);\n    const socials: Social[] = [\n      {\n        username: '@polymail',\n        url: `https://twitter.com/intent/tweet?text=${urlEncodedText}`,\n        network: SocialNetwork.Twitter,\n      },\n    ];\n\n    return (\n      <div className=\"dist-section\">\n        {socials.map(s => (\n          <SocialIcon\n            social={s}\n            type={IconType.Icon}\n            key={`dist-s-${s.network}`}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  renderOrganizationSection = () => {\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    const organizationString = `How you organized your messages`;\n\n    return (\n    <div className=\"organization-section\">\n      <div className=\"section-container\">\n        <img\n          src=\"https://mailer-assets.polymail.io/2019/12-16-end-of-year-report-v2/folder.png\"\n          className=\"section-icon\"\n        />\n        <div className=\"title\">\n          This is how you chose to tidy your inbox this year.\n        </div>\n        <div className=\"description\">\n          {organizationString}\n        </div>\n        <div className=\"cells\">\n          <OverviewCell\n            title=\"Archive\"\n            description=\"How many emails you sent to the archive.\"\n            value={stats.archive}\n            type={OverviewCellType.TextBlock}\n          />\n          <OverviewCell\n            title=\"Trash\"\n            description=\"Emails that you disposed of to never see again\"\n            value={stats.trash}\n            type={OverviewCellType.TextBlock}\n          />\n          <OverviewCell\n            title=\"Read Later\"\n            description=\"Number of emails you've snoozed to read later.\"\n            value={stats.later}\n            type={OverviewCellType.TextBlock}\n          />\n          <OverviewCell\n            title=\"Labeled\"\n            description=\"Number of emails you've organized with a label.\"\n            value={stats.list}\n            type={OverviewCellType.TextBlock}\n          />\n        </div>\n      </div>\n    </div>\n    );\n  }\n\n  renderCollaborationSection = () => {\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    // Do not render collaboration section if no results\n    const noResults = stats.threadShared + stats.commentPosted  === 0;\n    if (noResults) {\n      return (\n        <div className=\"collaboration-section\">\n          <div className=\"section-container\">\n            <div className=\"title white\">\n              Comments & Mentions\n            </div>\n            <div className=\"cells\">\n              <EmptyStatCell\n                awardType={AwardCellType.SharedConversations}\n              />\n            </div>\n          </div>\n          <div className=\"skewed-background inbox\" />\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"collaboration-section\">\n        <div className=\"section-container\">\n          <div className=\"title white\">\n            You were quite collaborative this year!\n          </div>\n          <div className=\"description white\">\n            {/* tslint:disable-next-line:max-line-length */}\n            Great job making sure that the proper context was always provided on your important conversations!\n          </div>\n          <div className=\"cells\">\n            <OverviewCell\n              title=\"Conversations Shared\"\n              description=\"You made it easy to contribute to your important conversations.\"\n              value={stats.threadShared}\n              type={OverviewCellType.Card}\n              valueDescriptor=\"conversations\"\n              hasBackground\n            />\n            <OverviewCell\n              title=\"Comments Posted\"\n              description=\"Times you didn't have to find context around a conversation\"\n              value={stats.commentPosted}\n              type={OverviewCellType.Card}\n              valueDescriptor=\"comments\"\n              hasBackground\n            />\n          </div>\n        </div>\n        <div className=\"skewed-background inbox\" />\n      </div>\n    );\n  }\n\n  renderSchedulingSection = () => {\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    // Do not render collaboration section if no results\n    const noResults = stats.schedulingMeetingCreated === 0;\n    if (noResults) {\n      return (\n        <div className=\"scheduling-section\">\n          <div className=\"section-container\">\n          <img\n            src=\"https://mailer-assets.polymail.io/2019/12-16-end-of-year-report-v2/calendar.png\"\n            className=\"section-icon\"\n          />\n            <div className=\"title\">\n              Polymail Meeting Times\n            </div>\n            <div className=\"cells\">\n              <EmptyStatCell\n                awardType={AwardCellType.Scheduling}\n                isCard\n              />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    const socialCopy = `I scheduled ${stats.schedulingMeetingCreated} meetings with @Polymail in 2020! #YearInReview`;\n\n    return (\n      <div className=\"scheduling-section\">\n        <div className=\"section-container\">\n          {this.renderSocialIntent(socialCopy)}\n        <img\n          src=\"https://mailer-assets.polymail.io/2019/12-16-end-of-year-report-v2/calendar.png\"\n          className=\"section-icon\"\n        />\n          <div className=\"title\">\n            Meetings Booked with Your Scheduling Page!\n          </div>\n          <div className=\"description\">\n            {/* tslint:disable-next-line:max-line-length */}\n            No issue coordinating times to meet this year thanks to your Polymail Scheduling Page!\n          </div>\n          <div className=\"cells\">\n            <OverviewCell\n              title=\"Meetings Scheduled\"\n              valueDescriptor=\"meetings\"\n              description=\"Good job getting meetings booked on your calendar!\"\n              value={stats.schedulingMeetingCreated}\n              type={OverviewCellType.Card}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderAwardsSection = () => {\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    const allStats = [\n      {\n        type: AwardCellType.MessageSent,\n        value: stats.messageSentPercentile,\n      },\n      {\n        type: AwardCellType.LaterSent,\n        value: stats.sendLaterCountPercentile,\n      },\n      {\n        type: AwardCellType.FollowUp,\n        value: stats.sendFollowUpCountPercentile,\n      },\n      {\n        type: AwardCellType.Scheduling,\n        value: stats.schedulingCountPercentile,\n      },\n      {\n        type: AwardCellType.MessageTemplates,\n        value: stats.sendTemplateCountPercentile,\n      },\n      {\n        type: AwardCellType.Blocked,\n        value: stats.blockAppliedCountPercentile,\n      },\n      {\n        type: AwardCellType.ThreadRead,\n        value: stats.threadReadCountPercentile,\n      },\n      {\n        type: AwardCellType.ReadLater,\n        value: stats.readLaterCountPercentile,\n      },\n      {\n        type: AwardCellType.SharedConversations,\n        value: stats.threadSharedCountPercentile,\n      },\n    ];\n\n    const filteredAwards = allStats.filter(s => s.value > 0.8);\n    const socialCopy = `I made the power users list in the @Polymail Year In Review for 2020`;\n\n    return (\n      <div className=\"awards-section\">\n        <div className=\"section-container\">\n          {this.renderSocialIntent(socialCopy)}\n          <img\n            src=\"https://mailer-assets.polymail.io/2019/12-16-end-of-year-report-v2/trophy.png\"\n            alt=\"\"\n            className=\"awards-icon\"\n          />\n          <div className=\"title\">\n            Accolades you deserve to put up on the fridge!\n          </div>\n          <div className=\"description\">\n            {/* tslint:disable-next-line:max-line-length */}\n            Great job on your email this year! You posted some achievements this year!\n          </div>\n          <div className=\"cells\">\n            {filteredAwards.map(a => (\n              <AwardCell\n                key={`award-type-${a.type}`}\n                awardType={a.type}\n                awardValue={a.value}\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderEndSection = () => {\n    return (\n      <div className=\"end-section\">\n        <div className=\"section-container\">\n          <div className=\"title\">\n            Closing 2020\n          </div>\n          <div className=\"description\">\n            {/* tslint:disable-next-line:max-line-length */}\n            Congratulations on a productive 2020! We're truly appreciative of all the support you've given us and others this year. We hope 2021 is even more productive and fulfilling for you. If you enjoyed this Year in Review, it'd mean a ton for us if you'd share with your friends or let us know at @Polymail!\n            <br />\n            <br />\n            <div className=\"sign-off\">\n              💌&nbsp;Polymail Team\n            </div>\n            <FillerDiv />\n            <div className=\"return-section\">\n              <button\n                onClick={this.handleReturnToApp}\n                className=\"return-button\"\n              >\n                Return to Polymail\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderBusiestSection = () => {\n    const { stats } = this.props;\n    if (!stats) {\n      return null;\n    }\n\n    const socialCopy = `I sent the most messages in ${moment.months()[stats.maxMonth]} (${stats.maxMonthValue} emails) and ${moment.months()[stats.maxDow]} (${stats.maxDowValue} emails) in 2020. @Polymail #YearInReview`;\n\n    return (\n      <div className=\"busiest-section\">\n        <div className=\"section-container\">\n          {this.renderSocialIntent(socialCopy)}\n          <CalendarIcon className=\"calendar-icon\" />\n          <div className=\"title white\">\n            When were you busiest this year?\n          </div>\n          <div className=\"description white\">\n            {/* tslint:disable-next-line:max-line-length */}\n            Let's take a look at what your busiest day and months were by how many emails you sent out!\n          </div>\n          <div className=\"cells\">\n            <OverviewCell\n              title={moment.months()[stats.maxMonth]}\n              description=\"Congratulations on all the work you got done on this month!\"\n              value={stats.maxMonthValue}\n              type={OverviewCellType.Card}\n              valueDescriptor=\"messages sent\"\n              hasBackground\n            />\n            <OverviewCell\n              title={moment.weekdays()[stats.maxDow]}\n              description=\"In case someone asks you the best day to be reached\"\n              value={stats.maxDowValue}\n              type={OverviewCellType.Card}\n              valueDescriptor=\"messages sent\"\n              hasBackground\n            />\n          </div>\n        </div>\n        <div className=\"skewed-background archive\" />\n      </div>\n    );\n  }\n\n  renderError = () => {\n    return (\n      <div\n        className={classnames('year-in-review-app')}\n      >\n        <div\n          className=\"main\"\n        >\n        <div className=\"error-section\">\n          <div className=\"section-container\">\n            <div className=\"title\">\n              We were unable to generate your 2020 Year in Review\n            </div>\n            <div className=\"description\">\n              {/* tslint:disable-next-line:max-line-length */}\n              Click the button below to return back to Polymail.\n            </div>\n            <FillerDiv />\n            <div className=\"return-section\">\n              <button\n                onClick={this.handleReturnToApp}\n                className=\"return-button\"\n              >\n                Return to Polymail\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    );\n  }\n\n  handleScroll = (e: React.UIEvent<HTMLElement>) => {\n    const { showReturnButton } = this.state;\n    if (e.currentTarget.scrollTop > 100) {\n      if (!showReturnButton) {\n        this.setState({ showReturnButton: true });\n      }\n    } else {\n      this.setState({ showReturnButton: false });\n    }\n  }\n\n  render() {\n    const { error } = this.props;\n    const {\n      backgroundColor,\n      showReturnButton,\n     } = this.state;\n\n    const infoDescription = `With all the crazy things going on in the world, we wanted to take a pause to celebrate all the work you put in to connect and communicate with others. Let's take a look at all that you've gotten done in Polymail this year!`;\n\n    // Handle error case for Year in Review to allow user to return back to the app\n    if (!!error) {\n      return this.renderError();\n    }\n\n    return (\n      <div\n        className={classnames('year-in-review-app', { [backgroundColor]: true })}\n        onScroll={this.handleScroll}\n      >\n        <button\n          className={classnames('top-return-button', {\n            show: showReturnButton,\n            electron: !!isElectron,\n          })}\n          onClick={this.handleReturnToApp}\n        >\n          Return to Polymail\n        </button>\n        <div\n          className=\"main\"\n        >\n          <div className=\"hero-section\">\n            <div className=\"logo\">\n              <img src={PolymailLogo} alt=\"\" className=\"\"/>\n            </div>\n            <Spring\n              from={{ opacity: 0 }}\n              to={{ opacity: 1 }}\n              delay={500}\n            >\n              {styles => (\n                <animated.div\n                  className=\"title\"\n                  style={styles}\n                >\n                  2020\n                </animated.div>\n              )}\n            </Spring>\n            <Spring\n              from={{ opacity: 0 }}\n              to={{ opacity: 1 }}\n              delay={1500}\n            >\n            {styles => (\n              <animated.div\n                className=\"description\"\n                style={styles}\n              >\n                Your Year in Review\n              </animated.div>\n              )}\n            </Spring>\n            <WavesSeparator />\n          </div>\n          <ReactVisibilitySensor\n              onChange={this.handleInfoVisible}\n          >\n          <div className=\"intro-section\">\n            <div\n              className=\"title\"\n            >\n              Celebrating Your Work in 2020\n            </div>\n            <div\n              className=\"description\"\n            >\n              {infoDescription}\n            </div>\n            <SquigglyArrow className=\"down-arrow\" />\n          </div>\n          </ReactVisibilitySensor>\n\n          {/* Overview Section */}\n          {this.renderOverview()}\n\n          <FillerDiv />\n          <FillerDiv />\n\n          {/* Sending Section */}\n          {this.renderSending()}\n\n          <FillerDiv />\n\n          {/* Sender Section */}\n          {this.renderFavoriteSender()}\n          <FillerDiv />\n\n          {/* DOW/MOY Section */}\n          {this.renderBusiestSection()}\n          <FillerDiv />\n\n          {/* Organization Section */}\n          {this.renderOrganizationSection()}\n          <FillerDiv />\n          <FillerDiv />\n\n          {/* Blocked/Unsubscriber Section */}\n          {this.renderUnsubscriberSection()}\n          <FillerDiv />\n\n          {/* Scheduling Section */}\n          {this.renderSchedulingSection()}\n          <FillerDiv />\n\n          {/* Collaboration Section */}\n          {this.renderCollaborationSection()}\n\n          {/* Awards Section */}\n          {this.renderAwardsSection()}\n\n          <FillerDiv />\n\n          <img\n            src=\"https://mailer-assets.polymail.io/2020/12-29-end-of-year-report/wave.png\"\n            alt=\"\"\n            className=\"wave-static flipped\"\n          />\n\n          <FillerDiv />\n          {/* Invite to Polymail Section */}\n          {this.renderEndSection()}\n          <FillerDiv />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst FillerDiv = () => (\n  <div className=\"filler-div\" />\n);\n\nexport default withRouter(YearInReview);\n"]}]}