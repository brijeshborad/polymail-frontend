{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/UpdateCard/UpdateCard.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/UpdateCard/UpdateCard.tsx","mtime":1675280254098},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBOYXZpZ2F0aW9uSGVhZGVyIGZyb20gJ0BzcmMvcm91dGVzL1NldHRpbmdzL2NvbXBvbmVudHMvTmF2aWdhdGlvbkhlYWRlcic7CmltcG9ydCBQYXltZW50Rm9ybSBmcm9tICdAc3JjL3JvdXRlcy9TZXR0aW5ncy9yb3V0ZXMvQmlsbGluZy9jb21wb25lbnRzL1BheW1lbnRGb3JtJzsKaW1wb3J0IGJyb3dzZXJIaXN0b3J5IGZyb20gJ0BzcmMvbGliL2Jyb3dzZXJIaXN0b3J5JzsKaW1wb3J0IHsgQmlsbGluZ0N5Y2xlLCBCSUxMSU5HX1BMQU5TIH0gZnJvbSAnQHNyYy90eXBlcy9iaWxsaW5nJzsKaW1wb3J0IEJpbGxpbmdQbGFuSGVhZGVyIGZyb20gJ0BzcmMvcm91dGVzL1NldHRpbmdzL3JvdXRlcy9CaWxsaW5nL2NvbXBvbmVudHMvQmlsbGluZ1BsYW5IZWFkZXInOwppbXBvcnQgTG9hZGluZ0Vycm9yU3RhdGUgZnJvbSAnQHNyYy9yb3V0ZXMvU2V0dGluZ3Mvcm91dGVzL0JpbGxpbmcvY29tcG9uZW50cy9Mb2FkaW5nRXJyb3JTdGF0ZSc7CmltcG9ydCBCaWxsaW5nU3RhdHVzQmFubmVyIGZyb20gJy4uL2NvbXBvbmVudHMvQmlsbGluZ1N0YXR1c0Jhbm5lcic7CnZhciBVcGRhdGVDYXJkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFVwZGF0ZUNhcmQsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBVcGRhdGVDYXJkKCkgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZUNhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnL3NldHRpbmdzL2JpbGxpbmcnKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVN1Ym1pdCA9IGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgICBfdGhpcy5wcm9wcy51cGRhdGVDYXJkKHRva2VuKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUJhY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGJyb3dzZXJIaXN0b3J5LmdvQmFjaygpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgVXBkYXRlQ2FyZC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHN1YnNjcmlwdGlvbiA9IF9hLnN1YnNjcmlwdGlvbiwgbG9hZGluZyA9IF9hLmxvYWRpbmcsIGxvYWRpbmdFcnJvciA9IF9hLmxvYWRpbmdFcnJvciwgaXNBZG1pbiA9IF9hLmlzQWRtaW4sIHVwZGF0aW5nID0gX2EudXBkYXRpbmcsIGNhcmQgPSBfYS5jYXJkLCBmYWlsTWVzc2FnZSA9IF9hLmZhaWxNZXNzYWdlOwogICAgICAgIGlmIChsb2FkaW5nIHx8IGxvYWRpbmdFcnJvciB8fCAhc3Vic2NyaXB0aW9uIHx8ICFpc0FkbWluKSB7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChMb2FkaW5nRXJyb3JTdGF0ZSwgeyBsb2FkaW5nOiBsb2FkaW5nLCBsb2FkaW5nRXJyb3I6IGxvYWRpbmdFcnJvciB8fCAhc3Vic2NyaXB0aW9uLCByZXF1aXJlQWRtaW46ICFpc0FkbWluIH0pKTsKICAgICAgICB9CiAgICAgICAgdmFyIHNlbGVjdGVkUGxhbiA9IEJJTExJTkdfUExBTlMuZmlsdGVyKGZ1bmN0aW9uIChwbGFuKSB7IHJldHVybiBwbGFuLnRpZXIgPT09IHN1YnNjcmlwdGlvbi50aWVyOyB9KVswXTsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2V0dGluZ3MtcGFuZWwgcHJlZmVyZW5jZXMtdGVhbSIgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChOYXZpZ2F0aW9uSGVhZGVyLCB7IHRpdGxlOiAiUGxhbnMgJiBCaWxsaW5nIiwgb25CYWNrOiB0aGlzLmhhbmRsZUJhY2sgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQmlsbGluZ1N0YXR1c0Jhbm5lciwgeyBpc0FkbWluOiBpc0FkbWluLCBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbiwgY2FyZDogY2FyZCwgZXh0cmFNZXNzYWdlOiBmYWlsTWVzc2FnZSB9KSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCaWxsaW5nUGxhbkhlYWRlciwgeyB0aWVyOiBzdWJzY3JpcHRpb24udGllciwgY3ljbGU6IHN1YnNjcmlwdGlvbi5iaWxsaW5nQ3ljbGUsIG1vbnRobHlDb3N0OiBzdWJzY3JpcHRpb24uYmlsbGluZ0N5Y2xlID09PSBCaWxsaW5nQ3ljbGUuQW5udWFsCiAgICAgICAgICAgICAgICAgICAgPyBzZWxlY3RlZFBsYW4uYW5udWFsQ29zdCA6IHNlbGVjdGVkUGxhbi5tb250aGx5Q29zdCwgc2VhdHM6IHN1YnNjcmlwdGlvbi5zZWF0cywgcHJvbW9Db2RlOiBzdWJzY3JpcHRpb24uY291cG9uLCBwcm9tb0NvZGVQZXJjZW50OiBzdWJzY3JpcHRpb24uY291cG9uUGVyY2VudCwgaXNMb2FkaW5nQ291cG9uOiB0aGlzLnByb3BzLmlzTG9hZGluZ0NvdXBvbiB8fCBmYWxzZSwgaXNNb2JpbGU6IHRoaXMucHJvcHMuaXNNb2JpbGUgfHwgZmFsc2UgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAicGxhbi1kZXRhaWwiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImJpbGxpbmctdXBkYXRlIiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiLCBpZDogInBheW1lbnQtdGl0bGUiIH0sICJVcGRhdGUgUGF5bWVudCBtZXRob2QiKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInN0cmlwZS1lbGVtZW50cyIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChQYXltZW50Rm9ybSwgeyBidXR0b25OYW1lOiAiVXBkYXRlIENhcmQiLCBvbkNhbmNlbDogdGhpcy5oYW5kbGVDYW5jZWwsIG9uU3VibWl0OiB0aGlzLmhhbmRsZVN1Ym1pdCwgbG9hZGluZzogdXBkYXRpbmcsIHNob3dDYW5jZWw6IHRydWUgfSkpKSkpKTsKICAgIH07CiAgICByZXR1cm4gVXBkYXRlQ2FyZDsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFVwZGF0ZUNhcmQ7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/UpdateCard/UpdateCard.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/UpdateCard/UpdateCard.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport NavigationHeader from '@src/routes/Settings/components/NavigationHeader';\nimport PaymentForm from '@src/routes/Settings/routes/Billing/components/PaymentForm';\nimport browserHistory from '@src/lib/browserHistory';\nimport { BillingSubscription, BillingCycle, BILLING_PLANS, BillingCard } from '@src/types/billing';\nimport BillingPlanHeader from '@src/routes/Settings/routes/Billing/components/BillingPlanHeader';\nimport LoadingErrorState from '@src/routes/Settings/routes/Billing/components/LoadingErrorState';\nimport BillingStatusBanner from '../components/BillingStatusBanner';\nimport { Me } from '@src/types';\n\nexport interface Props {\n  loading: boolean;\n  loadingError: boolean;\n  updating: boolean;\n  isAdmin: boolean;\n  subscription?: BillingSubscription;\n  isLoadingCoupon?: boolean;\n  isMobile?: boolean;\n  card?: BillingCard;\n  failMessage?: string;\n  me?: Me;\n}\n\nexport interface DispatchProps {\n  updateCard(token: string): void;\n}\n\nclass UpdateCard extends React.PureComponent<Props & DispatchProps> {\n  handleCancel = () => {\n    browserHistory.push('/settings/billing');\n  }\n\n  handleSubmit = (token: string) => {\n    this.props.updateCard(token);\n  }\n\n  handleBack = () => {\n    browserHistory.goBack();\n  }\n\n  render() {\n    const {\n      subscription,\n      loading,\n      loadingError,\n      isAdmin,\n      updating,\n      card,\n      failMessage,\n    } = this.props;\n\n    if (loading || loadingError || !subscription || !isAdmin) {\n      return (\n        <LoadingErrorState\n          loading={loading}\n          loadingError={loadingError || !subscription}\n          requireAdmin={!isAdmin}\n        />\n      );\n    }\n\n    const selectedPlan = BILLING_PLANS.filter(plan => plan.tier === subscription.tier)[0];\n\n    return (\n      <div className=\"settings-panel preferences-team\">\n        <NavigationHeader title=\"Plans & Billing\" onBack={this.handleBack} />\n        <BillingStatusBanner\n          isAdmin={isAdmin}\n          subscription={subscription}\n          card={card}\n          extraMessage={failMessage}\n          />\n        <BillingPlanHeader\n          tier={subscription.tier}\n          cycle={subscription.billingCycle}\n          monthlyCost={subscription.billingCycle === BillingCycle.Annual\n            ? selectedPlan.annualCost : selectedPlan.monthlyCost}\n          seats={subscription.seats}\n          promoCode={subscription.coupon}\n          promoCodePercent={subscription.couponPercent}\n          isLoadingCoupon={this.props.isLoadingCoupon || false}\n          isMobile={this.props.isMobile || false}\n        />\n        <div className=\"plan-detail\">\n          <div className=\"billing-update\">\n            <div className=\"title\" id=\"payment-title\">\n              Update Payment method\n            </div>\n            <div className=\"stripe-elements\">\n              <PaymentForm\n                buttonName=\"Update Card\"\n                onCancel={this.handleCancel}\n                onSubmit={this.handleSubmit}\n                loading={updating}\n                showCancel\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default UpdateCard;\n"]}]}