{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Popover/Popover.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Popover/Popover.tsx","mtime":1675280254024},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgeyBLZXlDb2RlIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCBPdmVybGF5IGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL092ZXJsYXknOwppbXBvcnQgJy4vUG9wb3Zlci5zY3NzJzsKZXhwb3J0IHZhciBQb3BvdmVyUG9zaXRpb247CihmdW5jdGlvbiAoUG9wb3ZlclBvc2l0aW9uKSB7CiAgICBQb3BvdmVyUG9zaXRpb25bIkJlbG93UmlnaHQiXSA9ICJiZWxvdyByaWdodCI7CiAgICBQb3BvdmVyUG9zaXRpb25bIkFib3ZlUmlnaHQiXSA9ICJhYm92ZSByaWdodCI7CiAgICBQb3BvdmVyUG9zaXRpb25bIkJlbG93TGVmdCJdID0gImJlbG93IGxlZnQiOwogICAgUG9wb3ZlclBvc2l0aW9uWyJBYm92ZUxlZnQiXSA9ICJhYm92ZSBsZWZ0IjsKfSkoUG9wb3ZlclBvc2l0aW9uIHx8IChQb3BvdmVyUG9zaXRpb24gPSB7fSkpOwp2YXIgUG9wb3ZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhQb3BvdmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gUG9wb3ZlcigpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgIC8vIEhpZGUgc2V0cyBzdGF0ZSB0byAhc2hvdyBhbmQgZGlzbWlzc2VzIGltbWVkaWF0ZWx5IG9yIG9uIGZhZGUKICAgICAgICBfdGhpcy5oaWRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgZmFkZXNPdXQgPSBfYS5mYWRlc091dCwgb25IaWRlID0gX2Eub25IaWRlOwogICAgICAgICAgICBpZiAoIWZhZGVzT3V0KSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3c6IGZhbHNlIH0sIG9uSGlkZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAob25IaWRlKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3c6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgaWYgKF90aGlzLnRpbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLnRpbWVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLnRpbWVyID0gZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gb25IaWRlKCk7IH0sIDIwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLnNob3cgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvdzogdHJ1ZSB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnByb3BzLmF1dG9Gb2N1c09mZiAmJiBfdGhpcy5wb3BvdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9wb3Zlci5mb2N1cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGNoZWNrIHNvIHRlc3RzIGRvbid0IGJyZWFrCiAgICAgICAgICAgICAgICBpZiAoX3RoaXMucG9wb3ZlciAmJiBfdGhpcy5wb3BvdmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCkgewogICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gX3RoaXMucG9wb3Zlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICAgICAgICAgICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IF90aGlzLnN0YXRlLnBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIHZhciBnb2VzQmVsb3cgPSAocG9zaXRpb24gPT09IFBvcG92ZXJQb3NpdGlvbi5CZWxvd0xlZnQKICAgICAgICAgICAgICAgICAgICAgICAgfHwgcG9zaXRpb24gPT09IFBvcG92ZXJQb3NpdGlvbi5CZWxvd1JpZ2h0KQogICAgICAgICAgICAgICAgICAgICAgICAmJiByZWN0LmJvdHRvbSA+IHdpbmRvd0hlaWdodDsKICAgICAgICAgICAgICAgICAgICB2YXIgZ29lc1JpZ2h0ID0gKHBvc2l0aW9uID09PSBQb3BvdmVyUG9zaXRpb24uQmVsb3dSaWdodAogICAgICAgICAgICAgICAgICAgICAgICB8fCBwb3NpdGlvbiA9PT0gUG9wb3ZlclBvc2l0aW9uLkFib3ZlUmlnaHQpCiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlY3QucmlnaHQgPiB3aW5kb3dXaWR0aDsKICAgICAgICAgICAgICAgICAgICB2YXIgYmVsb3cgPSBwb3NpdGlvbiA9PT0gUG9wb3ZlclBvc2l0aW9uLkJlbG93TGVmdAogICAgICAgICAgICAgICAgICAgICAgICB8fCBwb3NpdGlvbiA9PT0gUG9wb3ZlclBvc2l0aW9uLkJlbG93UmlnaHQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gcG9zaXRpb24gPT09IFBvcG92ZXJQb3NpdGlvbi5CZWxvd1JpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHBvc2l0aW9uID09PSBQb3BvdmVyUG9zaXRpb24uQWJvdmVSaWdodDsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV3UG9zaXRpb24gPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKGdvZXNCZWxvdykgewogICAgICAgICAgICAgICAgICAgICAgICBiZWxvdyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZ29lc1JpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChiZWxvdyAmJiByaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdQb3NpdGlvbiA9IFBvcG92ZXJQb3NpdGlvbi5CZWxvd1JpZ2h0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChiZWxvdyAmJiAhcmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBQb3BvdmVyUG9zaXRpb24uQmVsb3dMZWZ0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYmVsb3cgJiYgcmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3UG9zaXRpb24gPSBQb3BvdmVyUG9zaXRpb24uQWJvdmVSaWdodDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWJlbG93ICYmICFyaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdQb3NpdGlvbiA9IFBvcG92ZXJQb3NpdGlvbi5BYm92ZUxlZnQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChuZXdQb3NpdGlvbiAmJiBuZXdQb3NpdGlvbiAhPT0gcG9zaXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBwb3NpdGlvbjogbmV3UG9zaXRpb24gfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKF90aGlzLnByb3BzLm9uU2hvdykgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLm9uU2hvdygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3RoaXMuaGFzUmVuZGVyZWQgPSB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnRvZ2dsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKF90aGlzLnN0YXRlLnNob3cpIHsKICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyByZXNldCBwb3NpdGlvbmluZwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHBvc2l0aW9uOiBQb3BvdmVyUG9zaXRpb24uQmVsb3dSaWdodCB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc3RhdGUuc2hvdykgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDbGlja091dHNpZGUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgYWxsb3dDbGlja1Byb3BhZ2F0aW9uID0gX3RoaXMucHJvcHMuYWxsb3dDbGlja1Byb3BhZ2F0aW9uOwogICAgICAgICAgICBpZiAoX3RoaXMucG9wb3ZlciAmJiAhX3RoaXMucG9wb3Zlci5jb250YWlucyhlLnRhcmdldCkgJiYgX3RoaXMuc3RhdGUuc2hvdykgewogICAgICAgICAgICAgICAgLy8gSEFDSyhTSElOKTogRG8gbm90IGhpZGUgd2hlbiBjbGlja2luZyBkaXNhcHBlYXJpbmcgZWxlbWVudHMKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5LmNvbnRhaW5zKGUudGFyZ2V0KSkgewogICAgICAgICAgICAgICAgICAgIGlmICghYWxsb3dDbGlja1Byb3BhZ2F0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlkZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gS2V5Q29kZS5Fc2MpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMucHJvcHMub25LZXlEb3duKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5vbktleURvd24oZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMucG9wb3ZlciA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVdoZWVsID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlclBvcG92ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBjbGFzc05hbWUgPSBfYS5jbGFzc05hbWUsIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIHN0eWxlID0gX2Euc3R5bGUsIG9uTW91c2VMZWF2ZSA9IF9hLm9uTW91c2VMZWF2ZSwgZml4ZWRQb3NpdGlvbmluZyA9IF9hLmZpeGVkUG9zaXRpb25pbmcsIG9uTW91c2VFbnRlciA9IF9hLm9uTW91c2VFbnRlcjsKICAgICAgICAgICAgdmFyIF9iID0gX3RoaXMuc3RhdGUsIHNob3cgPSBfYi5zaG93LCBwb3NpdGlvbiA9IF9iLnBvc2l0aW9uOwogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdwb3BvdmVyLWNvbnRhaW5lcicsIGNsYXNzTmFtZSwgcG9zaXRpb24sIHsKICAgICAgICAgICAgICAgICAgICBzaG93OiBzaG93LAogICAgICAgICAgICAgICAgICAgICdub3QtcmVuZGVyZWQnOiAhX3RoaXMuaGFzUmVuZGVyZWQsCiAgICAgICAgICAgICAgICAgICAgJ2ZpeGVkLXBvc2l0aW9uaW5nJzogZml4ZWRQb3NpdGlvbmluZywKICAgICAgICAgICAgICAgIH0pLCBzdHlsZTogc3R5bGUsIG9uS2V5RG93bjogX3RoaXMuaGFuZGxlS2V5RG93biwgcmVmOiBfdGhpcy5oYW5kbGVSZWYsIHRhYkluZGV4OiAtMSwgb25Nb3VzZUxlYXZlOiBvbk1vdXNlTGVhdmUsIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyLCBvbldoZWVsOiBfdGhpcy5oYW5kbGVXaGVlbCB9LCBjaGlsZHJlbikpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgICAgICBwb3NpdGlvbjogUG9wb3ZlclBvc2l0aW9uLkJlbG93UmlnaHQsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBQb3BvdmVyLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBwb3NpdGlvbiA9IF9hLnBvc2l0aW9uLCBwZXJzaXN0ZW50ID0gX2EucGVyc2lzdGVudCwgc2hvd09uTW91bnQgPSBfYS5zaG93T25Nb3VudDsKICAgICAgICBpZiAoIXBlcnNpc3RlbnQpIHsKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVDbGlja091dHNpZGUpOwogICAgICAgIH0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUpOwogICAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcG9zaXRpb246IHBvc2l0aW9uIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoc2hvd09uTW91bnQpIHsKICAgICAgICAgICAgdGhpcy5zaG93KCk7CiAgICAgICAgfQogICAgfTsKICAgIFBvcG92ZXIucHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gKG5leHRQcm9wcykgewogICAgICAgIGlmIChuZXh0UHJvcHMucG9zaXRpb24gJiYgbmV4dFByb3BzLnBvc2l0aW9uICE9PSB0aGlzLnByb3BzLnBvc2l0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwb3NpdGlvbjogbmV4dFByb3BzLnBvc2l0aW9uIH0pOwogICAgICAgIH0KICAgIH07CiAgICBQb3BvdmVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgcGVyc2lzdGVudCA9IHRoaXMucHJvcHMucGVyc2lzdGVudDsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUpOwogICAgICAgIGlmICghcGVyc2lzdGVudCkgewogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZUNsaWNrT3V0c2lkZSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnRpbWVyKSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgICB9CiAgICB9OwogICAgUG9wb3Zlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIG92ZXJsYXkgPSBfYS5vdmVybGF5LCBkYXJrT3ZlcmxheSA9IF9hLmRhcmtPdmVybGF5OwogICAgICAgIHZhciBzaG93ID0gdGhpcy5zdGF0ZS5zaG93OwogICAgICAgIC8vIEhhbmRsZSBzaG93aW5nIG92ZXJsYXkgaWYgbmVjZXNzYXJ5CiAgICAgICAgaWYgKG92ZXJsYXkgJiYgc2hvdykgewogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcmxheSwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ3BvcG92ZXItb3ZlcmxheScsIHsgc2hvdzogc2hvdywgJ2Rhcmstb3ZlcmxheSc6IGRhcmtPdmVybGF5IH0pLCBjb250YWN0U3VwcG9ydDogdHJ1ZSwgaGlkZTogdGhpcy5oaWRlIH0sIHRoaXMucmVuZGVyUG9wb3ZlcigpKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLnJlbmRlclBvcG92ZXIoKTsKICAgIH07CiAgICByZXR1cm4gUG9wb3ZlcjsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFBvcG92ZXI7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Popover/Popover.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Popover/Popover.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\n\nimport { KeyCode } from '@src/types';\nimport Overlay from '@src/components/Base/Overlay';\n\nimport './Popover.scss';\n\nexport const enum PopoverPosition {\n  BelowRight = 'below right',\n  AboveRight = 'above right',\n  BelowLeft = 'below left',\n  AboveLeft = 'above left',\n}\n\ninterface Props {\n  children: any;\n  style?: any;\n  position?: PopoverPosition;\n  className?: string;\n  onShow?: () => void;\n  onHide?: () => void;\n  onKeyDown?: (e: React.KeyboardEvent<HTMLElement>) => void;\n  autoFocusOff?: boolean;\n  persistent?: boolean;\n  fadesOut?: boolean;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n  overlay?: boolean;\n  darkOverlay?: boolean;\n  showOnMount?: boolean;\n  fixedPositioning?: boolean;\n  contactSupport?: boolean;\n\n  // allows outside click events to pass through when dismissing\n  allowClickPropagation?: boolean;\n}\n\ninterface State {\n  show: boolean;\n  position: PopoverPosition;\n}\n\nclass Popover extends React.PureComponent<Props, State> {\n  private timer: NodeJS.Timer;\n  private popover: HTMLDivElement;\n  // keep track on intialRender so we don't fade out\n  private hasRendered: boolean;\n\n  constructor() {\n    super();\n\n    this.state = {\n      show: false,\n      position: PopoverPosition.BelowRight,\n    };\n  }\n\n  // Hide sets state to !show and dismisses immediately or on fade\n  hide = () => {\n    const { fadesOut, onHide } = this.props;\n    if (!fadesOut) {\n      this.setState({ show: false }, onHide);\n    } else if (onHide) {\n      this.setState({ show: false });\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n      this.timer = global.setTimeout(\n        () => onHide(),\n        200,\n      );\n    }\n  }\n\n  show = () => {\n    this.setState({ show: true }, () => {\n      if (!this.props.autoFocusOff && this.popover) {\n        this.popover.focus();\n      }\n\n      // existence check so tests don't break\n      if (this.popover && this.popover.getBoundingClientRect) {\n        const rect = this.popover.getBoundingClientRect();\n        const windowHeight = window.innerHeight;\n        const windowWidth = window.innerWidth;\n        const { position } = this.state;\n        const goesBelow = (position === PopoverPosition.BelowLeft\n          || position === PopoverPosition.BelowRight)\n          && rect.bottom > windowHeight;\n        const goesRight = (position === PopoverPosition.BelowRight\n          || position === PopoverPosition.AboveRight)\n          && rect.right > windowWidth;\n        let below = position === PopoverPosition.BelowLeft\n          || position === PopoverPosition.BelowRight;\n        let right = position === PopoverPosition.BelowRight\n          || position === PopoverPosition.AboveRight;\n        let newPosition;\n\n        if (goesBelow) {\n          below = false;\n        }\n        if (goesRight) {\n          right = false;\n        }\n\n        if (below && right) {\n          newPosition = PopoverPosition.BelowRight;\n        } else if (below && !right) {\n          newPosition = PopoverPosition.BelowLeft;\n        } else if (!below && right) {\n          newPosition = PopoverPosition.AboveRight;\n        } else if (!below && !right) {\n          newPosition = PopoverPosition.AboveLeft;\n        }\n\n        if (newPosition && newPosition !== position) {\n          this.setState({ position: newPosition });\n        }\n      }\n\n      if (this.props.onShow) {\n        this.props.onShow();\n      }\n\n      this.hasRendered = true;\n    });\n  }\n\n  toggle = () => {\n    if (this.state.show) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  componentDidMount() {\n    const { position, persistent, showOnMount } = this.props;\n\n    if (!persistent) {\n      document.addEventListener('mousedown', this.handleClickOutside);\n    }\n    window.addEventListener('resize', this.handleResize);\n\n    if (position) {\n      this.setState({ position });\n    }\n\n    if (showOnMount) {\n      this.show();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.position && nextProps.position !== this.props.position) {\n      this.setState({ position: nextProps.position });\n    }\n  }\n\n  componentWillUnmount() {\n    const { persistent } = this.props;\n    window.removeEventListener('resize', this.handleResize);\n\n    if (!persistent) {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n  }\n\n  handleResize = () => {\n    // reset positioning\n    this.setState({ position: PopoverPosition.BelowRight }, () => {\n      if (this.state.show) {\n        this.show();\n      }\n    });\n  }\n\n  handleClickOutside = (e: any) => {\n    const { allowClickPropagation } = this.props;\n    if (this.popover && !this.popover.contains(e.target) && this.state.show) {\n\n      // HACK(SHIN): Do not hide when clicking disappearing elements\n      if (document.body.contains(e.target)) {\n\n        if (!allowClickPropagation) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n\n        this.hide();\n      }\n    }\n  }\n\n  handleKeyDown = (e: React.KeyboardEvent<HTMLElement>) => {\n    if (e.keyCode === KeyCode.Esc) {\n      e.stopPropagation();\n      e.preventDefault();\n      this.hide();\n    } else if (this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  }\n\n  handleRef = (ref: HTMLDivElement) => {\n    this.popover = ref;\n  }\n\n  handleWheel = (e: React.WheelEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n  }\n\n  renderPopover = () => {\n    const { className, children, style, onMouseLeave, fixedPositioning, onMouseEnter } = this.props;\n    const { show, position } = this.state;\n    return (\n      <div\n        className={classNames('popover-container', className, position, {\n          show,\n          'not-rendered': !this.hasRendered,\n          'fixed-positioning': fixedPositioning,\n        })}\n        style={style}\n        onKeyDown={this.handleKeyDown}\n        ref={this.handleRef}\n        tabIndex={-1}\n        onMouseLeave={onMouseLeave}\n        onMouseEnter={onMouseEnter}\n        onWheel={this.handleWheel}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  render() {\n    const { overlay, darkOverlay } = this.props;\n    const { show } = this.state;\n\n    // Handle showing overlay if necessary\n    if (overlay && show) {\n      return (\n        <Overlay\n          className={classNames('popover-overlay', { show, 'dark-overlay': darkOverlay })}\n          contactSupport\n          hide={this.hide}\n        >\n          {this.renderPopover()}\n        </Overlay>\n      );\n    }\n\n    return this.renderPopover();\n  }\n}\n\nexport default Popover;\n"]}]}