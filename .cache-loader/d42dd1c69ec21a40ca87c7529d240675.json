{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Calendar/Calendar.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Calendar/Calendar.tsx","mtime":1675280254027},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IHsgRXZlbnRSZWNpcGllbnRUeXBlLCB9IGZyb20gJ0BzcmMvdHlwZXMnOwovLyBpbXBvcnQgQ2FsZW5kYXJJY29uIGZyb20gJ0BzcmMvY29tcG9uZW50cy9JY29ucy9DYWxlbmRhci5zdmcnOwppbXBvcnQgJy4vQ2FsZW5kYXIuc2Nzcyc7CmltcG9ydCB7IHBhcnNlQWRkcmVzcyB9IGZyb20gJ0BzcmMvbGliL2FkZHJlc3MnOwppbXBvcnQgeyBpc0VtcHR5LCBtYXAsIGZsYXR0ZW4sIGZvckVhY2ggfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBnZXRFdmVudHNGb3JEYXRlIH0gZnJvbSAnQHNyYy9saWIvZXZlbnQnOwppbXBvcnQgS2V5Ym9hcmRTeW1ib2wgZnJvbSAnQHNyYy9jb21wb25lbnRzL0Jhc2UvS2V5Ym9hcmRTeW1ib2wvS2V5Ym9hcmRTeW1ib2wnOwppbXBvcnQgQ2FsZW5kYXJIZWFkZXIgZnJvbSAnQHNyYy9jb21wb25lbnRzL0NvbW1hbmRDb250cm9sL2NvbXBvbmVudHMvQ2FsZW5kYXIvY29tcG9uZW50cy9DYWxlbmRhckhlYWRlci9DYWxlbmRhckhlYWRlcic7CmltcG9ydCBNdWx0aURheVZpZXcgZnJvbSAnQHNyYy9jb21wb25lbnRzL0NvbW1hbmRDb250cm9sL2NvbXBvbmVudHMvQ2FsZW5kYXIvY29tcG9uZW50cy9NdWx0aURheVZpZXcvTXVsdGlEYXlWaWV3JzsKaW1wb3J0IEhvdmVyVGlwIGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL0hvdmVyVGlwJzsKaW1wb3J0IHsgSG90a2V5QWN0aW9uIH0gZnJvbSAnQHNyYy9saWIvaG90a2V5cyc7CmltcG9ydCB7IGRhdGVPdmVybGFwcyB9IGZyb20gJ0BzcmMvbGliL21vZGVscy9jYWxlbmRhckV2ZW50cyc7CmltcG9ydCB7IG5vdyB9IGZyb20gJ0BzcmMvbGliL2RhdGV0aW1lJzsKaW1wb3J0IHsgcmVjb3JkRXZlbnQsIFVzZXJFdmVudHMgfSBmcm9tICdAc3JjL2xpYi9hbmFseXRpY3MnOwppbXBvcnQgeyBDYWxlbmRhckV2ZW50RGlzcGxheVNjb3BlIH0gZnJvbSAnQHNyYy9kdWNrcy9jYWxlbmRhcnMnOwp2YXIgU1RBUlRfSE9VUiA9IDA7CnZhciBFTkRfSE9VUiA9IDI0OwovLyBUT0RPKFNISU4pOiBEaXNwbGF5IGNvbmZsaWN0cy9idWZmZXIgY29uZmxpY3Qgd2hlbiBwcm9wb3NlZCB0aW1lIG92ZXJsYXBzIHdpdGggYW5vdGhlciBldmVudAovLyBOT1RFKFNISU4pOiBDdXJyZW50bHkgZXZlbnRzIGFyZSBub3QgdXBkYXRlZCBiYXNlZCBvZmYgcmVhbHRpbWUgc3luYyBzaW5jZSBvbmx5IHVwZGF0ZWQKLy8gb24gbW91bnQgYW5kIHBhZ2luYXRpb24KdmFyIENhbGVuZGFyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKENhbGVuZGFyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gQ2FsZW5kYXIocHJvcHMpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5jb252ZXJ0Q2FsZW5kYXJJbnZpdGVUb1RpbWVCbG9jayA9IGZ1bmN0aW9uIChjYWxJbnZpdGUpIHsKICAgICAgICAgICAgaWYgKCFjYWxJbnZpdGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogbW9tZW50KGNhbEludml0ZS5zdGFydCksCiAgICAgICAgICAgICAgICBlbmRUaW1lOiBtb21lbnQoY2FsSW52aXRlLmVuZCksCiAgICAgICAgICAgICAgICBldmVudDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGNhbEludml0ZS5uYW1lLAogICAgICAgICAgICAgICAgICAgIG5vdGVzOiBjYWxJbnZpdGUubm90ZXMsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IGNhbEludml0ZS5sb2NhdGlvbiwKICAgICAgICAgICAgICAgICAgICByZWNpcGllbnRzOiBjYWxJbnZpdGUucmVjaXBpZW50cy5tYXAoZnVuY3Rpb24gKHIpIHsgcmV0dXJuICh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEV2ZW50UmVjaXBpZW50VHlwZS5Db250YWN0LAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogcGFyc2VBZGRyZXNzKHIpLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIH0pOyB9KSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICAvLyBUT0RPKFNISU4pOiBWMiBJZGVudGlmeSBwcm9wZXIgY29sbGlzaW9uCiAgICAgICAgLy8gZGV0ZWN0aW9uIGZvciBkYXkgb2YgZXZlbnQuIFdhbnQgdG8gc2hvdyBpZiBSU1ZQIGNvbmZsaWN0cwogICAgICAgIF90aGlzLnByb3Bvc2VkRXZlbnRDb2xsaXNpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBwcm9wb3NlZENhbGVuZGFyRXZlbnQgPSBfYS5wcm9wb3NlZENhbGVuZGFyRXZlbnQsIGNhbGVuZGFyRXZlbnRzID0gX2EuY2FsZW5kYXJFdmVudHM7CiAgICAgICAgICAgIGlmICghcHJvcG9zZWRDYWxlbmRhckV2ZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gR2VuZXJhdGUgcHJvcG9zZWQgdGltZWMKICAgICAgICAgICAgdmFyIG1vY2tJbnZpdGUgPSBwcm9wb3NlZENhbGVuZGFyRXZlbnQgJiYgewogICAgICAgICAgICAgICAgbmFtZTogcHJvcG9zZWRDYWxlbmRhckV2ZW50Lm5hbWUsCiAgICAgICAgICAgICAgICBzdGFydDogcHJvcG9zZWRDYWxlbmRhckV2ZW50LnN0YXJ0VGltZSwKICAgICAgICAgICAgICAgIGVuZDogcHJvcG9zZWRDYWxlbmRhckV2ZW50LmVuZFRpbWUsCiAgICAgICAgICAgICAgICByZWNpcGllbnRzOiBbXSwKICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBwcm9wb3NlZENhbGVuZGFyRXZlbnQubG9jYXRpb24sCiAgICAgICAgICAgICAgICBub3RlczogJycsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBwcm9wb3NlZFRpbWVCbG9jayA9IF90aGlzLmNvbnZlcnRDYWxlbmRhckludml0ZVRvVGltZUJsb2NrKG1vY2tJbnZpdGUpOwogICAgICAgICAgICBpZiAoIXByb3Bvc2VkVGltZUJsb2NrKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGNvbGxpc2lvbiA9IGZhbHNlOwogICAgICAgICAgICAvLyBJZGVudGlmaWVzIGlmIHRoZXJlIGlzIGEgY29sbGlzaW9uIHdpdGggYW55IG9mIHRoZSBjYWxlbmRhciBldmVudHMKICAgICAgICAgICAgZmxhdHRlbihPYmplY3QudmFsdWVzKGNhbGVuZGFyRXZlbnRzKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIGlzU2FtZSA9IChwcm9wb3NlZENhbGVuZGFyRXZlbnQgPT09IG51bGwgfHwgcHJvcG9zZWRDYWxlbmRhckV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9wb3NlZENhbGVuZGFyRXZlbnQuaWQpID09PSBlLmlkOwogICAgICAgICAgICAgICAgdmFyIG92ZXJsYXBzID0gcHJvcG9zZWRDYWxlbmRhckV2ZW50LnN0YXJ0VGltZSA+PSBlLnN0YXJ0VGltZQogICAgICAgICAgICAgICAgICAgID8gZGF0ZU92ZXJsYXBzKGUsIHByb3Bvc2VkQ2FsZW5kYXJFdmVudCkKICAgICAgICAgICAgICAgICAgICA6IGRhdGVPdmVybGFwcyhwcm9wb3NlZENhbGVuZGFyRXZlbnQsIGUpOwogICAgICAgICAgICAgICAgaWYgKCFpc1NhbWUgJiYgb3ZlcmxhcHMpIHsKICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGNvbGxpc2lvbjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmdlbmVyYXRlQ2FsZW5kYXJFdmVudHMgPSBmdW5jdGlvbiAoZGF0ZVJhbmdlLCBwcm9wcywgZm9yY2VIaWRkZW5DYWxlbmRhcnMpIHsKICAgICAgICAgICAgdmFyIGV2ZW50cyA9IHt9OwogICAgICAgICAgICB2YXIgaGlkZGVuQ2FsZW5kYXJzID0gZm9yY2VIaWRkZW5DYWxlbmRhcnMgfHwgX3RoaXMuc3RhdGUuaGlkZGVuQ2FsZW5kYXJzOwogICAgICAgICAgICB2YXIgY2FsZW5kYXJFdmVudHMgPSBwcm9wcy5jYWxlbmRhckV2ZW50czsKICAgICAgICAgICAgdmFyIGFjY291bnRFdmVudHMgPSBbXTsKICAgICAgICAgICAgZm9yRWFjaChjYWxlbmRhckV2ZW50cywgZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICAgICAgYWNjb3VudEV2ZW50cyA9IGFjY291bnRFdmVudHMuY29uY2F0KHZhbCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBkYXRlUmFuZ2UuZm9yRWFjaChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgZXZlbnRzW2QuZm9ybWF0KCdNTS1ERC1ZWVlZJyldID0gZ2V0RXZlbnRzRm9yRGF0ZShkLCBhY2NvdW50RXZlbnRzLCBTVEFSVF9IT1VSLCBFTkRfSE9VUiwgaGlkZGVuQ2FsZW5kYXJzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBldmVudHM7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJGb290ZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb250cm9sLWZvb3RlciIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsICIgQ2xpY2sgb24geW91ciBjYWxlbmRhciB0byBzZWxlY3QgYSBtZWV0aW5nIHRpbWUgIiksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoS2V5Ym9hcmRTeW1ib2wsIHsgY2hhcmFjdGVyOiAiXHUyMzhCIChlc2MpIiB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgInRvIGRpc21pc3MiKSkpKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVN0YXJ0RGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChuZXdTdGFydERhdGUpIHsKICAgICAgICAgICAgdmFyIGxpc3RDYWxlbmRhckV2ZW50cyA9IF90aGlzLnByb3BzLmxpc3RDYWxlbmRhckV2ZW50czsKICAgICAgICAgICAgdmFyIHN0YXJ0RGF0ZSA9IG5ld1N0YXJ0RGF0ZS5jbG9uZSgpOwogICAgICAgICAgICB2YXIgZW5kRGF0ZSA9IG5ld1N0YXJ0RGF0ZS5jbG9uZSgpLmFkZCgxLCAnZGF5cycpOwogICAgICAgICAgICB2YXIgZGF0ZVJhbmdlID0gX3RoaXMuZ2VuZXJhdGVEYXRlUmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlKTsKICAgICAgICAgICAgbGlzdENhbGVuZGFyRXZlbnRzKHsKICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydERhdGUudG9EYXRlKCksCiAgICAgICAgICAgICAgICBlbmQ6IGVuZERhdGUudG9EYXRlKCksCiAgICAgICAgICAgICAgICBzY29wZTogQ2FsZW5kYXJFdmVudERpc3BsYXlTY29wZS5Sc2IsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZSwKICAgICAgICAgICAgICAgIGVuZERhdGU6IGVuZERhdGUsCiAgICAgICAgICAgICAgICBjYWxlbmRhckV2ZW50czogX3RoaXMuZ2VuZXJhdGVDYWxlbmRhckV2ZW50cyhkYXRlUmFuZ2UsIF90aGlzLnByb3BzKSwKICAgICAgICAgICAgICAgIGRhdGVSYW5nZTogZGF0ZVJhbmdlLAogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUV2ZW50VXBkYXRlID0gZnVuY3Rpb24gKHByb3BlcnR5LCB2YWx1ZSkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zdGF0ZSwgc2VsZWN0ZWRUaW1lQmxvY2sgPSBfYS5zZWxlY3RlZFRpbWVCbG9jaywgc3RhcnREYXRlID0gX2Euc3RhcnREYXRlLCBlbmREYXRlID0gX2EuZW5kRGF0ZTsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkVGltZUJsb2NrKSB7CiAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBzZWxlY3RlZFRpbWVCbG9jay5ldmVudDsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnRbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wZXJ0eSA9PT0gJ3JlY2lwaWVudHMnKSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnRbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRUaW1lQmxvY2s6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lOiBwcm9wZXJ0eSA9PT0gJ3N0YXJ0VGltZScgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9uZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0YXJ0T2YoJ2RheScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmlzU2FtZU9yQmVmb3JlKHZhbHVlKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9uZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVuZE9mKCdkYXknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pc1NhbWVPckFmdGVyKHZhbHVlKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRUaW1lQmxvY2suZW5kVGltZS5pc0FmdGVyKHZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB2YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxlY3RlZFRpbWVCbG9jay5zdGFydFRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWU6IHByb3BlcnR5ID09PSAnZW5kVGltZScgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9uZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0YXJ0T2YoJ2RheScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmlzU2FtZU9yQmVmb3JlKHZhbHVlKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9uZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVuZE9mKCdkYXknKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pc1NhbWVPckFmdGVyKHZhbHVlKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRUaW1lQmxvY2suc3RhcnRUaW1lLmlzQmVmb3JlKHZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB2YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxlY3RlZFRpbWVCbG9jay5lbmRUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudDogZXZlbnQsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBZGQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5zdGF0ZS5zZWxlY3RlZFRpbWVCbG9jaykgewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zdGF0ZS5zZWxlY3RlZFRpbWVCbG9jayk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNhbGVuZGFyQ2xpY2sgPSBmdW5jdGlvbiAoY2FsZW5kYXIpIHsKICAgICAgICAgICAgdmFyIHRvZ2dsZUNhbGVuZGFySGlkZSA9IF90aGlzLnByb3BzLnRvZ2dsZUNhbGVuZGFySGlkZTsKICAgICAgICAgICAgdG9nZ2xlQ2FsZW5kYXJIaWRlKGNhbGVuZGFyKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUlucHV0UmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5pbnB1dCA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZU9wZW5DYWxlbmRhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG9wZW5DYWxlbmRhciA9IF90aGlzLnByb3BzLm9wZW5DYWxlbmRhcjsKICAgICAgICAgICAgb3BlbkNhbGVuZGFyKCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5yZW5kZXJNYWluID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgcHJvcG9zZWRDYWxlbmRhckV2ZW50ID0gX3RoaXMucHJvcHMucHJvcG9zZWRDYWxlbmRhckV2ZW50OwogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5zdGF0ZSwgc3RhcnREYXRlID0gX2Euc3RhcnREYXRlLCBlbmREYXRlID0gX2EuZW5kRGF0ZSwgaGlkZGVuQ2FsZW5kYXJzID0gX2EuaGlkZGVuQ2FsZW5kYXJzLCBjb2x1bW5XaWR0aCA9IF9hLmNvbHVtbldpZHRoLCBjYWxlbmRhckV2ZW50cyA9IF9hLmNhbGVuZGFyRXZlbnRzLCBkYXRlUmFuZ2UgPSBfYS5kYXRlUmFuZ2U7CiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHByb3Bvc2VkIHRpbWUKICAgICAgICAgICAgdmFyIG1vY2tJbnZpdGUgPSBwcm9wb3NlZENhbGVuZGFyRXZlbnQgJiYgewogICAgICAgICAgICAgICAgbmFtZTogcHJvcG9zZWRDYWxlbmRhckV2ZW50Lm5hbWUsCiAgICAgICAgICAgICAgICBzdGFydDogcHJvcG9zZWRDYWxlbmRhckV2ZW50LnN0YXJ0VGltZSwKICAgICAgICAgICAgICAgIGVuZDogcHJvcG9zZWRDYWxlbmRhckV2ZW50LmVuZFRpbWUsCiAgICAgICAgICAgICAgICByZWNpcGllbnRzOiBbXSwKICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBwcm9wb3NlZENhbGVuZGFyRXZlbnQubG9jYXRpb24sCiAgICAgICAgICAgICAgICBub3RlczogJycsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBwcm9wb3NlZFRpbWVCbG9jayA9IF90aGlzLmNvbnZlcnRDYWxlbmRhckludml0ZVRvVGltZUJsb2NrKG1vY2tJbnZpdGUpOwogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibWFpbiIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAicmlnaHQiLCByZWY6IF90aGlzLmhhbmRsZUNhbGVuZGFyTm9kZVJlZiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2FsZW5kYXJIZWFkZXIsIHsgc3RhcnREYXRlOiBzdGFydERhdGUsIGVuZERhdGU6IGVuZERhdGUsIG9uU3RhcnREYXRlQ2hhbmdlOiBfdGhpcy5oYW5kbGVTdGFydERhdGVDaGFuZ2UsIGNvbHVtbldpZHRoOiBjb2x1bW5XaWR0aCwgZGF0ZVJhbmdlOiBkYXRlUmFuZ2UsIGV2ZW50czogY2FsZW5kYXJFdmVudHMsIG9uT3BlbkNhbGVuZGFyOiBfdGhpcy5oYW5kbGVPcGVuQ2FsZW5kYXIsIHNpbmdsZURheTogdHJ1ZSB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE11bHRpRGF5VmlldywgeyBzdGFydERhdGU6IHN0YXJ0RGF0ZSwgZW5kRGF0ZTogZW5kRGF0ZSwgc3RhcnRIb3VyOiBNYXRoLm1pbihzdGFydERhdGUuaG91cigpLCBTVEFSVF9IT1VSKSwgZW5kSG91cjogRU5EX0hPVVIsIHNlbGVjdGVkVGltZUJsb2NrOiBwcm9wb3NlZFRpbWVCbG9jaywgaGlkZGVuQ2FsZW5kYXJzOiBoaWRkZW5DYWxlbmRhcnMsIGNvbHVtbldpZHRoOiBjb2x1bW5XaWR0aCwgZGF0ZVJhbmdlOiBkYXRlUmFuZ2UsIGV2ZW50czogY2FsZW5kYXJFdmVudHMsIHNpbmdsZURheTogdHJ1ZSwgcmVhZE9ubHk6IHRydWUgfSkpKSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDYWxlbmRhck5vZGVSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLmNhbGVuZGFyTm9kZSA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmdlbmVyYXRlRGF0ZVJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0RGF0ZSwgZW5kRGF0ZSkgewogICAgICAgICAgICB2YXIgc3RhcnQgPSBzdGFydERhdGUuY2xvbmUoKS5zdGFydE9mKCdkYXknKTsKICAgICAgICAgICAgdmFyIGVuZCA9IHN0YXJ0RGF0ZS5jbG9uZSgpLmVuZE9mKCdkYXknKTsKICAgICAgICAgICAgdmFyIGRhdGVSYW5nZSA9IFtdOwogICAgICAgICAgICB3aGlsZSAoc3RhcnQuaXNTYW1lT3JCZWZvcmUoZW5kKSkgewogICAgICAgICAgICAgICAgZGF0ZVJhbmdlLnB1c2goc3RhcnQuY2xvbmUoKSk7CiAgICAgICAgICAgICAgICBzdGFydC5hZGQoMSwgJ2RheScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBkYXRlUmFuZ2U7CiAgICAgICAgfTsKICAgICAgICB2YXIgc3RhcnREYXRlID0gcHJvcHMucHJvcG9zZWRDYWxlbmRhckV2ZW50ID8KICAgICAgICAgICAgbW9tZW50KHByb3BzLnByb3Bvc2VkQ2FsZW5kYXJFdmVudC5zdGFydFRpbWUpIDogbW9tZW50KCkuc3RhcnRPZignZGF5Jyk7CiAgICAgICAgdmFyIGVuZERhdGUgPSBzdGFydERhdGUuY2xvbmUoKS5hZGQoMSwgJ2RheXMnKTsKICAgICAgICB2YXIgZGF0ZVJhbmdlID0gX3RoaXMuZ2VuZXJhdGVEYXRlUmFuZ2Uoc3RhcnREYXRlLCBlbmREYXRlKTsKICAgICAgICB2YXIgY2FsZW5kYXJzID0gcHJvcHMuYWNjb3VudCA/IHByb3BzLmNhbGVuZGFyc1twcm9wcy5hY2NvdW50XSA6CiAgICAgICAgICAgIGZsYXR0ZW4obWFwKHByb3BzLmNhbGVuZGFycywgZnVuY3Rpb24gKGMpIHsgcmV0dXJuIGM7IH0pKTsKICAgICAgICB2YXIgaGlkZGVuQ2FsZW5kYXJzID0gY2FsZW5kYXJzID8gY2FsZW5kYXJzLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5oaWRkZW47IH0pLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5pZDsgfSkgOiBbXTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUsCiAgICAgICAgICAgIGVuZERhdGU6IGVuZERhdGUsCiAgICAgICAgICAgIGhpZGRlbkNhbGVuZGFyczogaGlkZGVuQ2FsZW5kYXJzLAogICAgICAgICAgICBjYWxlbmRhckV2ZW50czogX3RoaXMuZ2VuZXJhdGVDYWxlbmRhckV2ZW50cyhkYXRlUmFuZ2UsIHByb3BzLCBoaWRkZW5DYWxlbmRhcnMpLAogICAgICAgICAgICBjb2x1bW5XaWR0aDogMjQwLAogICAgICAgICAgICB3aW5kb3dXaWR0aDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgICAgICAgIHdpbmRvd0hlaWdodDogd2luZG93LmlubmVySGVpZ2h0LAogICAgICAgICAgICBkYXRlUmFuZ2U6IGRhdGVSYW5nZSwKICAgICAgICAgICAgY2FsZW5kYXJzOiBjYWxlbmRhcnMsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBDYWxlbmRhci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBsaXN0Q2FsZW5kYXJzID0gX2EubGlzdENhbGVuZGFycywgYWNjb3VudCA9IF9hLmFjY291bnQsIGxpc3RDYWxlbmRhckV2ZW50cyA9IF9hLmxpc3RDYWxlbmRhckV2ZW50czsKICAgICAgICB2YXIgX2IgPSB0aGlzLnN0YXRlLCBzdGFydERhdGUgPSBfYi5zdGFydERhdGUsIGVuZERhdGUgPSBfYi5lbmREYXRlOwogICAgICAgIC8vIEFsd2F5cyBmZXRjaCBjYWxlbmRhcnMgb24gbW91bnQKICAgICAgICBsaXN0Q2FsZW5kYXJzKGFjY291bnQpOwogICAgICAgIGxpc3RDYWxlbmRhckV2ZW50cyh7CiAgICAgICAgICAgIHN0YXJ0OiBzdGFydERhdGUudG9EYXRlKCksCiAgICAgICAgICAgIGVuZDogZW5kRGF0ZS50b0RhdGUoKSwKICAgICAgICAgICAgc2NvcGU6IENhbGVuZGFyRXZlbnREaXNwbGF5U2NvcGUuUnNiLAogICAgICAgIH0pOwogICAgICAgIC8vIFRyYWNrIENhbGVuZGFyIE9wZW4KICAgICAgICByZWNvcmRFdmVudChVc2VyRXZlbnRzLkNhbGVuZGFyU2lkZWJhclZpZXdlZCk7CiAgICAgICAgdGhpcy50aW1lb3V0ID0gZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbm9kZSA9IF90aGlzLmNhbGVuZGFyTm9kZSAmJgogICAgICAgICAgICAgICAgX3RoaXMuY2FsZW5kYXJOb2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NlbGVjdGVkLWV2ZW50JylbMF07CiAgICAgICAgICAgIGlmIChub2RlKSB7CiAgICAgICAgICAgICAgICBub2RlLnNjcm9sbEludG9WaWV3KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKF90aGlzLmlucHV0KSB7CiAgICAgICAgICAgICAgICBfdGhpcy5pbnB1dC5mb2N1cygpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMCk7CiAgICB9OwogICAgQ2FsZW5kYXIucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLnRpbWVvdXQpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7CiAgICAgICAgfQogICAgfTsKICAgIENhbGVuZGFyLnByb3RvdHlwZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIChuZXh0UHJvcHMpIHsKICAgICAgICB2YXIgbmV3U3RhdGUgPSB7fTsKICAgICAgICB2YXIgZGF0ZVJhbmdlID0gdGhpcy5zdGF0ZS5kYXRlUmFuZ2U7CiAgICAgICAgdmFyIHByb3Bvc2VkQ2FsZW5kYXJFdmVudCA9IHRoaXMucHJvcHMucHJvcG9zZWRDYWxlbmRhckV2ZW50OwogICAgICAgIHZhciBuZXh0UHJvcG9zZWRDYWxlbmRhckV2ZW50ID0gbmV4dFByb3BzLnByb3Bvc2VkQ2FsZW5kYXJFdmVudDsKICAgICAgICBpZiAobmV4dFByb3BzLmNhbGVuZGFycyAmJiBuZXh0UHJvcHMuY2FsZW5kYXJzICE9PSB0aGlzLnByb3BzLmNhbGVuZGFycykgewogICAgICAgICAgICB2YXIgY2FsZW5kYXJzID0gdm9pZCAwOwogICAgICAgICAgICBpZiAobmV4dFByb3BzLmFjY291bnQpIHsKICAgICAgICAgICAgICAgIGNhbGVuZGFycyA9IG5leHRQcm9wcy5jYWxlbmRhcnNbbmV4dFByb3BzLmFjY291bnRdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY2FsZW5kYXJzID0gT2JqZWN0LmtleXMobmV4dFByb3BzLmNhbGVuZGFycykubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgPyBmbGF0dGVuKG1hcChuZXh0UHJvcHMuY2FsZW5kYXJzLCBmdW5jdGlvbiAoYykgeyByZXR1cm4gYzsgfSkpCiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV3U3RhdGUuY2FsZW5kYXJzID0gY2FsZW5kYXJzOwogICAgICAgICAgICBuZXdTdGF0ZS5oaWRkZW5DYWxlbmRhcnMgPSBjYWxlbmRhcnMgPwogICAgICAgICAgICAgICAgY2FsZW5kYXJzLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gISFjLmhpZGRlbjsgfSkubWFwKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmlkOyB9KSA6IHVuZGVmaW5lZDsKICAgICAgICB9CiAgICAgICAgaWYgKChuZXh0UHJvcHMuY2FsZW5kYXJFdmVudHMgJiYgdGhpcy5wcm9wcy5jYWxlbmRhckV2ZW50cyAhPT0gbmV4dFByb3BzLmNhbGVuZGFyRXZlbnRzKSB8fAogICAgICAgICAgICBuZXdTdGF0ZS5oaWRkZW5DYWxlbmRhcnMpIHsKICAgICAgICAgICAgbmV3U3RhdGUuY2FsZW5kYXJFdmVudHMgPSB0aGlzLmdlbmVyYXRlQ2FsZW5kYXJFdmVudHMoZGF0ZVJhbmdlLCBuZXh0UHJvcHMsIG5ld1N0YXRlLmhpZGRlbkNhbGVuZGFycyk7CiAgICAgICAgfQogICAgICAgIC8vIElmIG9wZW5pbmcgYSBwcm9wb3NlZCBjYWxlbmRhciBldmVudCwgc2V0IHRvIGNhbGVuZGFyIGV2ZW50IGRhdGUKICAgICAgICBpZiAoISFuZXh0UHJvcG9zZWRDYWxlbmRhckV2ZW50ICYmICFwcm9wb3NlZENhbGVuZGFyRXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVTdGFydERhdGVDaGFuZ2UobW9tZW50KG5leHRQcm9wb3NlZENhbGVuZGFyRXZlbnQuc3RhcnRUaW1lKSk7CiAgICAgICAgfQogICAgICAgIC8vIElmIG1vdmluZyBhd2F5IGZyb20gUlNWUCwgc2V0IGJhY2sgdG8gY3VycmVudCBkYXkKICAgICAgICBpZiAoIW5leHRQcm9wb3NlZENhbGVuZGFyRXZlbnQgJiYgISFwcm9wb3NlZENhbGVuZGFyRXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVTdGFydERhdGVDaGFuZ2Uobm93KCkpOwogICAgICAgIH0KICAgICAgICBpZiAoIWlzRW1wdHkobmV3U3RhdGUpKSB7CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpOwogICAgICAgIH0KICAgIH07CiAgICBDYWxlbmRhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjYWxlbmRhci1zaWRlYmFyIiB9LAogICAgICAgICAgICB0aGlzLnJlbmRlck1haW4oKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChIb3ZlclRpcCwgeyBjbGFzc05hbWU6ICJvcGVuLWNhbGVuZGFyLWJ1dHRvbiIsIHRvcDogIi0zNXB4IiwgbGVmdDogIi01cHgiLCBob3RrZXlBY3Rpb246IEhvdGtleUFjdGlvbi5PcGVuQ2FsZW5kYXIsIG11bHRpbGluZTogdHJ1ZSwgYW5jaG9yQm90dG9tOiB0cnVlIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlT3BlbkNhbGVuZGFyIH0sICJTaG93IEZ1bGwgQ2FsZW5kYXIiKSkpKTsKICAgIH07CiAgICByZXR1cm4gQ2FsZW5kYXI7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBDYWxlbmRhcjsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Calendar/Calendar.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/RightSidebar/components/Calendar/Calendar.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment, { Moment } from 'moment';\n\nimport {\n  TimeBlock,\n  Event as EventType,\n  Thread,\n  EventRecipientType,\n  EventRecipient,\n  DraftCalendarInvite,\n  Calendar as CalendarType,\n  CalendarEvent,\n} from '@src/types';\n// import CalendarIcon from '@src/components/Icons/Calendar.svg';\n\nimport './Calendar.scss';\nimport { parseAddress } from '@src/lib/address';\nimport { isEmpty, map, flatten, forEach } from 'lodash';\nimport { getEventsForDate } from '@src/lib/event';\nimport KeyboardSymbol from '@src/components/Base/KeyboardSymbol/KeyboardSymbol';\nimport CalendarHeader from '@src/components/CommandControl/components/Calendar/components/CalendarHeader/CalendarHeader';\nimport MultiDayView from '@src/components/CommandControl/components/Calendar/components/MultiDayView/MultiDayView';\nimport HoverTip from '@src/components/Base/HoverTip';\nimport { HotkeyAction } from '@src/lib/hotkeys';\nimport { dateOverlaps } from '@src/lib/models/calendarEvents';\nimport { now } from '@src/lib/datetime';\nimport { recordEvent, UserEvents } from '@src/lib/analytics';\nimport { CalendarEventRangeMeta, CalendarEventDisplayScope } from '@src/ducks/calendars';\n\nexport interface StateProps {\n  selectedThread?: Thread;\n  account?: string;\n  calendars: {\n    [account: string]: CalendarType[];\n  };\n  calendarEvents: {\n    [account: string]: CalendarEvent[];\n  };\n  proposedCalendarEvent?: CalendarEvent;\n}\n\nexport interface DispatchProps {\n  listCalendars: (accounts?: string) => void;\n  toggleCalendarHide: (calendar: string) => void;\n  openCalendar: () => void;\n  listCalendarEvents: (range: CalendarEventRangeMeta) => void;\n}\n\ninterface State {\n  startDate: Moment;\n  endDate: Moment;\n  selectedTimeBlock?: TimeBlock;\n  hiddenCalendars: string[];\n  calendarEvents: { [date: string]: CalendarEvent[] };\n  calendars?: CalendarType[];\n  columnWidth: number;\n  windowWidth: number;\n  windowHeight: number;\n  dateRange: Moment[];\n}\n\nconst START_HOUR = 0;\nconst END_HOUR = 24;\n\n// TODO(SHIN): Display conflicts/buffer conflict when proposed time overlaps with another event\n// NOTE(SHIN): Currently events are not updated based off realtime sync since only updated\n// on mount and pagination\nclass Calendar extends React.PureComponent<StateProps & DispatchProps, State> {\n  private input: HTMLInputElement;\n  private timeout: NodeJS.Timer;\n  private calendarNode: HTMLDivElement;\n\n  constructor(props: StateProps & DispatchProps) {\n    super(props);\n\n    const startDate = props.proposedCalendarEvent ?\n      moment(props.proposedCalendarEvent.startTime) : moment().startOf('day');\n    const endDate = startDate.clone().add(1, 'days');\n    const dateRange = this.generateDateRange(startDate, endDate);\n    const calendars = props.account ? props.calendars[props.account] :\n      flatten(map(props.calendars, c => c));\n    const hiddenCalendars = calendars ? calendars.filter(c => c.hidden).map(c => c.id) : [];\n\n    this.state = {\n      startDate,\n      endDate,\n      hiddenCalendars,\n      calendarEvents: this.generateCalendarEvents(dateRange, props, hiddenCalendars),\n      columnWidth: 240,\n      windowWidth: window.innerWidth,\n      windowHeight: window.innerHeight,\n      dateRange,\n      calendars,\n    };\n  }\n\n  componentDidMount() {\n    const { listCalendars, account, listCalendarEvents } = this.props;\n    const { startDate, endDate }  = this.state;\n\n    // Always fetch calendars on mount\n    listCalendars(account);\n\n    listCalendarEvents({\n      start: startDate.toDate(),\n      end: endDate.toDate(),\n      scope: CalendarEventDisplayScope.Rsb,\n    });\n\n    // Track Calendar Open\n    recordEvent(UserEvents.CalendarSidebarViewed);\n\n    this.timeout = global.setTimeout(\n      () => {\n        const node = this.calendarNode &&\n          this.calendarNode.getElementsByClassName('selected-event')[0];\n        if (node) {\n          node.scrollIntoView();\n        }\n\n        if (this.input) {\n          this.input.focus();\n        }\n      },\n      0,\n    );\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: StateProps & DispatchProps) {\n    const newState: any = {};\n    const { dateRange } = this.state;\n    const { proposedCalendarEvent } = this.props;\n    const nextProposedCalendarEvent = nextProps.proposedCalendarEvent;\n\n    if (nextProps.calendars && nextProps.calendars !== this.props.calendars) {\n      let calendars;\n      if (nextProps.account) {\n        calendars = nextProps.calendars[nextProps.account];\n      } else {\n        calendars = Object.keys(nextProps.calendars).length\n          ? flatten(map(nextProps.calendars, c => c))\n          : undefined;\n      }\n      newState.calendars = calendars;\n      newState.hiddenCalendars = calendars ?\n        calendars.filter(c => !!c.hidden).map(c => c.id) : undefined;\n    }\n\n    if ((nextProps.calendarEvents && this.props.calendarEvents !== nextProps.calendarEvents) ||\n      newState.hiddenCalendars) {\n      newState.calendarEvents = this.generateCalendarEvents(\n        dateRange,\n        nextProps,\n        newState.hiddenCalendars,\n      );\n    }\n\n    // If opening a proposed calendar event, set to calendar event date\n    if (!!nextProposedCalendarEvent && !proposedCalendarEvent) {\n      this.handleStartDateChange(moment(nextProposedCalendarEvent.startTime));\n    }\n\n    // If moving away from RSVP, set back to current day\n    if (!nextProposedCalendarEvent && !!proposedCalendarEvent) {\n      this.handleStartDateChange(now());\n    }\n\n    if (!isEmpty(newState)) {\n      this.setState(newState);\n    }\n  }\n\n  convertCalendarInviteToTimeBlock = (\n    calInvite?: DraftCalendarInvite | null,\n  ): TimeBlock | undefined => {\n    if (!calInvite) {\n      return undefined;\n    }\n\n    return {\n      startTime: moment(calInvite.start),\n      endTime: moment(calInvite.end),\n      event: {\n        name: calInvite.name,\n        notes: calInvite.notes,\n        location: calInvite.location,\n        recipients: calInvite.recipients.map(r => ({\n          type: EventRecipientType.Contact,\n          displayName: r,\n          identifier: parseAddress(r).email,\n        })),\n      },\n    };\n  }\n\n  // TODO(SHIN): V2 Identify proper collision\n  // detection for day of event. Want to show if RSVP conflicts\n  proposedEventCollision = () => {\n    const { proposedCalendarEvent, calendarEvents } = this.props;\n\n    if (!proposedCalendarEvent) {\n      return false;\n    }\n\n    // Generate proposed timec\n    const mockInvite = proposedCalendarEvent && {\n      name: proposedCalendarEvent.name,\n      start: proposedCalendarEvent.startTime,\n      end: proposedCalendarEvent.endTime,\n      recipients: [],\n      location: proposedCalendarEvent.location,\n      notes: '',\n    };\n\n    const proposedTimeBlock = this.convertCalendarInviteToTimeBlock(mockInvite);\n    if (!proposedTimeBlock) {\n      return false;\n    }\n\n    let collision = false;\n\n    // Identifies if there is a collision with any of the calendar events\n    flatten(Object.values(calendarEvents)).forEach((e) => {\n      const isSame = proposedCalendarEvent?.id === e.id;\n      const overlaps = proposedCalendarEvent.startTime >= e.startTime\n        ? dateOverlaps(e, proposedCalendarEvent)\n        : dateOverlaps(proposedCalendarEvent, e);\n\n      if (!isSame && overlaps) {\n        collision = true;\n      }\n\n      return false;\n    });\n\n    return collision;\n  }\n\n  generateCalendarEvents = (\n    dateRange: Moment[],\n    props: StateProps & DispatchProps,\n    forceHiddenCalendars?: string[],\n  ) => {\n    const events = {};\n    const hiddenCalendars = forceHiddenCalendars || this.state.hiddenCalendars;\n    const { calendarEvents } = props;\n\n    let accountEvents: CalendarEvent[] = [];\n    forEach(calendarEvents, (val: CalendarEvent[]) => {\n      accountEvents = accountEvents.concat(val);\n    });\n\n    dateRange.forEach((d) => {\n      events[d.format('MM-DD-YYYY')] = getEventsForDate(\n        d,\n        accountEvents,\n        START_HOUR,\n        END_HOUR,\n        hiddenCalendars,\n      );\n    });\n\n    return events;\n  }\n\n  renderFooter = () => {\n    return (\n      <div className=\"control-footer\">\n        <div> Click on your calendar to select a meeting time </div>\n        <div>\n          <KeyboardSymbol\n            character=\"âŽ‹ (esc)\"\n          />\n          <span>to dismiss</span>\n        </div>\n      </div>\n    );\n  }\n\n  handleStartDateChange = (newStartDate: Moment) => {\n    const { listCalendarEvents } = this.props;\n    const startDate = newStartDate.clone();\n    const endDate = newStartDate.clone().add(1, 'days');\n    const dateRange = this.generateDateRange(startDate, endDate);\n\n    listCalendarEvents({\n      start: startDate.toDate(),\n      end: endDate.toDate(),\n      scope: CalendarEventDisplayScope.Rsb,\n    });\n\n    this.setState({\n      startDate,\n      endDate,\n      calendarEvents: this.generateCalendarEvents(dateRange, this.props),\n      dateRange,\n    });\n  }\n\n  handleEventUpdate = (property: string, value: string | Moment | EventRecipient[]) => {\n    const { selectedTimeBlock, startDate, endDate } = this.state;\n    if (selectedTimeBlock) {\n      const event: EventType = selectedTimeBlock.event;\n\n      if (typeof value === 'string') {\n        event[property] = value;\n      } else if (property === 'recipients') {\n        event[property] = value as EventRecipient[];\n      }\n\n      this.setState({\n        selectedTimeBlock: {\n          startTime:\n            property === 'startTime' &&\n              startDate\n                .clone()\n                .startOf('day')\n                .isSameOrBefore(value as Moment) &&\n              endDate\n                .clone()\n                .endOf('day')\n                .isSameOrAfter(value as Moment) &&\n              selectedTimeBlock.endTime.isAfter(value as Moment)\n              ? (value as Moment)\n              : selectedTimeBlock.startTime,\n          endTime:\n            property === 'endTime' &&\n              startDate\n                .clone()\n                .startOf('day')\n                .isSameOrBefore(value as Moment) &&\n              endDate\n                .clone()\n                .endOf('day')\n                .isSameOrAfter(value as Moment) &&\n              selectedTimeBlock.startTime.isBefore(value as Moment)\n              ? (value as Moment)\n              : selectedTimeBlock.endTime,\n          event,\n        },\n      });\n    }\n  }\n\n  handleAdd = () => {\n    if (this.state.selectedTimeBlock) {\n      // console.log(this.state.selectedTimeBlock);\n    }\n  }\n\n  handleCalendarClick = (calendar: string) => {\n    const { toggleCalendarHide } = this.props;\n\n    toggleCalendarHide(calendar);\n  }\n\n  handleInputRef = (ref: HTMLInputElement) => {\n    this.input = ref;\n  }\n\n  handleOpenCalendar = () => {\n    const { openCalendar } = this.props;\n    openCalendar();\n  }\n\n  renderMain = () => {\n    const { proposedCalendarEvent } = this.props;\n    const {\n      startDate,\n      endDate,\n      hiddenCalendars,\n      columnWidth,\n      calendarEvents,\n      dateRange,\n    } = this.state;\n\n    // Generate proposed time\n    const mockInvite = proposedCalendarEvent && {\n      name: proposedCalendarEvent.name,\n      start: proposedCalendarEvent.startTime,\n      end: proposedCalendarEvent.endTime,\n      recipients: [],\n      location: proposedCalendarEvent.location,\n      notes: '',\n    };\n\n    const proposedTimeBlock = this.convertCalendarInviteToTimeBlock(mockInvite);\n    return (\n      <div className=\"main\">\n        <div className=\"right\" ref={this.handleCalendarNodeRef}>\n          <CalendarHeader\n            startDate={startDate}\n            endDate={endDate}\n            onStartDateChange={this.handleStartDateChange}\n            columnWidth={columnWidth}\n            dateRange={dateRange}\n            events={calendarEvents}\n            onOpenCalendar={this.handleOpenCalendar}\n            singleDay\n          />\n          <MultiDayView\n            startDate={startDate}\n            endDate={endDate}\n            startHour={Math.min(startDate.hour(), START_HOUR)}\n            endHour={END_HOUR}\n            selectedTimeBlock={proposedTimeBlock}\n            hiddenCalendars={hiddenCalendars}\n            columnWidth={columnWidth}\n            dateRange={dateRange}\n            events={calendarEvents}\n            singleDay\n            readOnly\n          />\n        </div>\n      </div>\n    );\n  }\n\n  handleCalendarNodeRef = (ref: HTMLDivElement) => {\n    this.calendarNode = ref;\n  }\n\n  generateDateRange = (startDate: Moment, endDate: Moment) => {\n    const start = startDate.clone().startOf('day');\n    const end = startDate.clone().endOf('day');\n    const dateRange = [];\n\n    while (start.isSameOrBefore(end)) {\n      dateRange.push(start.clone());\n      start.add(1, 'day');\n    }\n\n    return dateRange;\n  }\n\n  render() {\n    return (\n      <div className=\"calendar-sidebar\">\n        {this.renderMain()}\n        <HoverTip\n          className=\"open-calendar-button\"\n          top=\"-35px\"\n          left=\"-5px\"\n          hotkeyAction={HotkeyAction.OpenCalendar}\n          multiline\n          anchorBottom\n        >\n          <button\n            onClick={this.handleOpenCalendar}\n          >\n            Show Full Calendar\n          </button>\n        </HoverTip>\n      </div>\n    );\n  }\n}\n\nexport default Calendar;\n"]}]}