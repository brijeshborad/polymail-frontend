{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/BillingDataProvider.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/BillingDataProvider.tsx","mtime":1675280254098},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWFjdC1yZWR1eCc7CmltcG9ydCB7IFJlc291cmNlU3RhdHVzIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCB7IGJpbGxpbmdGZXRjaCB9IGZyb20gJ0BzcmMvZHVja3MvYmlsbGluZyc7CmltcG9ydCBicm93c2VySGlzdG9yeSBmcm9tICdAc3JjL2xpYi9icm93c2VySGlzdG9yeSc7CmltcG9ydCB7IEFtcGxpdHVkZUV2ZW50cywgbG9nQW1wbGl0dWRlRXZlbnQgfSBmcm9tICdAc3JjL2xpYi9hbXBsaXR1ZGUtYW5hbHl0aWNzJzsKdmFyIEJpbGxpbmdEYXRhUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoQmlsbGluZ0RhdGFQcm92aWRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEJpbGxpbmdEYXRhUHJvdmlkZXIoKSB7CiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgfQogICAgQmlsbGluZ0RhdGFQcm92aWRlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5mZXRjaElmTmVlZGVkKHRydWUpOwogICAgICAgIGlmIChicm93c2VySGlzdG9yeS5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9zZXR0aW5ncy9iaWxsaW5nJykgewogICAgICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuVmlld1BsYW5zKTsKICAgICAgICB9CiAgICB9OwogICAgQmlsbGluZ0RhdGFQcm92aWRlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuZmV0Y2hJZk5lZWRlZCgpOwogICAgfTsKICAgIEJpbGxpbmdEYXRhUHJvdmlkZXIucHJvdG90eXBlLmZldGNoSWZOZWVkZWQgPSBmdW5jdGlvbiAoZm9yY2UpIHsKICAgICAgICBpZiAoZm9yY2UgPT09IHZvaWQgMCkgeyBmb3JjZSA9IGZhbHNlOyB9CiAgICAgICAgaWYgKGZvcmNlIHx8IHRoaXMucHJvcHMuc3RhdHVzID09PSBSZXNvdXJjZVN0YXR1cy5QZW5kaW5nKSB7CiAgICAgICAgICAgIHRoaXMucHJvcHMuZmV0Y2goKTsKICAgICAgICB9CiAgICB9OwogICAgQmlsbGluZ0RhdGFQcm92aWRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuOwogICAgfTsKICAgIHJldHVybiBCaWxsaW5nRGF0YVByb3ZpZGVyOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKdmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gKHsKICAgIHN0YXR1czogc3RhdGUuYmlsbGluZy5yZXNvdXJjZS5zdGF0dXMsCn0pOyB9Owp2YXIgbWFwRGlzcGF0Y2hUb1Byb3BzID0gZnVuY3Rpb24gKGRpc3BhdGNoKSB7IHJldHVybiAoewogICAgZmV0Y2g6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRpc3BhdGNoKGJpbGxpbmdGZXRjaChudWxsKSk7IH0sCn0pOyB9OwpleHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShCaWxsaW5nRGF0YVByb3ZpZGVyKTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/BillingDataProvider.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/components/BillingDataProvider.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,OAAO,EAAE,MAAM,aAAa,CAAC;AAGtC,OAAO,EAAc,cAAc,EAAE,MAAM,YAAY,CAAC;AACxD,OAAO,EAAE,YAAY,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,cAAc,MAAM,yBAAyB,CAAC;AACrD,OAAO,EAAE,eAAe,EAAE,iBAAiB,EAAE,MAAM,8BAA8B,CAAC;AAclF;IAAkC,uCAAuD;IAAzF;;IAqBA,CAAC;IApBC,+CAAiB,GAAjB;QACE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACzB,IAAI,cAAc,CAAC,QAAQ,CAAC,QAAQ,KAAK,mBAAmB,EAAE;YAC5D,iBAAiB,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;SAC9C;IACH,CAAC;IAED,gDAAkB,GAAlB;QACE,IAAI,CAAC,aAAa,EAAE,CAAC;IACvB,CAAC;IAED,2CAAa,GAAb,UAAc,KAAsB;QAAtB,sBAAA,EAAA,aAAsB;QAClC,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,cAAc,CAAC,OAAO,EAAE;YACzD,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;SACpB;IACH,CAAC;IAED,oCAAM,GAAN;QACE,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;IAC7B,CAAC;IACH,0BAAC;AAAD,CAAC,AArBD,CAAkC,KAAK,CAAC,aAAa,GAqBpD;AAED,IAAM,eAAe,GAAG,UAAC,KAAiB,IAAiB,OAAA,CAAC;IAC1D,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM;CACtC,CAAC,EAFyD,CAEzD,CAAC;AAEH,IAAM,kBAAkB,GAAG,UAAC,QAA8B,IAAoB,OAAA,CAAC;IAC7E,KAAK,EAAE,cAAM,OAAA,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,EAA5B,CAA4B;CAC1C,CAAC,EAF4E,CAE5E,CAAC;AAEH,eAAe,OAAO,CAAC,eAAe,EAAE,kBAAkB,CAAC,CAAC,mBAAmB,CAAC,CAAC","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\n\nimport { StoreState, ResourceStatus } from '@src/types';\nimport { billingFetch } from '@src/ducks/billing';\nimport browserHistory from '@src/lib/browserHistory';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\ninterface StateProps {\n  status: ResourceStatus;\n}\n\ninterface Props {\n  children: any;\n}\n\ninterface DispatchProps {\n  fetch(): void;\n}\n\nclass BillingDataProvider extends React.PureComponent<Props & StateProps & DispatchProps> {\n  componentDidMount() {\n    this.fetchIfNeeded(true);\n    if (browserHistory.location.pathname === '/settings/billing') {\n      logAmplitudeEvent(AmplitudeEvents.ViewPlans);\n    }\n  }\n\n  componentDidUpdate() {\n    this.fetchIfNeeded();\n  }\n\n  fetchIfNeeded(force: boolean = false) {\n    if (force || this.props.status === ResourceStatus.Pending) {\n      this.props.fetch();\n    }\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\nconst mapStateToProps = (state: StoreState): StateProps => ({\n  status: state.billing.resource.status,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch<StoreState>): DispatchProps => ({\n  fetch: () => dispatch(billingFetch(null)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BillingDataProvider);\n"]}]}