{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/components/ShareToSlack/ShareToSlack.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/components/ShareToSlack/ShareToSlack.tsx","mtime":1675280254043},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgJy4vU2hhcmVUb1NsYWNrLnNjc3MnOwppbXBvcnQgTG9hZGVyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9Mb2FkZXIvTG9hZGVyJzsKaW1wb3J0IFNsYWNrU2hhcmVEcm9wZG93biwgeyBTZWxlY3Rpb25UeXBlLCB9IGZyb20gJy4vY29tcG9uZW50cy9TbGFja1NoYXJlRHJvcGRvd24vU2xhY2tTaGFyZURyb3Bkb3duJzsKaW1wb3J0IFNsYWNrTG9nbyBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvU2xhY2suc3ZnJzsKaW1wb3J0IHsgS2V5Q29kZSB9IGZyb20gJ0BzcmMvdHlwZXMnOwppbXBvcnQgR3JlZW5DaGVjayBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvR3JlZW5DaGVjay5zdmcnOwppbXBvcnQgU2xhY2tNZXNzYWdlRWRpdG9yIGZyb20gJy4vY29tcG9uZW50cy9TbGFja01lc3NhZ2VFZGl0b3IvU2xhY2tNZXNzYWdlRWRpdG9yJzsKaW1wb3J0IHsgaXNQcmltYXJ5TW9kaWZpZXJLZXkgfSBmcm9tICdAc3JjL2xpYi9ob3RrZXlzJzsKaW1wb3J0IHsgQW1wbGl0dWRlRXZlbnRzLCBsb2dBbXBsaXR1ZGVFdmVudCB9IGZyb20gJ0BzcmMvbGliL2FtcGxpdHVkZS1hbmFseXRpY3MnOwp2YXIgU2hhcmVUb1NsYWNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFNoYXJlVG9TbGFjaywgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNoYXJlVG9TbGFjayhwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzOwogICAgICAgIF90aGlzLmhhbmRsZUFkZFNsYWNrSW50ZWdyYXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBsb2dpblNsYWNrID0gX2EubG9naW5TbGFjaywgdGVhbSA9IF9hLnRlYW07CiAgICAgICAgICAgIGlmICh0ZWFtKSB7CiAgICAgICAgICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuU2hhcmVFbWFpbFZpYVNsYWNrKTsKICAgICAgICAgICAgICAgIGxvZ2luU2xhY2sodGVhbS5pZCk7CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGxvYWRpbmc6IHRydWUgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVNlbGVjdCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIHR5cGUpIHsKICAgICAgICAgICAgdmFyIHNsYWNrU3RhdGUgPSBfdGhpcy5wcm9wcy5zbGFja1N0YXRlOwogICAgICAgICAgICBpZiAoc2xhY2tTdGF0ZSkgewogICAgICAgICAgICAgICAgdmFyIHJlc291cmNlID0gdHlwZSA9PT0gU2VsZWN0aW9uVHlwZS5DaGFubmVsID8gc2xhY2tTdGF0ZS5jaGFubmVscyA6IHNsYWNrU3RhdGUubWVtYmVyczsKICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZS5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZFJlY2lwaWVudDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHlwZSA9PT0gU2VsZWN0aW9uVHlwZS5DaGFubmVsID8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZS5kYXRhW2luZGV4XS5uYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNvdXJjZS5kYXRhW2luZGV4XS5yZWFsTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVBvc3RNZXNzYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgc2hhcmVVcmwgPSBfYS5zaGFyZVVybCwgcG9zdE1lc3NhZ2UgPSBfYS5wb3N0TWVzc2FnZTsKICAgICAgICAgICAgdmFyIF9iID0gX3RoaXMuc3RhdGUsIHNlbGVjdGVkUmVjaXBpZW50ID0gX2Iuc2VsZWN0ZWRSZWNpcGllbnQsIG1lc3NhZ2UgPSBfYi5tZXNzYWdlOwogICAgICAgICAgICBpZiAoIXNlbGVjdGVkUmVjaXBpZW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3dpdGNoIChzZWxlY3RlZFJlY2lwaWVudC50eXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlIFNlbGVjdGlvblR5cGUuQ2hhbm5lbDoKICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6IHNlbGVjdGVkUmVjaXBpZW50LmlkLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlICsgIiAiICsgc2hhcmVVcmwsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBwb3N0ZWQ6IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFNlbGVjdGlvblR5cGUuTWVtYmVyOgogICAgICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyczogW3NlbGVjdGVkUmVjaXBpZW50LmlkXSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSArICIgIiArIHNoYXJlVXJsLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgcG9zdGVkOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlSG90S2V5cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChpc1ByaW1hcnlNb2RpZmllcktleShlKSAmJiBlLmtleUNvZGUgPT09IEtleUNvZGUuRW50ZXIpIHsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVQb3N0TWVzc2FnZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVFZGl0b3JDaGFuZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG1lc3NhZ2U6IG1lc3NhZ2UgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVFeHBhbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnByb3BzLm9uRXhwYW5kKCdzbGFjaycpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlSW50ZWdyYXRpb25CdXR0b25SZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLmludGVncmF0aW9uQnV0dG9uID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUHJldmlld0J1dHRvblJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMucHJldmlld0J1dHRvbiA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0gewogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgcG9zdGVkOiBmYWxzZSwKICAgICAgICAgICAgbWVzc2FnZTogJycsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTaGFyZVRvU2xhY2sucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHNsYWNrRW5hYmxlZCA9IF9hLnNsYWNrRW5hYmxlZCwgbGlzdENoYW5uZWxzID0gX2EubGlzdENoYW5uZWxzLCBsaXN0TWVtYmVycyA9IF9hLmxpc3RNZW1iZXJzOwogICAgICAgIGlmIChzbGFja0VuYWJsZWQpIHsKICAgICAgICAgICAgbGlzdENoYW5uZWxzKCk7CiAgICAgICAgICAgIGxpc3RNZW1iZXJzKCk7CiAgICAgICAgfQogICAgfTsKICAgIFNoYXJlVG9TbGFjay5wcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiAobmV4dFByb3BzKSB7CiAgICAgICAgaWYgKCF0aGlzLnByb3BzLnNsYWNrRW5hYmxlZCAmJiBuZXh0UHJvcHMuc2xhY2tFbmFibGVkKSB7CiAgICAgICAgICAgIG5leHRQcm9wcy5saXN0Q2hhbm5lbHMoKTsKICAgICAgICAgICAgbmV4dFByb3BzLmxpc3RNZW1iZXJzKCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdGVkICE9PSBuZXh0UHJvcHMuc2VsZWN0ZWQgJiYgbmV4dFByb3BzLnNlbGVjdGVkKSB7CiAgICAgICAgICAgIGlmICghbmV4dFByb3BzLnNsYWNrRW5hYmxlZCB8fCB0aGlzLnN0YXRlLmxvYWRpbmcgfHwgIW5leHRQcm9wcy5zbGFja1N0YXRlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmludGVncmF0aW9uQnV0dG9uLmZvY3VzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoIW5leHRQcm9wcy5zaG93RnVsbFZpZXcpIHsKICAgICAgICAgICAgICAgIHRoaXMucHJldmlld0J1dHRvbi5mb2N1cygpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKICAgIFNoYXJlVG9TbGFjay5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHNsYWNrRW5hYmxlZCA9IF9hLnNsYWNrRW5hYmxlZCwgc2xhY2tTdGF0ZSA9IF9hLnNsYWNrU3RhdGUsIHNob3dGdWxsVmlldyA9IF9hLnNob3dGdWxsVmlldywgc2VsZWN0ZWQgPSBfYS5zZWxlY3RlZCwgb25Nb3VzZUVudGVyID0gX2Eub25Nb3VzZUVudGVyOwogICAgICAgIHZhciBfYiA9IHRoaXMuc3RhdGUsIGxvYWRpbmcgPSBfYi5sb2FkaW5nLCBzZWxlY3RlZFJlY2lwaWVudCA9IF9iLnNlbGVjdGVkUmVjaXBpZW50LCBwb3N0ZWQgPSBfYi5wb3N0ZWQ7CiAgICAgICAgdmFyIHByb21wdEFkZCA9ICFzbGFja0VuYWJsZWQgfHwgbG9hZGluZyB8fCAhc2xhY2tTdGF0ZTsKICAgICAgICB2YXIgc2hvd0NvbmZpcm1hdGlvbiA9IHBvc3RlZCAmJiBzZWxlY3RlZFJlY2lwaWVudDsKICAgICAgICBpZiAocHJvbXB0QWRkKSB7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ3NoYXJlLXRvLXNsYWNrJywgeyBzZWxlY3RlZDogc2VsZWN0ZWQgfSksIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogImFkZC1pbnRlZ3JhdGlvbiIsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQWRkU2xhY2tJbnRlZ3JhdGlvbiwgcmVmOiB0aGlzLmhhbmRsZUludGVncmF0aW9uQnV0dG9uUmVmIH0sCiAgICAgICAgICAgICAgICAgICAgbG9hZGluZyAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRlciwgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgIWxvYWRpbmcgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChTbGFja0xvZ28sIHsgY2xhc3NOYW1lOiAiaWNvbiIsIGhlaWdodDogIjE0cHgiLCB3aWR0aDogIjE1cHgiIH0pLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiQWRkIHRvIFNsYWNrIikpKSk7CiAgICAgICAgfQogICAgICAgIGlmICghc2hvd0Z1bGxWaWV3KSB7CiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsYXNzbmFtZXMoJ3NoYXJlLXRvLXNsYWNrJywgeyBzZWxlY3RlZDogc2VsZWN0ZWQgfSksIG9uTW91c2VFbnRlcjogb25Nb3VzZUVudGVyIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlRXhwYW5kLCByZWY6IHRoaXMuaGFuZGxlUHJldmlld0J1dHRvblJlZiB9LAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2xhY2tMb2dvLCB7IGNsYXNzTmFtZTogImljb24iLCBoZWlnaHQ6ICIxNHB4Iiwgd2lkdGg6ICIxNXB4IiB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIlNoYXJlIG9uIFNsYWNrIikpKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzaGFyZS10by1zbGFjayBleHBhbmRlZCIgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2xhY2tMb2dvLCB7IGNsYXNzTmFtZTogImljb24iLCBoZWlnaHQ6ICIxNHB4Iiwgd2lkdGg6ICIxNXB4IiB9KSwKICAgICAgICAgICAgICAgICJTaGFyZSBvbiBTbGFjayIpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1haW4iIH0sCiAgICAgICAgICAgICAgICAhc2hvd0NvbmZpcm1hdGlvbiAmJiBzbGFja1N0YXRlICYmIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNoYXJlIiwgb25LZXlEb3duOiB0aGlzLmhhbmRsZUhvdEtleXMgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNsYWNrU2hhcmVEcm9wZG93biwgeyBvblNlbGVjdDogdGhpcy5oYW5kbGVTZWxlY3QsIHBsYWNlaG9sZGVyOiAiU2VhcmNoIGNoYW5uZWxzIG9yIERNc1x1MjAyNiIsIGNoYW5uZWxzOiBzbGFja1N0YXRlLmNoYW5uZWxzLCBtZW1iZXJzOiBzbGFja1N0YXRlLm1lbWJlcnMgfSksCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTbGFja01lc3NhZ2VFZGl0b3IsIHsgb25Qb3N0TWVzc2FnZTogdGhpcy5oYW5kbGVQb3N0TWVzc2FnZSwgb25DaGFuZ2U6IHRoaXMuaGFuZGxlRWRpdG9yQ2hhbmdlLCBjaGFubmVsczogc2xhY2tTdGF0ZS5jaGFubmVscywgbWVtYmVyczogc2xhY2tTdGF0ZS5tZW1iZXJzIH0pLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAic2hhcmUtYnV0dG9uIiwgb25DbGljazogdGhpcy5oYW5kbGVQb3N0TWVzc2FnZSwgZGlzYWJsZWQ6ICFzZWxlY3RlZFJlY2lwaWVudCB9LCAiU2hhcmUgb24gU2xhY2siKSkpLAogICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1hdGlvbiAmJiBzZWxlY3RlZFJlY2lwaWVudCAmJiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjb25maXJtYXRpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChHcmVlbkNoZWNrLCB7IHdpZHRoOiAiMzBweCIsIGhlaWdodDogIjMwcHgiIH0pLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2hhcmVkIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJDb252ZXJzYXRpb24gc2hhcmVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUmVjaXBpZW50LnR5cGUgPT09IFNlbGVjdGlvblR5cGUuQ2hhbm5lbCA/ICcgdG8nIDogJyB3aXRoJyksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7IGNsYXNzTmFtZTogImJvbGQiIH0sIHNlbGVjdGVkUmVjaXBpZW50LnR5cGUgPT09IFNlbGVjdGlvblR5cGUuQ2hhbm5lbCA/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIyIgKyBzZWxlY3RlZFJlY2lwaWVudC5kaXNwbGF5IDogc2VsZWN0ZWRSZWNpcGllbnQuZGlzcGxheSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoInNwYW4iLCBudWxsLCAiaW4gU2xhY2shIikpKSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFNoYXJlVG9TbGFjazsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFNoYXJlVG9TbGFjazsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/components/ShareToSlack/ShareToSlack.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/ShareThreadPopover/components/ShareToSlack/ShareToSlack.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport './ShareToSlack.scss';\nimport Loader from '@src/components/Loader/Loader';\nimport SlackShareDropdown, {\n  SelectionType,\n} from './components/SlackShareDropdown/SlackShareDropdown';\nimport SlackLogo from '@src/components/Icons/Slack.svg';\nimport { Team, KeyCode } from '@src/types';\nimport { SlackState, SlackChannel, SlackMember } from '@src/types/slack';\nimport { SlackMessagePostMeta } from '@src/ducks/slack';\nimport GreenCheck from '@src/components/Icons/GreenCheck.svg';\nimport SlackMessageEditor from './components/SlackMessageEditor/SlackMessageEditor';\nimport { isPrimaryModifierKey } from '@src/lib/hotkeys';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface StateProps {\n  slackEnabled: boolean;\n  team?: Team;\n  slackState?: SlackState;\n}\n\nexport interface DispatchProps {\n  loginSlack: (team: string) => void;\n  listChannels: () => void;\n  listMembers: () => void;\n  postMessage: (meta: SlackMessagePostMeta) => void;\n}\n\nexport interface Props {\n  shareUrl: string;\n  showFullView: boolean;\n  onExpand: (view: string) => void;\n  selected: boolean;\n  onMouseEnter: (e: React.MouseEvent<HTMLElement>) => void;\n}\n\ninterface State {\n  loading: boolean;\n  selectedRecipient?: {\n    id: string,\n    display: string,\n    type: SelectionType,\n  };\n  posted: boolean;\n  message: string;\n}\n\nclass ShareToSlack extends React.PureComponent<Props & StateProps & DispatchProps, State> {\n  timeout: NodeJS.Timer;\n  integrationButton: HTMLButtonElement;\n  previewButton: HTMLButtonElement;\n\n  constructor(props: Props & StateProps & DispatchProps) {\n    super(props);\n\n    this.state = {\n      loading: false,\n      posted: false,\n      message: '',\n    };\n  }\n\n  componentDidMount() {\n    const { slackEnabled, listChannels, listMembers } = this.props;\n\n    if (slackEnabled) {\n      listChannels();\n      listMembers();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props & StateProps & DispatchProps) {\n    if (!this.props.slackEnabled && nextProps.slackEnabled) {\n      nextProps.listChannels();\n      nextProps.listMembers();\n    }\n\n    if (this.props.selected !== nextProps.selected && nextProps.selected) {\n      if (!nextProps.slackEnabled || this.state.loading || !nextProps.slackState) {\n        this.integrationButton.focus();\n      } else if (!nextProps.showFullView) {\n        this.previewButton.focus();\n      }\n    }\n  }\n\n  handleAddSlackIntegration = () => {\n    const { loginSlack, team } = this.props;\n\n    if (team) {\n      logAmplitudeEvent(AmplitudeEvents.ShareEmailViaSlack);\n      loginSlack(team.id);\n      this.setState({ loading: true });\n    }\n  }\n\n  handleSelect = (value: string, index: number, type: SelectionType) => {\n    const { slackState } = this.props;\n\n    if (slackState) {\n      const resource = type === SelectionType.Channel ? slackState.channels : slackState.members;\n      if (resource.data) {\n        this.setState({ selectedRecipient: {\n          id: value,\n          display: type === SelectionType.Channel ?\n            (resource.data[index] as SlackChannel).name\n            : (resource.data[index] as SlackMember).realName,\n          type,\n        } });\n      }\n    }\n  }\n\n  handlePostMessage = () => {\n    const { shareUrl, postMessage } = this.props;\n    const { selectedRecipient, message } = this.state;\n\n    if (!selectedRecipient) {\n      return;\n    }\n\n    switch (selectedRecipient.type) {\n      case SelectionType.Channel:\n        postMessage({\n          channel: selectedRecipient.id,\n          message: `${message} ${shareUrl}`,\n        });\n        this.setState({ posted: true });\n        break;\n      case SelectionType.Member:\n        postMessage({\n          members: [selectedRecipient.id],\n          message: `${message} ${shareUrl}`,\n        });\n        this.setState({ posted: true });\n        break;\n      default:\n        break;\n    }\n  }\n\n  handleHotKeys = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (isPrimaryModifierKey(e) && e.keyCode === KeyCode.Enter) {\n      e.stopPropagation();\n      e.preventDefault();\n      this.handlePostMessage();\n    }\n  }\n\n  handleEditorChange = (message: string) => {\n    this.setState({ message });\n  }\n\n  handleExpand = () => {\n    this.props.onExpand('slack');\n  }\n\n  handleIntegrationButtonRef = (ref: HTMLButtonElement) => {\n    this.integrationButton = ref;\n  }\n\n  handlePreviewButtonRef = (ref: HTMLButtonElement) => {\n    this.previewButton = ref;\n  }\n\n  render() {\n    const { slackEnabled, slackState, showFullView, selected, onMouseEnter } = this.props;\n    const { loading, selectedRecipient, posted } = this.state;\n\n    const promptAdd = !slackEnabled || loading || !slackState;\n    const showConfirmation = posted && selectedRecipient;\n\n    if (promptAdd) {\n      return (\n        <div\n          className={classnames('share-to-slack', { selected })}\n          onMouseEnter={onMouseEnter}\n        >\n          <button\n            className=\"add-integration\"\n            onClick={this.handleAddSlackIntegration}\n            ref={this.handleIntegrationButtonRef}\n          >\n            {loading && <Loader />}\n            {!loading && <SlackLogo className=\"icon\" height=\"14px\" width=\"15px\" />}\n            <span>Add to Slack</span>\n          </button>\n        </div>\n      );\n    }\n\n    if (!showFullView) {\n      return (\n        <div\n          className={classnames('share-to-slack', { selected })}\n          onMouseEnter={onMouseEnter}\n        >\n          <button onClick={this.handleExpand} ref={this.handlePreviewButtonRef}>\n            <SlackLogo className=\"icon\" height=\"14px\" width=\"15px\" />\n            <span>Share on Slack</span>\n          </button>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"share-to-slack expanded\">\n        <div className=\"title\">\n          <SlackLogo className=\"icon\" height=\"14px\" width=\"15px\" />\n          Share on Slack\n        </div>\n        <div className=\"main\">\n          {!showConfirmation && slackState && (\n            <div className=\"share\" onKeyDown={this.handleHotKeys}>\n              <SlackShareDropdown\n                onSelect={this.handleSelect}\n                placeholder=\"Search channels or DMs…\"\n                channels={slackState.channels}\n                members={slackState.members}\n              />\n              <SlackMessageEditor\n                onPostMessage={this.handlePostMessage}\n                onChange={this.handleEditorChange}\n                channels={slackState.channels}\n                members={slackState.members}\n              />\n              <button\n                className=\"share-button\"\n                onClick={this.handlePostMessage}\n                disabled={!selectedRecipient}\n              >\n                Share on Slack\n              </button>\n            </div>\n          )}\n          {showConfirmation && selectedRecipient && (\n            <div className=\"confirmation\">\n              <GreenCheck width=\"30px\" height=\"30px\" />\n              <div className=\"shared\">\n                <span>\n                  Conversation shared\n                  {selectedRecipient.type === SelectionType.Channel ? ' to' : ' with'}\n                </span>\n                <span className=\"bold\">\n                  {selectedRecipient.type === SelectionType.Channel ?\n                    `#${selectedRecipient.display}` : selectedRecipient.display}\n                </span>\n                <span>in Slack!</span>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareToSlack;\n"]}]}