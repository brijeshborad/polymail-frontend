{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/Main.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/Main.tsx","mtime":1675280254097},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IFBsYW5EZXRhaWwgZnJvbSAnLi9QbGFuRGV0YWlsL1BsYW5EZXRhaWwnOwppbXBvcnQgTWVtYmVyUGxhbkRldGFpbCBmcm9tICcuL01lbWJlclBsYW5EZXRhaWwnOwppbXBvcnQgQmlsbGluZ1BsYW5zIGZyb20gJ0BzcmMvcm91dGVzL1NldHRpbmdzL3JvdXRlcy9CaWxsaW5nL0JpbGxpbmdQbGFucyc7CmltcG9ydCBMb2FkaW5nRXJyb3JTdGF0ZSBmcm9tICdAc3JjL3JvdXRlcy9TZXR0aW5ncy9yb3V0ZXMvQmlsbGluZy9jb21wb25lbnRzL0xvYWRpbmdFcnJvclN0YXRlJzsKaW1wb3J0IHsgc2VsZWN0QmlsbGluZ0xvYWRpbmcsIHNlbGVjdEJpbGxpbmdMb2FkaW5nRXJyb3IsIHNlbGVjdEJpbGxpbmdIYXZlQWN0aXZlU3Vic2NyaXB0aW9uLCBzZWxlY3RCaWxsaW5nVHJpYWxFeHBpcmVzLCBzZWxlY3RCaWxsaW5nQ291cG9uU3RhdGVMb2FkaW5nLCB9IGZyb20gJ0BzcmMvZHVja3MvYmlsbGluZyc7CmltcG9ydCB7IHNlbGVjdFVzZXJJc0FkbWluIH0gZnJvbSAnQHNyYy9kdWNrcy9tZSc7CmltcG9ydCB7IGxlZnRTaWRlYmFyQ29sbGFwc2UgfSBmcm9tICdAc3JjL2R1Y2tzL2xlZnRTaWRlYmFyJzsKdmFyIE1haW4gPSBmdW5jdGlvbiAocHJvcHMpIHsKICAgIGlmIChwcm9wcy5sb2FkaW5nIHx8IHByb3BzLmxvYWRpbmdFcnJvcikgewogICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRpbmdFcnJvclN0YXRlLCB7IGxvYWRpbmc6IHByb3BzLmxvYWRpbmcsIGxvYWRpbmdFcnJvcjogcHJvcHMubG9hZGluZ0Vycm9yIH0pOwogICAgfQogICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgdXNlciBpcyBub3QgYW4gYWRtaW4KICAgIGlmICghcHJvcHMuaXNBZG1pbikgewogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChNZW1iZXJQbGFuRGV0YWlsLCBudWxsKSk7CiAgICB9CiAgICAvLyBIYXZlIGEgdmFsaWQgc3Vic2NyaXB0aW9uIHNvIHNob3cgc3Vic2NyaXB0aW9uIGRldGFpbHMKICAgIGlmIChwcm9wcy5iaWxsaW5nICYmIHByb3BzLmJpbGxpbmcuc3Vic2NyaXB0aW9uICYmICFwcm9wcy5iaWxsaW5nLnN1YnNjcmlwdGlvbi5wbGFuRXhwaXJlcykgewogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChQbGFuRGV0YWlsLCB7IHN1YnNjcmlwdGlvbjogcHJvcHMuYmlsbGluZy5zdWJzY3JpcHRpb24sIGNhcmQ6IHByb3BzLmJpbGxpbmcuY2FyZCwgbmV4dEludm9pY2U6IHByb3BzLmJpbGxpbmcubmV4dEludm9pY2UsIGJhbGFuY2U6IHByb3BzLmJpbGxpbmcuYmFsYW5jZSwgaXNNb2JpbGU6IHByb3BzLmlzTW9iaWxlLCBjb2xsYXBzZWRNb2JpbGU6IHByb3BzLmNvbGxhcHNlZE1vYmlsZSwgY29sbGFwc2VMc2I6IHByb3BzLmNvbGxhcHNlTHNiLCBpc0xvYWRpbmdDb3Vwb246IHByb3BzLmlzTG9hZGluZ0NvdXBvbiB9KSk7CiAgICB9CiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChCaWxsaW5nUGxhbnMsIG51bGwpOwp9Owp2YXIgbWFwU3RhdGVUb1Byb3BzID0gZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAoewogICAgYmlsbGluZzogc3RhdGUuYmlsbGluZy5yZXNvdXJjZS5kYXRhLAogICAgdGVhbTogc3RhdGUudGVhbS5kYXRhLAogICAgbG9hZGluZzogc2VsZWN0QmlsbGluZ0xvYWRpbmcoc3RhdGUpLAogICAgbG9hZGluZ0Vycm9yOiBzZWxlY3RCaWxsaW5nTG9hZGluZ0Vycm9yKHN0YXRlKSwKICAgIGlzQWRtaW46IHNlbGVjdFVzZXJJc0FkbWluKHN0YXRlKSwKICAgIGFjdGl2ZVN1YnNjcmlwdGlvbjogc2VsZWN0QmlsbGluZ0hhdmVBY3RpdmVTdWJzY3JpcHRpb24oc3RhdGUpLAogICAgdHJpYWxFeHBpcmVzOiBzZWxlY3RCaWxsaW5nVHJpYWxFeHBpcmVzKHN0YXRlKSwKICAgIGlzTW9iaWxlOiBzdGF0ZS5pc01vYmlsZSwKICAgIGNvbGxhcHNlZE1vYmlsZTogc3RhdGUubGVmdFNpZGViYXIuY29sbGFwc2VkLAogICAgaXNMb2FkaW5nQ291cG9uOiBzZWxlY3RCaWxsaW5nQ291cG9uU3RhdGVMb2FkaW5nKHN0YXRlKSwKfSk7IH07CnZhciBtYXBEaXNwYXRjaFRvUHJvcHMgPSBmdW5jdGlvbiAoZGlzcGF0Y2gpIHsgcmV0dXJuICh7CiAgICBjb2xsYXBzZUxzYjogZnVuY3Rpb24gKGNvbGxhcHNlKSB7IHJldHVybiBkaXNwYXRjaChsZWZ0U2lkZWJhckNvbGxhcHNlKGNvbGxhcHNlKSk7IH0sCn0pOyB9OwpleHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShNYWluKTsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/Main.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Billing/Main.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,OAAO,EAAY,MAAM,aAAa,CAAC;AAEhD,OAAO,UAAU,MAAM,yBAAyB,CAAC;AAGjD,OAAO,gBAAgB,MAAM,oBAAoB,CAAC;AAClD,OAAO,YAAY,MAAM,kDAAkD,CAAC;AAC5E,OAAO,iBAAiB,MAAM,kEAAkE,CAAC;AACjG,OAAO,EACL,oBAAoB,EAAE,yBAAyB,EAC/C,mCAAmC,EAAE,yBAAyB,EAAE,+BAA+B,GAChG,MAAM,oBAAoB,CAAC;AAE5B,OAAO,EAAE,iBAAiB,EAAE,MAAM,eAAe,CAAC;AAClD,OAAO,EAAE,mBAAmB,EAAE,MAAM,wBAAwB,CAAC;AAmB7D,IAAM,IAAI,GAAqC,UAAC,KAAK;IACnD,IAAI,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,YAAY,EAAE;QACvC,OAAO,oBAAC,iBAAiB,IAAC,OAAO,EAAE,KAAK,CAAC,OAAO,EAAE,YAAY,EAAE,KAAK,CAAC,YAAY,GAAI,CAAC;KACxF;IAED,yCAAyC;IACzC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;QAClB,OAAO,CACL,oBAAC,gBAAgB,OAAG,CACrB,CAAC;KACH;IAED,yDAAyD;IACzD,IAAI,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,EAAE;QAC1F,OAAO,CACL,oBAAC,UAAU,IACT,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,YAAY,EACxC,IAAI,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,EACxB,WAAW,EAAE,KAAK,CAAC,OAAO,CAAC,WAAW,EACtC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,OAAO,EAC9B,QAAQ,EAAE,KAAK,CAAC,QAAQ,EACxB,eAAe,EAAE,KAAK,CAAC,eAAe,EACtC,WAAW,EAAE,KAAK,CAAC,WAAW,EAC9B,eAAe,EAAE,KAAK,CAAC,eAAe,GACtC,CACH,CAAC;KACH;IAED,OAAO,oBAAC,YAAY,OAAG,CAAC;AAC1B,CAAC,CAAC;AAEF,IAAM,eAAe,GAAG,UAAC,KAAiB,IAAY,OAAA,CAAC;IACrD,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI;IACpC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI;IACrB,OAAO,EAAE,oBAAoB,CAAC,KAAK,CAAC;IACpC,YAAY,EAAE,yBAAyB,CAAC,KAAK,CAAC;IAC9C,OAAO,EAAE,iBAAiB,CAAC,KAAK,CAAC;IACjC,kBAAkB,EAAE,mCAAmC,CAAC,KAAK,CAAC;IAC9D,YAAY,EAAE,yBAAyB,CAAC,KAAK,CAAC;IAC9C,QAAQ,EAAE,KAAK,CAAC,QAAQ;IACxB,eAAe,EAAE,KAAK,CAAC,WAAW,CAAC,SAAS;IAC5C,eAAe,EAAE,+BAA+B,CAAC,KAAK,CAAC;CACxD,CAAC,EAXoD,CAWpD,CAAC;AAEH,IAAM,kBAAkB,GAAG,UAAC,QAA8B,IAAoB,OAAA,CAAC;IAC7E,WAAW,EAAE,UAAA,QAAQ,IAAI,OAAA,QAAQ,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC,EAAvC,CAAuC;CACjE,CAAC,EAF4E,CAE5E,CAAC;AAEH,eAAe,OAAO,CAAuB,eAAe,EAAE,kBAAkB,CAAC,CAAC,IAAI,CAAC,CAAC","sourcesContent":["import React from 'react';\nimport { connect, Dispatch } from 'react-redux';\n\nimport PlanDetail from './PlanDetail/PlanDetail';\nimport { StoreState, Team } from '@src/types';\nimport { Billing } from '@src/types/billing';\nimport MemberPlanDetail from './MemberPlanDetail';\nimport BillingPlans from '@src/routes/Settings/routes/Billing/BillingPlans';\nimport LoadingErrorState from '@src/routes/Settings/routes/Billing/components/LoadingErrorState';\nimport {\n  selectBillingLoading, selectBillingLoadingError,\n  selectBillingHaveActiveSubscription, selectBillingTrialExpires, selectBillingCouponStateLoading,\n} from '@src/ducks/billing';\n\nimport { selectUserIsAdmin } from '@src/ducks/me';\nimport { leftSidebarCollapse } from '@src/ducks/leftSidebar';\n\ninterface Props {\n  loading: boolean;\n  loadingError: boolean;\n  billing?: Billing;\n  team?: Team;\n  isAdmin: boolean;\n  activeSubscription: boolean;\n  trialExpires?: Date;\n  isMobile?: boolean;\n  collapsedMobile?: boolean;\n  isLoadingCoupon: boolean;\n}\n\ninterface DispatchProps {\n  collapseLsb: (collapse: boolean) => void;\n}\n\nconst Main: React.SFC<Props & DispatchProps> = (props) => {\n  if (props.loading || props.loadingError) {\n    return <LoadingErrorState loading={props.loading} loadingError={props.loadingError} />;\n  }\n\n  // Handle case where user is not an admin\n  if (!props.isAdmin) {\n    return (\n      <MemberPlanDetail />\n    );\n  }\n\n  // Have a valid subscription so show subscription details\n  if (props.billing && props.billing.subscription && !props.billing.subscription.planExpires) {\n    return (\n      <PlanDetail\n        subscription={props.billing.subscription}\n        card={props.billing.card}\n        nextInvoice={props.billing.nextInvoice}\n        balance={props.billing.balance}\n        isMobile={props.isMobile}\n        collapsedMobile={props.collapsedMobile}\n        collapseLsb={props.collapseLsb}\n        isLoadingCoupon={props.isLoadingCoupon}\n      />\n    );\n  }\n\n  return <BillingPlans />;\n};\n\nconst mapStateToProps = (state: StoreState): Props => ({\n  billing: state.billing.resource.data,\n  team: state.team.data,\n  loading: selectBillingLoading(state),\n  loadingError: selectBillingLoadingError(state),\n  isAdmin: selectUserIsAdmin(state),\n  activeSubscription: selectBillingHaveActiveSubscription(state),\n  trialExpires: selectBillingTrialExpires(state),\n  isMobile: state.isMobile,\n  collapsedMobile: state.leftSidebar.collapsed,\n  isLoadingCoupon: selectBillingCouponStateLoading(state),\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch<StoreState>): DispatchProps => ({\n  collapseLsb: collapse => dispatch(leftSidebarCollapse(collapse)),\n});\n\nexport default connect<Props, DispatchProps>(mapStateToProps, mapDispatchToProps)(Main);\n"]}]}