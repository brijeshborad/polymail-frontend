{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/Settings.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/Settings.tsx","mtime":1675280254092},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IFN3aXRjaCwgUm91dGUsIG1hdGNoUGF0aCwgUmVkaXJlY3QgfSBmcm9tICdyZWFjdC1yb3V0ZXInOwppbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJzsKaW1wb3J0IExlZnRTaWRlYmFyIGZyb20gJ0BzcmMvY29tcG9uZW50cy9MZWZ0U2lkZWJhcic7CmltcG9ydCBSaWdodFNpZGViYXIgZnJvbSAnQHNyYy9jb21wb25lbnRzL1JpZ2h0U2lkZWJhcic7CmltcG9ydCBUb2FzdCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9Ub2FzdCc7CmltcG9ydCB7IENvbW1hbmRDb250cm9sVHlwZSwgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IHsgUmlnaHRTaWRlYmFyVGFiLCBQYWdlLCB9IGZyb20gJ0BzcmMvdHlwZXMvcmlnaHRTaWRlYmFyJzsKaW1wb3J0ICcuL1NldHRpbmdzLnNjc3MnOwppbXBvcnQgeyBnZXRIb3RrZXksIEhvdGtleUFjdGlvbiB9IGZyb20gJ0BzcmMvbGliL2hvdGtleXMnOwppbXBvcnQgQ29tbWFuZENvbnRyb2wgZnJvbSAnQHNyYy9jb21wb25lbnRzL0NvbW1hbmRDb250cm9sJzsKaW1wb3J0IHsgY29tbWFuZENvbnRyb2xTaG93IH0gZnJvbSAnQHNyYy9kdWNrcy9jb21tYW5kQ29udHJvbCc7CmltcG9ydCBicm93c2VySGlzdG9yeSBmcm9tICdAc3JjL2xpYi9icm93c2VySGlzdG9yeSc7CmltcG9ydCBDb250YWN0U3VwcG9ydCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQ29udGFjdFN1cHBvcnQnOwp2YXIgU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoU2V0dGluZ3MsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBTZXR0aW5ncygpIHsKICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVGb2N1cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICdib2R5JykgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NldHRpbmdzJylbMF07CiAgICAgICAgICAgIGlmIChzZXR0aW5ncykgewogICAgICAgICAgICAgICAgc2V0dGluZ3MuZm9jdXMoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBjb2xsYXBzZVJpZ2h0U2lkZWJhciA9IF9hLmNvbGxhcHNlUmlnaHRTaWRlYmFyLCByaWdodFNpZGViYXJUYWIgPSBfYS5yaWdodFNpZGViYXJUYWIsIGRpc3BhdGNoQWN0aW9uID0gX2EuZGlzcGF0Y2hBY3Rpb247CiAgICAgICAgICAgIHZhciBoYW5kbGVkID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcgfHwKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaG90a2V5ID0gZ2V0SG90a2V5KGUpOwogICAgICAgICAgICBzd2l0Y2ggKGhvdGtleSAmJiBob3RrZXkubmFtZSkgewogICAgICAgICAgICAgICAgY2FzZSBIb3RrZXlBY3Rpb24uTmF2aWdhdGlvbkNlbnRlcjoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5kaXNwYXRjaEFjdGlvbihjb21tYW5kQ29udHJvbFNob3coQ29tbWFuZENvbnRyb2xUeXBlLk5hdmlnYXRpb24pKTsKICAgICAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgSG90a2V5QWN0aW9uLktleWJvYXJkU2hvcnRjdXRHdWlkZToKICAgICAgICAgICAgICAgICAgICBpZiAocmlnaHRTaWRlYmFyVGFiICYmIGhvdGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmlnaHRTaWRlYmFyVGFiID09PSBSaWdodFNpZGViYXJUYWIuS2V5Ym9hcmRTaG9ydGN1dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hBY3Rpb24oaG90a2V5LmFjdGlvbihyaWdodFNpZGViYXJUYWIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlUmlnaHRTaWRlYmFyKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEFjdGlvbihob3RrZXkuYWN0aW9uKHJpZ2h0U2lkZWJhclRhYikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VSaWdodFNpZGViYXIoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEhvdGtleUFjdGlvbi5Ub2dnbGVDb21tYW5kQ29udHJvbDoKICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEFjdGlvbihjb21tYW5kQ29udHJvbFNob3coQ29tbWFuZENvbnRyb2xUeXBlLlRocmVhZCkpOwogICAgICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGFuZGxlZCkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgU2V0dGluZ3MucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMucHJvcHMuY29sbGFwc2VSaWdodFNpZGViYXIodHJ1ZSk7CiAgICAgICAgdGhpcy5oYW5kbGVGb2N1cygpOwogICAgfTsKICAgIFNldHRpbmdzLnByb3RvdHlwZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuaGFuZGxlRm9jdXMpOwogICAgfTsKICAgIFNldHRpbmdzLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLmhhbmRsZUZvY3VzKTsKICAgIH07CiAgICBTZXR0aW5ncy5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudGFnTmFtZSA9PT0gJ0JPRFknKSB7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlRm9jdXMoKTsKICAgICAgICB9CiAgICB9OwogICAgU2V0dGluZ3MucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBtZSA9IF9hLm1lLCBsb2NhdGlvbiA9IF9hLmxvY2F0aW9uLCBzZWxlY3RlZE1haWxib3ggPSBfYS5zZWxlY3RlZE1haWxib3gsIG1haWxDb3VudCA9IF9hLm1haWxDb3VudCwgbGVmdFNpZGViYXJDb3VudCA9IF9hLmxlZnRTaWRlYmFyQ291bnQ7CiAgICAgICAgaWYgKG1lID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsICJMb2FkaW5nIik7CiAgICAgICAgfQogICAgICAgIHZhciBtYXRjaCA9IHJvdXRlcy5maW5kKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgICAgICByZXR1cm4gISFtYXRjaFBhdGgobG9jYXRpb24ucGF0aG5hbWUsIHsKICAgICAgICAgICAgICAgIHBhdGg6IHJvdXRlLndpbGRjYXJkID8gcm91dGUucGF0aG5hbWUgKyAnKicgOiByb3V0ZS5wYXRobmFtZSwKICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLAogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB2YXIgdGl0bGUgPSBtYXRjaCAmJiBtYXRjaC50aXRsZTsKICAgICAgICB2YXIgTGVmdFNpZGViYXJDb25uZWN0ID0gTGVmdFNpZGViYXI7CiAgICAgICAgdmFyIHBhdGhOYW1lID0gYnJvd3Nlckhpc3RvcnkubG9jYXRpb24ucGF0aG5hbWU7CiAgICAgICAgdmFyIHNob3dNYWluID0gcGF0aE5hbWUgJiYgcGF0aE5hbWUuaW5jbHVkZXMoJ3RlbXBsYXRlcycpIHx8IHBhdGhOYW1lLmluY2x1ZGVzKCdjYWxlbmRhcicpOwogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzZXR0aW5ncyIsIHRhYkluZGV4OiAtMSwgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24gfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb250YWN0U3VwcG9ydCwgbnVsbCksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGVmdFNpZGViYXJDb25uZWN0LCB7IGFjY291bnRzOiBbXSwgbGlzdHM6IFtdLCBwcmVmZXJlbmNlczogIXNob3dNYWluLCBzZWxlY3RlZFRpdGxlOiB0aXRsZSwgc2VsZWN0ZWRNYWlsYm94OiBzZWxlY3RlZE1haWxib3gsIG1haWxDb3VudDogbWFpbENvdW50LCBsZWZ0U2lkZWJhckNvdW50OiBsZWZ0U2lkZWJhckNvdW50IH0pLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1haW4iIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFN3aXRjaCwgbnVsbCwKICAgICAgICAgICAgICAgICAgICByb3V0ZXMubWFwKGZ1bmN0aW9uIChyb3V0ZSkgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHsgcGF0aDogcm91dGUud2lsZGNhcmQgPyByb3V0ZS5wYXRobmFtZSArICcqJyA6IHJvdXRlLnBhdGhuYW1lLCBjb21wb25lbnQ6IHJvdXRlLmNvbXBvbmVudCwga2V5OiByb3V0ZS5wYXRobmFtZSwgZXhhY3Q6IHRydWUgfSkpOyB9KSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJlZGlyZWN0LCB7IGZyb206ICIvc2V0dGluZ3MvY2FsZW5kYXIqIiwgdG86ICIvY2FsZW5kYXIiIH0pLAogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVkaXJlY3QsIHsgZnJvbTogIi9zZXR0aW5ncy90ZW1wbGF0ZXMqIiwgdG86ICIvdGVtcGxhdGVzIiB9KSkpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNldHRpbmdzLXRpdGxlLWRyYWdnYWJsZSIgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmlnaHRTaWRlYmFyLCB7IGhpZGVUb3BCYXI6IHRydWUsIHBhZ2U6IFBhZ2UuU2V0dGluZ3MgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVG9hc3QsIG51bGwpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENvbW1hbmRDb250cm9sLCB7IGRlZmF1bHQ6IENvbW1hbmRDb250cm9sVHlwZS5UaHJlYWQgfSkpKTsKICAgIH07CiAgICByZXR1cm4gU2V0dGluZ3M7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBTZXR0aW5nczsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/Settings.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/Settings.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Switch, Route, RouteComponentProps, matchPath, Redirect } from 'react-router';\n\nimport routes from './routes';\n\nimport LeftSidebar from '@src/components/LeftSidebar';\nimport RightSidebar from '@src/components/RightSidebar';\nimport Toast from '@src/components/Base/Toast';\n\nimport {\n  Account,\n  LeftSidebarCount,\n  MailCount,\n  Mailbox,\n  Me,\n  Preferences,\n  Action,\n  CommandControlType,\n} from '@src/types';\nimport {\n  RightSidebarTab, Page,\n} from '@src/types/rightSidebar';\n\nimport './Settings.scss';\nimport { getHotkey, HotkeyAction } from '@src/lib/hotkeys';\nimport CommandControl from '@src/components/CommandControl';\nimport { commandControlShow } from '@src/ducks/commandControl';\nimport browserHistory from '@src/lib/browserHistory';\nimport ContactSupport from '@src/components/ContactSupport';\n\nexport interface StateProps {\n  preferences: Preferences;\n  accounts: Account[];\n  me?: Me;\n  selectedMailbox: Mailbox;\n  mailCount: MailCount;\n  leftSidebarCount: LeftSidebarCount;\n  rightSidebarTab: RightSidebarTab;\n}\n\nexport interface DispatchProps {\n  dispatchAction: (action: Action<any, any>) => void;\n  collapseRightSidebar: (collapsed: boolean) => void;\n}\n\nclass Settings extends React.PureComponent<\n  StateProps & RouteComponentProps<any> & DispatchProps, {}\n> {\n  componentDidMount() {\n    this.props.collapseRightSidebar(true);\n    this.handleFocus();\n  }\n\n  UNSAFE_componentWillMount() {\n    window.addEventListener('focus', this.handleFocus);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('focus', this.handleFocus);\n  }\n\n  componentDidUpdate() {\n    if (document.activeElement && document.activeElement.tagName === 'BODY') {\n      this.handleFocus();\n    }\n  }\n\n  handleFocus = () => {\n    if (document.activeElement && document.activeElement.tagName.toLowerCase() !== 'body') {\n      return;\n    }\n\n    const settings = document.getElementsByClassName('settings')[0] as HTMLElement;\n\n    if (settings) {\n      settings.focus();\n    }\n  }\n\n  handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    const {\n      collapseRightSidebar,\n      rightSidebarTab,\n      dispatchAction,\n    } = this.props;\n    let handled = false;\n\n    if (document.activeElement && (document.activeElement.tagName === 'INPUT' ||\n      document.activeElement.tagName === 'TEXTAREA')) {\n      return;\n    }\n\n    const hotkey = getHotkey(e);\n    switch (hotkey && hotkey.name) {\n      case HotkeyAction.NavigationCenter:\n        this.props.dispatchAction(commandControlShow(CommandControlType.Navigation));\n        handled = true;\n        break;\n      case HotkeyAction.KeyboardShortcutGuide:\n        if (rightSidebarTab && hotkey) {\n          if (rightSidebarTab === RightSidebarTab.KeyboardShortcut) {\n            dispatchAction(hotkey.action(rightSidebarTab));\n            collapseRightSidebar(true);\n            handled = true;\n          } else {\n            dispatchAction(hotkey.action(rightSidebarTab));\n            collapseRightSidebar(false);\n            handled = true;\n          }\n        }\n        break;\n      case HotkeyAction.ToggleCommandControl:\n        dispatchAction(commandControlShow(CommandControlType.Thread));\n        handled = true;\n        break;\n      default:\n        break;\n    }\n\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  render() {\n    const { me, location, selectedMailbox, mailCount, leftSidebarCount } = this.props;\n    if (me === undefined) {\n      return <div>Loading</div>;\n    }\n    const match = routes.find(route =>\n      !!matchPath(location.pathname, {\n        path: route.wildcard ? route.pathname + '*' : route.pathname,\n        exact: true,\n      }));\n\n    const title = match && match.title;\n    const LeftSidebarConnect = LeftSidebar as any;\n    const pathName = browserHistory.location.pathname;\n    const showMain = pathName && pathName.includes('templates') || pathName.includes('calendar');\n\n    return (\n      <div className=\"settings\" tabIndex={-1} onKeyDown={this.handleKeyDown}>\n        <ContactSupport />\n        <LeftSidebarConnect\n          accounts={[]}\n          lists={[]}\n          preferences={!showMain}\n          selectedTitle={title}\n          selectedMailbox={selectedMailbox}\n          mailCount={mailCount}\n          leftSidebarCount={leftSidebarCount}\n        />\n        <div className=\"main\">\n          <Switch>\n            {routes.map(route => (\n              <Route\n                path={route.wildcard ? route.pathname + '*' : route.pathname}\n                component={route.component}\n                key={route.pathname}\n                exact\n              />\n            ))}\n            <Redirect from=\"/settings/calendar*\" to=\"/calendar\" />\n            <Redirect from=\"/settings/templates*\" to=\"/templates\" />\n          </Switch>\n        </div>\n        <div className=\"settings-title-draggable\" />\n        <RightSidebar hideTopBar={true} page={Page.Settings} />\n        <Toast />\n        <CommandControl default={CommandControlType.Thread} />\n      </div>\n    );\n  }\n}\n\nexport default Settings;\n"]}]}