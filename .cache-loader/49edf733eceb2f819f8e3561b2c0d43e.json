{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/CommentCell/components/AttachmentsPane.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/CommentCell/components/AttachmentsPane.tsx","mtime":1675280253992},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKLy8gaW1wb3J0IEF0dGFjaG1lbnRDZWxsIGZyb20gJ0BzcmMvY29tcG9uZW50cy9DZWxscy9BdHRhY2htZW50Q2VsbCc7CmltcG9ydCAnLi9BdHRhY2htZW50c1BhbmUuc2Nzcyc7CmltcG9ydCBDb21tZW50QXR0YWNobWVudENlbGwgZnJvbSAnQHNyYy9jb21wb25lbnRzL0NlbGxzL0NvbW1lbnRBdHRhY2htZW50Q2VsbCc7CnZhciBBdHRhY2htZW50c1BhbmUgPSBmdW5jdGlvbiAocHJvcHMpIHsKICAgIC8vIFRPRE8oU0hJTikgV2lsbCB3ZSBoYXZlIGVuZHBvaW50IGZvciBkb3dubG9hZCBhbGw/CiAgICB2YXIgaGFuZGxlRG93bmxvYWRBbGwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBzaGFyZWRUaHJlYWRJZCA9IHByb3BzLnNoYXJlZFRocmVhZElkLCBjb21tZW50SWQgPSBwcm9wcy5jb21tZW50SWQ7CiAgICAgICAgaWYgKCFzaGFyZWRUaHJlYWRJZCB8fCAhY29tbWVudElkKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gSWRlbnRpZnkgY29ycmVjdCBwYXRoIGZvciBkb3dubG9hZCBhbGwgYXR0YWNobWVudHMKICAgICAgICB2YXIgdGhyZWFkUGF0aCA9ICcvdjEvc2hhcmVkVGhyZWFkcy8nICsgZW5jb2RlVVJJQ29tcG9uZW50KHNoYXJlZFRocmVhZElkKTsKICAgICAgICB2YXIgdXJsID0gIiIgKyBwcm9jZXNzLmVudi5BUElfVVJMICsKICAgICAgICAgICAgdGhyZWFkUGF0aCArCiAgICAgICAgICAgICgiL2NvbW1lbnRzLyIgKyBlbmNvZGVVUklDb21wb25lbnQoY29tbWVudElkKSArICIvYXR0YWNobWVudHMiKTsKICAgICAgICB3aW5kb3cub3Blbih1cmwsICdfYmxhbmsnKTsKICAgIH07CiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYXR0YWNobWVudHMtcGFuZSIgfSwKICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRvcCIgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhdHRhY2htZW50cy1jb3VudCIgfSwgcHJvcHMuYXR0YWNobWVudHMubGVuZ3RoID4gMQogICAgICAgICAgICAgICAgPyBwcm9wcy5hdHRhY2htZW50cy5sZW5ndGggKyAiIGF0dGFjaG1lbnRzIFx1MjAyMiAiCiAgICAgICAgICAgICAgICA6IHByb3BzLmF0dGFjaG1lbnRzLmxlbmd0aCArICIgYXR0YWNobWVudCIpLAogICAgICAgICAgICBwcm9wcy5hdHRhY2htZW50cy5sZW5ndGggPiAxICYmCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IG9uQ2xpY2s6IGhhbmRsZURvd25sb2FkQWxsLCBjbGFzc05hbWU6ICJkb3dubG9hZC1hbGwiIH0sICJEb3dubG9hZCBBbGwiKSksCiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJib3R0b20iIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYXR0YWNobWVudHMtY29udGFpbmVyIiB9LCBwcm9wcy5hdHRhY2htZW50cy5tYXAoZnVuY3Rpb24gKGF0dGFjaG1lbnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbW1lbnRBdHRhY2htZW50Q2VsbCwgeyBrZXk6IGF0dGFjaG1lbnQuaWQsIGF0dGFjaG1lbnQ6IGF0dGFjaG1lbnQgfSk7CiAgICAgICAgICAgIH0pKSkpKTsKfTsKZXhwb3J0IGRlZmF1bHQgQXR0YWNobWVudHNQYW5lOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/CommentCell/components/AttachmentsPane.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Cells/CommentCell/components/AttachmentsPane.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAI1B,qEAAqE;AAErE,OAAO,wBAAwB,CAAC;AAChC,OAAO,qBAAqB,MAAM,6CAA6C,CAAC;AAQhF,IAAM,eAAe,GAAG,UAAC,KAAY;IAEnC,qDAAqD;IACrD,IAAM,iBAAiB,GAAG,UAAC,CAAsC;QACvD,IAAA,qCAAc,EAAE,2BAAS,CAAW;QAE5C,IAAI,CAAC,cAAc,IAAI,CAAC,SAAS,EAAE;YACjC,OAAO;SACR;QAED,qDAAqD;QACrD,IAAM,UAAU,GAAG,oBAAoB,GAAG,kBAAkB,CAAC,cAAc,CAAC,CAAC;QAC7E,IAAM,GAAG,GAAG,KAAG,OAAO,CAAC,GAAG,CAAC,OAAU;YACnC,UAAU;aACV,eAAa,kBAAkB,CAAC,SAAS,CAAC,iBAAc,CAAA,CAAC;QAE3D,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;IAC7B,CAAC,CAAC;IAEF,OAAO,CACL,6BAAK,SAAS,EAAC,kBAAkB;QAC/B,6BAAK,SAAS,EAAC,KAAK;YAClB,6BAAK,SAAS,EAAC,mBAAmB,IAC/B,KAAK,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC;gBAC3B,CAAC,CAAI,KAAK,CAAC,WAAW,CAAC,MAAM,yBAAiB;gBAC9C,CAAC,CAAI,KAAK,CAAC,WAAW,CAAC,MAAM,gBAAa,CAExC;YACL,KAAK,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC;gBAC3B,gCACE,OAAO,EAAE,iBAAiB,EAC1B,SAAS,EAAC,cAAc,IAEvB,cAAc,CACR,CAEP;QACN,6BAAK,SAAS,EAAC,QAAQ;YACrB,6BAAK,SAAS,EAAC,uBAAuB,IACnC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,UAAA,UAAU;gBAC/B,OAAA,oBAAC,qBAAqB,IAAC,GAAG,EAAE,UAAU,CAAC,EAAE,EAAE,UAAU,EAAE,UAAU,GAAI;YAArE,CAAqE,CACtE,CACG,CACF,CACF,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,eAAe,eAAe,CAAC","sourcesContent":["import React from 'react';\n// import { first } from 'lodash';\n\nimport { Attachment } from '@src/types';\n// import AttachmentCell from '@src/components/Cells/AttachmentCell';\n\nimport './AttachmentsPane.scss';\nimport CommentAttachmentCell from '@src/components/Cells/CommentAttachmentCell';\n\ninterface Props {\n  attachments: Attachment[];\n  sharedThreadId?: string;\n  commentId?: string;\n}\n\nconst AttachmentsPane = (props: Props) => {\n\n  // TODO(SHIN) Will we have endpoint for download all?\n  const handleDownloadAll = (e: React.MouseEvent<HTMLButtonElement>) => {\n    const { sharedThreadId, commentId } = props;\n\n    if (!sharedThreadId || !commentId) {\n      return;\n    }\n\n    // Identify correct path for download all attachments\n    const threadPath = '/v1/sharedThreads/' + encodeURIComponent(sharedThreadId);\n    const url = `${process.env.API_URL!}` +\n      threadPath +\n      `/comments/${encodeURIComponent(commentId)}/attachments`;\n\n    window.open(url, '_blank');\n  };\n\n  return (\n    <div className=\"attachments-pane\">\n      <div className=\"top\">\n        <div className=\"attachments-count\">\n          {props.attachments.length > 1\n            ? `${props.attachments.length} attachments â€¢ `\n            : `${props.attachments.length} attachment`\n          }\n        </div>\n        {props.attachments.length > 1 &&\n          <button\n            onClick={handleDownloadAll}\n            className=\"download-all\"\n          >\n            {`Download All`}\n          </button>\n        }\n      </div>\n      <div className=\"bottom\">\n        <div className=\"attachments-container\">\n          {props.attachments.map(attachment =>\n            <CommentAttachmentCell key={attachment.id} attachment={attachment} />,\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AttachmentsPane;\n"]}]}