{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopup.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopup.tsx","mtime":1675280253989},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgUG9wb3ZlciBmcm9tICdAc3JjL2NvbXBvbmVudHMvUG9wb3Zlci9Qb3BvdmVyJzsKaW1wb3J0ICcuL1VuZG9Qb3B1cC5zY3NzJzsKdmFyIFVuZG9Qb3B1cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhVbmRvUG9wdXAsIF9zdXBlcik7CiAgICBmdW5jdGlvbiBVbmRvUG9wdXAoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVTaG93ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRBdXRvRGlzbWlzcygpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc2V0QXV0b0Rpc21pc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhdXRvRGlzbWlzc0R1cmF0aW9uID0gX3RoaXMucHJvcHMuYXV0b0Rpc21pc3NEdXJhdGlvbjsKICAgICAgICAgICAgaWYgKGF1dG9EaXNtaXNzRHVyYXRpb24gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRfMSA9IF90aGlzLnByb3BzLnJlc291cmNlSWQ7CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudGltZW91dCkgewogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy50aW1lb3V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzLnRpbWVvdXQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRfMSA9PT0gX3RoaXMucHJvcHMucmVzb3VyY2VJZCAmJiBfdGhpcy5wb3BvdmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvcG92ZXIuaGlkZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGF1dG9EaXNtaXNzRHVyYXRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVQb3BvdmVyUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5wb3BvdmVyID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMub25VbmRvQ2xpY2sgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIF90aGlzLnByb3BzLm9uVW5kb0NsaWNrKCk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBVbmRvUG9wdXAucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLnRpbWVvdXQpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7CiAgICAgICAgfQogICAgfTsKICAgIFVuZG9Qb3B1cC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucG9wb3ZlcikgewogICAgICAgICAgICB0aGlzLnBvcG92ZXIuc2hvdygpOwogICAgICAgIH0KICAgICAgICB0aGlzLnNldEF1dG9EaXNtaXNzKCk7CiAgICB9OwogICAgVW5kb1BvcHVwLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucG9wb3ZlcikgewogICAgICAgICAgICB0aGlzLnBvcG92ZXIuc2hvdygpOwogICAgICAgIH0KICAgIH07CiAgICBVbmRvUG9wdXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wb3ZlciwgeyByZWY6IHRoaXMuaGFuZGxlUG9wb3ZlclJlZiwgY2xhc3NOYW1lOiBjbGFzc25hbWVzKCd1bmRvLXBvcHVwJywgdGhpcy5wcm9wcy5jbGFzc05hbWUpLCBvblNob3c6IHRoaXMuaGFuZGxlU2hvdywgYXV0b0ZvY3VzT2ZmOiB0cnVlLCBwZXJzaXN0ZW50OiB0cnVlIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sIHRoaXMucHJvcHMudGl0bGUpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IG9uQ2xpY2s6IHRoaXMub25VbmRvQ2xpY2ssIGNsYXNzTmFtZTogInVuZG8tYnV0dG9uIiB9LCAiVW5kbyIpKSk7CiAgICB9OwogICAgcmV0dXJuIFVuZG9Qb3B1cDsKfShSZWFjdC5QdXJlQ29tcG9uZW50KSk7CmV4cG9ydCBkZWZhdWx0IFVuZG9Qb3B1cDsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopup.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/Base/UndoPopup.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,UAAU,MAAM,YAAY,CAAC;AACpC,OAAO,OAAO,MAAM,iCAAiC,CAAC;AAEtD,OAAO,kBAAkB,CAAC;AAU1B;IAAwB,6BAA0B;IAIhD;QAAA,YACE,iBAAO,SACR;QAsBD,gBAAU,GAAG;YACX,KAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC,CAAA;QAED,oBAAc,GAAG;YACP,IAAA,qDAAmB,CAAgB;YAC3C,IAAI,mBAAmB,KAAK,SAAS,EAAE;gBACrC,IAAM,SAAO,GAAG,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC;gBACtC,IAAI,KAAI,CAAC,OAAO,EAAE;oBAChB,YAAY,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;iBAC5B;gBACD,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAC9B;oBACE,IAAI,SAAO,KAAK,KAAI,CAAC,KAAK,CAAC,UAAU,IAAI,KAAI,CAAC,OAAO,EAAE;wBACrD,KAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;qBACrB;gBACH,CAAC,EACD,mBAAmB,CACpB,CAAC;aACH;QACH,CAAC,CAAA;QAED,sBAAgB,GAAG,UAAC,GAAY;YAC9B,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACrB,CAAC,CAAA;QAED,iBAAW,GAAG,UAAC,CAAsC;YACnD,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,KAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC3B,CAAC,CAAA;;IApDD,CAAC;IAED,wCAAoB,GAApB;QACE,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC5B;IACH,CAAC;IAED,qCAAiB,GAAjB;QACE,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACrB;QAED,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,sCAAkB,GAAlB;QACE,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;SACrB;IACH,CAAC;IAkCD,0BAAM,GAAN;QACE,OAAO,CACL,oBAAC,OAAO,IACN,GAAG,EAAE,IAAI,CAAC,gBAAgB,EAC1B,SAAS,EAAE,UAAU,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EACzD,MAAM,EAAE,IAAI,CAAC,UAAU,EACvB,YAAY,QACZ,UAAU,EAAE,IAAI;YAEhB,6BACE,SAAS,EAAC,OAAO,IAEhB,IAAI,CAAC,KAAK,CAAC,KAAK,CACb;YACN,gCACE,OAAO,EAAE,IAAI,CAAC,WAAW,EACzB,SAAS,EAAC,aAAa,WAGhB,CACD,CACX,CAAC;IACJ,CAAC;IACH,gBAAC;AAAD,CAAC,AAnFD,CAAwB,KAAK,CAAC,aAAa,GAmF1C;AAED,eAAe,SAAS,CAAC","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport Popover from '@src/components/Popover/Popover';\n\nimport './UndoPopup.scss';\n\ninterface Props {\n  onUndoClick: () => void;\n  title: string;\n  className?: string;\n  resourceId?: string;\n  autoDismissDuration?: number;\n}\n\nclass UndoPopup extends React.PureComponent<Props> {\n  popover: Popover;\n  private timeout: NodeJS.Timer;\n\n  constructor() {\n    super();\n  }\n\n  componentWillUnmount() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  }\n\n  componentDidMount() {\n    if (this.popover) {\n      this.popover.show();\n    }\n\n    this.setAutoDismiss();\n  }\n\n  componentDidUpdate() {\n    if (this.popover) {\n      this.popover.show();\n    }\n  }\n\n  handleShow = () => {\n    this.setAutoDismiss();\n  }\n\n  setAutoDismiss = () => {\n    const { autoDismissDuration } = this.props;\n    if (autoDismissDuration !== undefined) {\n      const current = this.props.resourceId;\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n      this.timeout = global.setTimeout(\n        () => {\n          if (current === this.props.resourceId && this.popover) {\n            this.popover.hide();\n          }\n        },\n        autoDismissDuration,\n      );\n    }\n  }\n\n  handlePopoverRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  onUndoClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onUndoClick();\n  }\n\n  render() {\n    return (\n      <Popover\n        ref={this.handlePopoverRef}\n        className={classnames('undo-popup', this.props.className)}\n        onShow={this.handleShow}\n        autoFocusOff\n        persistent={true}\n      >\n        <div\n          className=\"title\"\n        >\n          {this.props.title}\n        </div>\n        <button\n          onClick={this.onUndoClick}\n          className=\"undo-button\"\n        >\n          Undo\n        </button>\n      </Popover>\n    );\n  }\n}\n\nexport default UndoPopup;\n"]}]}