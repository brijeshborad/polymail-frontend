{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/Cell/CollapsedCell/CollapsedCell.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/Cell/CollapsedCell/CollapsedCell.tsx","mtime":1675280254037},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwppbXBvcnQgeyBzaG93TW9zdFJlY2VudCB9IGZyb20gJ0BzcmMvbGliL2RhdGV0aW1lJzsKaW1wb3J0IHsgQ29udGFjdFR5cGUgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IFRyYWNrIGZyb20gJ0BzcmMvY29tcG9uZW50cy9JY29ucy9UcmFjay5zdmcnOwppbXBvcnQgQXR0YWNobWVudCBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvQXR0YWNobWVudC5zdmcnOwppbXBvcnQgeyBnZXREaXNwbGF5TmFtZSB9IGZyb20gJ0BzcmMvbGliL2FkZHJlc3MnOwppbXBvcnQgJy4vQ29sbGFwc2VkQ2VsbC5zY3NzJzsKdmFyIENvbGxhcHNlZENlbGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICBfX2V4dGVuZHMoQ29sbGFwc2VkQ2VsbCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIENvbGxhcHNlZENlbGwoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlVG9nZ2xlRXhwYW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgb25Ub2dnbGVFeHBhbmQgPSBfYS5vblRvZ2dsZUV4cGFuZCwgaWQgPSBfYS5pZDsKICAgICAgICAgICAgb25Ub2dnbGVFeHBhbmQoaWQpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIF90aGlzOwogICAgfQogICAgQ29sbGFwc2VkQ2VsbC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgZ2V0Q29udGFjdCA9IF9hLmdldENvbnRhY3QsIHNlbmRlciA9IF9hLnNlbmRlciwgbWVzc2FnZSA9IF9hLm1lc3NhZ2U7CiAgICAgICAgaWYgKHNlbmRlciAmJiBzZW5kZXIudHlwZSA9PT0gQ29udGFjdFR5cGUuRGVmYXVsdCkgewogICAgICAgICAgICBnZXRDb250YWN0KG1lc3NhZ2UuZnJvbSk7CiAgICAgICAgfQogICAgfTsKICAgIENvbGxhcHNlZENlbGwucHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gZnVuY3Rpb24gKG5leHRQcm9wcykgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGdldENvbnRhY3QgPSBfYS5nZXRDb250YWN0LCBzZW5kZXIgPSBfYS5zZW5kZXIsIG1lc3NhZ2UgPSBfYS5tZXNzYWdlOwogICAgICAgIGlmIChzZW5kZXIgJiYgbWVzc2FnZS5mcm9tICE9PSB0aGlzLnByb3BzLm1lc3NhZ2UuZnJvbSAmJiBzZW5kZXIudHlwZSA9PT0gQ29udGFjdFR5cGUuRGVmYXVsdCkgewogICAgICAgICAgICBnZXRDb250YWN0KG1lc3NhZ2UuZnJvbSk7CiAgICAgICAgfQogICAgfTsKICAgIENvbGxhcHNlZENlbGwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBzZW5kZXIgPSBfYS5zZW5kZXIsIG1lc3NhZ2UgPSBfYS5tZXNzYWdlLCBtZSA9IF9hLm1lLCBoaWRlVHJhY2tzID0gX2EuaGlkZVRyYWNrcywgcHVibGljRm9jdXMgPSBfYS5wdWJsaWNGb2N1czsKICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgb25DbGljazogdGhpcy5oYW5kbGVUb2dnbGVFeHBhbmQsIGNsYXNzTmFtZTogY2xhc3NuYW1lcygndGhyZWFkLWRldGFpbC1jb2xsYXBzZWQtY2VsbCcsIHsgJ3B1YmxpYy1mb2N1cyc6ICEhcHVibGljRm9jdXMgfSkgfSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaW1nIiwgeyBjbGFzc05hbWU6ICJ0aHJlYWQtZGV0YWlsLWF2YXRhciIsIHNyYzogc2VuZGVyICYmIHNlbmRlci5waG90b1VybCB9KSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJtZXNzYWdlLWNvbnRlbnQiIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInNlbmRlciIgfSwgZ2V0RGlzcGxheU5hbWUobWVzc2FnZS5mcm9tLCBtZSkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzbmlwcGV0IiB9LCBtZXNzYWdlLnNuaXBwZXQpKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJyaWdodC1jb250ZW50IiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0b3AiIH0sCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5oYXNBdHRhY2htZW50cyAmJgogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImF0dGFjaG1lbnQiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEF0dGFjaG1lbnQsIG51bGwpKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpbWVzdGFtcCIgfSwgc2hvd01vc3RSZWNlbnQobWVzc2FnZS5pbnRlcm5hbCwgdHJ1ZSkpKSwKICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2tlZCAmJiAhaGlkZVRyYWNrcyAmJgogICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidHJhY2tzIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRyYWNrLCB7IGNsYXNzTmFtZTogY2xhc3NuYW1lcygndHJhY2staWNvbicsIHsgdHJhY2tzOiBtZXNzYWdlLnRyYWNrcyA+IDAgfSkgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UudHJhY2tzID4gMCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBtZXNzYWdlLnRyYWNrcykpKSkpOwogICAgfTsKICAgIHJldHVybiBDb2xsYXBzZWRDZWxsOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgQ29sbGFwc2VkQ2VsbDsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/Cell/CollapsedCell/CollapsedCell.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/ThreadDetail/components/Cell/CollapsedCell/CollapsedCell.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,UAAU,MAAM,YAAY,CAAC;AAEpC,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AACnD,OAAO,EAAwB,WAAW,EAAE,MAAM,YAAY,CAAC;AAC/D,OAAO,KAAK,MAAM,iCAAiC,CAAC;AACpD,OAAO,UAAU,MAAM,sCAAsC,CAAC;AAC9D,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AAElD,OAAO,sBAAsB,CAAC;AAgB9B;IAA4B,iCAA0C;IAAtE;QAAA,qEA0DC;QAxCC,wBAAkB,GAAG;YACb,IAAA,gBAAmC,EAAjC,kCAAc,EAAE,UAAiB,CAAC;YAE1C,cAAc,CAAC,EAAE,CAAC,CAAC;QACrB,CAAC,CAAA;;IAoCH,CAAC;IAxDC,yCAAiB,GAAjB;QACQ,IAAA,eAA4C,EAA1C,0BAAU,EAAE,kBAAM,EAAE,oBAAsB,CAAC;QAEnD,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,WAAW,CAAC,OAAO,EAAE;YACjD,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAC1B;IACH,CAAC;IAED,wDAAgC,GAAhC,UAAiC,SAAgC;QACzD,IAAA,eAA4C,EAA1C,0BAAU,EAAE,kBAAM,EAAE,oBAAsB,CAAC;QAEnD,IAAI,MAAM,IAAI,OAAO,CAAC,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,IAAI,MAAM,CAAC,IAAI,KAAK,WAAW,CAAC,OAAO,EAAE;YAC7F,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAC1B;IACH,CAAC;IAQD,8BAAM,GAAN;QACQ,IAAA,eAA6D,EAA3D,kBAAM,EAAE,oBAAO,EAAE,UAAE,EAAE,0BAAU,EAAE,4BAA0B,CAAC;QAEpE,OAAO,CACL,gCACE,OAAO,EAAE,IAAI,CAAC,kBAAkB,EAChC,SAAS,EAAE,UAAU,CAAC,8BAA8B,EAAE,EAAE,cAAc,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;YAExF,6BAAK,SAAS,EAAC,sBAAsB,EAAC,GAAG,EAAE,MAAM,IAAI,MAAM,CAAC,QAAQ,GAAI;YACxE,6BAAK,SAAS,EAAC,iBAAiB;gBAC9B,6BAAK,SAAS,EAAC,QAAQ,IACpB,cAAc,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAC7B;gBACN,6BAAK,SAAS,EAAC,SAAS,IAAE,OAAO,CAAC,OAAO,CAAO,CAC5C;YACN,6BAAK,SAAS,EAAC,eAAe;gBAC5B,6BAAK,SAAS,EAAC,KAAK;oBACjB,OAAO,CAAC,cAAc;wBACrB,6BAAK,SAAS,EAAC,YAAY;4BACzB,oBAAC,UAAU,OAAG,CACV;oBAER,6BAAK,SAAS,EAAC,WAAW,IAAE,cAAc,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAO,CACrE;gBACL,OAAO,CAAC,OAAO,IAAI,CAAC,UAAU;oBAC7B,6BAAK,SAAS,EAAC,QAAQ;wBACrB,oBAAC,KAAK,IAAC,SAAS,EAAE,UAAU,CAAC,YAAY,EAAE,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,GAAG;wBAC5E,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,iCAAM,OAAO,CAAC,MAAM,CAAO,CAC9C,CAEJ,CACC,CACV,CAAC;IACJ,CAAC;IACH,oBAAC;AAAD,CAAC,AA1DD,CAA4B,KAAK,CAAC,aAAa,GA0D9C;AAED,eAAe,aAAa,CAAC","sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\n\nimport { showMostRecent } from '@src/lib/datetime';\nimport { Message, Contact, Me, ContactType } from '@src/types';\nimport Track from '@src/components/Icons/Track.svg';\nimport Attachment from '@src/components/Icons/Attachment.svg';\nimport { getDisplayName } from '@src/lib/address';\n\nimport './CollapsedCell.scss';\n\nexport interface Props {\n  id: string;\n  message: Message;\n  onToggleExpand: (key: string) => void;\n  sender?: Contact;\n  me?: Me;\n  hideTracks?: boolean;\n  publicFocus?: boolean;\n}\n\nexport interface DispatchProps {\n  getContact: (email: string) => void;\n}\n\nclass CollapsedCell extends React.PureComponent<Props & DispatchProps> {\n\n  componentDidMount() {\n    const { getContact, sender, message } = this.props;\n\n    if (sender && sender.type === ContactType.Default) {\n      getContact(message.from);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props & DispatchProps) {\n    const { getContact, sender, message } = this.props;\n\n    if (sender && message.from !== this.props.message.from && sender.type === ContactType.Default) {\n      getContact(message.from);\n    }\n  }\n\n  handleToggleExpand = () => {\n    const { onToggleExpand, id } = this.props;\n\n    onToggleExpand(id);\n  }\n\n  render() {\n    const { sender, message, me, hideTracks, publicFocus } = this.props;\n\n    return (\n      <button\n        onClick={this.handleToggleExpand}\n        className={classnames('thread-detail-collapsed-cell', { 'public-focus': !!publicFocus })}\n      >\n        <img className=\"thread-detail-avatar\" src={sender && sender.photoUrl} />\n        <div className=\"message-content\">\n          <div className=\"sender\">\n            {getDisplayName(message.from, me)}\n          </div>\n          <div className=\"snippet\">{message.snippet}</div>\n        </div>\n        <div className=\"right-content\">\n          <div className=\"top\">\n            {message.hasAttachments &&\n              <div className=\"attachment\">\n                <Attachment />\n              </div>\n            }\n            <div className=\"timestamp\">{showMostRecent(message.internal, true)}</div>\n          </div>\n          {message.tracked && !hideTracks &&\n            <div className=\"tracks\">\n              <Track className={classnames('track-icon', { tracks: message.tracks > 0 })}/>\n              {message.tracks > 0 && <div>{message.tracks}</div>}\n            </div>\n          }\n        </div>\n      </button>\n    );\n  }\n}\n\nexport default CollapsedCell;\n"]}]}