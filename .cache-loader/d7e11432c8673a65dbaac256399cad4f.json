{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/Event.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/Event.tsx","mtime":1675280253996},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgRHJhZ2dhYmxlQ29yZSB9IGZyb20gJ3JlYWN0LWRyYWdnYWJsZSc7CmltcG9ydCAnLi9FdmVudC5zY3NzJzsKaW1wb3J0IHsgY29udmVydFBvc2l0aW9uVG9UaW1lQmxvY2sgfSBmcm9tICdAc3JjL2xpYi9ldmVudCc7CmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnOwp2YXIgRHJhZ2dpbmdUeXBlOwooZnVuY3Rpb24gKERyYWdnaW5nVHlwZSkgewogICAgRHJhZ2dpbmdUeXBlWyJNb3ZpbmciXSA9ICJtb3ZpbmciOwogICAgRHJhZ2dpbmdUeXBlWyJSZXNpemluZyJdID0gInJlc2l6aW5nIjsKICAgIERyYWdnaW5nVHlwZVsiTm9uZSJdID0gIm5vbmUiOwp9KShEcmFnZ2luZ1R5cGUgfHwgKERyYWdnaW5nVHlwZSA9IHt9KSk7CnZhciBFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhFdmVudCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIEV2ZW50KHByb3BzKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVEcmFnU3RhcnQgPSBmdW5jdGlvbiAoZSwgZGF0YSkgewogICAgICAgICAgICB2YXIgbm9kZUJvdHRvbSA9IF90aGlzLnJlZiAmJiAoX3RoaXMucmVmLm9mZnNldFRvcCArIF90aGlzLnJlZi5vZmZzZXRIZWlnaHQpOwogICAgICAgICAgICAvLyBhbGxvdyBzcGFjZSBmb3IgcmVzaXppbmcKICAgICAgICAgICAgaWYgKGRhdGEueSA8IG5vZGVCb3R0b20gLSAxMCkgewogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGluaXRpYWxYOiBkYXRhLngsCiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFk6IGRhdGEueSwKICAgICAgICAgICAgICAgICAgICBkcmFnZ2luZzogRHJhZ2dpbmdUeXBlLk1vdmluZywKICAgICAgICAgICAgICAgICAgICB0ZW1wVGltZUJsb2NrOiBfdGhpcy5wcm9wcy50aW1lQmxvY2ssCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZVJlc2l6ZVN0YXJ0KGUsIGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVEcmFnID0gZnVuY3Rpb24gKGUsIGRhdGEpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGluaXRpYWxMZWZ0ID0gX2EuaW5pdGlhbExlZnQsIGluaXRpYWxUb3AgPSBfYS5pbml0aWFsVG9wLCBjb2x1bW5XaWR0aCA9IF9hLmNvbHVtbldpZHRoLCByb3dIZWlnaHQgPSBfYS5yb3dIZWlnaHQsIGRhdGVSYW5nZSA9IF9hLmRhdGVSYW5nZSwgc3RhcnRIb3VyID0gX2Euc3RhcnRIb3VyLCB0aW1lQmxvY2sgPSBfYS50aW1lQmxvY2s7CiAgICAgICAgICAgIHZhciBfYiA9IF90aGlzLnN0YXRlLCBpbml0aWFsWCA9IF9iLmluaXRpYWxYLCBpbml0aWFsWSA9IF9iLmluaXRpYWxZLCBkcmFnZ2luZyA9IF9iLmRyYWdnaW5nOwogICAgICAgICAgICBpZiAoZHJhZ2dpbmcgPT09IERyYWdnaW5nVHlwZS5Nb3ZpbmcpIHsKICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gaW5pdGlhbExlZnQgLSAoaW5pdGlhbFggLSBkYXRhLngpOwogICAgICAgICAgICAgICAgdmFyIHRvcCA9IGluaXRpYWxUb3AgLSAoaW5pdGlhbFkgLSBkYXRhLnkpOwogICAgICAgICAgICAgICAgdmFyIHRpbWVibG9ja0RhdGVzID0gY29udmVydFBvc2l0aW9uVG9UaW1lQmxvY2soeyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCwgaGVpZ2h0OiBfdGhpcy5zdGF0ZS5oZWlnaHQgfSwgc3RhcnRIb3VyLCBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCBkYXRlUmFuZ2UpOwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnQsCiAgICAgICAgICAgICAgICAgICAgdG9wOiB0b3AsCiAgICAgICAgICAgICAgICAgICAgdGVtcFRpbWVCbG9jazogdGltZWJsb2NrRGF0ZXMgPyBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGltZWJsb2NrRGF0ZXMpLCB7IGV2ZW50OiB0aW1lQmxvY2suZXZlbnQgfSkgOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChkcmFnZ2luZyA9PT0gRHJhZ2dpbmdUeXBlLlJlc2l6aW5nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVSZXNpemVEcmFnKGUsIGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVEcmFnRW5kID0gZnVuY3Rpb24gKGUsIGRhdGEpIHsKICAgICAgICAgICAgdmFyIG9uVXBkYXRlID0gX3RoaXMucHJvcHMub25VcGRhdGU7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnN0YXRlLCB0b3AgPSBfYS50b3AsIGxlZnQgPSBfYS5sZWZ0LCBoZWlnaHQgPSBfYS5oZWlnaHQ7CiAgICAgICAgICAgIG9uVXBkYXRlKHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQsIGhlaWdodDogaGVpZ2h0IH0pOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBpbml0aWFsWDogMCwKICAgICAgICAgICAgICAgIGluaXRpYWxZOiAwLAogICAgICAgICAgICAgICAgZHJhZ2dpbmc6IERyYWdnaW5nVHlwZS5Ob25lLAogICAgICAgICAgICAgICAgdGVtcFRpbWVCbG9jazogdW5kZWZpbmVkLAogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZVJlc2l6ZVN0YXJ0ID0gZnVuY3Rpb24gKGUsIGRhdGEpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgaW5pdGlhbFk6IGRhdGEueSwKICAgICAgICAgICAgICAgIGluaXRpYWxYOiAwLAogICAgICAgICAgICAgICAgZHJhZ2dpbmc6IERyYWdnaW5nVHlwZS5SZXNpemluZywKICAgICAgICAgICAgICAgIHRlbXBUaW1lQmxvY2s6IF90aGlzLnByb3BzLnRpbWVCbG9jaywKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVSZXNpemVEcmFnID0gZnVuY3Rpb24gKGUsIGRhdGEpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGluaXRpYWxIZWlnaHQgPSBfYS5pbml0aWFsSGVpZ2h0LCByb3dIZWlnaHQgPSBfYS5yb3dIZWlnaHQsIHN0YXJ0SG91ciA9IF9hLnN0YXJ0SG91ciwgY29sdW1uV2lkdGggPSBfYS5jb2x1bW5XaWR0aCwgZGF0ZVJhbmdlID0gX2EuZGF0ZVJhbmdlLCB0aW1lQmxvY2sgPSBfYS50aW1lQmxvY2s7CiAgICAgICAgICAgIHZhciBfYiA9IF90aGlzLnN0YXRlLCBpbml0aWFsWSA9IF9iLmluaXRpYWxZLCBsZWZ0ID0gX2IubGVmdCwgdG9wID0gX2IudG9wOwogICAgICAgICAgICBpZiAoaW5pdGlhbEhlaWdodCAmJiBpbml0aWFsWSkgewogICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgubWF4KGluaXRpYWxIZWlnaHQgLSAoaW5pdGlhbFkgLSBkYXRhLnkpLCByb3dIZWlnaHQgLyAyKTsKICAgICAgICAgICAgICAgIHZhciB0aW1lYmxvY2tEYXRlcyA9IGNvbnZlcnRQb3NpdGlvblRvVGltZUJsb2NrKHsgbGVmdDogbGVmdCwgdG9wOiB0b3AsIGhlaWdodDogaGVpZ2h0IH0sIHN0YXJ0SG91ciwgY29sdW1uV2lkdGgsIHJvd0hlaWdodCwgZGF0ZVJhbmdlKTsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCwKICAgICAgICAgICAgICAgICAgICB0ZW1wVGltZUJsb2NrOiB0aW1lYmxvY2tEYXRlcyA/IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aW1lYmxvY2tEYXRlcyksIHsgZXZlbnQ6IHRpbWVCbG9jay5ldmVudCB9KSA6IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVSZWYgPSBmdW5jdGlvbiAocmVmKSB7CiAgICAgICAgICAgIF90aGlzLnJlZiA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLnJlbmRlck1haW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCB0aW1lQmxvY2sgPSBfYS50aW1lQmxvY2ssIGNvbHVtbldpZHRoID0gX2EuY29sdW1uV2lkdGgsIHByb3Bvc2VkID0gX2EucHJvcG9zZWQ7CiAgICAgICAgICAgIHZhciBfYiA9IF90aGlzLnN0YXRlLCB0b3AgPSBfYi50b3AsIGhlaWdodCA9IF9iLmhlaWdodCwgbGVmdCA9IF9iLmxlZnQsIHRlbXBUaW1lQmxvY2sgPSBfYi50ZW1wVGltZUJsb2NrOwogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCdldmVudCcsICdzZWxlY3RlZC1ldmVudCcsIHsgcHJvcG9zZWQ6ICEhcHJvcG9zZWQgfSksIHJlZjogX3RoaXMuaGFuZGxlUmVmLCBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgICAgICAgICAgICAgICAgIHRvcDogdG9wLAogICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnQsCiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvbHVtbldpZHRoLAogICAgICAgICAgICAgICAgfSB9LAogICAgICAgICAgICAgICAgIXByb3Bvc2VkICYmIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpbWUiIH0sICh0ZW1wVGltZUJsb2NrIHx8IHRpbWVCbG9jaykuc3RhcnRUaW1lLmZvcm1hdCgnaDptbSBhJykpKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAibmFtZSIgfSwgKCh0ZW1wVGltZUJsb2NrIHx8IHRpbWVCbG9jaykuZXZlbnQgJiYgKHRlbXBUaW1lQmxvY2sgfHwgdGltZUJsb2NrKS5ldmVudC5uYW1lKQogICAgICAgICAgICAgICAgICAgIHx8ICdOZXcgRXZlbnQnKSwKICAgICAgICAgICAgICAgICFwcm9wb3NlZCAmJiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJyZXNpemUiIH0pKSkpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIGluaXRpYWxYOiAwLAogICAgICAgICAgICBpbml0aWFsWTogMCwKICAgICAgICAgICAgdG9wOiBwcm9wcy5pbml0aWFsVG9wLAogICAgICAgICAgICBoZWlnaHQ6IHByb3BzLmluaXRpYWxIZWlnaHQsCiAgICAgICAgICAgIGxlZnQ6IHByb3BzLmluaXRpYWxMZWZ0LAogICAgICAgICAgICBkcmFnZ2luZzogRHJhZ2dpbmdUeXBlLk5vbmUsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBFdmVudC5wcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiAobmV4dFByb3BzKSB7CiAgICAgICAgaWYgKG5leHRQcm9wcy5pbml0aWFsVG9wICE9PSB0aGlzLnN0YXRlLnRvcCB8fAogICAgICAgICAgICBuZXh0UHJvcHMuaW5pdGlhbExlZnQgIT09IHRoaXMuc3RhdGUubGVmdCB8fAogICAgICAgICAgICBuZXh0UHJvcHMuaW5pdGlhbEhlaWdodCAhPT0gdGhpcy5zdGF0ZS5oZWlnaHQpIHsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICB0b3A6IG5leHRQcm9wcy5pbml0aWFsVG9wLAogICAgICAgICAgICAgICAgbGVmdDogbmV4dFByb3BzLmluaXRpYWxMZWZ0LAogICAgICAgICAgICAgICAgaGVpZ2h0OiBuZXh0UHJvcHMuaW5pdGlhbEhlaWdodCwKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKICAgIC8vIFRPRE8oU0hJTik6IERpc2FibGUgZHJhZyB3aGVuIGEgcHJvcG9zZWQgdGltZQogICAgRXZlbnQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBjb2x1bW5XaWR0aCA9IF9hLmNvbHVtbldpZHRoLCByb3dIZWlnaHQgPSBfYS5yb3dIZWlnaHQsIHByb3Bvc2VkID0gX2EucHJvcG9zZWQ7CiAgICAgICAgaWYgKCEhcHJvcG9zZWQpIHsKICAgICAgICAgICAgcmV0dXJuICh0aGlzLnJlbmRlck1haW4oKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnZ2FibGVDb3JlLCB7IG9uU3RhcnQ6IHRoaXMuaGFuZGxlRHJhZ1N0YXJ0LCBvbkRyYWc6IHRoaXMuaGFuZGxlRHJhZywgb25TdG9wOiB0aGlzLmhhbmRsZURyYWdFbmQsIGdyaWQ6IFtjb2x1bW5XaWR0aCwgcm93SGVpZ2h0IC8gMl0gfSwgdGhpcy5yZW5kZXJNYWluKCkpKTsKICAgIH07CiAgICByZXR1cm4gRXZlbnQ7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBFdmVudDsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/Event.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/Event.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,aAAa,EAAiB,MAAM,iBAAiB,CAAC;AAE/D,OAAO,cAAc,CAAC;AACtB,OAAO,EAAE,0BAA0B,EAAE,MAAM,gBAAgB,CAAC;AAE5D,OAAO,UAAU,MAAM,YAAY,CAAC;AAiBpC,IAAW,YAIV;AAJD,WAAW,YAAY;IACrB,iCAAiB,CAAA;IACjB,qCAAqB,CAAA;IACrB,6BAAa,CAAA;AACf,CAAC,EAJU,YAAY,KAAZ,YAAY,QAItB;AAaD;IAAoB,yBAAiC;IAGnD,eAAY,KAAY;QAAxB,YACE,iBAAO,SAUR;QAgBD,qBAAe,GAAG,UAAC,CAAa,EAAE,IAAmB;YACnD,IAAM,UAAU,GAAG,KAAI,CAAC,GAAG,IAAI,CAAC,KAAI,CAAC,GAAG,CAAC,SAAS,GAAG,KAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAE5E,2BAA2B;YAC3B,IAAI,IAAI,CAAC,CAAC,GAAG,UAAU,GAAG,EAAE,EAAE;gBAC5B,KAAI,CAAC,QAAQ,CAAC;oBACZ,QAAQ,EAAE,IAAI,CAAC,CAAC;oBAChB,QAAQ,EAAE,IAAI,CAAC,CAAC;oBAChB,QAAQ,EAAE,YAAY,CAAC,MAAM;oBAC7B,aAAa,EAAE,KAAI,CAAC,KAAK,CAAC,SAAS;iBACpC,CAAC,CAAC;aACJ;iBAAM;gBACL,KAAI,CAAC,iBAAiB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;aACjC;QACH,CAAC,CAAA;QAED,gBAAU,GAAG,UAAC,CAAa,EAAE,IAAmB;YACxC,IAAA,gBAQQ,EAPZ,4BAAW,EACX,0BAAU,EACV,4BAAW,EACX,wBAAS,EACT,wBAAS,EACT,wBAAS,EACT,wBACY,CAAC;YACT,IAAA,gBAA6C,EAA3C,sBAAQ,EAAE,sBAAQ,EAAE,sBAAuB,CAAC;YAEpD,IAAI,QAAQ,KAAK,YAAY,CAAC,MAAM,EAAE;gBACpC,IAAM,IAAI,GAAG,WAAW,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC/C,IAAM,GAAG,GAAG,UAAU,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC7C,IAAM,cAAc,GAAG,0BAA0B,CAC/C,EAAE,IAAI,MAAA,EAAE,GAAG,KAAA,EAAE,MAAM,EAAE,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EACxC,SAAS,EACT,WAAW,EACX,SAAS,EACT,SAAS,CACV,CAAC;gBACF,KAAI,CAAC,QAAQ,CAAC;oBACZ,IAAI,MAAA;oBACJ,GAAG,KAAA;oBACH,aAAa,EAAE,cAAc,CAAC,CAAC,uBAC1B,cAAc,KACjB,KAAK,EAAE,SAAS,CAAC,KAAK,IACtB,CAAC,CAAC,SAAS;iBACd,CAAC,CAAC;aACJ;iBAAM,IAAI,QAAQ,KAAK,YAAY,CAAC,QAAQ,EAAE;gBAC7C,KAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;aAChC;QACH,CAAC,CAAA;QAED,mBAAa,GAAG,UAAC,CAAa,EAAE,IAAmB;YACzC,IAAA,+BAAQ,CAAgB;YAC1B,IAAA,gBAAkC,EAAhC,YAAG,EAAE,cAAI,EAAE,kBAAqB,CAAC;YAEzC,QAAQ,CAAC,EAAE,GAAG,KAAA,EAAE,IAAI,MAAA,EAAE,MAAM,QAAA,EAAE,CAAC,CAAC;YAChC,KAAI,CAAC,QAAQ,CAAC;gBACZ,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,YAAY,CAAC,IAAI;gBAC3B,aAAa,EAAE,SAAS;aACzB,CAAC,CAAC;QACL,CAAC,CAAA;QAED,uBAAiB,GAAG,UAAC,CAAa,EAAE,IAAmB;YACrD,KAAI,CAAC,QAAQ,CAAC;gBACZ,QAAQ,EAAE,IAAI,CAAC,CAAC;gBAChB,QAAQ,EAAE,CAAC;gBACX,QAAQ,EAAE,YAAY,CAAC,QAAQ;gBAC/B,aAAa,EAAE,KAAI,CAAC,KAAK,CAAC,SAAS;aACpC,CAAC,CAAC;QACL,CAAC,CAAA;QAED,sBAAgB,GAAG,UAAC,CAAa,EAAE,IAAmB;YAC9C,IAAA,gBAOQ,EANZ,gCAAa,EACb,wBAAS,EACT,wBAAS,EACT,4BAAW,EACX,wBAAS,EACT,wBACY,CAAC;YACT,IAAA,gBAAoC,EAAlC,sBAAQ,EAAE,cAAI,EAAE,YAAkB,CAAC;YAE3C,IAAI,aAAa,IAAI,QAAQ,EAAE;gBAC7B,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC;gBAC5E,IAAM,cAAc,GAAG,0BAA0B,CAC/C,EAAE,IAAI,MAAA,EAAE,GAAG,KAAA,EAAE,MAAM,QAAA,EAAE,EACrB,SAAS,EACT,WAAW,EACX,SAAS,EACT,SAAS,CACV,CAAC;gBACF,KAAI,CAAC,QAAQ,CAAC;oBACZ,MAAM,QAAA;oBACN,aAAa,EAAE,cAAc,CAAC,CAAC,uBAC1B,cAAc,KACjB,KAAK,EAAE,SAAS,CAAC,KAAK,IACtB,CAAC,CAAC,SAAS;iBACd,CAAC,CAAC;aACJ;QACH,CAAC,CAAA;QAED,eAAS,GAAG,UAAC,GAAmB;YAC9B,KAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACjB,CAAC,CAAA;QAED,gBAAU,GAAG;YACL,IAAA,gBAAiD,EAA/C,wBAAS,EAAE,4BAAW,EAAE,sBAAuB,CAAC;YAClD,IAAA,gBAAiD,EAA/C,YAAG,EAAE,kBAAM,EAAE,cAAI,EAAE,gCAA4B,CAAC;YACxD,OAAO,CACL,6BACE,SAAS,EAAE,UAAU,CAAC,OAAO,EAAE,gBAAgB,EAAE,EAAE,QAAQ,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,EAC1E,GAAG,EAAE,KAAI,CAAC,SAAS,EACnB,KAAK,EAAE;oBACL,MAAM,QAAA;oBACN,GAAG,KAAA;oBACH,IAAI,MAAA;oBACJ,KAAK,EAAE,WAAW;iBACnB;gBAEA,CAAC,QAAQ,IAAI,CACZ,6BAAK,SAAS,EAAC,MAAM,IAAE,CAAC,aAAa,IAAI,SAAS,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAO,CACtF;gBACD,6BAAK,SAAS,EAAC,MAAM,IAClB,CAAC,CAAC,aAAa,IAAI,SAAS,CAAC,CAAC,KAAK,IAAI,CAAC,aAAa,IAAI,SAAS,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC;uBAC3E,WAAW,CACZ;gBACL,CAAC,QAAQ,IAAI,CACZ,6BAAK,SAAS,EAAC,QAAQ,GAAG,CAC3B,CACG,CACP,CAAC;QACJ,CAAC,CAAA;QA7JC,KAAI,CAAC,KAAK,GAAG;YACX,QAAQ,EAAE,CAAC;YACX,QAAQ,EAAE,CAAC;YACX,GAAG,EAAE,KAAK,CAAC,UAAU;YACrB,MAAM,EAAE,KAAK,CAAC,aAAa;YAC3B,IAAI,EAAE,KAAK,CAAC,WAAW;YACvB,QAAQ,EAAE,YAAY,CAAC,IAAI;SAC5B,CAAC;;IACJ,CAAC;IAED,gDAAgC,GAAhC,UAAiC,SAAgB;QAC/C,IACE,SAAS,CAAC,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,GAAG;YACvC,SAAS,CAAC,WAAW,KAAK,IAAI,CAAC,KAAK,CAAC,IAAI;YACzC,SAAS,CAAC,aAAa,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,EAC7C;YACA,IAAI,CAAC,QAAQ,CAAC;gBACZ,GAAG,EAAE,SAAS,CAAC,UAAU;gBACzB,IAAI,EAAE,SAAS,CAAC,WAAW;gBAC3B,MAAM,EAAE,SAAS,CAAC,aAAa;aAChC,CAAC,CAAC;SACJ;IACH,CAAC;IAyID,gDAAgD;IAChD,sBAAM,GAAN;QACQ,IAAA,eAAiD,EAA/C,4BAAW,EAAE,wBAAS,EAAE,sBAAuB,CAAC;QAExD,IAAI,CAAC,CAAC,QAAQ,EAAE;YACd,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;SAC5B;QAED,OAAO,CACL,oBAAC,aAAa,IACZ,OAAO,EAAE,IAAI,CAAC,eAAe,EAC7B,MAAM,EAAE,IAAI,CAAC,UAAU,EACvB,MAAM,EAAE,IAAI,CAAC,aAAa,EAC1B,IAAI,EAAE,CAAC,WAAW,EAAE,SAAS,GAAG,CAAC,CAAC,IAEjC,IAAI,CAAC,UAAU,EAAE,CACJ,CACjB,CAAC;IACJ,CAAC;IACH,YAAC;AAAD,CAAC,AAxLD,CAAoB,KAAK,CAAC,aAAa,GAwLtC;AAED,eAAe,KAAK,CAAC","sourcesContent":["import React from 'react';\nimport { DraggableCore, DraggableData } from 'react-draggable';\nimport { TimeBlock } from '@src/types';\nimport './Event.scss';\nimport { convertPositionToTimeBlock } from '@src/lib/event';\nimport { Moment } from 'moment';\nimport classNames from 'classnames';\n\ninterface Props {\n  timeBlock: TimeBlock;\n  initialTop: number;\n  initialLeft: number;\n  initialHeight: number;\n  onUpdate: (position: { top: number; left: number; height: number }) => void;\n  columnWidth: number;\n  rowHeight: number;\n  startHour: number;\n  dateRange: Moment[];\n\n  // for display in RSB\n  proposed?: boolean;\n}\n\nconst enum DraggingType {\n  Moving = 'moving',\n  Resizing = 'resizing',\n  None = 'none',\n}\n\ninterface State {\n  initialX: number;\n  initialY: number;\n  top: number;\n  height: number;\n  left: number;\n  event?: { name: string };\n  dragging: DraggingType;\n  tempTimeBlock?: TimeBlock;\n}\n\nclass Event extends React.PureComponent<Props, State> {\n  private ref: HTMLDivElement;\n\n  constructor(props: Props) {\n    super();\n\n    this.state = {\n      initialX: 0,\n      initialY: 0,\n      top: props.initialTop,\n      height: props.initialHeight,\n      left: props.initialLeft,\n      dragging: DraggingType.None,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (\n      nextProps.initialTop !== this.state.top ||\n      nextProps.initialLeft !== this.state.left ||\n      nextProps.initialHeight !== this.state.height\n    ) {\n      this.setState({\n        top: nextProps.initialTop,\n        left: nextProps.initialLeft,\n        height: nextProps.initialHeight,\n      });\n    }\n  }\n\n  handleDragStart = (e: MouseEvent, data: DraggableData) => {\n    const nodeBottom = this.ref && (this.ref.offsetTop + this.ref.offsetHeight);\n\n    // allow space for resizing\n    if (data.y < nodeBottom - 10) {\n      this.setState({\n        initialX: data.x,\n        initialY: data.y,\n        dragging: DraggingType.Moving,\n        tempTimeBlock: this.props.timeBlock,\n      });\n    } else {\n      this.handleResizeStart(e, data);\n    }\n  }\n\n  handleDrag = (e: MouseEvent, data: DraggableData) => {\n    const {\n      initialLeft,\n      initialTop,\n      columnWidth,\n      rowHeight,\n      dateRange,\n      startHour,\n      timeBlock,\n    } = this.props;\n    const { initialX, initialY, dragging } = this.state;\n\n    if (dragging === DraggingType.Moving) {\n      const left = initialLeft - (initialX - data.x);\n      const top = initialTop - (initialY - data.y);\n      const timeblockDates = convertPositionToTimeBlock(\n        { left, top, height: this.state.height },\n        startHour,\n        columnWidth,\n        rowHeight,\n        dateRange,\n      );\n      this.setState({\n        left,\n        top,\n        tempTimeBlock: timeblockDates ? {\n          ...timeblockDates,\n          event: timeBlock.event,\n        } : undefined,\n      });\n    } else if (dragging === DraggingType.Resizing) {\n      this.handleResizeDrag(e, data);\n    }\n  }\n\n  handleDragEnd = (e: MouseEvent, data: DraggableData) => {\n    const { onUpdate } = this.props;\n    const { top, left, height } = this.state;\n\n    onUpdate({ top, left, height });\n    this.setState({\n      initialX: 0,\n      initialY: 0,\n      dragging: DraggingType.None,\n      tempTimeBlock: undefined,\n    });\n  }\n\n  handleResizeStart = (e: MouseEvent, data: DraggableData) => {\n    this.setState({\n      initialY: data.y,\n      initialX: 0,\n      dragging: DraggingType.Resizing,\n      tempTimeBlock: this.props.timeBlock,\n    });\n  }\n\n  handleResizeDrag = (e: MouseEvent, data: DraggableData) => {\n    const {\n      initialHeight,\n      rowHeight,\n      startHour,\n      columnWidth,\n      dateRange,\n      timeBlock,\n    } = this.props;\n    const { initialY, left, top } = this.state;\n\n    if (initialHeight && initialY) {\n      const height = Math.max(initialHeight - (initialY - data.y), rowHeight / 2);\n      const timeblockDates = convertPositionToTimeBlock(\n        { left, top, height },\n        startHour,\n        columnWidth,\n        rowHeight,\n        dateRange,\n      );\n      this.setState({\n        height,\n        tempTimeBlock: timeblockDates ? {\n          ...timeblockDates,\n          event: timeBlock.event,\n        } : undefined,\n      });\n    }\n  }\n\n  handleRef = (ref: HTMLDivElement) => {\n    this.ref = ref;\n  }\n\n  renderMain = () => {\n    const { timeBlock, columnWidth, proposed } = this.props;\n    const { top, height, left, tempTimeBlock } = this.state;\n    return (\n      <div\n        className={classNames('event', 'selected-event', { proposed: !!proposed })}\n        ref={this.handleRef}\n        style={{\n          height,\n          top,\n          left,\n          width: columnWidth,\n        }}\n      >\n        {!proposed && (\n          <div className=\"time\">{(tempTimeBlock || timeBlock).startTime.format('h:mm a')}</div>\n        )}\n        <div className=\"name\">\n          {((tempTimeBlock || timeBlock).event && (tempTimeBlock || timeBlock).event.name)\n            || 'New Event'}\n        </div>\n        {!proposed && (\n          <div className=\"resize\" />\n        )}\n      </div>\n    );\n  }\n\n  // TODO(SHIN): Disable drag when a proposed time\n  render() {\n    const { columnWidth, rowHeight, proposed } = this.props;\n\n    if (!!proposed) {\n      return (this.renderMain());\n    }\n\n    return (\n      <DraggableCore\n        onStart={this.handleDragStart}\n        onDrag={this.handleDrag}\n        onStop={this.handleDragEnd}\n        grid={[columnWidth, rowHeight / 2]}\n      >\n        {this.renderMain()}\n      </DraggableCore>\n    );\n  }\n}\n\nexport default Event;\n"]}]}