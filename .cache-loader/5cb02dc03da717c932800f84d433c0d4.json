{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountChooser/AccountChooser.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountChooser/AccountChooser.tsx","mtime":1675280254094},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgZmluZCB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IEFjY291bnRTdGF0dXMsIEFjY291bnRUeXBlIH0gZnJvbSAnQHNyYy90eXBlcyc7CmltcG9ydCBBbGlhc0l0ZW0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9BbGlhc0l0ZW0nOwppbXBvcnQgUGx1cyBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvUGx1cy5zdmcnOwppbXBvcnQgJy4vQWNjb3VudENob29zZXIuc2Nzcyc7CmltcG9ydCBOYXZpZ2F0aW9uSGVhZGVyIGZyb20gJ0BzcmMvcm91dGVzL1NldHRpbmdzL2NvbXBvbmVudHMvTmF2aWdhdGlvbkhlYWRlcic7CmltcG9ydCBicm93c2VySGlzdG9yeSBmcm9tICdAc3JjL2xpYi9icm93c2VySGlzdG9yeSc7CmltcG9ydCBDb25maXJtIGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL0NvbmZpcm0nOwovLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoCmltcG9ydCBSZWF1dGhlbnRpY2F0ZVBvcG92ZXIgZnJvbSAnQHNyYy9jb21wb25lbnRzL1Byb3ZpZGVycy9SZWF1dGhlbnRpY2F0ZVBvcG92ZXIvUmVhdXRoZW50aWNhdGVQb3BvdmVyJzsKaW1wb3J0IFVwZ3JhZGVQcm9tcHQgZnJvbSAnQHNyYy9jb21wb25lbnRzL0Jhc2UvVXBncmFkZVByb21wdC9VcGdyYWRlUHJvbXB0JzsKaW1wb3J0IHsgYWNjb3VudExpbWl0Q29weSB9IGZyb20gJ0BzcmMvbGliL21vZGVscy9iaWxsaW5nJzsKaW1wb3J0IHsgTUFYX0FDQ09VTlRfTElNSVQgfSBmcm9tICdAc3JjL2xpYi9hY2NvdW50JzsKdmFyIEFjY291bnRDaG9vc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKEFjY291bnRDaG9vc2VyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gQWNjb3VudENob29zZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICBfdGhpcy5oYW5kbGVVcGdyYWRlUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy51cGdyYWRlUHJvbXB0ID0gcmVmOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQWNjb3VudFNlbGVjdCA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKCIvc2V0dGluZ3MvYWNjb3VudHMvIiArIGlkKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUJhY2tQcmVzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkuZ29CYWNrKCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBY2NvdW50UmVhdXRoZW50aWNhdGUgPSBmdW5jdGlvbiAoYWNjb3VudElkKSB7CiAgICAgICAgICAgIHZhciBhY2NvdW50ID0gZmluZChfdGhpcy5wcm9wcy5hY2NvdW50cywgeyBpZDogYWNjb3VudElkIH0pOwogICAgICAgICAgICBpZiAoIWFjY291bnQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBzd2l0Y2ggKGFjY291bnQudHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSBBY2NvdW50VHlwZS5JTUFQOgogICAgICAgICAgICAgICAgY2FzZSBBY2NvdW50VHlwZS5pQ2xvdWQ6CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgICAgICBzaG93UmVhdXRoZW50aWNhdGVQb3B1cDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgcmVhdXRoZW50aWNhdGVBY2NvdW50OiBhY2NvdW50LAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5yZWF1dGhvcml6ZUFjY291bnQoYWNjb3VudElkKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUGFzc3dvcmRSZWF1dGhlbnRpY2F0ZSA9IGZ1bmN0aW9uIChhY2NvdW50SWQsIG5ld1Bhc3N3b3JkKSB7CiAgICAgICAgICAgIHZhciBhY2NvdW50ID0gZmluZChfdGhpcy5wcm9wcy5hY2NvdW50cywgeyBpZDogYWNjb3VudElkIH0pOwogICAgICAgICAgICBpZiAoIWFjY291bnQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5wcm9wcy51cGRhdGVBY2NvdW50UGFzc3dvcmQoYWNjb3VudCwgbmV3UGFzc3dvcmQpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlSGlkZVJlYXV0aGVudGljYXRlUG9wdXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIHNob3dSZWF1dGhlbnRpY2F0ZVBvcHVwOiBmYWxzZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVBZGRBY2NvdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgZmVhdHVyZXMgPSBfYS5mZWF0dXJlcywgYWNjb3VudHMgPSBfYS5hY2NvdW50czsKICAgICAgICAgICAgdmFyIHNob3dQcm9tcHQgPSBmZWF0dXJlcy5hY2NvdW50cyAmJiBhY2NvdW50cy5sZW5ndGggPiBmZWF0dXJlcy5hY2NvdW50czsKICAgICAgICAgICAgLy8gU2hvdyBTcGVjaWFsIGRpYWxvZ3VlIHdoZW4gbWF4IGFjY291bnQgbGltaXQgaXMgcmVhY2hlZAogICAgICAgICAgICBpZiAoc2hvd1Byb21wdCAmJiBhY2NvdW50cy5sZW5ndGggPT09IE1BWF9BQ0NPVU5UX0xJTUlUKSB7CiAgICAgICAgICAgICAgICB2YXIgY29uZmlybVByb3BzID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnWW91XCd2ZSByZWFjaGVkIHRoZSBtYXhpbXVtIG51bWJlciBvZiBhY2NvdW50cycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBjYW4gYWRkIGEgbWF4aW11bSBudW1iZXIgb2YgMjAgYWNjb3VudHMgdG8gUG9seW1haWwuIFBsZWFzZSByZW1vdmUgYW4gZXhpc3RpbmcgYWNjb3VudCBiZWZvcmUgYWRkaW5nIGEgbmV3IG9uZScsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUNvcHk6ICdPaycsCiAgICAgICAgICAgICAgICAgICAgb25Db25maXJtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogY29uZmlybVByb3BzIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzaG93UHJvbXB0KSB7CiAgICAgICAgICAgICAgICBfdGhpcy51cGdyYWRlUHJvbXB0LnNob3coKTsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd1VwZ3JhZGVQcm9tcHQ6IHRydWUgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnL3NldHRpbmdzL2FjY291bnRzL2Nvbm5lY3RQcm92aWRlcicpOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc3RhdGUgPSB7CiAgICAgICAgICAgIHNob3dSZWF1dGhlbnRpY2F0ZVBvcHVwOiBmYWxzZSwKICAgICAgICAgICAgaXNEZWxldGluZzogZmFsc2UsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBBY2NvdW50Q2hvb3Nlci5wcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiAobmV4dFByb3BzKSB7CiAgICAgICAgLy8ga2VlcCByZWF1dGhlbnRpY2F0ZSBhY2NvdW50IHVwZGF0ZWQKICAgICAgICBpZiAodGhpcy5zdGF0ZS5yZWF1dGhlbnRpY2F0ZUFjY291bnQpIHsKICAgICAgICAgICAgdmFyIGFjY291bnQgPSBmaW5kKG5leHRQcm9wcy5hY2NvdW50cywgewogICAgICAgICAgICAgICAgaWQ6IHRoaXMuc3RhdGUucmVhdXRoZW50aWNhdGVBY2NvdW50LmlkLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlYXV0aGVudGljYXRlQWNjb3VudDogYWNjb3VudCB9KTsKICAgICAgICB9CiAgICAgICAgLy8gaGlkZSBhdXRoZW50aWNhdG9uIHBvcHVwIGlmIHN0YXR1cyBpcyBubyBsb25nZXIgdmFsaWQKICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93UmVhdXRoZW50aWNhdGVQb3B1cCAmJiAoIXRoaXMuc3RhdGUucmVhdXRoZW50aWNhdGVBY2NvdW50IHx8CiAgICAgICAgICAgIHRoaXMuc3RhdGUucmVhdXRoZW50aWNhdGVBY2NvdW50LnN0YXR1cyAhPT0gQWNjb3VudFN0YXR1cy5JbnZhbGlkKSkgewogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvd1JlYXV0aGVudGljYXRlUG9wdXA6IGZhbHNlIH0pOwogICAgICAgIH0KICAgIH07CiAgICBBY2NvdW50Q2hvb3Nlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgYWNjb3VudHMgPSBfYS5hY2NvdW50cywgYmlsbGluZyA9IF9hLmJpbGxpbmc7CiAgICAgICAgdmFyIGNvbmZpcm1Qcm9wcyA9IHRoaXMuc3RhdGUuY29uZmlybVByb3BzOwogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhY2NvdW50LWNob29zZXIiIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTmF2aWdhdGlvbkhlYWRlciwgeyB0aXRsZTogIkFjY291bnRzIiwgaXNNb2JpbGU6IHRoaXMucHJvcHMuaXNNb2JpbGUsIGNvbGxhcHNlZE1vYmlsZTogdGhpcy5wcm9wcy5jb2xsYXBzZWRNb2JpbGUsIGNvbGxhcHNlTHNiOiB0aGlzLnByb3BzLmNvbGxhcHNlTHNiIH0pLAogICAgICAgICAgICBjb25maXJtUHJvcHMgJiYgKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29uZmlybSwgX19hc3NpZ24oe30sIGNvbmZpcm1Qcm9wcykpKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChVcGdyYWRlUHJvbXB0LCB7IHJlZjogdGhpcy5oYW5kbGVVcGdyYWRlUmVmLCB0aXRsZTogIlVwZ3JhZGUgeW91ciBQbGFuIHRvIGFkZCBtb3JlIGFjY291bnRzIiwgZGVzY3JpcHRpb246IGFjY291bnRMaW1pdENvcHkoYmlsbGluZyksIGJ1dHRvbkNvcHk6ICdVcGdyYWRlIFBsYW4nLCBsaWdodGJveDogdHJ1ZSB9KSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiaDQiLCBudWxsLCAiRW1haWwiKSwKICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBjbGFzc05hbWU6ICJhZGQtYWNjb3VudC1jb250YWluZXIiLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUFkZEFjY291bnQgfSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWRkLWFjY291bnQtY2VsbCIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImFkZC1hbGlhcy1idXR0b24iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUGx1cywgbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICJcdTAwQTAgQWRkIEFjY291bnQiKSkpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRhYmxlIiB9LCBhY2NvdW50cy5tYXAoZnVuY3Rpb24gKGFjY291bnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEFsaWFzSXRlbSwgX19hc3NpZ24oe30sIGFjY291bnQsIHsgbmFtZTogYWNjb3VudC5kZXNjcmlwdGlvbiwga2V5OiBhY2NvdW50LmVtYWlsLCBvbkNsaWNrOiBfdGhpcy5oYW5kbGVBY2NvdW50U2VsZWN0LCByZWF1dGhlbnRpY2F0ZTogYWNjb3VudC5zdGF0dXMgPT09IEFjY291bnRTdGF0dXMuSW52YWxpZCwgb25SZWF1dGhlbnRpY2F0ZTogX3RoaXMuaGFuZGxlQWNjb3VudFJlYXV0aGVudGljYXRlIH0pKTsKICAgICAgICAgICAgfSkpLAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYXV0aGVudGljYXRlUG9wb3ZlciwgeyBhY2NvdW50OiB0aGlzLnN0YXRlLnJlYXV0aGVudGljYXRlQWNjb3VudCwgc2hvdzogdGhpcy5zdGF0ZS5zaG93UmVhdXRoZW50aWNhdGVQb3B1cCwgb25SZWF1dGhlbnRpY2F0ZTogdGhpcy5oYW5kbGVQYXNzd29yZFJlYXV0aGVudGljYXRlLCBvbkhpZGU6IHRoaXMuaGFuZGxlSGlkZVJlYXV0aGVudGljYXRlUG9wdXAgfSkpKTsKICAgIH07CiAgICByZXR1cm4gQWNjb3VudENob29zZXI7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBBY2NvdW50Q2hvb3NlcjsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountChooser/AccountChooser.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Accounts/routes/AccountChooser/AccountChooser.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { find } from 'lodash';\n\nimport { Account, AccountStatus, AccountType, Features } from '@src/types';\nimport AliasItem from '../../components/AliasItem';\nimport Plus from '@src/components/Icons/Plus.svg';\n\nimport './AccountChooser.scss';\nimport NavigationHeader from '@src/routes/Settings/components/NavigationHeader';\nimport browserHistory from '@src/lib/browserHistory';\nimport Confirm, { Props as ConfirmProps } from '@src/components/Base/Confirm';\n// tslint:disable-next-line:max-line-length\nimport ReauthenticatePopover from '@src/components/Providers/ReauthenticatePopover/ReauthenticatePopover';\nimport UpgradePrompt from '@src/components/Base/UpgradePrompt/UpgradePrompt';\nimport { Billing } from '@src/types/billing';\nimport { accountLimitCopy } from '@src/lib/models/billing';\nimport { MAX_ACCOUNT_LIMIT } from '@src/lib/account';\n\nexport interface Props {\n  accounts: Account[];\n  features: Features;\n  billing?: Billing;\n  isTeamAdmin: boolean;\n  isMobile?: boolean;\n  collapsedMobile?: boolean;\n}\n\nexport interface DispatchProps {\n  updateAccountPassword: (account: Account, newPassword: string) => void;\n  reauthorizeAccount: (accountId: string) => void;\n  collapseLsb?: (collapse: boolean) => void;\n}\n\ninterface State {\n  showReauthenticatePopup: boolean;\n  reauthenticateAccount?: Account;\n  showUpgradePrompt?: boolean;\n  confirmProps?: ConfirmProps;\n  confirmDeleteValue?: string;\n  isDeleting: boolean;\n}\n\nclass AccountChooser extends React.PureComponent<Props & DispatchProps, State> {\n  upgradePrompt: UpgradePrompt;\n\n  constructor() {\n    super();\n    this.state = {\n      showReauthenticatePopup: false,\n      isDeleting: false,\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    // keep reauthenticate account updated\n    if (this.state.reauthenticateAccount) {\n      const account = find(nextProps.accounts, {\n        id: this.state.reauthenticateAccount.id,\n      });\n      this.setState({ reauthenticateAccount: account });\n    }\n\n    // hide authenticaton popup if status is no longer valid\n    if (this.state.showReauthenticatePopup && (\n      !this.state.reauthenticateAccount ||\n      this.state.reauthenticateAccount.status !== AccountStatus.Invalid)\n    ) {\n      this.setState({ showReauthenticatePopup: false });\n    }\n  }\n\n  handleUpgradeRef = (ref: UpgradePrompt) => {\n    this.upgradePrompt = ref;\n  }\n\n  handleAccountSelect = (id: string) => {\n    browserHistory.push(`/settings/accounts/${id}`);\n  }\n\n  handleBackPress = () => {\n    browserHistory.goBack();\n  }\n\n  handleAccountReauthenticate = (accountId: string) => {\n    const account = find(this.props.accounts, { id: accountId });\n    if (!account) {\n      return;\n    }\n\n    switch (account.type) {\n      case AccountType.IMAP:\n      case AccountType.iCloud:\n        this.setState({\n          showReauthenticatePopup: true,\n          reauthenticateAccount: account,\n        });\n        break;\n      default:\n        this.props.reauthorizeAccount(accountId);\n        break;\n    }\n  }\n\n  handlePasswordReauthenticate = (accountId: string, newPassword: string) => {\n    const account = find(this.props.accounts, { id: accountId });\n    if (!account) {\n      return;\n    }\n\n    this.props.updateAccountPassword(account, newPassword);\n  }\n\n  handleHideReauthenticatePopup = () => {\n    this.setState({\n      showReauthenticatePopup: false,\n    });\n  }\n\n  handleAddAccount = () => {\n    const { features, accounts } = this.props;\n    const showPrompt = features.accounts && accounts.length > features.accounts;\n\n    // Show Special dialogue when max account limit is reached\n    if (showPrompt && accounts.length === MAX_ACCOUNT_LIMIT) {\n      const confirmProps: ConfirmProps = {\n        title: 'You\\'ve reached the maximum number of accounts',\n        message: 'You can add a maximum number of 20 accounts to Polymail. Please remove an existing account before adding a new one',\n        confirmCopy: 'Ok',\n        onConfirm: () => {\n          this.setState({ confirmProps: undefined });\n        },\n      };\n\n      this.setState({ confirmProps });\n      return;\n    }\n\n    if (showPrompt) {\n      this.upgradePrompt.show();\n      this.setState({ showUpgradePrompt: true });\n      return;\n    }\n\n    browserHistory.push('/settings/accounts/connectProvider');\n  }\n\n  render() {\n    const { accounts, billing } = this.props;\n    const { confirmProps } = this.state;\n\n    return (\n      <div className=\"account-chooser\">\n        <NavigationHeader\n          title=\"Accounts\"\n          isMobile={this.props.isMobile}\n          collapsedMobile={this.props.collapsedMobile}\n          collapseLsb={this.props.collapseLsb}\n        />\n        {confirmProps && (\n          <Confirm\n            {...confirmProps}\n          />\n        )}\n        <UpgradePrompt\n            ref={this.handleUpgradeRef}\n            title=\"Upgrade your Plan to add more accounts\"\n            description={accountLimitCopy(billing)}\n            buttonCopy={'Upgrade Plan'}\n            lightbox\n          />\n        <h4>Email</h4>\n        <button\n          className=\"add-account-container\"\n          onClick={this.handleAddAccount}\n        >\n          <div\n            className=\"add-account-cell\"\n          >\n            <div className=\"add-alias-button\">\n              <Plus />\n              &nbsp; Add Account\n            </div>\n          </div>\n        </button>\n        <div className=\"table\">\n          {accounts.map(account =>\n            <AliasItem\n              {...account}\n              name={account.description}\n              key={account.email}\n              onClick={this.handleAccountSelect}\n              reauthenticate={account.status === AccountStatus.Invalid}\n              onReauthenticate={this.handleAccountReauthenticate}\n            />,\n          )}\n        </div>\n        <ReauthenticatePopover\n          account={this.state.reauthenticateAccount}\n          show={this.state.showReauthenticatePopup}\n          onReauthenticate={this.handlePasswordReauthenticate}\n          onHide={this.handleHideReauthenticatePopup}\n        />\n      </div>\n    );\n  }\n}\n\nexport default AccountChooser;\n"]}]}