{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/components/TfaCodePopover/TfaCodePopover.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/components/TfaCodePopover/TfaCodePopover.tsx","mtime":1675280254110},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCAnLi9UZmFDb2RlUG9wb3Zlci5zY3NzJzsKaW1wb3J0IFBvcG92ZXIgZnJvbSAnQHNyYy9jb21wb25lbnRzL1BvcG92ZXIvUG9wb3Zlcic7CmltcG9ydCBDbG9zZSBmcm9tICdAc3JjL2NvbXBvbmVudHMvSWNvbnMvQ2xvc2Uuc3ZnJzsKdmFyIFRmYUNvZGVQb3BvdmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFRmYUNvZGVQb3BvdmVyLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gVGZhQ29kZVBvcG92ZXIoKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlUG9wb3ZlclJlZiA9IGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICAgICAgX3RoaXMucG9wb3ZlciA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUlucHV0UmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5pbnB1dCA9IHJlZjsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUlucHV0Rm9jdXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5pbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIF90aGlzLmlucHV0LmZvY3VzKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG9uQ2FuY2VsID0gX3RoaXMucHJvcHMub25DYW5jZWw7CiAgICAgICAgICAgIG9uQ2FuY2VsKCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVTdWJtaXQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIF90aGlzLmhhbmRsZUNvbnRpbnVlKCk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNvbnRpbnVlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgb25Db250aW51ZSA9IF90aGlzLnByb3BzLm9uQ29udGludWU7CiAgICAgICAgICAgIGlmIChvbkNvbnRpbnVlKSB7CiAgICAgICAgICAgICAgICBvbkNvbnRpbnVlKF90aGlzLmlucHV0LnZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlUmVzZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgb25SZXNlbmQgPSBfdGhpcy5wcm9wcy5vblJlc2VuZDsKICAgICAgICAgICAgaWYgKG9uUmVzZW5kKSB7CiAgICAgICAgICAgICAgICBvblJlc2VuZCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVDaGFuZ2VQaG9uZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG9uQ2hhbmdlUGhvbmUgPSBfdGhpcy5wcm9wcy5vbkNoYW5nZVBob25lOwogICAgICAgICAgICBpZiAob25DaGFuZ2VQaG9uZSkgewogICAgICAgICAgICAgICAgb25DaGFuZ2VQaG9uZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBUZmFDb2RlUG9wb3Zlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucG9wb3ZlcikgewogICAgICAgICAgICB0aGlzLnBvcG92ZXIuc2hvdygpOwogICAgICAgIH0KICAgIH07CiAgICBUZmFDb2RlUG9wb3Zlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBwaG9uZSA9IHRoaXMucHJvcHMucGhvbmU7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFBvcG92ZXIsIHsgcmVmOiB0aGlzLmhhbmRsZVBvcG92ZXJSZWYsIGNsYXNzTmFtZTogInRmYS1jb2RlLXBvcG92ZXIiLCBvbkhpZGU6IHRoaXMuaGFuZGxlQ2FuY2VsLCBvblNob3c6IHRoaXMuaGFuZGxlSW5wdXRGb2N1cywgb3ZlcmxheTogdHJ1ZSwgcGVyc2lzdGVudDogdHJ1ZSB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNvbmZpcm0iIH0sCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRpdGxlIiB9LAogICAgICAgICAgICAgICAgICAgICJFbnRlciB5b3VyIHZlcmlmaWNhdGlvbiBjb2RlIiwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ2FuY2VsIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2xvc2UsIHsgd2lkdGg6ICIxMHB4IiwgaGVpZ2h0OiAiMTBweCIgfSkpKSwKICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImZvcm0iLCB7IGNsYXNzTmFtZTogImJvZHkiLCBvblN1Ym1pdDogdGhpcy5oYW5kbGVTdWJtaXQgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1lc3NhZ2UiIH0sICJUbyB2ZXJpZnkgeW91ciBwaG9uZSBudW1iZXIsIHBsZWFzZSBlbnRlciB0aGUgNi1kaWdpdCBjb2RlIHRoYXQgd2FzIHNlbnQgdG9cbiAgICAgICAgICAgICAgIiArICgnIHlvdXIgbnVtYmVyIGVuZGluZyBpbiAnICsgcGhvbmUuc2xpY2UocGhvbmUubGVuZ3RoIC0gNCkpICsgIi4iKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImlucHV0IiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJpbnB1dCIsIHsgcGxhY2Vob2xkZXI6ICJ5b3VyIHZlcmlmaWNhdGlvbiBjb2RlIiwgcmVmOiB0aGlzLmhhbmRsZUlucHV0UmVmIH0pKSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImFjdGlvbi1idXR0b25zIiB9LAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogImNvbmZpcm0tYnV0dG9uIiwgdHlwZTogInN1Ym1pdCIgfSwgIlZlcmlmeSIpLAogICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImJvdHRvbS1hY3Rpb25zIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBjbGFzc05hbWU6ICJyZXNlbmQtYnV0dG9uIiwgb25DbGljazogdGhpcy5oYW5kbGVSZXNlbmQgfSwgIlJlc2VuZCBjb2RlIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgIm9yIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJidXR0b24iLCB7IGNsYXNzTmFtZTogImNoYW5nZS1waG9uZS1idXR0b24iLCBvbkNsaWNrOiB0aGlzLmhhbmRsZUNoYW5nZVBob25lIH0sICJjaGFuZ2UgcGhvbmUgbnVtYmVyIikpKSkpKSk7CiAgICB9OwogICAgcmV0dXJuIFRmYUNvZGVQb3BvdmVyOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgVGZhQ29kZVBvcG92ZXI7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/components/TfaCodePopover/TfaCodePopover.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Settings/routes/Security/components/TfaCodePopover/TfaCodePopover.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport './TfaCodePopover.scss';\nimport Popover from '@src/components/Popover/Popover';\nimport Close from '@src/components/Icons/Close.svg';\n\nexport interface Props {\n  onContinue: (code: string) => void;\n  onCancel: () => void;\n  onResend: () => void;\n  onChangePhone: () => void;\n  phone: string;\n}\n\nclass TfaCodePopover extends React.PureComponent<Props> {\n  popover: Popover;\n  input: HTMLInputElement;\n\n  handlePopoverRef = (ref: Popover) => {\n    this.popover = ref;\n  }\n\n  handleInputRef = (ref: HTMLInputElement) => {\n    this.input = ref;\n  }\n\n  componentDidMount() {\n    if (this.popover) {\n      this.popover.show();\n    }\n  }\n\n  handleInputFocus = () => {\n    if (this.input instanceof HTMLInputElement) {\n      this.input.focus();\n    }\n  }\n\n  handleCancel = () => {\n    const { onCancel } = this.props;\n    onCancel();\n  }\n\n  handleSubmit = (e: React.FormEvent<any>): boolean => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.handleContinue();\n    return false;\n  }\n\n  handleContinue = () => {\n    const { onContinue } = this.props;\n    if (onContinue) {\n      onContinue(this.input.value);\n    }\n  }\n\n  handleResend = () => {\n    const { onResend } = this.props;\n    if (onResend) {\n      onResend();\n    }\n  }\n\n  handleChangePhone = () => {\n    const { onChangePhone } = this.props;\n    if (onChangePhone) {\n      onChangePhone();\n    }\n  }\n\n  render() {\n    const { phone } = this.props;\n\n    return (\n      <Popover\n        ref={this.handlePopoverRef}\n        className=\"tfa-code-popover\"\n        onHide={this.handleCancel}\n        onShow={this.handleInputFocus}\n        overlay\n        persistent\n      >\n        <div className=\"confirm\">\n          <div className=\"title\">\n            Enter your verification code\n            <button onClick={this.handleCancel}>\n              <Close width=\"10px\" height=\"10px\" />\n            </button>\n          </div>\n          <form className=\"body\" onSubmit={this.handleSubmit}>\n            <div className=\"message\">\n              {`To verify your phone number, please enter the 6-digit code that was sent to\n              ${' your number ending in ' + phone.slice(phone.length - 4)}.`}\n            </div>\n            <div className=\"input\">\n              <input\n                placeholder=\"your verification code\"\n                ref={this.handleInputRef}\n              />\n            </div>\n            <div className=\"action-buttons\">\n              <button\n                className=\"confirm-button\"\n                type=\"submit\"\n              >\n                Verify\n              </button>\n              <div className=\"bottom-actions\">\n                <button\n                  className=\"resend-button\"\n                  onClick={this.handleResend}\n                >\n                  Resend code\n                </button>\n                <span>or</span>\n                <button\n                  className=\"change-phone-button\"\n                  onClick={this.handleChangePhone}\n                >\n                  change phone number\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </Popover>\n    );\n  }\n}\n\nexport default TfaCodePopover;\n"]}]}