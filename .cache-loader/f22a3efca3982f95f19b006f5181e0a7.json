{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Calendar/components/ManageSchedulingDetail/ManageSchedulingDetail.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Calendar/components/ManageSchedulingDetail/ManageSchedulingDetail.tsx","mtime":1675280254074},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKdmFyIF9fc3ByZWFkQXJyYXlzID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5cykgfHwgZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7CiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspCiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspCiAgICAgICAgICAgIHJba10gPSBhW2pdOwogICAgcmV0dXJuIHI7Cn07CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50LXRpbWV6b25lJzsKaW1wb3J0IENsaXBib2FyZEpTIGZyb20gJ2NsaXBib2FyZCc7CmltcG9ydCB7IEFjY291bnRUeXBlLCBJbnRlZ3JhdGlvblN0YXR1cywgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IHsgQ29uZmVyZW5jZVR5cGUgfSBmcm9tICdAc3JjL3R5cGVzL3NjaGVkdWxpbmcnOwppbXBvcnQgVG9nZ2xlQ2VsbCBmcm9tICdAc3JjL3JvdXRlcy9TZXR0aW5ncy9jb21wb25lbnRzL1RvZ2dsZUNlbGwnOwppbXBvcnQgRHJvcGRvd25DZWxsIGZyb20gJ0BzcmMvcm91dGVzL1NldHRpbmdzL2NvbXBvbmVudHMvRHJvcGRvd25DZWxsJzsKaW1wb3J0ICcuL01hbmFnZVNjaGVkdWxpbmdEZXRhaWwuc2Nzcyc7CmltcG9ydCBTZXR0aW5nVGV4dElucHV0IGZyb20gJ0BzcmMvY29tcG9uZW50cy9Gb3JtL1NldHRpbmdUZXh0SW5wdXQnOwppbXBvcnQgQ2hlY2tib3ggZnJvbSAnQHNyYy9jb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gvQ2hlY2tib3gnOwppbXBvcnQgRHJvcGRvd24gZnJvbSAnQHNyYy9jb21wb25lbnRzL0Zvcm0vRHJvcGRvd24nOwppbXBvcnQgeyBjbG9uZURlZXAsIGZsYXR0ZW4sIHZhbHVlcywgZmluZEluZGV4LCBmaW5kIH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IENvbmZpcm0gZnJvbSAnQHNyYy9jb21wb25lbnRzL0Jhc2UvQ29uZmlybSc7CmltcG9ydCBUb29sVGlwIGZyb20gJ0BzcmMvY29tcG9uZW50cy9CYXNlL1Rvb2x0aXAnOwppbXBvcnQgVXBncmFkZVByb21wdCBmcm9tICdAc3JjL2NvbXBvbmVudHMvQmFzZS9VcGdyYWRlUHJvbXB0L1VwZ3JhZGVQcm9tcHQnOwppbXBvcnQgYnJvd3Nlckhpc3RvcnkgZnJvbSAnQHNyYy9saWIvYnJvd3Nlckhpc3RvcnknOwppbXBvcnQgTmF2aWdhdGlvbkhlYWRlciBmcm9tICdAc3JjL3JvdXRlcy9TZXR0aW5ncy9jb21wb25lbnRzL05hdmlnYXRpb25IZWFkZXInOwppbXBvcnQgeyBjb25mZXJlbmNlVHlwZURpc3BsYXkgfSBmcm9tICdAc3JjL2xpYi9zY2hlZHVsaW5nJzsKaW1wb3J0IHsgQW1wbGl0dWRlRXZlbnRzLCBsb2dBbXBsaXR1ZGVFdmVudCB9IGZyb20gJ0BzcmMvbGliL2FtcGxpdHVkZS1hbmFseXRpY3MnOwovLyBUT0RPKFNISU4pOiBIYW5kbGUgcmVkaXJlY3Rpbmcgem9vbSBpZiBpbnRlZ3JhdGlvbiBpcyBub3QgaW5zdGFsbGVkCi8vIFRPRE8oU0hJTik6IEhhbmRsZSBzaG93aW5nIFpvb20gZm9yIGFsbCBjYWxlbmRhciBjYXNlcwp2YXIgTWFuYWdlU2NoZWR1bGluZ0RldGFpbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhNYW5hZ2VTY2hlZHVsaW5nRGV0YWlsLCBfc3VwZXIpOwogICAgZnVuY3Rpb24gTWFuYWdlU2NoZWR1bGluZ0RldGFpbChwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZEpTKCcjY29weS1saW5rJyk7CiAgICAgICAgX3RoaXMuV0VFS0RBWVMgPSBbCiAgICAgICAgICAgIHsgbmFtZTogJ01vbicsIGluZGV4OiAxIH0sCiAgICAgICAgICAgIHsgbmFtZTogJ1R1ZScsIGluZGV4OiAyIH0sCiAgICAgICAgICAgIHsgbmFtZTogJ1dlZCcsIGluZGV4OiAzIH0sCiAgICAgICAgICAgIHsgbmFtZTogJ1RodScsIGluZGV4OiA0IH0sCiAgICAgICAgICAgIHsgbmFtZTogJ0ZyaScsIGluZGV4OiA1IH0sCiAgICAgICAgICAgIHsgbmFtZTogJ1NhdCcsIGluZGV4OiA2IH0sCiAgICAgICAgICAgIHsgbmFtZTogJ1N1bicsIGluZGV4OiAwIH0sCiAgICAgICAgXTsKICAgICAgICBfdGhpcy5EVVJBVElPTl9NSU5VVEVTID0gWwogICAgICAgICAgICAxNSwKICAgICAgICAgICAgMjAsCiAgICAgICAgICAgIDMwLAogICAgICAgICAgICA0NSwKICAgICAgICAgICAgNjAsCiAgICAgICAgXTsKICAgICAgICBfdGhpcy5EVVJBVElPTl9QQURESU5HX01JTlVURVMgPSBbCiAgICAgICAgICAgIDAsCiAgICAgICAgICAgIDUsCiAgICAgICAgICAgIDEwLAogICAgICAgICAgICAxNSwKICAgICAgICAgICAgMzAsCiAgICAgICAgICAgIDQ1LAogICAgICAgICAgICA2MCwKICAgICAgICBdOwogICAgICAgIF90aGlzLk1JTklNVU1fTk9USUNFX01JTlVURVMgPSBbCiAgICAgICAgICAgIDAsCiAgICAgICAgICAgIDEyMCwKICAgICAgICAgICAgMjQwLAogICAgICAgICAgICA0ODAsCiAgICAgICAgICAgIDcyMCwKICAgICAgICAgICAgMTQ0MCwKICAgICAgICBdOwogICAgICAgIF90aGlzLkNPTkZFUkVOQ0VfT1BUSU9OUyA9IFsKICAgICAgICAgICAgQ29uZmVyZW5jZVR5cGUuTm9uZSwKICAgICAgICAgICAgQ29uZmVyZW5jZVR5cGUuR29vZ2xlLAogICAgICAgICAgICBDb25mZXJlbmNlVHlwZS5ab29tLAogICAgICAgIF07CiAgICAgICAgX3RoaXMuREVGQVVMVF9USU1FX1dJTkRPV1MgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGRheU9mV2VlazogMSwKICAgICAgICAgICAgICAgIGFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQ6IDMyNDAwLAogICAgICAgICAgICAgICAgYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQ6IDYxMjAwLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkYXlPZldlZWs6IDIsCiAgICAgICAgICAgICAgICBhZnRlclNlY29uZHNTaW5jZU1pZG5pZ2h0OiAzMjQwMCwKICAgICAgICAgICAgICAgIGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0OiA2MTIwMCwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGF5T2ZXZWVrOiAzLAogICAgICAgICAgICAgICAgYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodDogMzI0MDAsCiAgICAgICAgICAgICAgICBiZWZvcmVTZWNvbmRzU2luY2VNaWRuaWdodDogNjEyMDAsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGRheU9mV2VlazogNCwKICAgICAgICAgICAgICAgIGFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQ6IDMyNDAwLAogICAgICAgICAgICAgICAgYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQ6IDYxMjAwLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkYXlPZldlZWs6IDUsCiAgICAgICAgICAgICAgICBhZnRlclNlY29uZHNTaW5jZU1pZG5pZ2h0OiAzMjQwMCwKICAgICAgICAgICAgICAgIGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0OiA2MTIwMCwKICAgICAgICAgICAgfSwKICAgICAgICBdOwogICAgICAgIF90aGlzLlRJTUVaT05FUyA9IG1vbWVudC50ei5uYW1lcygpCiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHR6KSB7IHJldHVybiAhdHoudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCdldGMnKTsgfSk7CiAgICAgICAgX3RoaXMuaGFuZGxlUmVmID0gZnVuY3Rpb24gKHJlZikgewogICAgICAgICAgICBfdGhpcy5yZWYgPSByZWY7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5nZXRUaW1lVmFsdWVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc3RhcnQgPSBtb21lbnQoKS5zdGFydE9mKCdkYXknKTsKICAgICAgICAgICAgdmFyIHRpbWVWYWx1ZXMgPSBbXTsKICAgICAgICAgICAgd2hpbGUgKHN0YXJ0LmlzQmVmb3JlKG1vbWVudCgpLmFkZCgxLCAnZGF5Jykuc3RhcnRPZignZGF5JykpKSB7CiAgICAgICAgICAgICAgICB0aW1lVmFsdWVzLnB1c2goc3RhcnQuY2xvbmUoKSk7CiAgICAgICAgICAgICAgICBzdGFydC5hZGQoMSwgJ2hvdXInKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGltZVZhbHVlczsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNhbGVuZGFyVG9nZ2xlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBfdGhpcy5wcm9wcy5mZWF0dXJlczsKICAgICAgICAgICAgLy8gU2hvdyBVcGdyYWRlIHByb21wdCBpZiBmZWF0dXJlIGlzIG5vdCBzZXQKICAgICAgICAgICAgaWYgKCFmZWF0dXJlcy5zY2hlZHVsaW5nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zaG93U2NoZWR1bGluZ1VwZ3JhZGUoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNhbGVuZGFyRW5hYmxlZDogIV90aGlzLnN0YXRlLmNhbGVuZGFyRW5hYmxlZCwgc2hvd1NhdmU6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVCcmFuZGluZ1RvZ2dsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gX3RoaXMucHJvcHMuZmVhdHVyZXM7CiAgICAgICAgICAgIC8vIFNob3cgVXBncmFkZSBwcm9tcHQgaWYgZmVhdHVyZSBub3QgZW5hYmxlZAogICAgICAgICAgICBpZiAoIWZlYXR1cmVzLnNjaGVkdWxpbmdOb0JyYW5kaW5nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zaG93QnJhbmRpbmdVcGdyYWRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgc2hvd0JyYW5kaW5nOiAhX3RoaXMuc3RhdGUuc2hvd0JyYW5kaW5nLAogICAgICAgICAgICAgICAgc2hvd1NhdmU6IHRydWUsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRHVyYXRpb25TZWxlY3QgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgICAgIHZhciBtaW51dGVzID0gX3RoaXMuRFVSQVRJT05fTUlOVVRFU1tpbmRleF07CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZHVyYXRpb25NaW51dGVzOiBtaW51dGVzLCBzaG93U2F2ZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUJ1ZmZlckR1cmF0aW9uU2VsZWN0ID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgICAgICB2YXIgbWludXRlcyA9IF90aGlzLkRVUkFUSU9OX1BBRERJTkdfTUlOVVRFU1tpbmRleF07CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgYnVmZmVyRHVyYXRpb246IG1pbnV0ZXMsIHNob3dTYXZlOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlTWluaW11bU5vdGljZVNlbGVjdCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSBfdGhpcy5NSU5JTVVNX05PVElDRV9NSU5VVEVTW2luZGV4XTsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBtaW5pbXVtTm90aWNlOiBtaW51dGVzLCBzaG93U2F2ZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUV2ZW50TmFtZUNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZXZlbnROYW1lOiBlLmN1cnJlbnRUYXJnZXQudmFsdWUsIHNob3dTYXZlOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ2FsZW5kYXJVcmxDaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNhbGVuZGFyVXJsOiBlLmN1cnJlbnRUYXJnZXQudmFsdWUsIHNob3dTYXZlOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRXZlbnRMb2NhdGlvbkNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZXZlbnRMb2NhdGlvbjogZS5jdXJyZW50VGFyZ2V0LnZhbHVlLCBzaG93U2F2ZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUNhbGVuZGFyRGF5c0NoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBkYXlJbmRleCA9IHBhcnNlSW50KGUuY3VycmVudFRhcmdldC5uYW1lLCAxMCk7CiAgICAgICAgICAgIHZhciBjdXJyZW50RGF5cyA9IF9fYXNzaWduKHt9LCBfdGhpcy5zdGF0ZS5jYWxlbmRhckRheXNPZldlZWspOwogICAgICAgICAgICBjdXJyZW50RGF5c1tkYXlJbmRleF0gPSAhY3VycmVudERheXNbZGF5SW5kZXhdOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjYWxlbmRhckRheXNPZldlZWs6IGN1cnJlbnREYXlzLAogICAgICAgICAgICAgICAgc2hvd1NhdmU6IHRydWUsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRG91YmxlQm9va0NoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIC8vIFNob3cgdXBncmFkZSBwcm9tcHQgaWYgdXNlciBkb2VzIG5vdCBoYXZlIHNjaGVkdWxlIGRvdWJsZSBib29raW5nIHRlYW1GZWF0dXJlcyBlbmFibGVkCiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IF90aGlzLnByb3BzLmZlYXR1cmVzOwogICAgICAgICAgICBpZiAoIWZlYXR1cmVzLnNjaGVkdWxpbmdEb3VibGVCb29raW5nKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zaG93RG91YmxlQm9va2luZ1VwZ3JhZGUoKTsKICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGNhbGVuZGFySWQgPSBlLmN1cnJlbnRUYXJnZXQubmFtZTsKICAgICAgICAgICAgdmFyIGRvdWJsZUJvb2tDaGVja3MgPSBfX2Fzc2lnbih7fSwgX3RoaXMuc3RhdGUuY2FsZW5kYXJEb3VibGVCb29rQ2hlY2tzKTsKICAgICAgICAgICAgZG91YmxlQm9va0NoZWNrc1tjYWxlbmRhcklkXSA9ICFkb3VibGVCb29rQ2hlY2tzW2NhbGVuZGFySWRdOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjYWxlbmRhckRvdWJsZUJvb2tDaGVja3M6IGRvdWJsZUJvb2tDaGVja3MsCiAgICAgICAgICAgICAgICBzaG93U2F2ZTogdHJ1ZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICAvLyBUT0RPKFNISU4pOiBIYW5kbGUgZG91YmxlIGJvb2tpbmcgc2VsZWN0aW9uIChpbmNsdWRlIGlmIG9uIHRlYW0sIHNlbGVjdCBzaW5nbGUgaWYgb24gcHJvKQogICAgICAgIF90aGlzLmhhbmRsZUNhbGVuZGFyU2VsZWN0ID0gZnVuY3Rpb24gKG9wdGlvbiwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHdyaXRhYmxlQ2FsZW5kYXJzID0gX2Eud3JpdGFibGVDYWxlbmRhcnMsIGZlYXR1cmVzID0gX2EuZmVhdHVyZXMsIGFjY291bnRzID0gX2EuYWNjb3VudHM7CiAgICAgICAgICAgIHZhciBjb25mZXJlbmNlVHlwZSA9IF90aGlzLnN0YXRlLmNvbmZlcmVuY2VUeXBlOwogICAgICAgICAgICB2YXIgYWxsQ2FsZW5kYXJzID0gZmxhdHRlbih2YWx1ZXMod3JpdGFibGVDYWxlbmRhcnMpKTsKICAgICAgICAgICAgdmFyIHNlbGVjdGVkQ2FsZW5kYXJJZCA9IGFsbENhbGVuZGFyc1tpbmRleF0gJiYgYWxsQ2FsZW5kYXJzW2luZGV4XS5pZCB8fCAnJzsKICAgICAgICAgICAgdmFyIGRvdWJsZUJvb2tDaGVja3MgPSBfX2Fzc2lnbih7fSwgX3RoaXMuc3RhdGUuY2FsZW5kYXJEb3VibGVCb29rQ2hlY2tzKTsKICAgICAgICAgICAgLy8gUmVzZXQgZG91YmxlIGJvb2tpbmcgY2FsZW5kYXJzIGlmIGZlYXR1cmUgZG9lcyBub3QgYWxsb3cgZm9yIG11bHRpcGxlIGRvdWJsZSBib29raW5nCiAgICAgICAgICAgIGlmICghZmVhdHVyZXMuc2NoZWR1bGluZ0RvdWJsZUJvb2tpbmcpIHsKICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGRvdWJsZUJvb2tDaGVja3MpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgICAgIGRvdWJsZUJvb2tDaGVja3Nba2V5XSA9IGtleSA9PT0gc2VsZWN0ZWRDYWxlbmRhcklkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkb3VibGVCb29rQ2hlY2tzW3NlbGVjdGVkQ2FsZW5kYXJJZF0gPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FsZW5kYXI6IHNlbGVjdGVkQ2FsZW5kYXJJZCwKICAgICAgICAgICAgICAgICAgICBjYWxlbmRhckRvdWJsZUJvb2tDaGVja3M6IGRvdWJsZUJvb2tDaGVja3MsCiAgICAgICAgICAgICAgICAgICAgc2hvd1NhdmU6IHRydWUsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBVbnNldHMgR29vZ2xlIE1lZXQgQ29uZmVyZW5jZSB0eXBlIGlmIHNlbGVjdGVkIGNhbGVuZGFyIGlzIG5vdCBHb29nbGUuCiAgICAgICAgICAgIHZhciBzZWxlY3RlZENvbmZlcmVuY2VUeXBlID0gY29uZmVyZW5jZVR5cGU7CiAgICAgICAgICAgIHZhciBjYWxlbmRhckFjY291bnRJZCA9IGFsbENhbGVuZGFyc1tpbmRleF0gJiYgYWxsQ2FsZW5kYXJzW2luZGV4XS5hY2NvdW50OwogICAgICAgICAgICB2YXIgY2FsZW5kYXJBY2NvdW50ID0gYWNjb3VudHMuZmlsdGVyKGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLmlkID09PSBjYWxlbmRhckFjY291bnRJZDsgfSlbMF07CiAgICAgICAgICAgIGlmIChjYWxlbmRhckFjY291bnQgJiYgY2FsZW5kYXJBY2NvdW50LnR5cGUgIT09IEFjY291bnRUeXBlLkdvb2dsZSkgewogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ29uZmVyZW5jZVR5cGUgPT09IENvbmZlcmVuY2VUeXBlLkdvb2dsZSkgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ29uZmVyZW5jZVR5cGUgPSBDb25mZXJlbmNlVHlwZS5Ob25lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNldCBzZWxlY3RlZCBjYWxlbmRhciBpZAogICAgICAgICAgICBkb3VibGVCb29rQ2hlY2tzW3NlbGVjdGVkQ2FsZW5kYXJJZF0gPSB0cnVlOwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjYWxlbmRhckRvdWJsZUJvb2tDaGVja3M6IGRvdWJsZUJvb2tDaGVja3MsCiAgICAgICAgICAgICAgICBzZWxlY3RlZENhbGVuZGFyOiBzZWxlY3RlZENhbGVuZGFySWQsCiAgICAgICAgICAgICAgICBjb25mZXJlbmNlVHlwZTogc2VsZWN0ZWRDb25mZXJlbmNlVHlwZSwKICAgICAgICAgICAgICAgIHNob3dTYXZlOiB0cnVlLAogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIC8vIEhhbmRsZSBDb25mZXJlbmNlIFNlbGVjdCBjaG9vc2VzIGEgY29uZmVyZW5jZSBvcHRpb24KICAgICAgICBfdGhpcy5oYW5kbGVDb25mZXJlbmNlU2VsZWN0ID0gZnVuY3Rpb24gKG9wdGlvbiwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIHpvb21JbnRlZ3JhdGlvbiA9IF90aGlzLnByb3BzLnpvb21JbnRlZ3JhdGlvbjsKICAgICAgICAgICAgdmFyIGNvbmZlcmVuY2VUeXBlID0gX3RoaXMuZ2V0Q29uZmVyZW5jZU9wdGlvbnMoKVtpbmRleF07CiAgICAgICAgICAgIC8vIE5hdmlnYXRlIHRvIGludGVncmF0aW9uIHBhZ2UgaWYgaW50ZWdyYXRpb24gaXMgbm90IHZhbGlkCiAgICAgICAgICAgIGlmIChjb25mZXJlbmNlVHlwZSA9PT0gQ29uZmVyZW5jZVR5cGUuWm9vbSAmJgogICAgICAgICAgICAgICAgKCF6b29tSW50ZWdyYXRpb24gfHwgem9vbUludGVncmF0aW9uLnN0YXR1cyAhPT0gSW50ZWdyYXRpb25TdGF0dXMuT2spKSB7CiAgICAgICAgICAgICAgICAvLyBTaG93IGNvbmZpcm0gcHJvbXB0IHdpdGggcmVkaXJlY3QgaW4gb3JkZXIgdG8gZW5hYmxlIHpvb20gaW50ZWdyYXRpb24KICAgICAgICAgICAgICAgIHZhciBibG9ja1Byb3BzID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRW5hYmxlIFpvb20gSW50ZWdyYXRpb24nLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgbXVzdCBjb25uZWN0IHlvdXIgWm9vbSBhY2NvdW50IGluIG9yZGVyIHRvIGNyZWF0ZSBjb25mZXJlbmNlIHVybHMgZm9yIHlvdXIgc2NoZWR1bGluZyBwYWdlcy4gQ29udGludWUgdG8gdGhlIGludGVncmF0aW9ucyBwYWdlPycsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUNvcHk6ICdDb250aW51ZScsCiAgICAgICAgICAgICAgICAgICAgY2FuY2VsQ29weTogJ0NhbmNlbCcsCiAgICAgICAgICAgICAgICAgICAgb25Db25maXJtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlWm9vbVJlZGlyZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7IH0sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1Qcm9wczogYmxvY2tQcm9wcywKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIE90aGVyd2lzZSBzZXQgem9vbSBpbnRlZ3JhdGlvbgogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZlcmVuY2VUeXBlOiBjb25mZXJlbmNlVHlwZSwgc2hvd1NhdmU6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVUaW1lWm9uZVNlbGVjdCA9IGZ1bmN0aW9uIChvcHRpb24sIGluZGV4KSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWRUaW1lWm9uZTogX3RoaXMuVElNRVpPTkVTW2luZGV4XSwgc2hvd1NhdmU6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICAvLyBDYWxjdWxhdGVzIG5ldyB1cHBlciBib3VuZCBmb3IgdGltZSB6b25lCiAgICAgICAgX3RoaXMuaGFuZGxlVXBwZXJCb3VuZFNlbGVjdCA9IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIHRpbWVWYWx1ZXMgPSBfdGhpcy5zdGF0ZS50aW1lVmFsdWVzOwogICAgICAgICAgICB2YXIgdGltZSA9IHRpbWVWYWx1ZXNbaW5kZXhdOwogICAgICAgICAgICB2YXIgbmV3QmVmb3JlID0gdGltZS5kaWZmKG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpLCAnc2Vjb25kcycpOwogICAgICAgICAgICB2YXIgYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodCA9IF90aGlzLnN0YXRlLmFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQ7CiAgICAgICAgICAgIGlmIChuZXdCZWZvcmUgPCBhZnRlclNlY29uZHNTaW5jZU1pZG5pZ2h0KSB7CiAgICAgICAgICAgICAgICBhZnRlclNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBiZWZvcmVTZWNvbmRzU2luY2VNaWRuaWdodDogbmV3QmVmb3JlLAogICAgICAgICAgICAgICAgYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodDogYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodCwKICAgICAgICAgICAgICAgIHNob3dTYXZlOiB0cnVlLAogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUxvd2VyQm91bmRTZWxlY3QgPSBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgICAgIHZhciB0aW1lVmFsdWVzID0gX3RoaXMuc3RhdGUudGltZVZhbHVlczsKICAgICAgICAgICAgdmFyIHRpbWUgPSB0aW1lVmFsdWVzW2luZGV4XTsKICAgICAgICAgICAgdmFyIG5ld0FmdGVyID0gdGltZS5kaWZmKG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpLCAnc2Vjb25kcycpOwogICAgICAgICAgICB2YXIgYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQgPSBfdGhpcy5zdGF0ZS5iZWZvcmVTZWNvbmRzU2luY2VNaWRuaWdodDsKICAgICAgICAgICAgaWYgKG5ld0FmdGVyID4gYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQpIHsKICAgICAgICAgICAgICAgIGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gKDYwICogNjAgKiAyNCkgLSAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsKICAgICAgICAgICAgICAgIGFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQ6IG5ld0FmdGVyLAogICAgICAgICAgICAgICAgYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQ6IGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0LAogICAgICAgICAgICAgICAgc2hvd1NhdmU6IHRydWUsCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlU2F2ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHVwZGF0ZVNjaGVkdWxpbmcgPSBfYS51cGRhdGVTY2hlZHVsaW5nLCBjcmVhdGVTY2hlZHVsaW5nID0gX2EuY3JlYXRlU2NoZWR1bGluZzsKICAgICAgICAgICAgdmFyIGV4aXN0aW5nID0gY2xvbmVEZWVwKF90aGlzLnByb3BzLnNjaGVkdWxpbmcpOwogICAgICAgICAgICAvLyBDYWxjdWxhdGUgYmxvY2tpbmcgY2FsZW5kYXJzCiAgICAgICAgICAgIHZhciBibG9ja2luZ0NhbGVuZGFycyA9IFtdOwogICAgICAgICAgICBPYmplY3Qua2V5cyhfdGhpcy5zdGF0ZS5jYWxlbmRhckRvdWJsZUJvb2tDaGVja3MpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgaWYgKF90aGlzLnN0YXRlLmNhbGVuZGFyRG91YmxlQm9va0NoZWNrc1trZXldKSB7CiAgICAgICAgICAgICAgICAgICAgYmxvY2tpbmdDYWxlbmRhcnMucHVzaChrZXkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gQ29udmVydHMgdGltZSB3aW5kb3dzCiAgICAgICAgICAgIHZhciB0aW1lV2luZG93cyA9IF90aGlzLldFRUtEQVlTCiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBfdGhpcy5zdGF0ZS5jYWxlbmRhckRheXNPZldlZWtbZC5pbmRleF07IH0pCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiAoewogICAgICAgICAgICAgICAgZGF5T2ZXZWVrOiBkLmluZGV4LAogICAgICAgICAgICAgICAgYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodDogX3RoaXMuc3RhdGUuYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodCwKICAgICAgICAgICAgICAgIGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0OiBfdGhpcy5zdGF0ZS5iZWZvcmVTZWNvbmRzU2luY2VNaWRuaWdodCwKICAgICAgICAgICAgfSk7IH0pOwogICAgICAgICAgICAvLyBIYW5kbGUgY3JlYXRpb24gaWYgc2NoZWR1bGluZyBtb2RlbCBkb2VzIG5vdCBleGlzdAogICAgICAgICAgICBpZiAoIWV4aXN0aW5nKSB7CiAgICAgICAgICAgICAgICB2YXIgY3JlYXRlTWV0YSA9IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiBfdGhpcy5zdGF0ZS5ldmVudE5hbWUsCiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICFfdGhpcy5zdGF0ZS5jYWxlbmRhckVuYWJsZWQsCiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiBfdGhpcy5zdGF0ZS5ldmVudE5hbWUsCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IF90aGlzLnN0YXRlLmV2ZW50TG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb25NaW51dGVzOiBfdGhpcy5zdGF0ZS5kdXJhdGlvbk1pbnV0ZXMsCiAgICAgICAgICAgICAgICAgICAgdGltZVpvbmU6IF90aGlzLnN0YXRlLnNlbGVjdGVkVGltZVpvbmUsCiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXI6IF90aGlzLnN0YXRlLnNlbGVjdGVkQ2FsZW5kYXIsCiAgICAgICAgICAgICAgICAgICAgc2x1ZzogX3RoaXMuc3RhdGUuY2FsZW5kYXJVcmwsCiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ01pbnV0ZXM6IF90aGlzLnN0YXRlLmJ1ZmZlckR1cmF0aW9uLAogICAgICAgICAgICAgICAgICAgIG1pbmltdW1Ob3RpY2U6IF90aGlzLnN0YXRlLm1pbmltdW1Ob3RpY2UsCiAgICAgICAgICAgICAgICAgICAgY29uZmVyZW5jZVR5cGU6IF90aGlzLnN0YXRlLmNvbmZlcmVuY2VUeXBlLAogICAgICAgICAgICAgICAgICAgIGJsb2NraW5nQ2FsZW5kYXJzOiBibG9ja2luZ0NhbGVuZGFycywKICAgICAgICAgICAgICAgICAgICB0aW1lV2luZG93czogdGltZVdpbmRvd3MsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY3JlYXRlU2NoZWR1bGluZyhjcmVhdGVNZXRhKTsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd1NhdmU6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB1cGRhdGVNZXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGV4aXN0aW5nKSwgeyBkaXNhYmxlZDogIV90aGlzLnN0YXRlLmNhbGVuZGFyRW5hYmxlZCwgbmFtZTogX3RoaXMuc3RhdGUuZXZlbnROYW1lLCBldmVudE5hbWU6IF90aGlzLnN0YXRlLmV2ZW50TmFtZSwgbG9jYXRpb246IF90aGlzLnN0YXRlLmV2ZW50TG9jYXRpb24sIGR1cmF0aW9uTWludXRlczogX3RoaXMuc3RhdGUuZHVyYXRpb25NaW51dGVzLCB0aW1lWm9uZTogX3RoaXMuc3RhdGUuc2VsZWN0ZWRUaW1lWm9uZSwgY2FsZW5kYXI6IF90aGlzLnN0YXRlLnNlbGVjdGVkQ2FsZW5kYXIsIHNsdWc6IF90aGlzLnN0YXRlLmNhbGVuZGFyVXJsLCBoaWRlQnJhbmRpbmc6ICFfdGhpcy5zdGF0ZS5zaG93QnJhbmRpbmcsIHBhZGRpbmdNaW51dGVzOiBfdGhpcy5zdGF0ZS5idWZmZXJEdXJhdGlvbiwgbWluaW11bU5vdGljZTogX3RoaXMuc3RhdGUubWluaW11bU5vdGljZSwgY29uZmVyZW5jZVR5cGU6IF90aGlzLnN0YXRlLmNvbmZlcmVuY2VUeXBlLCBibG9ja2luZ0NhbGVuZGFyczogYmxvY2tpbmdDYWxlbmRhcnMsCiAgICAgICAgICAgICAgICB0aW1lV2luZG93czogdGltZVdpbmRvd3MgfSk7CiAgICAgICAgICAgIHVwZGF0ZVNjaGVkdWxpbmcodXBkYXRlTWV0YSk7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd1NhdmU6IGZhbHNlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ29weSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd0NvcGllZFRvb2xUaXA6IHRydWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5kaXNtaXNzVG9vbFRpcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzaG93Q29waWVkVG9vbFRpcDogdW5kZWZpbmVkIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuZ2V0Q29uZmVyZW5jZU9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSwgX2I7CiAgICAgICAgICAgIHZhciBfYyA9IF90aGlzLnByb3BzLCBjYWxlbmRhcnMgPSBfYy5jYWxlbmRhcnMsIGFjY291bnRzID0gX2MuYWNjb3VudHM7CiAgICAgICAgICAgIHZhciBzZWxlY3RlZENhbGVuZGFyID0gX3RoaXMuc3RhdGUuc2VsZWN0ZWRDYWxlbmRhcjsKICAgICAgICAgICAgLy8gUmV0dXJuIG5vdGhpbmcgaWYgbm8gY2FsZW5kYXIgaXMgc2VsZWN0ZWQKICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2FsZW5kYXIgPT09ICcnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGFsbENhbGVuZGFycyA9IGZsYXR0ZW4odmFsdWVzKGNhbGVuZGFycykpOwogICAgICAgICAgICB2YXIgY2FsZW5kYXJBY2NvdW50SWQgPSAoX2EgPSBhbGxDYWxlbmRhcnMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7IHJldHVybiBjLmlkID09PSBzZWxlY3RlZENhbGVuZGFyOyB9KVswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFjY291bnQ7CiAgICAgICAgICAgIHZhciBjYWxlbmRhckFjY291bnRJbmRleCA9IGZpbmRJbmRleChhY2NvdW50cywgeyBpZDogY2FsZW5kYXJBY2NvdW50SWQgfSk7CiAgICAgICAgICAgIC8vIFJldHVybiBub3RoaW5nIGlmIGNhbm5vdCBtYXRjaCBhY2NvdW50CiAgICAgICAgICAgIGlmIChjYWxlbmRhckFjY291bnRJbmRleCA9PT0gLTEpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2FsZW5kYXJBY2NvdW50SW5kZXggPiAtMSkgewogICAgICAgICAgICAgICAgdmFyIGNhbGVuZGFyQWNjb3VudFR5cGUgPSAoX2IgPSBhY2NvdW50c1tjYWxlbmRhckFjY291bnRJbmRleF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50eXBlOwogICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBHb29nbGUgTWVldCBpZiBjYWxlbmRhciB0eXBlIGlzIG5vdCBnb29nbGUKICAgICAgICAgICAgICAgIGlmIChjYWxlbmRhckFjY291bnRUeXBlICE9PSBBY2NvdW50VHlwZS5Hb29nbGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuQ09ORkVSRU5DRV9PUFRJT05TLmZpbHRlcihmdW5jdGlvbiAob3B0aW9uKSB7IHJldHVybiBvcHRpb24gIT09IENvbmZlcmVuY2VUeXBlLkdvb2dsZTsgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiBhbGwgb3B0aW9ucwogICAgICAgICAgICByZXR1cm4gX3RoaXMuQ09ORkVSRU5DRV9PUFRJT05TOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlQ29uZmlybSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNjaGVkdWxpbmcgPSBfdGhpcy5wcm9wcy5zY2hlZHVsaW5nOwogICAgICAgICAgICB2YXIgb2xkQ2FsZW5kYXJVcmwgPSBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcuc2x1ZzsKICAgICAgICAgICAgdmFyIG5ld0NhbGVuZGFyVXJsID0gX3RoaXMuc3RhdGUuY2FsZW5kYXJVcmw7CiAgICAgICAgICAgIHZhciBzbHVnQ2hhbmdlZCA9IG9sZENhbGVuZGFyVXJsICYmIG5ld0NhbGVuZGFyVXJsICE9PSBvbGRDYWxlbmRhclVybDsKICAgICAgICAgICAgdmFyIGNhbGVuZGFyVG9nZ2xlZE9mZiA9ICFfdGhpcy5zdGF0ZS5jYWxlbmRhckVuYWJsZWQgJiYgc2NoZWR1bGluZyAmJiAhc2NoZWR1bGluZy5kaXNhYmxlZDsKICAgICAgICAgICAgLy8gQmxvY2sgYW55IHNhdmVzIGlmIHVybCwgbmFtZSBvciBjYWxlbmRhciBoYXMgbm90IGJlZW4gc2VsZWN0ZWQKICAgICAgICAgICAgaWYgKCFfdGhpcy5zdGF0ZS5jYWxlbmRhclVybCB8fCAhX3RoaXMuc3RhdGUuZXZlbnROYW1lIHx8ICFfdGhpcy5zdGF0ZS5zZWxlY3RlZENhbGVuZGFyKSB7CiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdQbGVhc2UgZmlsbCBvdXQgbWlzc2luZyBpbmZvcm1hdGlvbic7CiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnN0YXRlLmNhbGVuZGFyVXJsKSB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdDb21wbGV0ZSB0aGUgc2NoZWR1bGluZyB1cmwgYW5kIHRyeSBhZ2Fpbi4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zdGF0ZS5ldmVudE5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ0ZpbGwgb3V0IHRoZSBjYWxlbmRhciBldmVudCBuYW1lIGFuZCB0cnkgYWdhaW4uJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghX3RoaXMuc3RhdGUuc2VsZWN0ZWRDYWxlbmRhcikgewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUGxlYXNlIHNlbGVjdCB0aGUgY2FsZW5kYXIgd2Ugc2hvdWxkIHNjaGVkdWxlIG1lZXRpbmdzIGluIGFuZCB0cnkgYWdhaW4uJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBibG9ja1Byb3BzID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnUGxlYXNlIGZpbGwgb3V0IG1pc3NpbmcgaW5mb3JtYXRpb24gYmVmb3JlIHNhdmluZycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICBjb25maXJtQ29weTogJ09rJywKICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7IH0sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IGJsb2NrUHJvcHMgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gQ2FsbGJhY2sgd2hlbiBjb25maXJtZWQgb2sKICAgICAgICAgICAgdmFyIHNhdmVDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVTYXZlKCk7CiAgICAgICAgICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuQ3JlYXRlTmV3Q2FsZW5kYXJNZWV0aW5nVGltZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIC8vIElmIG5vIGJyZWFraW5nIGNoYW5nZXMgYWxsb3cgaW1tZWRpYXRlIHNhdmUKICAgICAgICAgICAgaWYgKCFzbHVnQ2hhbmdlZCAmJiAhY2FsZW5kYXJUb2dnbGVkT2ZmKSB7CiAgICAgICAgICAgICAgICBsb2dBbXBsaXR1ZGVFdmVudChBbXBsaXR1ZGVFdmVudHMuQ3JlYXRlTmV3Q2FsZW5kYXJNZWV0aW5nVGltZSk7CiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVTYXZlKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHNob3cgY29uZmlybSBkaWFsb2d1ZSBiZWZvcmUgc2F2aW5nCiAgICAgICAgICAgIHZhciBjb25maXJtUHJvcHMgPSB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBtYWtlIHRoZXNlIGNoYW5nZXM/JywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBbnkgc2NoZWR1bGluZyBsaW5rcyB5b3UgaGF2ZSBzZW50IHdpbGwgbm90IGJlIGFjY2Vzc2libGUgYW55bW9yZS4nLAogICAgICAgICAgICAgICAgY29uZmlybUNvcHk6ICdPaycsCiAgICAgICAgICAgICAgICBjYW5jZWxDb3B5OiAnQ2FuY2VsJywKICAgICAgICAgICAgICAgIG9uQ29uZmlybTogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2F2ZUNhbGxiYWNrKCk7IH0sCiAgICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IHVuZGVmaW5lZCB9KTsgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBjb25maXJtUHJvcHM6IGNvbmZpcm1Qcm9wcyB9KTsKICAgICAgICB9OwogICAgICAgIC8vIFVwZ3JhZGUgUHJvbXB0cwogICAgICAgIF90aGlzLnNob3dCcmFuZGluZ1VwZ3JhZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd0JyYW5kaW5nVXBncmFkZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhpZGVCcmFuZGluZ1VwZ3JhZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd0JyYW5kaW5nVXBncmFkZTogdW5kZWZpbmVkIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuc2hvd1NjaGVkdWxpbmdVcGdyYWRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dTY2hlZHVsaW5nVXBncmFkZTogdHJ1ZSB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhpZGVTY2hlZHVsaW5nVXBncmFkZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzaG93U2NoZWR1bGluZ1VwZ3JhZGU6IHVuZGVmaW5lZCB9KTsKICAgICAgICB9OwogICAgICAgIF90aGlzLnNob3dEb3VibGVCb29raW5nVXBncmFkZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNjaGVkdWxpbmdEb3VibGVCb29raW5nID0gX3RoaXMucHJvcHMuZmVhdHVyZXMuc2NoZWR1bGluZ0RvdWJsZUJvb2tpbmc7CiAgICAgICAgICAgIGlmIChzY2hlZHVsaW5nRG91YmxlQm9va2luZykgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc2hvd0RvdWJsZUJvb2tpbmdVcGdyYWRlOiB0cnVlIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGlkZURvdWJsZUJvb2tpbmdVcGdyYWRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHNob3dEb3VibGVCb29raW5nVXBncmFkZTogdW5kZWZpbmVkIH0pOwogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlT3BlblNjaGVkdWxpbmdVcmwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IF90aGlzLnByb3BzLCBzY2hlZHVsaW5nID0gX2Euc2NoZWR1bGluZywgbWUgPSBfYS5tZTsKICAgICAgICAgICAgaWYgKHNjaGVkdWxpbmcgJiYgbWUpIHsKICAgICAgICAgICAgICAgIHZhciB1cmwgPSBwcm9jZXNzLmVudi5TQ0hFRFVMSU5HX1VSTCArICIvIiArIG1lLnNsdWcgKyAiLyIgKyBzY2hlZHVsaW5nLnNsdWc7CiAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih1cmwsICdfYmxhbmsnKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgX3RoaXMuaGFuZGxlRGVsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgc2NoZWR1bGluZyA9IF9hLnNjaGVkdWxpbmcsIGRlbGV0ZVNjaGVkdWxpbmcgPSBfYS5kZWxldGVTY2hlZHVsaW5nOwogICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdBbnkgbGlua3MgcG9pbnRpbmcgdG8gdGhpcyBzY2hlZHVsaW5nIHBhZ2Ugd2lsbCBubyBsb25nZXIgd29yay4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNvbnRpbnVlPyc7CiAgICAgICAgICAgIHZhciBkZWxldGVQcm9wcyA9IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnRGVsZXRlIHRoaXMgbWVldGluZyB0aW1lcyBhdmFpbGFiaWxpdHk/JywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICAgICAgICBjb25maXJtQ29weTogJ0RlbGV0ZScsCiAgICAgICAgICAgICAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgYW5kIHJlZGlyZWN0CiAgICAgICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlU2NoZWR1bGluZyhzY2hlZHVsaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlckhpc3RvcnkucHVzaCgnL2NhbGVuZGFyJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2FuY2VsQ29weTogJ0NhbmNlbCcsCiAgICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgY29uZmlybVByb3BzOiB1bmRlZmluZWQgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9OwogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGNvbmZpcm1Qcm9wczogZGVsZXRlUHJvcHMgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVab29tUmVkaXJlY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goJy9zZXR0aW5ncy9pbnRlZ3JhdGlvbnMvem9vbScpOwogICAgICAgIH07CiAgICAgICAgdmFyIHNjaGVkdWxpbmcgPSBwcm9wcy5zY2hlZHVsaW5nLCBpc05ldyA9IHByb3BzLmlzTmV3LCBmZWF0dXJlcyA9IHByb3BzLmZlYXR1cmVzOwogICAgICAgIHZhciBzY2hlZHVsaW5nQ291bnQgPSB2YWx1ZXMocHJvcHMuc2NoZWR1bGluZ3MpLmxlbmd0aDsKICAgICAgICB2YXIgc2NoZWR1bGluZ0FsbG93ZWQgPSBmZWF0dXJlcy5zY2hlZHVsaW5nOwogICAgICAgIHZhciBjYWxlbmRhckRvdWJsZUJvb2tzID0gc2NoZWR1bGluZyAmJiBzY2hlZHVsaW5nLmJsb2NraW5nQ2FsZW5kYXJzICYmCiAgICAgICAgICAgIHNjaGVkdWxpbmcuYmxvY2tpbmdDYWxlbmRhcnMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICBhW2JdID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgICAgICB9LCB7fSkgfHwge307CiAgICAgICAgdmFyIGNhbGVuZGFyRW5hYmxlZCA9ICEhc2NoZWR1bGluZ0NvdW50ICYmIHNjaGVkdWxpbmcgJiYgIXNjaGVkdWxpbmcuZGlzYWJsZWQgfHwgZmFsc2U7CiAgICAgICAgLy8gTmVlZCB0byBkZWZhdWx0IGZvciAwIGluIHRoZSBjYXNlIHdoZXJlIHRoZSBwcm9wZXJ0eSBkb2VzIG5vdCBleGlzdAogICAgICAgIHZhciBkZWZhdWx0TWluaW11bU5vdGljZSA9IGlzTmV3ID8gNDgwIDogMDsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgY2FsZW5kYXJFbmFibGVkOiBzY2hlZHVsaW5nQWxsb3dlZCAmJiAoY2FsZW5kYXJFbmFibGVkIHx8IChpc05ldyB8fCBmYWxzZSkpLAogICAgICAgICAgICBzaG93QnJhbmRpbmc6IHNjaGVkdWxpbmcgJiYgIXNjaGVkdWxpbmcuaGlkZUJyYW5kaW5nICE9PSB1bmRlZmluZWQgPwogICAgICAgICAgICAgICAgIXNjaGVkdWxpbmcuaGlkZUJyYW5kaW5nIDogdHJ1ZSwKICAgICAgICAgICAgZXZlbnROYW1lOiBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcubmFtZSB8fCAnTmV3IE1lZXRpbmcgVGltZXMnLAogICAgICAgICAgICBldmVudExvY2F0aW9uOiBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcubG9jYXRpb24gfHwgJycsCiAgICAgICAgICAgIGNhbGVuZGFyVXJsOiBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcuc2x1ZyB8fCAnJywKICAgICAgICAgICAgY2FsZW5kYXJEYXlzT2ZXZWVrOiBfdGhpcy5jYWxlbmRhckRheXNPZldlZWsoc2NoZWR1bGluZyAmJiBzY2hlZHVsaW5nLnRpbWVXaW5kb3dzIHx8IF90aGlzLkRFRkFVTFRfVElNRV9XSU5ET1dTKSwKICAgICAgICAgICAgdGltZVZhbHVlczogX3RoaXMuZ2V0VGltZVZhbHVlcygpLAogICAgICAgICAgICBkdXJhdGlvbk1pbnV0ZXM6IHNjaGVkdWxpbmcgJiYgc2NoZWR1bGluZy5kdXJhdGlvbk1pbnV0ZXMgfHwgMzAsCiAgICAgICAgICAgIGJ1ZmZlckR1cmF0aW9uOiBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcucGFkZGluZ01pbnV0ZXMgfHwgMCwKICAgICAgICAgICAgYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodDogc2NoZWR1bGluZyAmJiBzY2hlZHVsaW5nLnRpbWVXaW5kb3dzWzBdICYmCiAgICAgICAgICAgICAgICBzY2hlZHVsaW5nLnRpbWVXaW5kb3dzWzBdLmFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQgfHwgMzI0MDAsCiAgICAgICAgICAgIGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0OiBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcudGltZVdpbmRvd3NbMF0gJiYKICAgICAgICAgICAgICAgIHNjaGVkdWxpbmcudGltZVdpbmRvd3NbMF0uYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQgfHwgNjEyMDAsCiAgICAgICAgICAgIHNob3dTYXZlOiBmYWxzZSwKICAgICAgICAgICAgc2VsZWN0ZWRUaW1lWm9uZTogc2NoZWR1bGluZyAmJiBzY2hlZHVsaW5nLnRpbWVab25lIHx8IG1vbWVudC50ei5ndWVzcygpLAogICAgICAgICAgICBjYWxlbmRhckRvdWJsZUJvb2tDaGVja3M6IGNhbGVuZGFyRG91YmxlQm9va3MsCiAgICAgICAgICAgIHNlbGVjdGVkQ2FsZW5kYXI6IHNjaGVkdWxpbmcgJiYgc2NoZWR1bGluZy5jYWxlbmRhciB8fCAnJywKICAgICAgICAgICAgbWluaW11bU5vdGljZTogc2NoZWR1bGluZyAmJiBzY2hlZHVsaW5nLm1pbmltdW1Ob3RpY2UgfHwgZGVmYXVsdE1pbmltdW1Ob3RpY2UsCiAgICAgICAgICAgIGNvbmZlcmVuY2VUeXBlOiBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcuY29uZmVyZW5jZVR5cGUgfHwgQ29uZmVyZW5jZVR5cGUuTm9uZSwKICAgICAgICB9OwogICAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIE1hbmFnZVNjaGVkdWxpbmdEZXRhaWwucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBsaXN0Q2FsZW5kYXJzID0gdGhpcy5wcm9wcy5saXN0Q2FsZW5kYXJzOwogICAgICAgIC8vIEFsd2F5cyBmZXRjaCBjYWxlbmRhciBvbiBtb3VudAogICAgICAgIGxpc3RDYWxlbmRhcnMoKTsKICAgICAgICBpZiAodGhpcy5yZWYgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgICB0aGlzLnJlZi5mb2N1cygpOwogICAgICAgIH0KICAgIH07CiAgICBNYW5hZ2VTY2hlZHVsaW5nRGV0YWlsLnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiAob2xkUHJvcHMpIHsKICAgICAgICB2YXIgc2NoZWR1bGluZyA9IHRoaXMucHJvcHMuc2NoZWR1bGluZzsKICAgICAgICAvLyBSZXNldCBzdGF0ZSBpZiBzY2hlZHVsaW5nIG1vZGVsIGhhcyBub3QgYmVlbiBzZXQgb24gY29tcG9uZW50IHlldAogICAgICAgIGlmIChzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcgIT09IG9sZFByb3BzLnNjaGVkdWxpbmcpIHsKICAgICAgICAgICAgdmFyIGNhbGVuZGFyRG91YmxlQm9va3MgPSBzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcuYmxvY2tpbmdDYWxlbmRhcnMgJiYKICAgICAgICAgICAgICAgIHNjaGVkdWxpbmcuYmxvY2tpbmdDYWxlbmRhcnMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgYVtiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgICAgICAgICB9LCB7fSkgfHwge307CiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgY2FsZW5kYXJFbmFibGVkOiAhc2NoZWR1bGluZy5kaXNhYmxlZCwKICAgICAgICAgICAgICAgIHNob3dCcmFuZGluZzogIXNjaGVkdWxpbmcuaGlkZUJyYW5kaW5nLAogICAgICAgICAgICAgICAgZXZlbnROYW1lOiBzY2hlZHVsaW5nLm5hbWUgfHwgJycsCiAgICAgICAgICAgICAgICBldmVudExvY2F0aW9uOiBzY2hlZHVsaW5nLmxvY2F0aW9uIHx8ICcnLAogICAgICAgICAgICAgICAgY2FsZW5kYXJVcmw6IHNjaGVkdWxpbmcuc2x1ZyB8fCAnJywKICAgICAgICAgICAgICAgIGNhbGVuZGFyRGF5c09mV2VlazogdGhpcy5jYWxlbmRhckRheXNPZldlZWsoc2NoZWR1bGluZy50aW1lV2luZG93cyksCiAgICAgICAgICAgICAgICB0aW1lVmFsdWVzOiB0aGlzLmdldFRpbWVWYWx1ZXMoKSwKICAgICAgICAgICAgICAgIGR1cmF0aW9uTWludXRlczogc2NoZWR1bGluZy5kdXJhdGlvbk1pbnV0ZXMgfHwgMzAsCiAgICAgICAgICAgICAgICBidWZmZXJEdXJhdGlvbjogc2NoZWR1bGluZy5wYWRkaW5nTWludXRlcywKICAgICAgICAgICAgICAgIGFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQ6IHNjaGVkdWxpbmcudGltZVdpbmRvd3NbMF0gJiYKICAgICAgICAgICAgICAgICAgICBzY2hlZHVsaW5nLnRpbWVXaW5kb3dzWzBdLmFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQgfHwgMzI0MDAsCiAgICAgICAgICAgICAgICBiZWZvcmVTZWNvbmRzU2luY2VNaWRuaWdodDogc2NoZWR1bGluZy50aW1lV2luZG93c1swXSAmJgogICAgICAgICAgICAgICAgICAgIHNjaGVkdWxpbmcudGltZVdpbmRvd3NbMF0uYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQgfHwgNjEyMDAsCiAgICAgICAgICAgICAgICBzaG93U2F2ZTogZmFsc2UsCiAgICAgICAgICAgICAgICBzZWxlY3RlZFRpbWVab25lOiBzY2hlZHVsaW5nLnRpbWVab25lIHx8IG1vbWVudC50ei5ndWVzcygpLAogICAgICAgICAgICAgICAgY2FsZW5kYXJEb3VibGVCb29rQ2hlY2tzOiBjYWxlbmRhckRvdWJsZUJvb2tzLAogICAgICAgICAgICAgICAgc2VsZWN0ZWRDYWxlbmRhcjogc2NoZWR1bGluZy5jYWxlbmRhciB8fCAnJywKICAgICAgICAgICAgICAgIGNvbmZlcmVuY2VUeXBlOiBzY2hlZHVsaW5nLmNvbmZlcmVuY2VUeXBlLAogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFzY2hlZHVsaW5nICYmIHNjaGVkdWxpbmcgIT09IG9sZFByb3BzLnNjaGVkdWxpbmcpIHsKICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICBjYWxlbmRhckVuYWJsZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBzaG93QnJhbmRpbmc6IHRydWUsCiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdOZXcgTWVldGluZyBUaW1lcycsCiAgICAgICAgICAgICAgICBldmVudExvY2F0aW9uOiAnJywKICAgICAgICAgICAgICAgIGNhbGVuZGFyVXJsOiAnJywKICAgICAgICAgICAgICAgIGNhbGVuZGFyRGF5c09mV2VlazogdGhpcy5jYWxlbmRhckRheXNPZldlZWsodGhpcy5ERUZBVUxUX1RJTUVfV0lORE9XUyksCiAgICAgICAgICAgICAgICB0aW1lVmFsdWVzOiB0aGlzLmdldFRpbWVWYWx1ZXMoKSwKICAgICAgICAgICAgICAgIGR1cmF0aW9uTWludXRlczogMzAsCiAgICAgICAgICAgICAgICBidWZmZXJEdXJhdGlvbjogMTAsCiAgICAgICAgICAgICAgICBhZnRlclNlY29uZHNTaW5jZU1pZG5pZ2h0OiAzMjQwMCwKICAgICAgICAgICAgICAgIGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0OiA2MTIwMCwKICAgICAgICAgICAgICAgIHNob3dTYXZlOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNlbGVjdGVkVGltZVpvbmU6IG1vbWVudC50ei5ndWVzcygpLAogICAgICAgICAgICAgICAgY2FsZW5kYXJEb3VibGVCb29rQ2hlY2tzOiB7fSwKICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FsZW5kYXI6ICcnLAogICAgICAgICAgICAgICAgY29uZmVyZW5jZVR5cGU6IENvbmZlcmVuY2VUeXBlLk5vbmUsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICBNYW5hZ2VTY2hlZHVsaW5nRGV0YWlsLnByb3RvdHlwZS5jYWxlbmRhckRheXNPZldlZWsgPSBmdW5jdGlvbiAod2luZG93cykgewogICAgICAgIHZhciBkYXlzID0gewogICAgICAgICAgICAwOiBmYWxzZSwKICAgICAgICAgICAgMTogZmFsc2UsCiAgICAgICAgICAgIDI6IGZhbHNlLAogICAgICAgICAgICAzOiBmYWxzZSwKICAgICAgICAgICAgNDogZmFsc2UsCiAgICAgICAgICAgIDU6IGZhbHNlLAogICAgICAgICAgICA2OiBmYWxzZSwKICAgICAgICB9OwogICAgICAgIHdpbmRvd3MuZm9yRWFjaChmdW5jdGlvbiAod2luKSB7CiAgICAgICAgICAgIGRheXNbd2luLmRheU9mV2Vla10gPSB0cnVlOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBkYXlzOwogICAgfTsKICAgIC8vIFRPRE8oU0hJTik6IFByZXZlbnQgdG9nZ2xpbmcgb2YgZG91YmxlIGJvb2tpbmcgaWYgbm90IG9uIFRlYW1zKwogICAgTWFuYWdlU2NoZWR1bGluZ0RldGFpbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgY2FsZW5kYXJzID0gX2EuY2FsZW5kYXJzLCB1c2VyU2x1ZyA9IF9hLnVzZXJTbHVnLCBmZWF0dXJlcyA9IF9hLmZlYXR1cmVzLCBzY2hlZHVsaW5nID0gX2Euc2NoZWR1bGluZywgem9vbUludGVncmF0aW9uID0gX2Euem9vbUludGVncmF0aW9uLCBhY2NvdW50cyA9IF9hLmFjY291bnRzLCB3cml0YWJsZUNhbGVuZGFycyA9IF9hLndyaXRhYmxlQ2FsZW5kYXJzOwogICAgICAgIHZhciBfYiA9IHRoaXMuc3RhdGUsIHRpbWVWYWx1ZXMgPSBfYi50aW1lVmFsdWVzLCBzZWxlY3RlZENhbGVuZGFyID0gX2Iuc2VsZWN0ZWRDYWxlbmRhciwgY2FsZW5kYXJVcmwgPSBfYi5jYWxlbmRhclVybCwgY29uZmlybVByb3BzID0gX2IuY29uZmlybVByb3BzLCBzaG93U2F2ZSA9IF9iLnNob3dTYXZlLCBjb25mZXJlbmNlVHlwZSA9IF9iLmNvbmZlcmVuY2VUeXBlOwogICAgICAgIHZhciBhbGxDYWxlbmRhcnMgPSBmbGF0dGVuKHZhbHVlcyhjYWxlbmRhcnMpKTsKICAgICAgICB2YXIgYWxsV3JpdGFibGVDYWxlbmRhcnMgPSBmbGF0dGVuKHZhbHVlcyh3cml0YWJsZUNhbGVuZGFycykpOwogICAgICAgIHZhciBjYWxlbmRhckluZGV4ID0gYWxsV3JpdGFibGVDYWxlbmRhcnMuZmluZEluZGV4KGZ1bmN0aW9uIChjYWwpIHsgcmV0dXJuIGNhbC5pZCA9PT0gc2VsZWN0ZWRDYWxlbmRhcjsgfSk7CiAgICAgICAgdmFyIF9jID0gdGhpcy5zdGF0ZSwgYWZ0ZXJTZWNvbmRzU2luY2VNaWRuaWdodCA9IF9jLmFmdGVyU2Vjb25kc1NpbmNlTWlkbmlnaHQsIGJlZm9yZVNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gX2MuYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQ7CiAgICAgICAgdmFyIGxvd2VySW5kZXggPSB0aW1lVmFsdWVzLmZpbmRJbmRleChmdW5jdGlvbiAodCkgeyByZXR1cm4gdC5kaWZmKG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpLCAnc2Vjb25kcycpID09PSBhZnRlclNlY29uZHNTaW5jZU1pZG5pZ2h0OyB9KTsKICAgICAgICB2YXIgdXBwZXJJbmRleCA9IHRpbWVWYWx1ZXMuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiB0LmRpZmYobW9tZW50KCkuc3RhcnRPZignZGF5JyksICdzZWNvbmRzJykgPT09CiAgICAgICAgICAgICAgICAoYmVmb3JlU2Vjb25kc1NpbmNlTWlkbmlnaHQpICUgKDYwICogNjAgKiAyNCk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHRpbWV6b25lcyA9IHRoaXMuVElNRVpPTkVTOwogICAgICAgIHZhciB0aW1lem9uZUluZGV4ID0gdGhpcy5USU1FWk9ORVMuaW5kZXhPZih0aGlzLnN0YXRlLnNlbGVjdGVkVGltZVpvbmUpOwogICAgICAgIHZhciBkdXJhdGlvbkluZGV4ID0gdGhpcy5EVVJBVElPTl9NSU5VVEVTLmluZGV4T2YodGhpcy5zdGF0ZS5kdXJhdGlvbk1pbnV0ZXMpOwogICAgICAgIHZhciBkdXJhdGlvblBhZGRpbmdJbmRleCA9IHRoaXMuRFVSQVRJT05fUEFERElOR19NSU5VVEVTLmluZGV4T2YodGhpcy5zdGF0ZS5idWZmZXJEdXJhdGlvbik7CiAgICAgICAgdmFyIG1pbmltdW1Ob3RpY2VJbmRleCA9IHRoaXMuTUlOSU1VTV9OT1RJQ0VfTUlOVVRFUy5pbmRleE9mKHRoaXMuc3RhdGUubWluaW11bU5vdGljZSk7CiAgICAgICAgdmFyIGNvbmZlcmVuY2VJbmRleCA9IHRoaXMuZ2V0Q29uZmVyZW5jZU9wdGlvbnMoKS5pbmRleE9mKHRoaXMuc3RhdGUuY29uZmVyZW5jZVR5cGUpOwogICAgICAgIC8vIE5hdmlnYXRlIHRvIGludGVncmF0aW9uIHBhZ2UgaWYgaW50ZWdyYXRpb24gaXMgbm90IHZhbGlkCiAgICAgICAgdmFyIHpvb21FcnJvciA9IGNvbmZlcmVuY2VUeXBlID09PSBDb25mZXJlbmNlVHlwZS5ab29tICYmICghem9vbUludGVncmF0aW9uIHx8IHpvb21JbnRlZ3JhdGlvbi5zdGF0dXMgIT09IEludGVncmF0aW9uU3RhdHVzLk9rKTsKICAgICAgICB2YXIgcmVkdWNlZENhbGVuZGFycyA9IGFsbENhbGVuZGFycy5yZWR1Y2UoZnVuY3Rpb24gKGRpY3QsIGNhbCkgewogICAgICAgICAgICBpZiAoY2FsLnJlYWRPbmx5KSB7CiAgICAgICAgICAgICAgICB2YXIgcmVhZE9ubHlWYWxzID0gZGljdC5yZWFkT25seSB8fCBbXTsKICAgICAgICAgICAgICAgIGRpY3QucmVhZE9ubHkgPSBfX3NwcmVhZEFycmF5cyhyZWFkT25seVZhbHMsIFtjYWxdKTsKICAgICAgICAgICAgICAgIHJldHVybiBkaWN0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBleGlzdGluZ1ZhbHMgPSBkaWN0W2NhbC5hY2NvdW50XSB8fCBbXTsKICAgICAgICAgICAgZGljdFtjYWwuYWNjb3VudF0gPSBfX3NwcmVhZEFycmF5cyhleGlzdGluZ1ZhbHMsIFtjYWxdKTsKICAgICAgICAgICAgcmV0dXJuIGRpY3Q7CiAgICAgICAgfSwge30pOwogICAgICAgIHZhciBhY2NvdW50T3JkZXIgPSB7fTsKICAgICAgICBhY2NvdW50cy5mb3JFYWNoKGZ1bmN0aW9uIChhLCBuKSB7CiAgICAgICAgICAgIGFjY291bnRPcmRlclthLmlkXSA9IG4gKyAxOwogICAgICAgIH0pOwogICAgICAgIC8vIFRPRE8oU0hJTik6IERpc2FibGUgQ2hlY2tib3hlcyBmb3IgRG91YmxlIERvdWJsZSBCb29raW5nIHdoZW4gZmVhdHVyZSBib29sIG5vdCBwcmVzZW50CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1hbmFnZS1zY2hlZHVsaW5nLWRldGFpbCIsIHRhYkluZGV4OiAtMSwgcmVmOiB0aGlzLmhhbmRsZVJlZiB9LAogICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE5hdmlnYXRpb25IZWFkZXIsIHsga2V5OiBzY2hlZHVsaW5nID09PSBudWxsIHx8IHNjaGVkdWxpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNjaGVkdWxpbmcuaWQsIHRpdGxlOiB0aGlzLnN0YXRlLmV2ZW50TmFtZSB8fCAnTmV3IE1lZXRpbmcgVGltZXMnLCBvblNhdmU6IHNob3dTYXZlICYmIHRoaXMuaGFuZGxlQ29uZmlybSB8fCB1bmRlZmluZWQsIGNvbnRleHRCdXR0b246ICFzaG93U2F2ZSAmJiAhIXNjaGVkdWxpbmcgJiYgIShzY2hlZHVsaW5nID09PSBudWxsIHx8IHNjaGVkdWxpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNjaGVkdWxpbmcuZGlzYWJsZWQpICYmCiAgICAgICAgICAgICAgICAgICAgKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgY2xhc3NOYW1lOiAidmlldy1jYWxlbmRhci1saW5rIiwgb25DbGljazogdGhpcy5oYW5kbGVPcGVuU2NoZWR1bGluZ1VybCB9LCAiVmlldyBQb2x5bWFpbCBjYWxlbmRhciBwYWdlIFx1MjE5MiIpKSB8fCB1bmRlZmluZWQgfSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2FsZW5kYXItY29udGFpbmVyIiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJwcmVmZXJlbmNlcy1jYWxlbmRhciIgfSwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNhbGVuZGFyLW1haW4iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1Qcm9wcyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb25maXJtLCBfX2Fzc2lnbih7fSwgY29uZmlybVByb3BzKSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZW5hYmxlLXNlY3Rpb24iLCBvbk1vdXNlTGVhdmU6IHRoaXMuaGlkZVNjaGVkdWxpbmdVcGdyYWRlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNob3dTY2hlZHVsaW5nVXBncmFkZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVXBncmFkZVByb21wdCwgeyB0aXRsZTogIlBvbHltYWlsIFNjaGVkdWxpbmciLCBkZXNjcmlwdGlvbjogJ1VwZ3JhZGUgeW91ciBQb2x5bWFpbCBTdWJzY3JpcHRpb24gdG8gJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnZ2V0IGFjY2VzcyB0byBDYWxlbmRhciBTY2hlZHVsaW5nIScgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvZ2dsZUNlbGwsIHsgdGl0bGU6ICJFbmFibGUgdGhpcyBQb2x5bWFpbCBjYWxlbmRhciBwYWdlIiwgc3VidGl0bGU6ICJBbGxvd3MgcGVvcGxlIHRvIGJvb2sgbWVldGluZyBvbiB5b3VyIHB1YmxpYyBQb2x5bWFpbCBjYWxlbmRhciBwYWdlLiIsIHN1YnRpdGxlTGluazogUmVhY3QuY3JlYXRlRWxlbWVudCgiYSIsIHsgaHJlZjogImh0dHBzOi8vaGVscC5wb2x5bWFpbC5pby9mZWF0dXJlcy9jYWxlbmRhci1zY2hlZHVsaW5nIiwgdGFyZ2V0OiAiX2JsYW5rIiB9LCAnIExlYXJuIE1vcmUuJyksIG9uVG9nZ2xlOiB0aGlzLmhhbmRsZUNhbGVuZGFyVG9nZ2xlLCBvbjogdGhpcy5zdGF0ZS5jYWxlbmRhckVuYWJsZWQgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNhbGVuZGFyRW5hYmxlZCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhbGwtb3B0aW9ucyIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNhbGVuZGFyLXNlY3Rpb24taGVhZGVyIiB9LCAiTUVFVElORyBJTkZPUk1BVElPTiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2FsZW5kYXItbGluayIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZXR0aW5nVGV4dElucHV0LCB7IHRpdGxlOiAiWW91ciBQb2x5bWFpbCBjYWxlbmRhciBsaW5rIiwgZGVzY3JpcHRpb246ICdTaGFyZSB0aGlzIGxpbmsgd2l0aCBpbnZpdGVlcyAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAndG8gYWxsb3cgdGhlbSB0byBhY2Nlc3MgYW5kIGJvb2sgbWVldGluZ3MgdG8geW91ciBjYWxlbmRhcicsIHByZWZpeDogcHJvY2Vzcy5lbnYuU0NIRURVTElOR19VUkwgKyAiLyIgKyB1c2VyU2x1ZyArICIvIiwgcGxhY2Vob2xkZXI6ICIoZS5nLiB5b3VyLXVybCkiLCBuYW1lOiAiY2FsZW5kYXJVcmwiLCB2YWx1ZTogY2FsZW5kYXJVcmwsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUNhbGVuZGFyVXJsQ2hhbmdlLCB0eXBlOiAiaW5wdXQiIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNvcHktYXJlYSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIsIHsgImRhdGEtY2xpcGJvYXJkLXRleHQiOiBwcm9jZXNzLmVudi5TQ0hFRFVMSU5HX1VSTCArICIvIiArIHVzZXJTbHVnICsgIi8iICsgY2FsZW5kYXJVcmwsIGlkOiAiY29weS1saW5rIiwgb25DbGljazogdGhpcy5oYW5kbGVDb3B5LCBjbGFzc05hbWU6ICJjb3B5LWxpbmsiLCBvbk1vdXNlTGVhdmU6IHRoaXMuZGlzbWlzc1Rvb2xUaXAgfSwgIkNvcHkgVXJsIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNob3dDb3BpZWRUb29sVGlwICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sVGlwLCB7IGNsYXNzTmFtZTogInRvb2x0aXAiLCB0b3A6ICIzNHB4IiwgbGVmdDogIjE0cHgiLCBjb3B5OiAiQ29waWVkISIgfSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNldHRpbmdUZXh0SW5wdXQsIHsgY2xhc3NOYW1lOiAiZXZlbnQtbmFtZSIsIHRpdGxlOiAiRXZlbnQgTmFtZSIsIGRlc2NyaXB0aW9uOiAiTmFtZSBvZiB0aGUgZXZlbnQgdGhhdCBpbnZpdGVlcyBjYW4gYm9vayBvbiB5b3VyIFBvbHltYWlsIGNhbGVuZGFyIiwgcGxhY2Vob2xkZXI6ICIzMCBtaW4gbWVldGluZyIsIG5hbWU6ICJldmVudE5hbWUiLCB2YWx1ZTogdGhpcy5zdGF0ZS5ldmVudE5hbWUsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZUV2ZW50TmFtZUNoYW5nZSwgdHlwZTogImlucHV0IiB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNldHRpbmdUZXh0SW5wdXQsIHsgY2xhc3NOYW1lOiAibG9jYXRpb24iLCB0aXRsZTogIkV2ZW50IExvY2F0aW9uIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJMb2NhdGlvbiBvZiB0aGUgZXZlbnQgdGhhdCBpbnZpdGVlcyBjYW4gYm9vayBvbiB5b3VyIFBvbHltYWlsIGNhbGVuZGFyIiwgcGxhY2Vob2xkZXI6ICJlLmcuIEdvb2dsZSBIYW5nb3V0cywgWm9vbSBDb25mZXJlbmNlIiwgbmFtZTogImV2ZW50TG9jYXRpb24iLCB2YWx1ZTogdGhpcy5zdGF0ZS5ldmVudExvY2F0aW9uLCBvbkNoYW5nZTogdGhpcy5oYW5kbGVFdmVudExvY2F0aW9uQ2hhbmdlLCB0eXBlOiAiaW5wdXQiIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2FsZW5kYXItc2VjdGlvbi1oZWFkZXIiIH0sICJUSU1FIFdJTkRPV1MiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duQ2VsbCwgeyBjbGFzc05hbWU6ICJkdXJhdGlvbiIsIHZhbHVlczogdGhpcy5EVVJBVElPTl9NSU5VVEVTCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkICsgIiBtaW51dGVzIjsgfSksIG9uU2VsZWN0OiB0aGlzLmhhbmRsZUR1cmF0aW9uU2VsZWN0LCB0aXRsZTogIkV2ZW50IGR1cmF0aW9uIiwgc3VidGl0bGU6ICJFdmVudHMgYm9va2VkIHRocm91Z2ggUG9seW1haWwgd2lsbCBiZSBmb3IgdGhpcyBkdXJhdGlvbiIsIGRyb3Bkb3duSWQ6ICJkb2NrQ291bnQiLCBzdGFydEluZGV4OiBkdXJhdGlvbkluZGV4IH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGltZS13aW5kb3ciIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sICJBdmFpbGFibGUgTWVldGluZyB0aW1lcyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInN1YnRpdGxlIiB9LCAiT25seSBhbGxvdyBpbnZpdGVlcyB0byBib29rIG1lZXRpbmdzIHdpdGhpbiB0aGVzZSB0aW1lcyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogIndlZWtkYXlzIiB9LCB0aGlzLldFRUtEQVlTLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZGF5Iiwga2V5OiBkLmluZGV4IH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KENoZWNrYm94LCB7IGlucHV0TmFtZTogIiIgKyBkLmluZGV4LCBjaGVja2VkOiBfdGhpcy5zdGF0ZS5jYWxlbmRhckRheXNPZldlZWtbZC5pbmRleF0sIG9uQ2hhbmdlOiBfdGhpcy5oYW5kbGVDYWxlbmRhckRheXNDaGFuZ2UgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJsYWJlbCIgfSwgZC5uYW1lKSkpOyB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGltZXMiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7IHZhbHVlczogdGltZVZhbHVlcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uZm9ybWF0KCdoOm1tIGEnKTsgfSksIG9uU2VsZWN0OiB0aGlzLmhhbmRsZUxvd2VyQm91bmRTZWxlY3QsIHN0YXJ0SW5kZXg6IGxvd2VySW5kZXggfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInRvLXNlcGFyYXRvciIgfSwgInRvIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7IHZhbHVlczogdGltZVZhbHVlcy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0uZm9ybWF0KCdoOm1tIGEnKTsgfSksIG9uU2VsZWN0OiB0aGlzLmhhbmRsZVVwcGVyQm91bmRTZWxlY3QsIHN0YXJ0SW5kZXg6IHVwcGVySW5kZXggfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7IHZhbHVlczogdGltZXpvbmVzLCBvblNlbGVjdDogdGhpcy5oYW5kbGVUaW1lWm9uZVNlbGVjdCwgc3RhcnRJbmRleDogdGltZXpvbmVJbmRleCwgcmVhZE9ubHk6IGZhbHNlLCB0eXBlYWhlYWQ6IHRydWUgfSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNhbGVuZGFyLXNlY3Rpb24taGVhZGVyIiB9LCAiQ0FMRU5EQVJTIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEcm9wZG93bkNlbGwsIHsgdmFsdWVzOiBhbGxXcml0YWJsZUNhbGVuZGFycwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoY2FsZW5kYXIpIHsgcmV0dXJuIGNhbGVuZGFyLm5hbWU7IH0pLCBvblNlbGVjdDogdGhpcy5oYW5kbGVDYWxlbmRhclNlbGVjdCwgdGl0bGU6ICJBZGQgbmV3IGV2ZW50cyB0byBjYWxlbmRhciIsIHN1YnRpdGxlOiAiTWVldGluZ3MgYm9va2VkIHRocm91Z2ggUG9seW1haWwgd2lsbCBiZSBhZGRlZCB0byB0aGlzIGNhbGVuZGFyIiwgZHJvcGRvd25JZDogImRvY2tDb3VudCIsIHN0YXJ0SW5kZXg6IGNhbGVuZGFySW5kZXgsIHJlYWRPbmx5OiBmYWxzZSwgdHlwZWFoZWFkOiB0cnVlIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcGRvd25DZWxsLCB7IGNsYXNzTmFtZTogImNhbGVuZGFyLWNvbmZlcmVuY2UtZHJvcGRvd24iLCB2YWx1ZXM6IHRoaXMuZ2V0Q29uZmVyZW5jZU9wdGlvbnMoKS5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGNvbmZlcmVuY2VUeXBlRGlzcGxheSh0KTsgfSksIG9uU2VsZWN0OiB0aGlzLmhhbmRsZUNvbmZlcmVuY2VTZWxlY3QsIHRpdGxlOiAiQWRkIGNvbmZlcmVuY2UgbGluayB0byBtZWV0aW5ncyIsIHN1YnRpdGxlOiAiV2UgY2FuIHNldCB1cCBhIG1lZXRpbmcgdXJsIGZvciB5b3UgdGhyb3VnaCB5b3VyIGNhbGVuZGFyIHByb3ZpZGVyIiwgZHJvcGRvd25JZDogImNvbmZlcmVuY2UiLCBzdGFydEluZGV4OiBjb25mZXJlbmNlSW5kZXgsIGVycm9yOiAhIXpvb21FcnJvciAmJiAnUGxlYXNlIGF1dGhvcml6ZSB5b3VyIFpvb20gaW50ZWdyYXRpb24gdG8gZW5hYmxlIHRoaXMgZmVhdHVyZS4nIHx8IHVuZGVmaW5lZCwgZXJyb3JIYW5kbGVyOiAhIXpvb21FcnJvciAmJiB0aGlzLmhhbmRsZVpvb21SZWRpcmVjdCB8fCB1bmRlZmluZWQsIGVycm9yQ29weTogJ0ZpeCBab29tJyB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IG9uTW91c2VMZWF2ZTogdGhpcy5oaWRlRG91YmxlQm9va2luZ1VwZ3JhZGUsIGNsYXNzTmFtZTogImRvdWJsZS1ib29raW5nLXNlY3Rpb24iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGl0bGUiIH0sICJQcmV2ZW50IGRvdWJsZSBib29raW5ncyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogInN1YnRpdGxlIiB9LCAnQ2hlY2sgdGhlc2UgY2FsZW5kYXJzIGZvciBjb25mbGljdHMgYmVmb3JlICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21ha2luZyB0aW1lIHNsb3RzIGF2YWlsYWJsZSB0byBpbnZpdGVlcycpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNob3dEb3VibGVCb29raW5nVXBncmFkZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChVcGdyYWRlUHJvbXB0LCB7IHRpdGxlOiAiUHJldmVudCBEb3VibGUgQm9va2luZyIsIGRlc2NyaXB0aW9uOiAnVG8gcHJldmVudCBkb3VibGUgYm9va2luZ3MgYWdhaW5zdCBtdWx0aXBsZSBjYWxlbmRhcnMsICcgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndXBncmFkZSB0byBUZWFtcyBvciBFbnRlcnByaXNlJyB9KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjYWxlbmRhci1zZWN0aW9uIiB9LCBPYmplY3Qua2V5cyhyZWR1Y2VkQ2FsZW5kYXJzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdEl0ZW0gPSBhY2NvdW50cy5sZW5ndGggKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGFjY291bnRPcmRlclthXSB8fCBsYXN0SXRlbSkgLSAoYWNjb3VudE9yZGVyW2JdIHx8IGxhc3RJdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImNhbGVuZGFyLXNlY3Rpb24tY2VsbCIsIGtleTogInNlY3Rpb24tY2VsbC0iICsgayB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzZWN0aW9uLWhlYWRlciIgfSwgKChfYSA9IGZpbmQoYWNjb3VudHMsIHsgaWQ6IGsgfSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZXNjcmlwdGlvbikgfHwgJ1JlYWQtb25seSBDYWxlbmRhcnMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAic2VjdGlvbi1jZWxscyIgfSwgcmVkdWNlZENhbGVuZGFyc1trXS5tYXAoZnVuY3Rpb24gKGNhbGVuZGFyKSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJjYWxlbmRhci1jZWxsIiwgb25Nb3VzZU92ZXI6IF90aGlzLnNob3dEb3VibGVCb29raW5nVXBncmFkZSwga2V5OiBjYWxlbmRhci5pZCB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2hlY2tib3gsIHsgaW5wdXROYW1lOiAiIiArIGNhbGVuZGFyLmlkLCBjaGVja2VkOiBfdGhpcy5zdGF0ZS5jYWxlbmRhckRvdWJsZUJvb2tDaGVja3NbY2FsZW5kYXIuaWRdLCBvbkNoYW5nZTogX3RoaXMuaGFuZGxlRG91YmxlQm9va0NoYW5nZSwgZGlzYWJsZWQ6ICFmZWF0dXJlcy5zY2hlZHVsaW5nRG91YmxlQm9va2luZyB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJsYWJlbCIgfSwgY2FsZW5kYXIubmFtZSkpKTsgfSkpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY2FsZW5kYXItc2VjdGlvbi1oZWFkZXIiIH0sICJBRFZBTkNFRCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcGRvd25DZWxsLCB7IGNsYXNzTmFtZTogImR1cmF0aW9uIiwgdmFsdWVzOiB0aGlzLkRVUkFUSU9OX1BBRERJTkdfTUlOVVRFUwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZCArICIgbWludXRlcyI7IH0pLCBvblNlbGVjdDogdGhpcy5oYW5kbGVCdWZmZXJEdXJhdGlvblNlbGVjdCwgdGl0bGU6ICJCdWZmZXIgd2luZG93Iiwgc3VidGl0bGU6ICJNYWtlIHN1cmUgdGhhdCB0aGVyZSBpcyBhdCBsZWFzdCB0aGlzIGFtb3VudCBvZiB0aW1lIGF2YWlsYWJsZSBiZXR3ZWVuIGV4aXN0aW5nIG1lZXRpbmdzIiwgZHJvcGRvd25JZDogImJ1ZmZlckR1cmF0aW9uIiwgc3RhcnRJbmRleDogZHVyYXRpb25QYWRkaW5nSW5kZXggfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEcm9wZG93bkNlbGwsIHsgY2xhc3NOYW1lOiAiZHVyYXRpb24iLCB2YWx1ZXM6IHRoaXMuTUlOSU1VTV9OT1RJQ0VfTUlOVVRFUwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZCAvIDYwICsgIiBob3VycyI7IH0pLCBvblNlbGVjdDogdGhpcy5oYW5kbGVNaW5pbXVtTm90aWNlU2VsZWN0LCB0aXRsZTogIlByZXZlbnQgTGFzdCBNaW51dGUgQm9va2luZ3MiLCBzdWJ0aXRsZTogIlNldCB0aGUgbWluaW11bSBhbW91bnQgb2YgdGltZSBiZWZvcmUgYSBtZWV0aW5nIGNhbiBiZSBzY2hlZHVsZWQuIiwgZHJvcGRvd25JZDogIm1pbmltdW1Ob3RpY2UiLCBzdGFydEluZGV4OiBtaW5pbXVtTm90aWNlSW5kZXggfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJicmFuZGluZy1zZWN0aW9uIiwgb25Nb3VzZUxlYXZlOiB0aGlzLmhpZGVCcmFuZGluZ1VwZ3JhZGUgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb2dnbGVDZWxsLCB7IHRpdGxlOiAiU2hvdyBQb2x5bWFpbCBicmFuZGluZyBvbiBteSBjYWxlbmRhciBwYWdlIiwgc3VidGl0bGU6ICJEaXNwbGF5cyBQb2x5bWFpbCdzIGxvZ28gYW5kIGJyYW5kaW5nIG9uIHlvdXIgY2FsZW5kYXIgcGFnZSIsIG9uVG9nZ2xlOiB0aGlzLmhhbmRsZUJyYW5kaW5nVG9nZ2xlLCBvbjogdGhpcy5zdGF0ZS5zaG93QnJhbmRpbmcgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2hvd0JyYW5kaW5nVXBncmFkZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChVcGdyYWRlUHJvbXB0LCB7IHRpdGxlOiAiUG9seW1haWwgQnJhbmRpbmciLCBkZXNjcmlwdGlvbjogJ1VwZ3JhZGUgdG8gVGVhbXMgb3IgRW50ZXJwcmlzZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnIHRvIHJlbW92ZSBQb2x5bWFpbCBicmFuZGluZyBmcm9tIHlvdXIgY2FsZW5kYXIgcGFnZScgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhc2NoZWR1bGluZyAmJiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJkZWxldGUtc2VjdGlvbiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyBjbGFzc05hbWU6ICJkZWxldGUtYnV0dG9uIiwgb25DbGljazogdGhpcy5oYW5kbGVEZWxldGUgfSwgIkRlbGV0ZSB0aGlzIEF2YWlsYWJpbGl0eSIpKSkpKSkpKSk7CiAgICB9OwogICAgcmV0dXJuIE1hbmFnZVNjaGVkdWxpbmdEZXRhaWw7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBNYW5hZ2VTY2hlZHVsaW5nRGV0YWlsOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Calendar/components/ManageSchedulingDetail/ManageSchedulingDetail.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Calendar/components/ManageSchedulingDetail/ManageSchedulingDetail.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment from 'moment-timezone';\nimport ClipboardJS from 'clipboard';\nimport {\n  Calendar as CalendarType,\n  Features,\n  Me,\n  Action,\n  Account,\n  AccountType,\n  Integration,\n  IntegrationStatus,\n} from '@src/types';\nimport { ConferenceType, Scheduling, TimeWindow } from '@src/types/scheduling';\nimport ToggleCell from '@src/routes/Settings/components/ToggleCell';\nimport DropdownCell from '@src/routes/Settings/components/DropdownCell';\n\nimport './ManageSchedulingDetail.scss';\nimport SettingTextInput from '@src/components/Form/SettingTextInput';\nimport Checkbox from '@src/components/Form/Checkbox/Checkbox';\nimport Dropdown from '@src/components/Form/Dropdown';\nimport { cloneDeep, flatten, values, findIndex, find } from 'lodash';\nimport { SchedulingCreateMeta } from '@src/ducks/scheduling';\nimport Confirm, { Props as ConfirmProps } from '@src/components/Base/Confirm';\nimport ToolTip from '@src/components/Base/Tooltip';\nimport UpgradePrompt from '@src/components/Base/UpgradePrompt/UpgradePrompt';\nimport browserHistory from '@src/lib/browserHistory';\nimport { OnboardingPatchMeta } from '@src/ducks/me';\nimport NavigationHeader from '@src/routes/Settings/components/NavigationHeader';\nimport { conferenceTypeDisplay } from '@src/lib/scheduling';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface Props {\n  scheduling?: Scheduling;\n  calendars: { [account: string]: CalendarType[] };\n  userSlug: string;\n  features: Features;\n  accounts: Account[];\n  confirmProps?: ConfirmProps;\n  schedulingUrl?: string;\n  me?: Me;\n  schedulings?: Scheduling[];\n  isNew?: boolean;\n  zoomIntegration?: Integration;\n  writableCalendars: {\n    [account: string]: CalendarType[];\n  };\n}\n\nexport interface DispatchProps {\n  createScheduling: (meta: SchedulingCreateMeta) => void;\n  updateScheduling: (scheduling: Scheduling) => void;\n  listCalendars: (account?: string) => void;\n  listScheduling: () => void;\n  dispatchAction: (action: Action<any, any>) => void;\n  updateOnboarding: (meta: OnboardingPatchMeta) => void;\n  deleteScheduling: (meta: Scheduling) => void;\n}\n\ninterface State {\n  calendarEnabled: boolean;\n  showBranding: boolean;\n  eventName: string;\n  eventLocation: string;\n  calendarUrl: string;\n  calendarDaysOfWeek: {\n    [day: number]: boolean;\n  };\n  calendarDoubleBookChecks: {\n    [id: string]: boolean;\n  };\n  minimumNotice: number;\n  durationMinutes: number;\n  bufferDuration: number;\n  timeValues: moment.Moment[];\n  selectedTimeZone: string;\n  conferenceType: ConferenceType;\n\n  // Scheduling Values\n  afterSecondsSinceMidnight: number;\n  beforeSecondsSinceMidnight: number;\n  showSave: boolean;\n  selectedCalendar: string;\n\n  // UI States\n  showCopiedToolTip?: boolean;\n  confirmProps?: ConfirmProps;\n\n  // Upgrade Prompts\n  showSchedulingUpgrade?: boolean;\n  showBrandingUpgrade?: boolean;\n  showDoubleBookingUpgrade?: boolean;\n\n}\n\n// TODO(SHIN): Handle redirecting zoom if integration is not installed\n// TODO(SHIN): Handle showing Zoom for all calendar cases\nclass ManageSchedulingDetail extends React.PureComponent<\n  Props & DispatchProps, State\n> {\n  ref: HTMLDivElement;\n\n  clipboard = new ClipboardJS('#copy-link');\n  WEEKDAYS = [\n    { name: 'Mon', index: 1 },\n    { name: 'Tue', index: 2 },\n    { name: 'Wed', index: 3 },\n    { name: 'Thu', index: 4 },\n    { name: 'Fri', index: 5 },\n    { name: 'Sat', index: 6 },\n    { name: 'Sun', index: 0 },\n  ];\n\n  DURATION_MINUTES = [\n    15,\n    20,\n    30,\n    45,\n    60,\n  ];\n\n  DURATION_PADDING_MINUTES = [\n    0,\n    5,\n    10,\n    15,\n    30,\n    45,\n    60,\n  ];\n\n  MINIMUM_NOTICE_MINUTES = [\n    0,\n    120,\n    240,\n    480,\n    720,\n    1440,\n  ];\n\n  CONFERENCE_OPTIONS = [\n    ConferenceType.None,\n    ConferenceType.Google,\n    ConferenceType.Zoom,\n  ];\n\n  DEFAULT_TIME_WINDOWS: TimeWindow[] = [\n    {\n      dayOfWeek: 1,\n      afterSecondsSinceMidnight: 32400,\n      beforeSecondsSinceMidnight: 61200,\n    },\n    {\n      dayOfWeek: 2,\n      afterSecondsSinceMidnight: 32400,\n      beforeSecondsSinceMidnight: 61200,\n    },\n    {\n      dayOfWeek: 3,\n      afterSecondsSinceMidnight: 32400,\n      beforeSecondsSinceMidnight: 61200,\n    },\n    {\n      dayOfWeek: 4,\n      afterSecondsSinceMidnight: 32400,\n      beforeSecondsSinceMidnight: 61200,\n    },\n    {\n      dayOfWeek: 5,\n      afterSecondsSinceMidnight: 32400,\n      beforeSecondsSinceMidnight: 61200,\n    },\n  ];\n\n  TIMEZONES = moment.tz.names()\n    .filter(tz => !tz.toLowerCase().startsWith('etc'));\n\n  constructor(props: Props & DispatchProps) {\n    super();\n    const { scheduling, isNew, features } = props;\n    const schedulingCount = values(props.schedulings).length;\n    const schedulingAllowed = features.scheduling;\n    const calendarDoubleBooks = scheduling && scheduling.blockingCalendars &&\n        scheduling.blockingCalendars.reduce(\n        (a, b) => {\n          a[b] = true;\n          return a;\n        },\n        {},\n      ) || {};\n\n    const calendarEnabled = !!schedulingCount && scheduling && !scheduling.disabled || false;\n\n     // Need to default for 0 in the case where the property does not exist\n    const defaultMinimumNotice = isNew ? 480 : 0;\n\n    this.state = {\n      calendarEnabled: schedulingAllowed && (calendarEnabled || (isNew || false)),\n      showBranding: scheduling && !scheduling.hideBranding !== undefined ?\n        !scheduling.hideBranding : true,\n      eventName: scheduling && scheduling.name || 'New Meeting Times',\n      eventLocation: scheduling && scheduling.location || '',\n      calendarUrl: scheduling && scheduling.slug || '',\n      calendarDaysOfWeek: this.calendarDaysOfWeek(\n        scheduling && scheduling.timeWindows || this.DEFAULT_TIME_WINDOWS,\n      ),\n      timeValues: this.getTimeValues(),\n      durationMinutes: scheduling && scheduling.durationMinutes || 30,\n      bufferDuration: scheduling && scheduling.paddingMinutes || 0,\n      afterSecondsSinceMidnight: scheduling && scheduling.timeWindows[0] &&\n        scheduling.timeWindows[0].afterSecondsSinceMidnight || 32400,\n      beforeSecondsSinceMidnight: scheduling && scheduling.timeWindows[0] &&\n        scheduling.timeWindows[0].beforeSecondsSinceMidnight || 61200,\n      showSave: false,\n      selectedTimeZone: scheduling && scheduling.timeZone || moment.tz.guess(),\n      calendarDoubleBookChecks: calendarDoubleBooks,\n      selectedCalendar: scheduling && scheduling.calendar || '',\n      minimumNotice: scheduling && scheduling.minimumNotice || defaultMinimumNotice,\n      conferenceType: scheduling && scheduling.conferenceType || ConferenceType.None,\n    };\n  }\n\n  componentDidMount() {\n    const {\n      listCalendars,\n    } = this.props;\n\n    // Always fetch calendar on mount\n    listCalendars();\n\n    if (this.ref && document.activeElement === document.body) {\n      this.ref.focus();\n    }\n  }\n\n  componentDidUpdate(oldProps: Props) {\n    const { scheduling } = this.props;\n\n    // Reset state if scheduling model has not been set on component yet\n    if (scheduling && scheduling !== oldProps.scheduling) {\n      const calendarDoubleBooks = scheduling && scheduling.blockingCalendars &&\n        scheduling.blockingCalendars.reduce(\n          (a, b) => {\n            a[b] = true;\n            return a;\n          },\n          {},\n        ) || {};\n\n      this.setState({\n        calendarEnabled: !scheduling.disabled,\n        showBranding: !scheduling.hideBranding,\n        eventName: scheduling.name || '',\n        eventLocation: scheduling.location || '',\n        calendarUrl: scheduling.slug || '',\n        calendarDaysOfWeek: this.calendarDaysOfWeek(scheduling.timeWindows),\n        timeValues: this.getTimeValues(),\n        durationMinutes: scheduling.durationMinutes || 30,\n        bufferDuration: scheduling.paddingMinutes,\n        afterSecondsSinceMidnight: scheduling.timeWindows[0] &&\n          scheduling.timeWindows[0].afterSecondsSinceMidnight || 32400,\n        beforeSecondsSinceMidnight: scheduling.timeWindows[0] &&\n          scheduling.timeWindows[0].beforeSecondsSinceMidnight || 61200,\n        showSave: false,\n        selectedTimeZone: scheduling.timeZone || moment.tz.guess(),\n        calendarDoubleBookChecks: calendarDoubleBooks,\n        selectedCalendar: scheduling.calendar || '',\n        conferenceType: scheduling.conferenceType,\n      });\n    }\n\n    if (!scheduling && scheduling !== oldProps.scheduling) {\n      this.setState({\n        calendarEnabled: true,\n        showBranding: true,\n        eventName: 'New Meeting Times',\n        eventLocation: '',\n        calendarUrl: '',\n        calendarDaysOfWeek: this.calendarDaysOfWeek(this.DEFAULT_TIME_WINDOWS),\n        timeValues: this.getTimeValues(),\n        durationMinutes: 30,\n        bufferDuration: 10,\n        afterSecondsSinceMidnight: 32400,\n        beforeSecondsSinceMidnight: 61200,\n        showSave: false,\n        selectedTimeZone: moment.tz.guess(),\n        calendarDoubleBookChecks: {},\n        selectedCalendar: '',\n        conferenceType: ConferenceType.None,\n      });\n    }\n  }\n\n  handleRef = (ref: HTMLDivElement) => {\n    this.ref = ref;\n  }\n\n  calendarDaysOfWeek(windows: TimeWindow[]) {\n    const days: {\n      [day: number]: boolean;\n    }  = {\n      0: false,\n      1: false,\n      2: false,\n      3: false,\n      4: false,\n      5: false,\n      6: false,\n    };\n\n    windows.forEach((win) => {\n      days[win.dayOfWeek] = true;\n    });\n\n    return days;\n  }\n\n  getTimeValues = () => {\n    const start = moment().startOf('day');\n    const timeValues = [];\n\n    while (start.isBefore(moment().add(1, 'day').startOf('day'))) {\n      timeValues.push(start.clone());\n      start.add(1, 'hour');\n    }\n\n    return timeValues;\n  }\n\n  handleCalendarToggle = () => {\n    const { features } = this.props;\n\n    // Show Upgrade prompt if feature is not set\n    if (!features.scheduling) {\n      this.showSchedulingUpgrade();\n      return;\n    }\n\n    this.setState({ calendarEnabled: !this.state.calendarEnabled, showSave: true });\n  }\n\n  handleBrandingToggle = () => {\n    const { features } = this.props;\n\n    // Show Upgrade prompt if feature not enabled\n    if (!features.schedulingNoBranding) {\n      this.showBrandingUpgrade();\n      return;\n    }\n\n    this.setState({\n      showBranding: !this.state.showBranding,\n      showSave: true,\n    });\n  }\n\n  handleDurationSelect = (value: string, index: number) => {\n    const minutes = this.DURATION_MINUTES[index];\n    this.setState({ durationMinutes: minutes, showSave: true });\n  }\n\n  handleBufferDurationSelect = (value: string, index: number) => {\n    const minutes = this.DURATION_PADDING_MINUTES[index];\n    this.setState({ bufferDuration: minutes, showSave: true });\n  }\n\n  handleMinimumNoticeSelect = (value: string, index: number) => {\n    const minutes = this.MINIMUM_NOTICE_MINUTES[index];\n    this.setState({ minimumNotice: minutes, showSave: true });\n  }\n\n  handleEventNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ eventName: e.currentTarget.value, showSave: true });\n  }\n\n  handleCalendarUrlChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ calendarUrl: e.currentTarget.value, showSave: true });\n  }\n\n  handleEventLocationChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ eventLocation: e.currentTarget.value, showSave: true });\n  }\n\n  handleCalendarDaysChange = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    const dayIndex = parseInt(e.currentTarget.name, 10);\n    const currentDays = { ...this.state.calendarDaysOfWeek };\n    currentDays[dayIndex] = !currentDays[dayIndex];\n    this.setState({\n      calendarDaysOfWeek: currentDays,\n      showSave: true,\n    });\n  }\n\n  handleDoubleBookChange = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    // Show upgrade prompt if user does not have schedule double booking teamFeatures enabled\n    const { features } = this.props;\n    if (!features.schedulingDoubleBooking) {\n      this.showDoubleBookingUpgrade();\n      e.stopPropagation();\n      e.preventDefault();\n      return;\n    }\n\n    const calendarId = e.currentTarget.name;\n    const doubleBookChecks = { ...this.state.calendarDoubleBookChecks  };\n    doubleBookChecks[calendarId] = !doubleBookChecks[calendarId];\n    this.setState({\n      calendarDoubleBookChecks: doubleBookChecks,\n      showSave: true,\n    });\n  }\n\n  // TODO(SHIN): Handle double booking selection (include if on team, select single if on pro)\n  handleCalendarSelect = (option: string, index: number) => {\n    const { writableCalendars, features, accounts } = this.props;\n    const { conferenceType } = this.state;\n    const allCalendars = flatten(values(writableCalendars));\n    const selectedCalendarId = allCalendars[index] && allCalendars[index].id || '';\n    const doubleBookChecks = { ...this.state.calendarDoubleBookChecks };\n\n    // Reset double booking calendars if feature does not allow for multiple double booking\n    if (!features.schedulingDoubleBooking) {\n      Object.keys(doubleBookChecks).forEach((key) => {\n        doubleBookChecks[key] = key === selectedCalendarId;\n      });\n      doubleBookChecks[selectedCalendarId] = true;\n      this.setState({\n        selectedCalendar: selectedCalendarId,\n        calendarDoubleBookChecks: doubleBookChecks,\n        showSave: true,\n      });\n      return;\n    }\n\n    // Unsets Google Meet Conference type if selected calendar is not Google.\n    let selectedConferenceType = conferenceType;\n    const calendarAccountId = allCalendars[index] && allCalendars[index].account;\n    const calendarAccount = accounts.filter(a => a.id === calendarAccountId)[0];\n    if (calendarAccount && calendarAccount.type !== AccountType.Google) {\n      if (selectedConferenceType === ConferenceType.Google) {\n        selectedConferenceType = ConferenceType.None;\n      }\n    }\n\n    // Set selected calendar id\n    doubleBookChecks[selectedCalendarId] = true;\n    this.setState({\n      calendarDoubleBookChecks: doubleBookChecks,\n      selectedCalendar: selectedCalendarId,\n      conferenceType: selectedConferenceType,\n      showSave: true,\n    });\n  }\n\n  // Handle Conference Select chooses a conference option\n  handleConferenceSelect = (option: string, index: number) => {\n    const { zoomIntegration } = this.props;\n    const conferenceType = this.getConferenceOptions()[index];\n\n    // Navigate to integration page if integration is not valid\n    if (conferenceType === ConferenceType.Zoom &&\n      (!zoomIntegration || zoomIntegration.status !== IntegrationStatus.Ok)) {\n\n      // Show confirm prompt with redirect in order to enable zoom integration\n      const blockProps: ConfirmProps = {\n        title: 'Enable Zoom Integration',\n        message: 'You must connect your Zoom account in order to create conference urls for your scheduling pages. Continue to the integrations page?',\n        confirmCopy: 'Continue',\n        cancelCopy: 'Cancel',\n        onConfirm: () => {\n          this.setState({ confirmProps: undefined }, () => {\n            this.handleZoomRedirect();\n          });\n        },\n        onCancel: () => this.setState({ confirmProps: undefined }),\n      };\n\n      this.setState({\n        confirmProps: blockProps,\n      });\n      return;\n    }\n\n    // Otherwise set zoom integration\n    this.setState({ conferenceType, showSave: true });\n  }\n\n  handleTimeZoneSelect = (option: string, index: number) => {\n    this.setState({ selectedTimeZone: this.TIMEZONES[index], showSave: true });\n  }\n\n  // Calculates new upper bound for time zone\n  handleUpperBoundSelect = (value: string, index: number) => {\n    const { timeValues } = this.state;\n    const time = timeValues[index];\n\n    const newBefore = time.diff(moment().startOf('day'), 'seconds');\n    let afterSecondsSinceMidnight = this.state.afterSecondsSinceMidnight;\n\n    if (newBefore < afterSecondsSinceMidnight) {\n      afterSecondsSinceMidnight = 0;\n    }\n\n    this.setState({\n      beforeSecondsSinceMidnight: newBefore,\n      afterSecondsSinceMidnight,\n      showSave: true,\n    });\n  }\n\n  handleLowerBoundSelect = (value: string, index: number) => {\n    const { timeValues } = this.state;\n    const time = timeValues[index];\n    const newAfter = time.diff(moment().startOf('day'), 'seconds');\n    let beforeSecondsSinceMidnight = this.state.beforeSecondsSinceMidnight;\n\n    if (newAfter > beforeSecondsSinceMidnight) {\n      beforeSecondsSinceMidnight = (60 * 60 * 24) - 1;\n    }\n    this.setState({\n      afterSecondsSinceMidnight: newAfter,\n      beforeSecondsSinceMidnight,\n      showSave: true,\n    });\n  }\n\n  handleSave = () => {\n    const { updateScheduling, createScheduling } = this.props;\n    const existing = cloneDeep(this.props.scheduling);\n\n    // Calculate blocking calendars\n    const blockingCalendars: string[] = [];\n    Object.keys(this.state.calendarDoubleBookChecks).forEach((key) => {\n      if (this.state.calendarDoubleBookChecks[key]) {\n        blockingCalendars.push(key);\n      }\n    });\n\n    // Converts time windows\n    const timeWindows: TimeWindow[] = this.WEEKDAYS\n      .filter(d => this.state.calendarDaysOfWeek[d.index])\n      .map(d => ({\n        dayOfWeek: d.index,\n        afterSecondsSinceMidnight: this.state.afterSecondsSinceMidnight,\n        beforeSecondsSinceMidnight: this.state.beforeSecondsSinceMidnight,\n      }));\n\n    // Handle creation if scheduling model does not exist\n    if (!existing) {\n      const createMeta: SchedulingCreateMeta = {\n        name: this.state.eventName,\n        disabled: !this.state.calendarEnabled,\n        eventName: this.state.eventName,\n        location: this.state.eventLocation,\n        durationMinutes: this.state.durationMinutes,\n        timeZone: this.state.selectedTimeZone,\n        calendar: this.state.selectedCalendar,\n        slug: this.state.calendarUrl,\n        paddingMinutes: this.state.bufferDuration,\n        minimumNotice: this.state.minimumNotice,\n        conferenceType: this.state.conferenceType,\n        blockingCalendars,\n        timeWindows,\n      };\n\n      createScheduling(createMeta);\n      this.setState({ showSave: false });\n      return;\n    }\n\n    const updateMeta: Scheduling = {\n      ...existing,\n      disabled: !this.state.calendarEnabled,\n      name: this.state.eventName,\n      eventName: this.state.eventName,\n      location: this.state.eventLocation,\n      durationMinutes: this.state.durationMinutes,\n      timeZone: this.state.selectedTimeZone,\n      calendar: this.state.selectedCalendar,\n      slug: this.state.calendarUrl,\n      hideBranding: !this.state.showBranding,\n      paddingMinutes: this.state.bufferDuration,\n      minimumNotice: this.state.minimumNotice,\n      conferenceType: this.state.conferenceType,\n      blockingCalendars,\n      timeWindows,\n    };\n\n    updateScheduling(updateMeta);\n    this.setState({ showSave: false });\n  }\n\n  handleCopy = (e: React.MouseEvent<HTMLButtonElement>) => {\n    this.setState({ showCopiedToolTip: true });\n  }\n\n  dismissToolTip = () => {\n    this.setState({ showCopiedToolTip: undefined });\n  }\n\n  getConferenceOptions = () => {\n    const { calendars, accounts } = this.props;\n    const { selectedCalendar } = this.state;\n\n    // Return nothing if no calendar is selected\n    if (selectedCalendar === '') {\n      return [];\n    }\n\n    const allCalendars = flatten(values(calendars));\n    const calendarAccountId = allCalendars.filter(c => c.id === selectedCalendar)[0]?.account;\n    const calendarAccountIndex = findIndex(accounts, { id: calendarAccountId });\n\n    // Return nothing if cannot match account\n    if (calendarAccountIndex === -1) {\n      return [];\n    }\n\n    if (calendarAccountIndex > -1) {\n      const calendarAccountType = accounts[calendarAccountIndex]?.type;\n\n      // Filter out Google Meet if calendar type is not google\n      if (calendarAccountType !== AccountType.Google) {\n        return this.CONFERENCE_OPTIONS.filter(option => option !== ConferenceType.Google);\n      }\n    }\n\n    // Otherwise return all options\n    return this.CONFERENCE_OPTIONS;\n  }\n\n  handleConfirm = () => {\n    const { scheduling } = this.props;\n    const oldCalendarUrl = scheduling && scheduling.slug;\n    const newCalendarUrl = this.state.calendarUrl;\n    const slugChanged = oldCalendarUrl && newCalendarUrl !== oldCalendarUrl;\n    const calendarToggledOff = !this.state.calendarEnabled && scheduling && !scheduling.disabled;\n\n    // Block any saves if url, name or calendar has not been selected\n    if (!this.state.calendarUrl || !this.state.eventName || !this.state.selectedCalendar) {\n      let message = 'Please fill out missing information';\n      if (!this.state.calendarUrl) {\n        message = 'Complete the scheduling url and try again.';\n      }\n\n      if (!this.state.eventName) {\n        message = 'Fill out the calendar event name and try again.';\n      }\n\n      if (!this.state.selectedCalendar) {\n        message = 'Please select the calendar we should schedule meetings in and try again.';\n      }\n      const blockProps: ConfirmProps = {\n        title: 'Please fill out missing information before saving',\n        message,\n        confirmCopy: 'Ok',\n        onConfirm: () => this.setState({ confirmProps: undefined }),\n      };\n      this.setState({ confirmProps: blockProps });\n      return;\n    }\n\n    // Callback when confirmed ok\n    const saveCallback = () => {\n      this.setState({ confirmProps: undefined });\n      this.handleSave();\n      logAmplitudeEvent(AmplitudeEvents.CreateNewCalendarMeetingTime);\n    };\n\n    // If no breaking changes allow immediate save\n    if (!slugChanged && !calendarToggledOff) {\n      logAmplitudeEvent(AmplitudeEvents.CreateNewCalendarMeetingTime);\n      this.handleSave();\n      return;\n    }\n\n    // Otherwise show confirm dialogue before saving\n    const confirmProps: ConfirmProps = {\n      title: 'Are you sure you want to make these changes?',\n      message: 'Any scheduling links you have sent will not be accessible anymore.',\n      confirmCopy: 'Ok',\n      cancelCopy: 'Cancel',\n      onConfirm: () => saveCallback(),\n      onCancel: () => this.setState({ confirmProps: undefined }),\n    };\n\n    this.setState({ confirmProps });\n  }\n\n  // Upgrade Prompts\n  showBrandingUpgrade = () => {\n    this.setState({ showBrandingUpgrade: true });\n  }\n\n  hideBrandingUpgrade = () => {\n    this.setState({ showBrandingUpgrade: undefined });\n  }\n\n  showSchedulingUpgrade = () => {\n    this.setState({ showSchedulingUpgrade: true });\n  }\n\n  hideSchedulingUpgrade = () => {\n    this.setState({ showSchedulingUpgrade: undefined });\n  }\n\n  showDoubleBookingUpgrade = () => {\n    const { schedulingDoubleBooking } = this.props.features;\n    if (schedulingDoubleBooking) {\n      return;\n    }\n\n    this.setState({ showDoubleBookingUpgrade: true });\n  }\n\n  hideDoubleBookingUpgrade = () => {\n    this.setState({ showDoubleBookingUpgrade: undefined });\n  }\n\n  handleOpenSchedulingUrl = () => {\n    const { scheduling, me } = this.props;\n    if (scheduling && me) {\n      const url = `${process.env.SCHEDULING_URL}/${me.slug}/${scheduling.slug}`;\n      window.open(url, '_blank');\n    }\n  }\n\n  handleDelete = () => {\n    const { scheduling, deleteScheduling } = this.props;\n\n    const message = 'Any links pointing to this scheduling page will no longer work. Are you sure you want to continue?';\n    const deleteProps: ConfirmProps = {\n      title: 'Delete this meeting times availability?',\n      message,\n      confirmCopy: 'Delete',\n      onConfirm: () => {\n        // Delete and redirect\n        if (scheduling) {\n          deleteScheduling(scheduling);\n          browserHistory.push('/calendar');\n        }\n        this.setState({ confirmProps: undefined });\n      },\n      cancelCopy: 'Cancel',\n      onCancel: () => {\n        this.setState({ confirmProps: undefined });\n      },\n    };\n    this.setState({ confirmProps: deleteProps });\n  }\n\n  handleZoomRedirect = () => {\n    browserHistory.push('/settings/integrations/zoom');\n  }\n\n  // TODO(SHIN): Prevent toggling of double booking if not on Teams+\n  render() {\n    const {\n      calendars,\n      userSlug,\n      features,\n      scheduling,\n      zoomIntegration,\n      accounts,\n      writableCalendars,\n    } = this.props;\n    const {\n      timeValues, selectedCalendar,\n      calendarUrl, confirmProps,\n      showSave, conferenceType,\n     } = this.state;\n\n    const allCalendars = flatten(values(calendars));\n    const allWritableCalendars = flatten(values(writableCalendars));\n    const calendarIndex = allWritableCalendars.findIndex(cal => cal.id === selectedCalendar);\n\n    const { afterSecondsSinceMidnight, beforeSecondsSinceMidnight } = this.state;\n    const lowerIndex = timeValues.findIndex(\n      t => t.diff(moment().startOf('day'), 'seconds') === afterSecondsSinceMidnight,\n    );\n    const upperIndex = timeValues.findIndex(\n      t =>\n        t.diff(moment().startOf('day'), 'seconds') ===\n        (beforeSecondsSinceMidnight) % (60 * 60 * 24),\n    );\n\n    const timezones = this.TIMEZONES;\n    const timezoneIndex = this.TIMEZONES.indexOf(this.state.selectedTimeZone);\n    const durationIndex = this.DURATION_MINUTES.indexOf(this.state.durationMinutes);\n    const durationPaddingIndex = this.DURATION_PADDING_MINUTES.indexOf(this.state.bufferDuration);\n    const minimumNoticeIndex = this.MINIMUM_NOTICE_MINUTES.indexOf(this.state.minimumNotice);\n    const conferenceIndex = this.getConferenceOptions().indexOf(this.state.conferenceType);\n\n    // Navigate to integration page if integration is not valid\n    const zoomError = conferenceType === ConferenceType.Zoom && (\n      !zoomIntegration || zoomIntegration.status !== IntegrationStatus.Ok\n    );\n\n    const reducedCalendars: { [key: string]: CalendarType[] } = allCalendars.reduce(\n      (dict: { [key: string]: CalendarType[] }, cal: CalendarType) => {\n\n        if (cal.readOnly) {\n          const readOnlyVals = dict.readOnly || [];\n          dict.readOnly = [...readOnlyVals, cal];\n          return dict;\n        }\n        const existingVals = dict[cal.account] || [];\n        dict[cal.account] = [...existingVals, cal];\n        return dict;\n      },\n      {},\n    );\n\n    const accountOrder: { [key: string]: number } = {};\n    accounts.forEach((a, n) => {\n      accountOrder[a.id] = n + 1;\n    });\n\n    // TODO(SHIN): Disable Checkboxes for Double Double Booking when feature bool not present\n    return (\n      <div\n        className=\"manage-scheduling-detail\"\n        tabIndex={-1}\n        ref={this.handleRef}\n      >\n        <NavigationHeader\n          key={scheduling?.id}\n          title={this.state.eventName || 'New Meeting Times'}\n          onSave={showSave && this.handleConfirm || undefined}\n          contextButton={!showSave && !!scheduling && !scheduling?.disabled &&\n            (<button\n              className=\"view-calendar-link\"\n              onClick={this.handleOpenSchedulingUrl}\n            >\n              View Polymail calendar page →\n            </button>\n          ) || undefined\n          }\n        />\n        <div className=\"calendar-container\">\n          <div className=\"preferences-calendar\">\n            <div className=\"calendar-main\">\n              {confirmProps &&\n                <Confirm {...confirmProps} />\n              }\n              <div\n                className=\"enable-section\"\n                onMouseLeave={this.hideSchedulingUpgrade}\n              >\n                {this.state.showSchedulingUpgrade &&\n                  <UpgradePrompt\n                    title=\"Polymail Scheduling\"\n                    description={'Upgrade your Polymail Subscription to '\n                      + 'get access to Calendar Scheduling!'}\n                  />\n                }\n                <ToggleCell\n                  title=\"Enable this Polymail calendar page\"\n                  subtitle=\"Allows people to book meeting on your public Polymail calendar page.\"\n                  subtitleLink={\n                    <a\n                      href=\"https://help.polymail.io/features/calendar-scheduling\"\n                      target=\"_blank\"\n                    >\n                      {' Learn More.'}\n                    </a>\n                  }\n                  onToggle={this.handleCalendarToggle}\n                  on={this.state.calendarEnabled}\n                />\n              </div>\n              {this.state.calendarEnabled &&\n                <div className=\"all-options\">\n                  {/* Information Header */}\n                  <div className=\"calendar-section-header\">\n                    MEETING INFORMATION\n                  </div>\n                  <div className=\"calendar-link\">\n                    <SettingTextInput\n                      title=\"Your Polymail calendar link\"\n                      description={'Share this link with invitees '\n                        + 'to allow them to access and book meetings to your calendar'}\n                      prefix={`${process.env.SCHEDULING_URL}/${userSlug}/`}\n                      placeholder=\"(e.g. your-url)\"\n                      name=\"calendarUrl\"\n                      value={calendarUrl}\n                      onChange={this.handleCalendarUrlChange}\n                      type=\"input\"\n                    />\n                    <div className=\"copy-area\">\n                      <button\n                        // tslint:disable-next-line:max-line-length\n                        data-clipboard-text={`${process.env.SCHEDULING_URL}/${userSlug}/${calendarUrl}`}\n                        id=\"copy-link\"\n                        onClick={this.handleCopy}\n                        className=\"copy-link\"\n                        onMouseLeave={this.dismissToolTip}\n                      >\n                        Copy Url\n                      </button>\n                      {this.state.showCopiedToolTip &&\n                        <ToolTip\n                          className=\"tooltip\"\n                          top=\"34px\"\n                          left=\"14px\"\n                          copy=\"Copied!\"\n                        />\n                      }\n                    </div>\n                  </div>\n                  <SettingTextInput\n                    className=\"event-name\"\n                    title=\"Event Name\"\n                    description=\"Name of the event that invitees can book on your Polymail calendar\"\n                    placeholder=\"30 min meeting\"\n                    name=\"eventName\"\n                    value={this.state.eventName}\n                    onChange={this.handleEventNameChange}\n                    type=\"input\"\n                  />\n                  <SettingTextInput\n                    className=\"location\"\n                    title=\"Event Location\"\n                    // tslint:disable-next-line:max-line-length\n                    description=\"Location of the event that invitees can book on your Polymail calendar\"\n                    placeholder=\"e.g. Google Hangouts, Zoom Conference\"\n                    name=\"eventLocation\"\n                    value={this.state.eventLocation}\n                    onChange={this.handleEventLocationChange}\n                    type=\"input\"\n                  />\n                  {/* Time Windows Header */}\n                  <div className=\"calendar-section-header\">\n                    TIME WINDOWS\n                  </div>\n                  <DropdownCell\n                    className=\"duration\"\n                    values={this.DURATION_MINUTES\n                      .map(d => `${d} minutes`)\n                    }\n                    onSelect={this.handleDurationSelect}\n                    title=\"Event duration\"\n                    subtitle=\"Events booked through Polymail will be for this duration\"\n                    dropdownId=\"dockCount\"\n                    startIndex={durationIndex}\n                  />\n                  <div className=\"time-window\">\n                    <div className=\"title\">\n                      Available Meeting times\n                  </div>\n                    <div className=\"subtitle\">\n                      Only allow invitees to book meetings within these times\n                  </div>\n                    <div className=\"weekdays\">\n                      {this.WEEKDAYS.map(d => (\n                        <div className=\"day\" key={d.index}>\n                          <Checkbox\n                            inputName={`${d.index}`}\n                            checked={this.state.calendarDaysOfWeek[d.index]}\n                            onChange={this.handleCalendarDaysChange}\n                          />\n                          <span className=\"label\">\n                            {d.name}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                    <div className=\"times\">\n                      <Dropdown\n                        values={timeValues.map(m => m.format('h:mm a'))}\n                        onSelect={this.handleLowerBoundSelect}\n                        startIndex={lowerIndex}\n                      />\n                      <div className=\"to-separator\">\n                        to\n                    </div>\n                      <Dropdown\n                        values={timeValues.map(m => m.format('h:mm a'))}\n                        onSelect={this.handleUpperBoundSelect}\n                        startIndex={upperIndex}\n                      />\n                      <Dropdown\n                        values={timezones}\n                        onSelect={this.handleTimeZoneSelect}\n                        startIndex={timezoneIndex}\n                        readOnly={false}\n                        typeahead\n                      />\n                    </div>\n                  </div>\n                  {/* Information Header */}\n                  <div className=\"calendar-section-header\">\n                    CALENDARS\n                  </div>\n                  <DropdownCell\n                    values={allWritableCalendars\n                      .map(calendar => calendar.name)}\n                    onSelect={this.handleCalendarSelect}\n                    title=\"Add new events to calendar\"\n                    subtitle=\"Meetings booked through Polymail will be added to this calendar\"\n                    dropdownId=\"dockCount\"\n                    startIndex={calendarIndex}\n                    readOnly={false}\n                    typeahead\n                  />\n                  <DropdownCell\n                    className=\"calendar-conference-dropdown\"\n                    values={this.getConferenceOptions().map(t => conferenceTypeDisplay(t))}\n                    onSelect={this.handleConferenceSelect}\n                    title=\"Add conference link to meetings\"\n                    subtitle=\"We can set up a meeting url for you through your calendar provider\"\n                    dropdownId=\"conference\"\n                    startIndex={conferenceIndex}\n                    error={!!zoomError && 'Please authorize your Zoom integration to enable this feature.' || undefined }\n                    errorHandler={!!zoomError && this.handleZoomRedirect || undefined}\n                    errorCopy={'Fix Zoom'}\n                  />\n                  <div\n                    onMouseLeave={this.hideDoubleBookingUpgrade}\n                    className=\"double-booking-section\"\n                  >\n                    <div className=\"title\">\n                      Prevent double bookings\n                    </div>\n                    <div className=\"subtitle\">\n                      {'Check these calendars for conflicts before ' +\n                        'making time slots available to invitees'}\n                    </div>\n                    {this.state.showDoubleBookingUpgrade &&\n                      <UpgradePrompt\n                        title=\"Prevent Double Booking\"\n                        description={'To prevent double bookings against multiple calendars, ' +\n                          'upgrade to Teams or Enterprise'\n                        }\n                      />\n                    }\n                  </div>\n                  <div className=\"calendar-section\">\n                    {Object.keys(reducedCalendars)\n                    .sort((a, b) => {\n                      const lastItem = accounts.length + 1;\n                      return (accountOrder[a] || lastItem) - (accountOrder[b] || lastItem);\n                    })\n                    .map(k => (\n                      <div\n                        className=\"calendar-section-cell\"\n                        key={`section-cell-${k}`}\n                      >\n                        <div className=\"section-header\">\n                          {find(accounts, { id: k })?.description || 'Read-only Calendars'}\n                        </div>\n                        <div className=\"section-cells\">\n                          {reducedCalendars[k].map(calendar => (\n                            <div\n                              className=\"calendar-cell\"\n                              onMouseOver={this.showDoubleBookingUpgrade}\n                              key={calendar.id}\n                            >\n                              <Checkbox\n                                inputName={`${calendar.id}`}\n                                checked={this.state.calendarDoubleBookChecks[calendar.id]}\n                                onChange={this.handleDoubleBookChange}\n                                disabled={!features.schedulingDoubleBooking}\n                              />\n                              <span className=\"label\">\n                                {calendar.name}\n                              </span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  {/* Information Header */}\n                  <div className=\"calendar-section-header\">\n                    ADVANCED\n                  </div>\n                  <DropdownCell\n                    className=\"duration\"\n                    values={this.DURATION_PADDING_MINUTES\n                      .map(d => `${d} minutes`)\n                    }\n                    onSelect={this.handleBufferDurationSelect}\n                    title=\"Buffer window\"\n                    subtitle=\"Make sure that there is at least this amount of time available between existing meetings\"\n                    dropdownId=\"bufferDuration\"\n                    startIndex={durationPaddingIndex}\n                  />\n                  <DropdownCell\n                    className=\"duration\"\n                    values={this.MINIMUM_NOTICE_MINUTES\n                      .map(d => `${d / 60} hours`)\n                    }\n                    onSelect={this.handleMinimumNoticeSelect}\n                    title=\"Prevent Last Minute Bookings\"\n                    subtitle=\"Set the minimum amount of time before a meeting can be scheduled.\"\n                    dropdownId=\"minimumNotice\"\n                    startIndex={minimumNoticeIndex}\n                  />\n                  <div\n                    className=\"branding-section\"\n                    onMouseLeave={this.hideBrandingUpgrade}\n                  >\n                    <ToggleCell\n                      title=\"Show Polymail branding on my calendar page\"\n                      subtitle=\"Displays Polymail's logo and branding on your calendar page\"\n                      onToggle={this.handleBrandingToggle}\n                      on={this.state.showBranding}\n                    />\n                    {this.state.showBrandingUpgrade &&\n                      <UpgradePrompt\n                        title=\"Polymail Branding\"\n                        description={'Upgrade to Teams or Enterprise'\n                          + ' to remove Polymail branding from your calendar page'}\n                      />\n                    }\n                  </div>\n                  {!!scheduling && (\n                      <div className=\"delete-section\">\n                        <button\n                          className=\"delete-button\"\n                          onClick={this.handleDelete}\n                        >\n                          Delete this Availability\n                        </button>\n                      </div>\n                    )}\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ManageSchedulingDetail;\n"]}]}