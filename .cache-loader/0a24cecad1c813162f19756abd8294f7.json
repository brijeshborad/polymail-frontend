{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/ChoosePassword/ChoosePassword.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/ChoosePassword/ChoosePassword.tsx","mtime":1675280254077},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCB7IGNhcGl0YWxpemUgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgVGV4dElucHV0IGZyb20gJ0BzcmMvY29tcG9uZW50cy9Gb3JtL1RleHRJbnB1dCc7CmltcG9ydCBMb2FkZXIgZnJvbSAnQHNyYy9jb21wb25lbnRzL0xvYWRlci9Mb2FkZXInOwppbXBvcnQgJy4vQ2hvb3NlUGFzc3dvcmQuc2Nzcyc7CmltcG9ydCB7IENvbmZpcm1hdGlvbkVycm9yIH0gZnJvbSAnQHNyYy9kdWNrcy90b2FzdHMnOwppbXBvcnQgeyBBbXBsaXR1ZGVFdmVudHMsIGxvZ0FtcGxpdHVkZUV2ZW50IH0gZnJvbSAnQHNyYy9saWIvYW1wbGl0dWRlLWFuYWx5dGljcyc7CnZhciBDaG9vc2VQYXNzd29yZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhDaG9vc2VQYXNzd29yZCwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIENob29zZVBhc3N3b3JkKHByb3BzKSB7CiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlUGFzc3dvcmRDaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IHBhc3N3b3JkOiBlLmN1cnJlbnRUYXJnZXQudmFsdWUgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVTdWJtaXQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgcGFzc3dvcmQgPSBfdGhpcy5zdGF0ZS5wYXNzd29yZDsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIHNldFRvYXN0ID0gX2Euc2V0VG9hc3QsIGZpcnN0TmFtZSA9IF9hLmZpcnN0TmFtZSwgbGFzdE5hbWUgPSBfYS5sYXN0TmFtZSwgdGVhbU5hbWUgPSBfYS50ZWFtTmFtZSwgc2lnbnVwID0gX2Euc2lnbnVwLCBzZWNyZXQgPSBfYS5zZWNyZXQsIGVtYWlsID0gX2EuZW1haWwsIHRlYW1JbnZpdGVOb25jZSA9IF9hLnRlYW1JbnZpdGVOb25jZSwgdGVhbUludml0ZVBheWxvYWQgPSBfYS50ZWFtSW52aXRlUGF5bG9hZCwgdW5zdWJzY3JpYmVyID0gX2EudW5zdWJzY3JpYmVyLCB0eXBlID0gX2EudHlwZTsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBpZiAoIXBhc3N3b3JkKSB7CiAgICAgICAgICAgICAgICBzZXRUb2FzdChuZXcgRXJyb3IoJ1Bhc3N3b3JkIGNhbm5vdCBiZSBlbXB0eScpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocGFzc3dvcmQubGVuZ3RoIDwgNikgewogICAgICAgICAgICAgICAgc2V0VG9hc3QobmV3IEVycm9yKCdQYXNzd29yZCBsZW5ndGggbXVzdCBiZSBncmVhdGVyIHRoYW4gNicpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgIGxvZ0FtcGxpdHVkZUV2ZW50KEFtcGxpdHVkZUV2ZW50cy5DcmVhdGVQYXNzd29yZCk7CiAgICAgICAgICAgICAgICBzZXRUb2FzdChuZXcgQ29uZmlybWF0aW9uRXJyb3IoJ0NyZWF0aW5nIHlvdXIgYWNjb3VudC4uLicsIHRydWUpKTsKICAgICAgICAgICAgICAgIHNpZ251cCh7CiAgICAgICAgICAgICAgICAgICAgc2VjcmV0OiBzZWNyZXQsCiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLAogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGZpcnN0TmFtZSwKICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgdGVhbU5hbWU6IHRlYW1OYW1lLAogICAgICAgICAgICAgICAgICAgIHRlYW1JbnZpdGVOb25jZTogdGVhbUludml0ZU5vbmNlLAogICAgICAgICAgICAgICAgICAgIHRlYW1JbnZpdGVQYXlsb2FkOiB0ZWFtSW52aXRlUGF5bG9hZCwKICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZXJTaWduVXA6IHVuc3Vic2NyaWJlciwKICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIF90aGlzLnN0YXRlID0gewogICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBDaG9vc2VQYXNzd29yZC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIHR5cGUgPSBfYS50eXBlLCBzaWduVXBQZW5kaW5nID0gX2Euc2lnblVwUGVuZGluZzsKICAgICAgICAvLyBmcmllbmRseSBNaWNyb3NvZnQgR3JhcGggbmFtZQogICAgICAgIHZhciB0eXBlTGFiZWwgPSB0eXBlID09PSAnbWljcm9zb2Z0R3JhcGgnID8gJ01pY3Jvc29mdCcgOiBjYXBpdGFsaXplKHR5cGUpOwogICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJsb2dpbi1jaG9vc2UtcGFzc3dvcmQiIH0sCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAicHJvbXB0IiB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0aXRsZSIgfSwKICAgICAgICAgICAgICAgICAgICAiWW91IHNpZ25lZCB1cCB3aXRoICIsCiAgICAgICAgICAgICAgICAgICAgdHlwZUxhYmVsLAogICAgICAgICAgICAgICAgICAgICIhIiksCiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogImRlc2NyaXB0aW9uIiB9LCAiTmV4dCwgY2hvb3NlIGEgcGFzc3dvcmQgZm9yIHlvdXIgUG9seW1haWwgYWNjb3VudC4iKSksCiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImZvcm0iLCB7IG9uU3VibWl0OiB0aGlzLmhhbmRsZVN1Ym1pdCB9LAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwKICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRleHRJbnB1dCwgeyBkZXNjcmlwdGlvbjogIkNob29zZSBhIHBhc3N3b3JkIiwgcGxhY2Vob2xkZXI6ICI4IGNoYXJhY3RlcnMgb3IgbW9yZSwgMSsgc3BlY2lhbCBjaGFyYWN0ZXJzIiwgdmFsdWU6IHRoaXMuc3RhdGUucGFzc3dvcmQsIG9uQ2hhbmdlOiB0aGlzLmhhbmRsZVBhc3N3b3JkQ2hhbmdlLCB0eXBlOiAicGFzc3dvcmQiLCBhdXRvZm9jdXM6IHRydWUgfSkpLAogICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiYnV0dG9uIiwgeyB0eXBlOiAic3VibWl0IiwgY2xhc3NOYW1lOiAiY2hvb3NlLWJ1dHRvbiIsIGRpc2FibGVkOiBzaWduVXBQZW5kaW5nIH0sIHNpZ25VcFBlbmRpbmcgPyBSZWFjdC5jcmVhdGVFbGVtZW50KExvYWRlciwgbnVsbCkgOiAnQ29udGludWUnKSkpKTsKICAgIH07CiAgICByZXR1cm4gQ2hvb3NlUGFzc3dvcmQ7Cn0oUmVhY3QuUHVyZUNvbXBvbmVudCkpOwpleHBvcnQgZGVmYXVsdCBDaG9vc2VQYXNzd29yZDsK"},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/ChoosePassword/ChoosePassword.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/routes/Login/components/ChoosePassword/ChoosePassword.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { capitalize } from 'lodash';\n\nimport TextInput from '@src/components/Form/TextInput';\nimport Loader from '@src/components/Loader/Loader';\n\nimport './ChoosePassword.scss';\nimport { MeCreateMeta } from '@src/ducks/me';\nimport { ConfirmationError } from '@src/ducks/toasts';\n\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface DispatchProps {\n  setToast: (err: Error) => void;\n  signup: (meta: MeCreateMeta) => void;\n}\n\nexport interface StateProps {\n  type: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  teamName: string;\n  secret: string;\n  teamInviteNonce: string;\n  teamInvitePayload: string;\n  unsubscriber?: boolean;\n  signUpPending?: boolean;\n}\n\ninterface State {\n  password: string;\n}\n\nclass ChoosePassword extends React.PureComponent<\n  StateProps & DispatchProps & RouteComponentProps<any>, State\n> {\n  constructor(props: StateProps & DispatchProps & RouteComponentProps<any>) {\n    super(props);\n    this.state = {\n      password: '',\n    };\n  }\n\n  handlePasswordChange = (e: React.FormEvent<HTMLInputElement>) => {\n    this.setState({ password: e.currentTarget.value });\n  }\n\n  handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    const { password } = this.state;\n    const {\n      setToast,\n      firstName,\n      lastName,\n      teamName,\n      signup,\n      secret,\n      email,\n      teamInviteNonce,\n      teamInvitePayload,\n      unsubscriber,\n      type,\n    } = this.props;\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!password) {\n      setToast(new Error('Password cannot be empty'));\n      return;\n    }\n\n    if (password.length < 6) {\n      setToast(new Error('Password length must be greater than 6'));\n      return;\n    }\n\n    if (password) {\n      logAmplitudeEvent(AmplitudeEvents.CreatePassword);\n\n      setToast(new ConfirmationError('Creating your account...', true));\n\n      signup({\n        secret,\n        email,\n        password,\n        firstName,\n        lastName,\n        teamName,\n        teamInviteNonce,\n        teamInvitePayload,\n        unsubscriberSignUp: unsubscriber,\n        type,\n      });\n    }\n  }\n\n  render() {\n    const {\n      type,\n      signUpPending,\n    } = this.props;\n\n    // friendly Microsoft Graph name\n    const typeLabel = type === 'microsoftGraph' ? 'Microsoft' : capitalize(type);\n\n    return (\n      <div className=\"login-choose-password\">\n        <div className=\"prompt\">\n          <div className=\"title\">\n          You signed up with {typeLabel}!\n          </div>\n          <div className=\"description\">\n            Next, choose a password for your Polymail account.\n          </div>\n        </div>\n        <form onSubmit={this.handleSubmit}>\n          <div>\n            <TextInput\n              description=\"Choose a password\"\n              placeholder=\"8 characters or more, 1+ special characters\"\n              value={this.state.password}\n              onChange={this.handlePasswordChange}\n              type=\"password\"\n              autofocus\n            />\n          </div>\n          <button type=\"submit\" className=\"choose-button\" disabled={signUpPending}>\n            {signUpPending ? <Loader /> : 'Continue'}\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default ChoosePassword;\n"]}]}