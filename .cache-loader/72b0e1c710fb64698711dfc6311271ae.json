{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/SendLater/SendLater.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/SendLater/SendLater.tsx","mtime":1675280253999},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH07Cn0pKCk7CnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7CiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkKICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH07CiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfTsKaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgQ29udHJvbFBvcG92ZXIgZnJvbSAnLi4vY29tcG9uZW50cy9Db250cm9sUG9wb3Zlcic7CmltcG9ydCBTZW5kTGF0ZXJJY29uIGZyb20gJ0BzcmMvY29tcG9uZW50cy9JY29ucy9TZW5kTGF0ZXIuc3ZnJzsKaW1wb3J0IHsgQ29tbWFuZENvbnRyb2xUeXBlLCBEcmFmdFN0YXR1cywgT25ib2FyZGluZ1R5cGUgfSBmcm9tICdAc3JjL3R5cGVzJzsKaW1wb3J0IHsgdHlwZWFoZWFkT3B0aW9ucywgc2V0TGFzdFNjaGVkdWxlZFR5cGVhaGVhZCB9IGZyb20gJ0BzcmMvbGliL2RhdGV0aW1lJzsKaW1wb3J0ICcuL1NlbmRMYXRlci5zY3NzJzsKaW1wb3J0IHsgZ2V0T25ib2FyZGluZ0FjdGlvbnMgfSBmcm9tICdAc3JjL2xpYi9PbmJvYXJkaW5nRGlzcGF0Y2hlcic7CmltcG9ydCBDYW5jZWxUb2dnbGUgZnJvbSAnLi4vY29tcG9uZW50cy9DYW5jZWxUb2dnbGUvQ2FuY2VsVG9nZ2xlJzsKaW1wb3J0IHsgQW1wbGl0dWRlRXZlbnRzLCBsb2dBbXBsaXR1ZGVFdmVudCB9IGZyb20gJ0BzcmMvbGliL2FtcGxpdHVkZS1hbmFseXRpY3MnOwp2YXIgU2VuZExhdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFNlbmRMYXRlciwgX3N1cGVyKTsKICAgIGZ1bmN0aW9uIFNlbmRMYXRlcihwcm9wcykgewogICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7CiAgICAgICAgX3RoaXMuaGFuZGxlU2VsZWN0ID0gZnVuY3Rpb24gKG9wdGlvbiwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IF90aGlzLnN0YXRlLm9wdGlvbnM7CiAgICAgICAgICAgIHZhciBfYiA9IF90aGlzLnByb3BzLCB1cGRhdGVEcmFmdCA9IF9iLnVwZGF0ZURyYWZ0LCBkcmFmdCA9IF9iLmRyYWZ0LCBzZW5kRHJhZnQgPSBfYi5zZW5kRHJhZnQsIHJzYk9uYm9hcmRpbmcgPSBfYi5yc2JPbmJvYXJkaW5nLCB1cGRhdGVPbmJvYXJkaW5nID0gX2IudXBkYXRlT25ib2FyZGluZzsKICAgICAgICAgICAgLy8gU2V0IHNjaGVkdWxlZCBkYXRlCiAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9IG9wdGlvbnNbaW5kZXhdOwogICAgICAgICAgICBpZiAoZHJhZnQgJiYgc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjb21taXQgdG8gbW92ZSB0aHJlYWQKICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkID0gX19hc3NpZ24oe30sIGRyYWZ0KTsKICAgICAgICAgICAgICAgIHZhciB3aGVuID0gc2VsZWN0ZWQubW9tZW50LnRvRGF0ZSgpOwogICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkLnVuc2NoZWR1bGUpIHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLnNjaGVkdWxlZCA9IG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgdXBkYXRlZCBhbmQgdW5zY2hlZHVsZQogICAgICAgICAgICAgICAgaWYgKHdoZW4gJiYgIXNlbGVjdGVkLnVuc2NoZWR1bGUpIHsKICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgUlNCIE9uYm9hcmRpbmcKICAgICAgICAgICAgICAgICAgICBpZiAocnNiT25ib2FyZGluZyA9PT0gT25ib2FyZGluZ1R5cGUuU2VuZExhdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU9uYm9hcmRpbmcoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7IHN0ZXBzOiAoX2EgPSB7fSwgX2FbT25ib2FyZGluZ1R5cGUuU2VuZExhdGVyXSA9IHRydWUsIF9hKSB9LAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nQW1wbGl0dWRlRXZlbnQoQW1wbGl0dWRlRXZlbnRzLlRvdXJTdGVwVHdvLCB7IHNraXBwZWQ6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBnZXRPbmJvYXJkaW5nQWN0aW9ucygpLm5leHQoT25ib2FyZGluZ1R5cGUuU2VuZExhdGVyKTsKICAgICAgICAgICAgICAgICAgICBzZW5kRHJhZnQoewogICAgICAgICAgICAgICAgICAgICAgICBkcmFmdDogdXBkYXRlZCwKICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQXJjaGl2ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZDogd2hlbiwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAvLyBTZXQgU2NoZWR1bGVkIERhdGUgZm9yIExhc3QgVXNlZCBWYWx1ZQogICAgICAgICAgICAgICAgICAgIHNldExhc3RTY2hlZHVsZWRUeXBlYWhlYWQod2hlbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZC5zY2hlZHVsZWQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZC5zdGF0dXMgPSBEcmFmdFN0YXR1cy5EcmFmdDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRHJhZnQodXBkYXRlZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9nQW1wbGl0dWRlRXZlbnQoQW1wbGl0dWRlRXZlbnRzLlNlbmRFbWFpbExhdGVyKTsKICAgICAgICB9OwogICAgICAgIF90aGlzLmhhbmRsZUlucHV0Q2hhbmdlID0gZnVuY3Rpb24gKHBhcnRpYWwpIHsKICAgICAgICAgICAgdmFyIF9hID0gX3RoaXMucHJvcHMsIGRyYWZ0ID0gX2EuZHJhZnQsIHByZWZlcmVuY2VzID0gX2EucHJlZmVyZW5jZXM7CiAgICAgICAgICAgIHZhciBvcHRpb25zID0gdHlwZWFoZWFkT3B0aW9ucyhwYXJ0aWFsLCBwcmVmZXJlbmNlcyk7CiAgICAgICAgICAgIGlmIChkcmFmdCAmJiBkcmFmdC5zY2hlZHVsZWQpIHsKICAgICAgICAgICAgICAgIG9wdGlvbnMudW5zaGlmdCh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdVbnNjaGVkdWxlJywKICAgICAgICAgICAgICAgICAgICBkZXNjOiAnJywKICAgICAgICAgICAgICAgICAgICBtb21lbnQ6IG1vbWVudCgpLAogICAgICAgICAgICAgICAgICAgIHVuc2NoZWR1bGU6IHRydWUsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IG9wdGlvbnM6IG9wdGlvbnMgfSk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5oYW5kbGVOb1JlcGx5VG9nZ2xlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgZHJhZnQgPSBfYS5kcmFmdCwgdXBkYXRlRHJhZnQgPSBfYS51cGRhdGVEcmFmdDsKICAgICAgICAgICAgaWYgKCFkcmFmdCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB1cGRhdGVkID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRyYWZ0KSwgeyBjYW5jZWxPblJlcGx5OiAhZHJhZnQuY2FuY2VsT25SZXBseSB9KTsKICAgICAgICAgICAgdXBkYXRlRHJhZnQodXBkYXRlZCk7CiAgICAgICAgfTsKICAgICAgICBfdGhpcy5zdGF0ZSA9IHsKICAgICAgICAgICAgb3B0aW9uczogW10sCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBTZW5kTGF0ZXIucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkcmFmdCA9IHRoaXMucHJvcHMuZHJhZnQ7CiAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlYWhlYWRPcHRpb25zKCcnLCB0aGlzLnByb3BzLnByZWZlcmVuY2VzKTsKICAgICAgICBpZiAoZHJhZnQgJiYgZHJhZnQuc2NoZWR1bGVkKSB7CiAgICAgICAgICAgIG9wdGlvbnMudW5zaGlmdCh7CiAgICAgICAgICAgICAgICB0aXRsZTogJ1Vuc2NoZWR1bGUnLAogICAgICAgICAgICAgICAgZGVzYzogJycsCiAgICAgICAgICAgICAgICBtb21lbnQ6IG1vbWVudCgpLAogICAgICAgICAgICAgICAgdW5zY2hlZHVsZTogdHJ1ZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcHRpb25zOiBvcHRpb25zIH0pOwogICAgfTsKICAgIFNlbmRMYXRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkcmFmdCA9IHRoaXMucHJvcHMuZHJhZnQ7CiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLnN0YXRlLm9wdGlvbnM7CiAgICAgICAgdmFyIGNvbnRlbnQ7CiAgICAgICAgaWYgKGRyYWZ0ICYmIGRyYWZ0LnNjaGVkdWxlZCkgewogICAgICAgICAgICBjb250ZW50ID0gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiY29udGVudCIgfSwKICAgICAgICAgICAgICAgICJTY2hlZHVsZWQgZm9yICIsCiAgICAgICAgICAgICAgICBtb21lbnQoZHJhZnQuc2NoZWR1bGVkKS5mb3JtYXQoJ2RkZGQsIE1NTU0gRCBbYXRdIGg6bW0gQScpKSk7CiAgICAgICAgfQogICAgICAgIHZhciBjYW5jZWxUb2dnbGUgPSAoUmVhY3QuY3JlYXRlRWxlbWVudChDYW5jZWxUb2dnbGUsIHsgb246ICEhKGRyYWZ0ID09PSBudWxsIHx8IGRyYWZ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkcmFmdC5jYW5jZWxPblJlcGx5KSwgb25Ub2dnbGU6IHRoaXMuaGFuZGxlTm9SZXBseVRvZ2dsZSB9KSk7CiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KENvbnRyb2xQb3BvdmVyLCB7IGNhbmNlbFRvZ2dsZTogY2FuY2VsVG9nZ2xlLCBjbGFzc05hbWU6ICJzZW5kLWxhdGVyLXBvcG92ZXIiLCB0eXBlOiBDb21tYW5kQ29udHJvbFR5cGUuU2VuZExhdGVyLCBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KFNlbmRMYXRlckljb24sIHsgd2lkdGg6ICIyMXB4IiwgaGVpZ2h0OiAiMThweCIgfSksIGhlYWRpbmc6ICJTZW5kIExhdGVyIiwgb3B0aW9uczogb3B0aW9ucywgcGxhY2Vob2xkZXI6ICJuZXh0IHRodXJzZGF5LCB0d28gd2Vla3MgZnJvbSBub3ciLCBjb250ZW50OiBjb250ZW50LCBvbkhpZGU6IHRoaXMucHJvcHMub25IaWRlLCBvbklucHV0Q2hhbmdlOiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlLCBvblNlbGVjdDogdGhpcy5oYW5kbGVTZWxlY3QsIHNob3dPbk1vdW50OiB0cnVlIH0pKTsKICAgIH07CiAgICByZXR1cm4gU2VuZExhdGVyOwp9KFJlYWN0LlB1cmVDb21wb25lbnQpKTsKZXhwb3J0IGRlZmF1bHQgU2VuZExhdGVyOwo="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/SendLater/SendLater.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/SendLater/SendLater.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment, { Moment } from 'moment';\n\nimport ControlPopover from '../components/ControlPopover';\n\nimport SendLaterIcon from '@src/components/Icons/SendLater.svg';\nimport { CommandControlType, Draft, Preferences, DraftStatus, OnboardingType } from '@src/types';\nimport { typeaheadOptions, setLastScheduledTypeahead } from '@src/lib/datetime';\n\nimport './SendLater.scss';\nimport { DraftSendMeta } from '@src/ducks/drafts';\nimport { OnboardingPatchMeta } from '@src/ducks/me';\nimport { getOnboardingActions } from '@src/lib/OnboardingDispatcher';\nimport CancelToggle from '../components/CancelToggle/CancelToggle';\nimport { AmplitudeEvents, logAmplitudeEvent } from '@src/lib/amplitude-analytics';\n\nexport interface Props {\n  draft?: Draft;\n  isDefault?: boolean;\n  preferences: Preferences;\n  rsbOnboarding?: OnboardingType;\n\n  onHide: () => void;\n}\n\nexport interface DispatchProps {\n  updateDraft: (draft: Draft) => void;\n  sendDraft: (draft: DraftSendMeta) => void;\n  updateOnboarding?: (meta: OnboardingPatchMeta) => void;\n}\n\ninterface State {\n  options: Array<{\n    title: string;\n    moment: Moment;\n    desc: string;\n    unschedule: boolean;\n  }>;\n}\n\nclass SendLater extends React.PureComponent<Props & DispatchProps, State> {\n  constructor(props: Props & DispatchProps) {\n    super();\n    this.state = {\n      options: [],\n    };\n  }\n\n  componentDidMount() {\n    const { draft } = this.props;\n    const options = typeaheadOptions('', this.props.preferences);\n    if (draft && draft.scheduled) {\n      options.unshift({\n        title: 'Unschedule',\n        desc: '',\n        moment: moment(),\n        unschedule: true,\n      });\n    }\n\n    this.setState({ options });\n  }\n\n  handleSelect = (option: any, index: number) => {\n\n    const { options } = this.state;\n    const { updateDraft, draft, sendDraft, rsbOnboarding, updateOnboarding } = this.props;\n\n    // Set scheduled date\n    const selected = options[index];\n    if (draft && selected) {\n      // Create commit to move thread\n      const updated = { ...draft };\n      const when = selected.moment.toDate();\n      if (selected.unschedule) {\n        updated.scheduled = null;\n      }\n\n      // Handle updated and unschedule\n      if (when && !selected.unschedule) {\n        // Handle RSB Onboarding\n        if (rsbOnboarding === OnboardingType.SendLater) {\n          updateOnboarding!({\n            skipped: false,\n            type: { steps: { [OnboardingType.SendLater]: true } },\n          });\n          logAmplitudeEvent(AmplitudeEvents.TourStepTwo, { skipped: false });\n        }\n\n        getOnboardingActions().next(OnboardingType.SendLater);\n\n        sendDraft({\n          draft: updated,\n          toggleArchive: false,\n          scheduled: when,\n        });\n\n        // Set Scheduled Date for Last Used Value\n        setLastScheduledTypeahead(when);\n\n      } else {\n        if (updated.scheduled === null) {\n          updated.status = DraftStatus.Draft;\n        }\n        updateDraft(updated);\n      }\n    }\n    logAmplitudeEvent(AmplitudeEvents.SendEmailLater);\n  }\n\n  handleInputChange = (partial: string) => {\n    const { draft, preferences } = this.props;\n\n    const options = typeaheadOptions(partial, preferences);\n    if (draft && draft.scheduled) {\n      options.unshift({\n        title: 'Unschedule',\n        desc: '',\n        moment: moment(),\n        unschedule: true,\n      });\n    }\n\n    this.setState({ options });\n  }\n\n  handleNoReplyToggle = () => {\n    const { draft, updateDraft } = this.props;\n    if (!draft) { return; }\n\n    const updated: Draft = { ...draft, cancelOnReply: !draft.cancelOnReply };\n    updateDraft(updated);\n\n  }\n\n  render() {\n    const { draft } = this.props;\n    const { options } = this.state;\n    let content;\n\n    if (draft && draft.scheduled) {\n      content = (\n        <div className=\"content\">\n          Scheduled for {moment(draft.scheduled).format('dddd, MMMM D [at] h:mm A')}\n        </div>\n      );\n    }\n\n    const cancelToggle = (\n      <CancelToggle\n        on={!!draft?.cancelOnReply}\n        onToggle={this.handleNoReplyToggle}\n      />\n    );\n\n    return (\n      <ControlPopover\n        cancelToggle={cancelToggle}\n        className=\"send-later-popover\"\n        type={CommandControlType.SendLater}\n        icon={<SendLaterIcon width=\"21px\" height=\"18px\" />}\n        heading=\"Send Later\"\n        options={options}\n        placeholder=\"next thursday, two weeks from now\"\n        content={content}\n        onHide={this.props.onHide}\n        onInputChange={this.handleInputChange}\n        onSelect={this.handleSelect}\n        showOnMount\n      />\n    );\n  }\n}\n\nexport default SendLater;\n"]}]}