{"remainingRequest":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js??ref--6-1!/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/DayView.tsx","dependencies":[{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/DayView.tsx","mtime":1675280253996},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1675365393858},{"path":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/node_modules/ts-loader/index.js","mtime":1675365391714}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0ICcuL0RheVZpZXcuc2Nzcyc7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBjYWxjdWxhdGVFdmVudERpc3BsYXkgfSBmcm9tICdAc3JjL2xpYi9tb2RlbHMvY2FsZW5kYXJFdmVudHMnOwppbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJzsKLy8gVE9ETyhTSElOKTogT3ZlcmxhcHBpbmcgY29udGVudCBsb29rcyBiYWQsIGZpZ3VyZSBvdXQgYmV0dGVyIGFsZ29yaXRobQp2YXIgRGF5VmlldyA9IGZ1bmN0aW9uIChfYSkgewogICAgdmFyIGRhdGUgPSBfYS5kYXRlLCBzdGFydEhvdXIgPSBfYS5zdGFydEhvdXIsIGVuZEhvdXIgPSBfYS5lbmRIb3VyLCBldmVudHMgPSBfYS5ldmVudHMsIGV2ZW50VG9wID0gX2EuZXZlbnRUb3AsIGV2ZW50SGVpZ2h0ID0gX2EuZXZlbnRIZWlnaHQsIHRpbWVibG9jayA9IF9hLnRpbWVibG9jaywgZXZlbnRQb3NpdGlvbnMgPSBfYS5ldmVudFBvc2l0aW9ucywgY29sdW1uV2lkdGggPSBfYS5jb2x1bW5XaWR0aCwgaGFsZkhvdXJJbnRlcnZhbEhlaWdodCA9IF9hLmhhbGZIb3VySW50ZXJ2YWxIZWlnaHQsIHJlYWRPbmx5ID0gX2EucmVhZE9ubHk7CiAgICB2YXIgaGFsZkhvdXJJbnRlcnZhbHMgPSBbXTsKICAgIGZvciAodmFyIGkgPSBzdGFydEhvdXI7IGkgPCBlbmRIb3VyOyBpICs9IDEpIHsKICAgICAgICBoYWxmSG91ckludGVydmFscyA9IGhhbGZIb3VySW50ZXJ2YWxzLmNvbmNhdChbaSwgaSArIDAuNV0pOwogICAgfQogICAgdmFyIG5vQWxsRGF5RXZlbnRzID0gZXZlbnRzLmZpbHRlcihmdW5jdGlvbiAoZSkgeyByZXR1cm4gIWUuaXNBbGxEYXk7IH0pOwogICAgdmFyIGRpc3BsYXlFdmVudHMgPSBjYWxjdWxhdGVFdmVudERpc3BsYXkobm9BbGxEYXlFdmVudHMpOwogICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lcygnZGF5LXZpZXcnLCB7ICdyZWFkLW9ubHknOiAhIXJlYWRPbmx5IH0pLCBzdHlsZTogeyB3aWR0aDogY29sdW1uV2lkdGggfSB9LAogICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAidGltZSIgfSwgaGFsZkhvdXJJbnRlcnZhbHMubWFwKGZ1bmN0aW9uIChoLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsga2V5OiBpbmRleC50b1N0cmluZygpLCBjbGFzc05hbWU6ICJoYWxmLWhvdXIiLCAiZGF0YS1ob3VyIjogaCAlIDEgPT09IDAuNSA/IE1hdGguZmxvb3IoaCkgKyAiOjMwIiA6IGggKyAiOjAwIiwgImRhdGEtZGF0ZSI6IGRhdGUuZm9ybWF0KCdNTS1ERC1ZWVlZJyksIHN0eWxlOiB7IGhlaWdodDogaGFsZkhvdXJJbnRlcnZhbEhlaWdodCB9IH0pKTsKICAgICAgICB9KSksCiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6ICJldmVudHMiIH0sIGRpc3BsYXlFdmVudHMKICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGlzcGxheUV2ZW50LCBpbmRleCkgewogICAgICAgICAgICB2YXIgZXZlbnQgPSBkaXNwbGF5RXZlbnQuZXZlbnQsIG92ZXJsYXBzID0gZGlzcGxheUV2ZW50Lm92ZXJsYXBzLCBwb3NpdGlvbkluZGV4ID0gZGlzcGxheUV2ZW50LnBvc2l0aW9uSW5kZXg7CiAgICAgICAgICAgIGlmIChpc0VtcHR5KGV2ZW50UG9zaXRpb25zKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBmdWxsSGVpZ2h0ID0gaGFsZkhvdXJJbnRlcnZhbHMubGVuZ3RoICogaGFsZkhvdXJJbnRlcnZhbEhlaWdodDsKICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gZXZlbnRQb3NpdGlvbnNbZXZlbnQuaWRdOwogICAgICAgICAgICB2YXIgbGVmdCA9IGNvbHVtbldpZHRoIC8gKG92ZXJsYXBzICsgMSkgKiBwb3NpdGlvbkluZGV4OwogICAgICAgICAgICB2YXIgYmlnSW50OwogICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgdmFyIGI7CiAgICAgICAgICAgIHZhciBnOwogICAgICAgICAgICBpZiAoZXZlbnQuY2FsZW5kYXIuYmFja2dyb3VuZENvbG9yLm1hdGNoKC9eIy8pKSB7CiAgICAgICAgICAgICAgICBiaWdJbnQgPSBwYXJzZUludChldmVudC5jYWxlbmRhci5iYWNrZ3JvdW5kQ29sb3Iuc2xpY2UoMSksIDE2KTsKICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2UKICAgICAgICAgICAgICAgIHIgPSAoYmlnSW50ID4+IDE2KSAmIDI1NTsKICAgICAgICAgICAgICAgIGcgPSAoYmlnSW50ID4+IDgpICYgMjU1OwogICAgICAgICAgICAgICAgYiA9IGJpZ0ludCAmIDI1NTsKICAgICAgICAgICAgICAgIC8vIHRzbGludDplbmFibGU6bm8tYml0d2lzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3IgPSBiaWdJbnQgIT09IHVuZGVmaW5lZCA/CiAgICAgICAgICAgICAgICAicmdiYSgiICsgW3IsIGcsIGJdLmpvaW4oJywnKSArICIsIC4xNSkiIDogZXZlbnQuY2FsZW5kYXIuYmFja2dyb3VuZENvbG9yOwogICAgICAgICAgICB2YXIgYm9yZGVyQmFja2dyb3VuZENvbG9yID0gYmlnSW50ICE9PSB1bmRlZmluZWQgPwogICAgICAgICAgICAgICAgInJnYmEoIiArIFtyLCBnLCBiXS5qb2luKCcsJykgKyAiLCAuMykiIDogZXZlbnQuY2FsZW5kYXIuYmFja2dyb3VuZENvbG9yOwogICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiAiZXZlbnQiLCBrZXk6ICJkYXktdmlldy10cy0iICsgZXZlbnQuaWQgKyAiLSIgKyBpbmRleC50b1N0cmluZygpLCBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIHRvcDogZnVsbEhlaWdodCAqIC0xICsgKHBvc2l0aW9uID8gcG9zaXRpb24udG9wIDogMCksCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwb3NpdGlvbiAmJiBwb3NpdGlvbi5oZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kQ29sb3IsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGV2ZW50LmNhbGVuZGFyLmJhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgICAgICAgICBib3JkZXI6IGJvcmRlckJhY2tncm91bmRDb2xvciArICIgc29saWQgMXB4IiwKICAgICAgICAgICAgICAgICAgICB3aWR0aDogY29sdW1uV2lkdGggLyAob3ZlcmxhcHMgKyAxKSwKICAgICAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0LAogICAgICAgICAgICAgICAgfSB9LCBldmVudC5uYW1lKSk7CiAgICAgICAgfSkpKSk7Cn07CmV4cG9ydCBkZWZhdWx0IERheVZpZXc7Cg=="},{"version":3,"file":"/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/DayView.tsx","sourceRoot":"","sources":["/Users/andrewsamboy/Desktop/Git/polymail/webapp/src/components/CommandControl/components/Calendar/components/MultiDayView/DayView.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Moment } from 'moment';\n\nimport './DayView.scss';\nimport { CalendarEvent, TimeBlock } from '@src/types';\nimport { isEmpty } from 'lodash';\nimport { calculateEventDisplay } from '@src/lib/models/calendarEvents';\nimport classNames from 'classnames';\n\ninterface Props {\n  date: Moment;\n  startHour: number;\n  endHour: number;\n  events: CalendarEvent[];\n  eventTop: number;\n  eventHeight: number;\n  timeblock?: TimeBlock;\n  eventPositions: { [event: string]: EventPosition };\n  columnWidth: number;\n  halfHourIntervalHeight: number;\n\n  readOnly?: boolean;\n}\n\nexport interface EventPosition {\n  top: number;\n  height: number;\n  left?: number;\n}\n\n// TODO(SHIN): Overlapping content looks bad, figure out better algorithm\nconst DayView: React.SFC<Props> = ({\n  date,\n  startHour,\n  endHour,\n  events,\n  eventTop,\n  eventHeight,\n  timeblock,\n  eventPositions,\n  columnWidth,\n  halfHourIntervalHeight,\n  readOnly,\n}) => {\n  let halfHourIntervals: number[] = [];\n  for (let i = startHour; i < endHour; i += 1) {\n    halfHourIntervals = halfHourIntervals.concat([i, i + 0.5]);\n  }\n  const noAllDayEvents = events.filter(e => !e.isAllDay);\n  const displayEvents = calculateEventDisplay(noAllDayEvents);\n\n  return (\n    <div\n      className={classNames('day-view', { 'read-only': !!readOnly })}\n      style={{ width: columnWidth }}\n    >\n      <div className=\"time\">\n        {halfHourIntervals.map((h, index) => {\n          return (\n            <div\n              key={index.toString()}\n              className=\"half-hour\"\n              data-hour={h % 1 === 0.5 ? `${Math.floor(h)}:30` : `${h}:00`}\n              data-date={date.format('MM-DD-YYYY')}\n              style={{ height: halfHourIntervalHeight }}\n            />\n          );\n        })}\n      </div>\n      <div className=\"events\">\n        {displayEvents\n          .map((displayEvent, index) => {\n            const { event, overlaps, positionIndex } = displayEvent;\n            if (isEmpty(eventPositions)) {\n              return <div />;\n            }\n            const fullHeight = halfHourIntervals.length * halfHourIntervalHeight;\n            const position = eventPositions[event.id];\n\n            const left = columnWidth / (overlaps + 1) * positionIndex;\n            let bigInt;\n            let r;\n            let b;\n            let g;\n            if (event.calendar.backgroundColor.match(/^#/)) {\n              bigInt = parseInt(event.calendar.backgroundColor.slice(1), 16);\n              // tslint:disable:no-bitwise\n              r = (bigInt >> 16) & 255;\n              g = (bigInt >> 8) & 255;\n              b = bigInt & 255;\n              // tslint:enable:no-bitwise\n            }\n\n            const backgroundColor = bigInt !== undefined ?\n              `rgba(${[r, g, b].join(',')}, .15)` : event.calendar.backgroundColor;\n            const borderBackgroundColor = bigInt !== undefined ?\n              `rgba(${[r, g, b].join(',')}, .3)` : event.calendar.backgroundColor;\n\n            return (\n              <div\n                className=\"event\"\n                key={`day-view-ts-${event.id}-${index.toString()}`}\n                style={{\n                  top: fullHeight * -1 + (position ? position.top : 0),\n                  height: position && position.height,\n                  backgroundColor,\n                  color: event.calendar.backgroundColor,\n                  border: `${borderBackgroundColor} solid 1px`,\n                  width: columnWidth / (overlaps + 1),\n                  left,\n                }}\n              >\n                {event.name}\n              </div>\n            );\n          })}\n      </div>\n    </div>\n  );\n};\n\nexport default DayView;\n"]}]}